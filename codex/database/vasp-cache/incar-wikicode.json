{"INCAR": {"PREC": {"datatype": "string", "options": {"Low": null, "Medium": null, "High": null, "Normal": null, "Single": null, "Accurate": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PREC\">PREC</a> specifies the \"precision\"-mode.</span>", "wikicode": "{{TAGDEF|PREC|Low {{!}} Medium {{!}} High {{!}} Normal {{!}} Single {{!}} Accurate}}\n{{DEF|PREC|Medium|for VASP.4.X|Normal|for VASP.5.X}}\n\nDescription: {{TAG|PREC}} specifies the \"precision\"-mode.\n----\nWe recommend using {{TAG|PREC}}=Normal or {{TAG|PREC}}=Accurate.\nThe settings {{TAG|PREC}}=Medium and {{TAG|PREC}}=High (available already in VASP.4.4) \nare no longer recommended. {{TAG|PREC}}=Normal can be used for most\nroutine calculations, whereas {{TAG|PREC}}=Accurate reduces egg-box effects\nand errors even further.  Specifically,\n{{TAG|PREC}}=Accurate strictly avoids any aliasing or wrap around errors and uses an augmentation grid ({{TAG|NGXF}}&times;{{TAG|NGYF}}&times;{{TAG|NGZF}}) that is exactly twice as large as the coarser grid ({{TAG|NGX}}&times;{{TAG|NGY}}&times;{{TAG|NGZ}}) used for the representation of the pseudo orbitals. {{TAG|PREC}}=Accurate increases the memory requirements somewhat, but it should be used if very accurate forces (phonons and second derivatives) are required. The accuracy of forces can be sometimes further improved by specifying {{TAG|ADDGRID}}=.TRUE. (but user reports are somewhat contradictory, whether\nthis really helps).\n\nThe use of {{TAG|PREC}}=High is no longer recommended (and is only available for compatibility). Essentially {{TAG|PREC}}=High only increases the energy cutoff\nby 30 %.  The same effect can be achieved by just manually increasing {{TAG|ENCUT}}\nin the INCAR file. If, additionally, very accurate forces are required, {{TAG|PREC}}=Accurate can be used in combination with an increased energy cutoff.\n\n'''Mind''': we recommend specifying the energy cutoff ({{TAG|ENCUT}}) always manually in the {{FILE|INCAR}} file, to avoid incompatibilities between calculations. \n----\nThe {{TAG|PREC}} parameter sets the defaults for four sets of parameters ({{TAG|ENCUT}}; {{TAG|NGX}}, {{TAG|NGY}}, {{TAG|NGZ}}; {{TAG|NGXF}}, {{TAG|NGYF}}, {{TAG|NGZF}}, and {{TAG|ROPT}}):\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} ||align=\"center\"|{{TAG|ENCUT}} || {{TAG|NGX}},[[NGY|Y]],[[NGZ|Z]] || {{TAG|NGXF}},[[NGYF|YF]],[[NGZF|ZF]] || {{TAG|ROPT}}\n|-\n| Normal ||align=\"center\"|max({{TAG|ENMAX}}) || 3/2&times;G<sub>cut</sub> ||align=\"center\"|2&times;{{TAG|NGX}} ||-5&times;10<sup>-4</sup>\n|-\n| Single (VASP.5) ||align=\"center\"|max({{TAG|ENMAX}}) || 3/2&times;G<sub>cut</sub> ||align=\"center\"|{{TAG|NGX}} ||-5&times;10<sup>-4</sup>\n|-\n| Single (VASP.6) ||align=\"center\"|max({{TAG|ENMAX}}) || 2 &times;G<sub>cut</sub> ||align=\"center\"|{{TAG|NGX}} ||-5&times;10<sup>-4</sup>\n|-\n|SingleN (VASP.6)\n|align=\"center\"|max({{TAG|ENMAX}})\n|3/2&times;G<sub>cut</sub>\n|align=\"center\"|{{TAG|NGX}}\n| -5&times;10<sup>-4</sup>\n|-\n| Accurate ||align=\"center\"|max({{TAG|ENMAX}}) ||align=\"center\"|2&times;G<sub>cut</sub> ||align=\"center\"|2&times;{{TAG|NGX}}||-2.5&times;10<sup>-4</sup>\n|-\n| colspan=\"5\" |\u00a0'''old settings:'''\n|-\n| Low ||align=\"center\"|max({{TAG|ENMIN}}) || 3/2&times;G<sub>cut</sub> ||align=\"center\"|3&times;G<sub>aug</sub> ||-1&times;10<sup>-2</sup>\n|-\n| Medium ||align=\"center\"|max({{TAG|ENMAX}}) || 3/2&times;G<sub>cut</sub> ||align=\"center\"|4&times;G<sub>aug</sub> ||-2&times;10<sup>-3</sup>\n|-\n| High || 1.3&times;max({{TAG|ENMAX}}) ||align=\"center\"|2&times;G<sub>cut</sub> ||align=\"center\"|16/3&times;G<sub>aug</sub> ||-4&times;10<sup>-4</sup>\n|}\nwhere max({{TAG|ENMAX}}) and max({{TAG|ENMIN}}) are the maximum {{TAG|ENMAX}} and {{TAG|ENMIN}} found on the {{FILE|POTCAR}} file, and\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2 \\qquad E_{\\rm aug}=\\frac{\\hbar^2}{2m_e}G_{\\rm aug}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}} and E<sub>aug</sub>={{TAG|ENAUG}}.\n\n'''Mind''': the settiLow ||align=\"center\"|max({{TAG|ENMIN}}) || 3/2&times;G<sub>cut</sub> ||align=\"center\"|3&times;G<sub>aug</sub> ||-1&times;10<sup>-2</sup>ngs {{TAG|PREC}}=Normal and {{TAG|PREC}}=Accurate are only available in VASP.4.5 and newer versions. The setting {{TAG|PREC}}=Single is only available as of VASP.5.1, and has been updated in VASP.6.\n\n*Plane wave kinetic energy cutoff ({{TAG|ENCUT}}):\n:The {{TAG|PREC}}-tag determines the energy cutoff {{TAG|ENCUT}}, if {{TAG|ENCUT}} is not specified in the {{FILE|INCAR}} file. For {{TAG|PREC}}=Low, {{TAG|ENCUT}} will be set to the maximal {{TAG|ENMIN}} value found on the {{FILE|POTCAR}} file. For {{TAG|PREC}}=Medium and {{TAG|PREC}}=Accurate, {{TAG|ENCUT}} will be set to maximal {{TAG|ENMAX}} value found on the {{FILE|POTCAR}} file. Finally for {{TAG|PREC}}=High, {{TAG|ENCUT}} is set to the maximal {{TAG|ENMAX}} value on the {{FILE|POTCAR}} file plus 30%. {{TAG|PREC}}=High guarantees that the absolute energies are converged to a few meV, and it ensures that the stress tensor is converged within a few kBar. In general, an increased energy cutoff is only required for accurate evaluation of quantities related to the stress tensor (e.g. elastic properties).\n\n*FFT grids ({{TAG|NGX}},{{TAG|NGY}},{{TAG|NGZ}},{{TAG|NGXF}},{{TAG|NGYF}},{{TAG|NGZF}}):\n:For {{TAG|PREC}}=High and {{TAG|PREC}}=Accurate, wrap around errors are avoided, all ''G''-vectors that are twice as large as the vectors included in the basis set are taken into account in the FFT's. For {{TAG|PREC}}=Low, {{TAG|PREC}}=Medium or {{TAG|PREC}}=Normal, the FFT grids are reduced, and 3/4 of the required values are used. Usually {{TAG|PREC}}=Medium and {{TAG|PREC}}=Normal, are sufficiently accurate with errors less than 1 meV/atom.\n\n:In addition, the {{TAG|PREC}} tag determines the spacing for the grids representing the augmentation charges, charge densities and potentials ({{TAG|NGXF}}, {{TAG|NGYF}}, {{TAG|NGZF}}). For {{TAG|PREC}}=Accurate and {{TAG|PREC}}=Normal, the support grid contains twice as many points in each direction as the grids for the orbitals ({{TAG|NGXF}}=2&times;{{TAG|NGX}}, {{TAG|NGYF}}=2&times;{{TAG|NGY}}, {{TAG|NGZF}}=2&times;{{TAG|NGZ}}). In all other cases, {{TAG|NGXF}}, {{TAG|NGYF}}, and {{TAG|NGZF}} are determined by some heuristic formula from {{TAG|ENAUG}} (these settings should be avoided).\n\n:{{TAG|PREC}}=Single uses the same FFT grids as  {{TAG|PREC}}=Normal in VASP.5 and the same FFT grids as {{TAG|PREC}}=Accurate in  VASP.6. The double grid technique is not used. This is convenient, if one needs to cut down on storage demands, or if one wants to reduce the size of the files {{FILE|CHG}} and {{FILE|CHGCAR}}. Furthermore, {{TAG|PREC}}=Single avoids high-frequency oscillations caused by the double-grid technique and the resulting Fourier interpolation. It is often expedient for scanning tunneling simulations or other calculations where high-frequency wiggles of the charge density in the vacuum region are undesirable.\n\n*Real space projectors ({{TAG|ROPT}}):\n\n::{|cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|colspan=\"2\" align=\"center\"|{{TAG|LREAL}}=O||||colspan=\"2\" align=\"center\"|{{TAG|LREAL}}=A\n|-\n|{{TAG|PREC}}||{{TAG|ROPT}}||||{{TAG|PREC}}||{{TAG|ROPT}}\n|-\n| Low || 0.67 || || Low || -1&times;10<sup>-2</sup>\n|-\n| Med || 1.0|| || Med || -2&times;10<sup>-3</sup>\n|-\n| Normal || 1.0 || || Normal || -5&times;10<sup>-4</sup>\n|-\n| Single || 1.0 || || Single || -5&times;10<sup>-4</sup>\n|-\n| Accurate || 1.0 || || Accurate || -2.5&times;10<sup>-4</sup>\n|-\n| High || 1.5 || || High || -4&times;10<sup>-4</sup>\n|}\n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGY}},\n{{TAG|NGZ}},\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}},\n{{TAG|PRECFOCK}}\n\n{{sc|PREC|Examples|Examples that use this tag}}   \n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Memory]]", "last_revised": "2023-06-14T12:31:05Z"}, "ICHARG": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ICHARG\">ICHARG</a> determines how VASP constructs the <i>initial</i> charge density.</span>", "wikicode": "{{TAGDEF|ICHARG|0 {{!}} 1 {{!}} 2 {{!}} 4}}\n{{DEF|ICHARG|2|if {{TAG|ISTART}}{{=}}0|0|else}}\n\nDescription: {{TAG|ICHARG}} determines how VASP constructs the ''initial'' charge density.\n----\n*{{TAG|ICHARG}}=0\n:Calculate the charge density from initial wave functions.\n:If {{TAG|ISTART}} is ''internally reset'' due to an invalid {{FILE|WAVECAR}} file, {{TAG|ICHARG}} will be set to {{TAG|ICHARG}}=2.\n\n*{{TAG|ICHARG}}=1\n:Read the charge density from {{FILE|CHGCAR}} file, and extrapolate from the old positions (on {{FILE|CHGCAR}}) to the new positions using a linear combination of atomic charge densities.\n:In the [[Projector-augmented-wave_formalism|PAW method]], there is however one important point to keep in mind: For the on-site densities (that is the densities within the PAW sphere) only l-decomposed charge densities up to {{TAG|LMAXMIX}} are written. Upon restart, the energies might therefore differ slightly from the fully converged energies. The discrepancies can be large for the DFT+U method. In this case, one might need to increase {{TAG|LMAXMIX}} to 4 (d-elements) or even 6 (f-elements).\n{{NB|tip|To improve convergence and reduce the number of electronic steps, it is recommended to set ICHARG {{=}} 1 when starting calculations repeatedly with small changes in the input parameters.}}\n*{{TAG|ICHARG}}=2\n:Take superposition of atomic charge densities.\n\n*{{TAG|ICHARG}}=4\n:Read potential from file {{FILE|POT}}. The local potential on the file {{FILE|POT}} is written by the optimized-effective-potential methods (OEP), if the flag {{TAG|LVTOT}}=.TRUE. is supplied in the {{FILE|INCAR}} file. Supported as of VASP.5.1.\n\n*{{TAG|ICHARG}}+10\n:non-selfconsistent calculations: Adding 10 to the value of {{TAG|ICHARG}}, e.g., {{TAG|ICHARG}}=11 or 12 (or the less convenient value 10) means that the charge density will be kept constant during the ''entire electronic minimization''.\n\n:There are several reasons why to keep the charge density constant:\n:*{{TAG|ICHARG}}=11\n::To obtain the eigenvalues (for band-structure plots) or the density of states (DOS) of a given charge density read from {{FILE|CHGCAR}}. The self-consistent {{FILE|CHGCAR}} file must be determined beforehand by a fully self-consistent calculation with a k-point grid spanning the entire Brillouin zone.\n\n:*{{TAG|ICHARG}}=12\n::Non-self-consistent calculations for a superposition of atomic charge densities. This is in the spirit of the non-self-consistent [[Harris-Foulkes functional|Harris-Foulkes functional]]. The stress and the forces calculated by VASP are correct, and it is absolutely possible to perform an ab-initio MD for the non-selfconsistent [[Harris-Foulkes functional|Harris-Foulkes functional]].\n{{NB|tip|If {{TAG|ICHARG}} is set to 11 or 12, it is strongly recommended to set {{TAG|LMAXMIX}} to twice the maximum l-quantum number in the pseudopotentials. Thus, for s and p elements {{TAG|LMAXMIX}} should be set to 2, for d elements {{TAG|LMAXMIX}} should be set to 4, and for f elements {{TAG|LMAXMIX}} should be set to 6.|:}}\n\nThe initial charge density is of importance in the following cases:\n\n*If {{TAG|ICHARG}}&ge;10 the charge density remains constant during the run.\n\n*For all algorithms except {{TAG|IALGO}}=5X the initial charge density is used to set up the initial Hamiltonian that is used in the first few non-selfconsistent steps, c.f., {{TAG|NELMDL}} tag.\n\n== Related tags and articles ==\n\n{{FILE|CHGCAR}}, {{TAG|ISTART}}, {{TAG|LCHARG}}, {{TAG|LMAXMIX}}, {{TAG|NELMDL}}, {{TAG|INIWAV}}\n\n{{sc|ICHARG|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-09-12T11:56:52Z"}, "ISTART": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISTART\">ISTART</a> determines whether or not to read the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WAVECAR\">WAVECAR</a> file.</span>", "wikicode": "{{TAGDEF|ISTART|0 {{!}} 1 {{!}} 2 {{!}} 3}}\n{{DEF|ISTART|1|if a {{FILE|WAVECAR}} file exists|0|else}}\n\nDescription: {{TAG|ISTART}} determines whether or not to read the {{FILE|WAVECAR}} file.\n----\n*{{TAG|ISTART}}=0\n:Start job: \"begin from scratch\". Initialize the orbitals according to the flag {{TAG|INIWAV}}.\n*{{TAG|ISTART}}=1\n:Continuation job: \"restart with constant energy cut-off\". Orbitals are read from the {{FILE|WAVECAR}} file (usage is restricted in the parallel version). The set of plane waves will be redefined and re-padded according to the new cell size/shape ({{FILE|POSCAR}}) and the new plane wave cut-off ({{FILE|INCAR}}). These values might differ from the old values, that are stored in the {{FILE|WAVECAR}} file. If the {{FILE|WAVECAR}} file is missing or if the {{FILE|WAVECAR}} file contains an inappropriate number of bands and/or k-points the flag {{TAG|ISTART}} will revert to {{TAG|ISTART}}=0 (see above).\n\n:The usage of {{TAG|ISTART}}=1 is recommended if the size/shape of the supercell (see section on [[Energy vs volume Volume relaxations and Pulay stress|volume versus energy]]) or the cut-off energy changed with respect to the last run and if one wishes to redefine the set of plane waves according to a new setting.\n\n:{{TAG|ISTART}}=1 is the usual setting for convergence tests with respect to the cut-off energy and for all jobs where the volume/cell-shape varies (e.g. to calculate binding energy curves looping over a set of volumes).\n\n*{{TAG|ISTART}}=2\n:Continuation job: \"restart with constant basis set\". Orbitals are read from the {{FILE|WAVECAR}} file.\n\n:The set of plane waves will '''not''' be changed even if the cut-off energy or the cell size/shape given on the {{FILE|INCAR}} and {{FILE|POSCAR}} files are different from the values stored on the {{FILE|WAVECAR}} file. If the {{FILE|WAVECAR}} file is missing or if the {{FILE|WAVECAR}} file contains an inappropriate number of bands and/or k-points the {{TAG|ISTART}} will revert to {{TAG|ISTART}}=0 (see above).\n\n:If the cell shape has not changed then {{TAG|ISTART}}=1 and {{TAG|ISTART}}=2 lead to the same result.\n\n:{{TAG|ISTART}}=2 is usually used if one wishes to restart with the same basis set used in the previous run.\n{{NB|mind| Due to [[Energy vs volume Volume relaxations and Pulay stress|Pulay stresses]], there is a difference between evaluating the equilibrium volume with a constant basis set and a constant energy cut-off (unless absolute convergence with respect to the basis set is achieved!).|:}} \n:If you are looking for the equilibrium volume, calculations with a constant energy cut-off are preferable to calculations with a constant basis set, therefore always restart with {{TAG|ISTART}}=1 unless you really know what you are looking for (see the section on [[Energy vs volume Volume relaxations and Pulay stress|volume versus energy]]).\n\n:There is only one exception to this general rule: all volume/cell shape relaxation algorithms implemented in VASP work with a constant basis set, so continuing such jobs requires to set {{TAG|ISTART}}=2 to get a 'consistent restart' with respect to the previous runs (see section [[Energy vs volume Volume relaxations and Pulay stress|volume versus energy]])!\n\n*{{TAG|ISTART}}=3\n:Continuation job: \"full restart including orbitals and charge prediction\".\n\n:Same as {{TAG|ISTART}}=2 but in addition a valid {{FILE|TMPCAR}} file must exist, containing the positions and orbitals at time steps <math>t(N-1)</math> and <math>t(N-2)</math>, which are needed for the orbtial and charge prediction scheme (used for MD-runs).\n\n:{{TAG|ISTART}}=3 is generally not recommended unless an operating system imposes a serious restriction on the CPU time per job: if you continue with {{TAG|ISTART}}=1 or 2, a relatively large number of electronic iterations might be necessary to reach convergence of the orbitals in the second and third molecular-dynamics steps. {{TAG|ISTART}}=3 therefore saves time and is important if a molecular-dynamics run is split into very small pieces (e.g., {{TAG|NSW}}<10).\n\n:Nevertheless, we have found that it is safer to restart the orbital prediction after 100 to 200 steps. If {{TAG|NSW}}>30, {{TAG|ISTART}}=1 or 2 is strongly recommended.\n{{NB|mind| If {{TAG|ISTART}}{{=}}3, a non-existing {{FILE|WAVECAR}} or {{FILE|TMPCAR}} file or any inconsistency of input data will immediately stop execution.|:}}\n\n{{sc|ISTART|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:24:06Z"}, "INIWAV": {"datatype": "integer", "options": {"1": null, "0": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/INIWAV\">INIWAV</a> specifies how to set up the initial orbitals in case <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/INIWAV\">ISTART</a>=<span><span class=\"tag-value\">0</span>.</span></span>", "wikicode": "{{TAGDEF|INIWAV|0 {{!}} 1}}\n{{DEF|INIWAV|1|}}\n\nDescription: {{TAG|INIWAV}} specifies how to set up the initial orbitals in case {{TAG|ISTART}}=0.\n----\n*{{TAG|INIWAV}}=0\n:Take 'jellium orbitals', i.e., fill the Kohn-Sham&ndash;orbital arrays with plane waves of lowest kinetic energy = lowest eigenvectors for a constant potential ('jellium'). \n{{NB|important| 'jellium' calculations require a specific {{FILE|POTCAR}} file, not included in the standard potential database.|:}}\n\n*{{TAG|INIWAV}}=1\n:Fill the Kohn-Sham&ndash;orbital arrays with random numbers. It is definitely the safest fool-proof switch.\n{{NB|tip|Use {{TAG|INIWAV}}{{=}}1 whenever possible.|:}}\n{{NB|mind|The {{TAG|INIWAV}} tag is only used for jobs that start from scratch ({{TAG|ISTART}}{{=}}0) and has no meaning otherwise.}}\n\n{{sc|INIWAV|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:23:10Z"}, "NSW": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NSW\">NSW</a> sets the maximum number of ionic steps.</span>", "wikicode": "{{TAGDEF|NSW|[integer]|0}}\n\nDescription: {{TAG|NSW}} sets the maximum number of ionic steps.\n----\n\n{{TAG|IBRION}} = 0:\n:{{TAG|NSW}} gives the number of steps in all ab-initio Molecular Dynamics runs, it ''has'' to be supplied therefore, otherwise VASP crashes immediately after having started.\n{{TAG|IBRION}} != 0: \n:In all minimization algorithms (quasi-Newton, conjugate gradient, and damped molecular dynamics) {{TAG|NSW}} defines the maximum number of ionic steps.\n\n'''Mind''': Within each ionic step at most {{TAG|NELM}} electronic-SC loops are performed unless the {{TAG|EDIFF}} convergence criterium is matched before. Exact Hellmann-Feynman forces and stresses are calculated for each ionic step.\n\n{{sc|NSW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T08:28:02Z"}, "NELM": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NELM\">NELM</a> sets the maximum number of electronic SC (self-consistency) steps.</span>", "wikicode": "{{TAGDEF|NELM|[integer]|60}}\n\nDescription: {{TAG|NELM}} sets the maximum number of electronic SC (self-consistency) steps.\n----\nNormally, there is no need to change the default value: if the self-consistency loop does not converge within 40 steps, it will probably not converge at all. In this case you should reconsider the tags {{TAG|IALGO}} or {{TAG|ALGO}}, {{TAG|LSUBROT}}, and the [[:Category:Density mixing|mixing parameters]].\n\n== Related tags and articles ==\n{{TAG|NELMDL}},\n{{TAG|NELMIN}}\n\n{{sc|NELM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:47:43Z"}, "EDIFF": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EDIFF\">EDIFF</a> specifies the global break condition for the electronic SC-loop. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EDIFF\">EDIFF</a> is specified in units of eV.</span>", "wikicode": "{{TAGDEF|EDIFF|[real]|<math>10^{-4}</math>}}\n\nDescription: {{TAG|EDIFF}} specifies the global break condition for the electronic SC-loop. {{TAG|EDIFF}} is specified in units of eV.\n----\nThe relaxation of the electronic degrees of freedom stops if the total (free) energy change and the band-structure-energy change ('change of eigenvalues') between two steps are both smaller than {{TAG|EDIFF}} (in eV). For {{TAG|EDIFF}}=0, strictly {{TAG|NELM}} electronic self-consistency steps will be performed.\n{{NB|mind|In most cases, the convergence speed is exponential, so often, the cost for the few additional iterations is small. For high precision calculations, we recommend decreasing {{TAG|EDIFF}} to 1E-6. For finite difference calculations (e.g. phonons), even {{TAG|EDIFF}} {{=}} 1E-7 might be required in order to obtain very accurate results. }} \n\n== Related tags and articles ==\n{{TAG|EDIFFG}}\n\n{{sc|EDIFF|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:11:13Z"}, "ALGO": {"datatype": "string", "options": {"Normal": null, "VeryFast": null, "Fast": null, "Conjugate": null, "All": null, "Damped": null, "Subrot": null, "Eigenval": null, "Exact": null, "None": null, "Nothing": null, "CHI": null, "G0W0": null, "GW0": null, "GW": null, "scGW0": null, "scGW": null, "G0W0R": null, "GW0R": null, "GWR": null, "scGW0R": null, "scGWR": null, "ACFDT": null, "RPA": null, "ACFDTR": null, "RPAR": null, "BSE": null, "TDHF": null}, "summary": "the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ALGO\">ALGO</a> tag is a convenient option to specify the electronic minimization algorithm (as of VASP.4.5) and/or to select the type of <a href=\"https://www.vasp.at/wiki/index.php/GW_calculations\">GW calculations</a>.", "wikicode": "{{TAGDEF|ALGO|Normal {{!}} VeryFast {{!}} Fast {{!}} Conjugate {{!}} All {{!}} Damped {{!}} Subrot {{!}} Eigenval {{!}} Exact {{!}} None {{!}} Nothing {{!}} CHI {{!}} G0W0 {{!}} GW0 {{!}} GW {{!}} scGW0 {{!}} scGW {{!}} G0W0R {{!}} GW0R {{!}} GWR {{!}} scGW0R {{!}} scGWR {{!}} ACFDT {{!}} RPA {{!}} ACFDTR {{!}} RPAR {{!}} BSE {{!}} TDHF | Normal }}\n\nDescription: the {{TAG|ALGO}} tag is a convenient option to specify the electronic minimization algorithm (as of VASP.4.5) and/or to select the type of [[GW calculations]].  \n----\n*{{TAG|ALGO}}=Normal selects {{TAG|IALGO}}=38 (blocked Davidson iteration scheme).\n\n*{{TAG|ALGO}}=VeryFast selects {{TAG|IALGO}}=48 (RMM-DIIS). This algorithm has been updated for vasp.6 to increase robustness. To select the version that was available in vasp.5, select \"Old VeryFast\". [[:Category:Hybrid functionals|hybrid functionals]] are not supported for {{TAG|ALGO}}=VeryFast. The algorithm can be combined with {{TAG|LDIAG}}=.FALSE. to conserve the initial orbital order (when orbitals are read from the {{TAG|WAVECAR}} file).\n\n*{{TAG|ALGO}}=Old VeryFast (or \"ov\" or \"vo\") selects {{TAG|IALGO}}=48 (RMM-DIIS). This option is available in vasp.6 and selects the version of the RMM-DIIS algorithm that was available in vasp.5. \n\n*{{TAG|ALGO}}=Fast selects a fairly robust mixture of the Davidson and RMM-DIIS algorithms. In this case, Davidson ({{TAG|IALGO}}=38) is used for the initial phase, and then VASP switches to RMM-DIIS ({{TAG|IALGO}}=48). Subsequently, for each ionic update, one {{TAG|IALGO}}=38 sweep is performed for each ionic step (except the first one).  This algorithm has been updated for vasp.6 to increase robustness. To select the version that was available in vasp.5, select \"Old Fast\".\n\n*{{TAG|ALGO}}=Old Fast (or \"of\" or \"fo\"). This option is available in vasp.6 and selects the {{TAG|ALGO}}=Fast algorithm that was available in vasp.5.\n\n*{{TAG|ALGO}}=Conjugate or {{TAG|ALGO}}=All selects an \"all band simultaneous update of orbitals\" ({{TAG|IALGO}}=58, both tags are synonymous).\n\n*{{TAG|ALGO}}=Damped selects a damped velocity friction algorithm ({{TAG|IALGO}}=53). The algorithm can be combined with {{TAG|LDIAG}}=.FALSE. to conserve the initial orbital order (when orbitals are read from the {{TAG|WAVECAR}} file).\n\n*{{TAG|ALGO}}=Exact performs an exact diagonalization ({{TAG|IALGO}}=90).\n\n*{{TAG|ALGO}}=Subrot selects subspace rotation or diagonalization in the sub-space spanned by the orbitals ({{TAG|IALGO}}=4).\n\n*{{TAG|ALGO}}=Eigenval allows to recalculate one-electron energies, the density of state and perform selected postprocessing using the current orbitals ({{TAG|IALGO}}=3) e.g. read from the {{FILE|WAVECAR}} file.\n\n*{{TAG|ALGO}}=None or {{TAG|ALGO}}=Nothing allows to recalculate the density of states or perform selected postprocessing, using the current orbitals and one electron energies ({{TAG|IALGO}}=2) e.g. read from the {{FILE|WAVECAR}} file.\n\nMore details can be found under the documentation for the tag {{TAG|IALGO}}.\n{{NB|tip|Except for 'None', 'Nothing' and 'Exact'  (which must be spelled out), the first letter determines the applied algorithm.}}\nConjugate, Subrot, Eigenval, None and Nothing are only supported by vasp.5.2.9 and newer versions.\n{{NB|warning|For fast convergence, {{TAG|LMAXMIX}} must be set appropriately. E.g. {{TAG|LMAXMIX}}{{=}}6 for systems including f electrons.}} \n\n<span id=\"GWALGOS\">\n\n==ALGO for response functions and [[GW calculations]] and [[ACFDT/RPA calculations]]==\nThe following tags are available as of VASP.5.X. \n\n*{{TAG|ALGO}}=CHI calculates the response functions only.\n\n*{{TAG|ALGO}}=TDHF selects TDHF calculations using the VASP internal Cassida code see [[BSE calculations]], (available as of VASP.5.2.12)\n\n*{{TAG|ALGO}}=BSE selects BSE calculations using the VASP internal Cassida code see [[BSE calculations]]\n\n*{{TAG|ALGO}}=Timeev performs a delta-pulse in time and then performs [[timepropagation]]\n\n\n*{{TAG|ALGO}}=ACFDT selects RPA total energy calculations see [[ACFDT/RPA calculations]]\n\n*{{TAG|ALGO}}=RPA synonymous to ACFDT see [[ACFDT/RPA calculations]] (available as of VASP.5.3.1)\n\nGW tags have been renamed in VASP as follows\n<span id=\"ALGO_VASP6\">\n{| class=\"wikitable\"\n|-\n! < 5.2.12\n| scGW\n| scGW0\n| GW\n| GW0\n| N/A\n| N/A\n|-\n! >= 5.2.12, < 6\n| QPGW\n| QPGW0\n| GW\n| GW0\n| N/A\n| N/A\n|-\n! >= 6\n| QPGW\n| QPGW0\n| EVGW\n| EVGW0\n| GWR\n| GW0R\n|}\n</span>\n\n*{{TAG|ALGO}}=EVGW0 selects single-shot ''G''<sub>0</sub>''W''<sub>0</sub> calculations or partially self-consistent ''GW'' calculations. The orbitals (wavefunctions) of the previous groundstate calculations are maintained, and [[GW calculations#G0W0|G0W0 calculations]] are performed. If {{TAG|NELM}} is set, several iterations are performed, and the QP energies are updated in the calculation of ''G'' (for details see [[GW calculations#gw0|EVGW0 calculations]]).\n\n*{{TAG|ALGO}}=EVGW selects single-shot ''G''<sub>0</sub>''W''<sub>0</sub> calculations or partially self-consistent ''GW'' calculations. The orbitals of the previous groundstate calculations are maintained, and [[GW calculations#G0W0|G0W0 calculations]] are performed. If {{TAG|NELM}} is set, several iterations are performed, and the QP energies are updated in the calculation of ''G'' AND ''W'' (for details see [[GW calculations#qpgw|self-consistent EVGW and QPGW calculations]]).\n\n*{{TAG|ALGO}}=QPGW0 selects self-consistent ''GW'' calculations including off-diagonal components of the selfenergy. A full update of the QP energies AND one-electron orbitals is performed in the calculation of ''G'' only (for details see [[GW calculations#qpgw0|QPGW0 calculations]]).\n\n*{{TAG|ALGO}}=QPGW selects self-consistent ''GW'' calculations, including off-diagonal components of the selfenergy. A full update of the QP energies AND one-electron orbitals is performed in the calculations of ''G'' AND ''W'' (for details, see [[GW calculations#qpgw|QPGW calculations]]).\n\nFollowing tags are available as of VASP.6\n\n*{{TAG|ALGO}}=RPAR selects low scaling RPA total energy calculations (for details see [[ACFDT/RPA calculations#ACFDTR/RPAR|ACFDT/RPA calculations]])\n\n*{{TAG|ALGO}}=ACFTDR synonym for RPAR (for details see [[ACFDT/RPA calculations#ACFDTR/RPAR|ACFDT/RPA calculations]])\n\n*{{TAG|ALGO}}=ACFTDRK in combination with LMP2LT = .TRUE. selects the low scaling MP2 total energy calculations (for details see the [[MP2_ground_state_calculation_-_Tutorial|MP2 ground state Tutorial]])\n\n*{{TAG|ALGO}}=GW0R selects self-consistent GW<sub>0</sub> calculations, where only the Green's function ''G'' is updated from the corresponding Dyson. The screened potential ''W'' remains unchanged after the first iteration. {{TAG|NELM}} iteration cycles are performed (see [[GW calculations#scGW0R|self-consistent GW calculations]]). \n\n*{{TAG|ALGO}}=GWR selects self-consistent GW calculations, where both, ''G'' and ''W'' are updated from the corresponding Dyson equation. {{TAG|NELM}} iteration cycles are performed. (for details see [[GW calculations#scGWR|self-consistent GW calculations]]).\n\n*{{TAG|ALGO}}=G0W0R selects single-shot GW calculations, non-interacting ''G'' and ''W'' are determined from Kohn-Sham system and {{TAG|NELM}} tag is ignored. Use this tag for single-shot QP energies and first order corrections to density matrix (for details see [[GW calculations#G0W0R|single-shot GW calculations]]).\n{{NB|important|Changes as of VASP.6.3:}}\n*{{TAG|NELMGW}} replaces {{TAG|NELM}} in [[GW calculations#scGWR|self-consistent GW calculations]].\n\n*{{TAG|ALGO}}=CRPA selects [[Constrained\u2013random-phase\u2013approximation_formalism|constrained RPA alculations]].\n{{NB|important|available as of VASP.6.4:}}\n*{{TAG|ALGO}}=EVGW0R selects the low-scaling analogue of EVGW0, that is the low-scaling partially self-consistent GW calculations, where non-interacting ''G'' and ''W'' are determined from Kohn-Sham system and {{TAG|NELMGW}} specifies the number of self-consistent loops for ''G''. ''W'' is kept on the Kohn-Sham level. \n</span>\n\n== Related Tags and Sections ==\n{{TAG|IALGO}},\n{{TAG|LDIAG}}\n\n{{sc|ALGO|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-11-07T08:45:55Z"}, "LMAXMIX": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMAXMIX\">LMAXMIX</a> controls up to which <i>l</i>-quantum number the one-center PAW charge densities are passed through the charge density mixer and written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">CHGCAR</a> file.</span>", "wikicode": "{{TAGDEF|LMAXMIX|[integer]|2}}\n\nDescription: {{TAG|LMAXMIX}} controls up to which ''l''-quantum number the one-center PAW charge densities are passed through the charge density mixer and written to the {{FILE|CHGCAR}} file.\n----\nHigher ''l''-quantum numbers (''l''>{{TAG|LMAXMIX}}) are not handled by the mixer (these components of the one-center charge density are simply set to the value corresponding to the present orbitals). Usually, it is not required to increase {{TAG|LMAXMIX}}, but the following two cases are exceptions:\n\n*DFT+U calculations require in many cases an increase of {{TAG|LMAXMIX}} to 4 for ''d''-electrons (or 6 for ''f''-elements) in order to obtain fast convergence to the groundstate.\n\n*The {{FILE|CHGCAR}} file will contain the one-center PAW occupancy matrices up to {{TAG|LMAXMIX}}. When the {{FILE|CHGCAR}} file is read and kept fixed in the course of the calculations ({{TAG|ICHARG}}=11), the results will be not necessarily identical to a self-consistent run. The deviations will be large for DFT+U calculations. For the calculation of band structures within the DFT+U approach, it is strictly required to increase {{TAG|LMAXMIX}} to 4 for ''d''-elements and to 6 for ''f''-elements.\n\n{{sc|LMAXMIX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-04-11T13:08:41Z"}, "LVTOT": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVTOT\">LVTOT</a> determines whether the total local potential <math>V_{\\text{LOCPOT}}(\\mathbf{r})</math> (in eV) is written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LOCPOT\">LOCPOT</a> file</span>", "wikicode": "{{TAGDEF|LVTOT|[logical]|.FALSE.}}\n\nDescription: {{TAG|LVTOT}} determines whether the total local potential <math>V_{\\text{LOCPOT}}(\\mathbf{r})</math> (in eV) is written to the {{FILE|LOCPOT}} file\n\n<math>\nV_{\\text{LOCPOT}}(\\mathbf{r}) = \nV(\\mathbf{r}) + \n\\int \\frac{n(\\mathbf{r'})}{|\\mathbf{r}-\\mathbf{r'}|}d\\mathbf{r'}+\nV_{\\text{XC}}(\\mathbf{r})\n</math>\n\nwhere <math>V(\\mathbf{r})</math> is the ionic potential,\nthe second term is the Hartree potential and \n<math>V_{\\text{XC}}(\\mathbf{r})</math> is the exchange-correlation potential.\n\nIf {{TAG|LVTOT}}=.TRUE., the sum of the ionic, Hartree, and\nexchange-correlation potential is written to the {{FILE|LOCPOT}} file. Please\nalso read the section on the tag {{TAG|LVHAR}} for further information.\n\n{{sc|LVTOT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:44:32Z"}, "NELMDL": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NELMDL\">NELMDL</a> specifies the number of non-self-consistent steps at the beginning.</span>", "wikicode": "{{TAGDEF|NELMDL|[integer]}}\n{{DEF|NELMDL|-12|if {{TAG|ISTART}}{{=}}0, {{TAG|INIWAV}}{{=}}1, and {{TAG|IALGO}}{{=}}48 or {{TAG|IALGO}}{{=}}50|-5| else}}\n\nDescription: {{TAG|NELMDL}} specifies the number of non-self-consistent steps at the beginning.\n----\nIf the orbitals are initialized using a random number generator (the default in VASP),  the initial orbitals are usually unreasonable and the iterative matrix diagonalization will require 5-10 steps to obtain reasonable orbitals. The charge density corresponding to the initial orbitals is also, at best, erratic. It is hence advisable to perform a few electronic steps while keeping the initial Hamiltonian fixed. This initial Hamiltonian is usually determined from a superposition of atomic charge densities (see {{TAG|ICHARG}}).\n\nSuch a 'delay' is absolutely necessary. if the SCF-convergence is slow and problematic (e.g. for surfaces or metallic clusters, low dimensional system). Without a delay, VASP will most likely not converge, or at least the convergence speed is slowed significantly.\n\n{{TAG|NELMDL}} might be set to a positive or negative value. A negative value means that the delay is only performed in the first ionic step (usually the recommended option). A positive number means that a delay is employed after each ionic movement. This can improve the convergence speed in VASP.6 (see below) but is not recommended in VASP.5.\n\nFor calculations using a direct minimization of the Hamiltonian ({{TAG|ALGO}}=ALL  or {{TAG|ALGO}}=DAMPED), the Davidson algorithm is used during the delay phase and the Hamiltonian is kept fixed during these steps. \n\nSpecial considerations for VASP.6:\n\n* For calculations using a direct minimization of the Hamiltonian ({{TAG|ALGO}}=ALL or {{TAG|ALGO}}=DAMPED): if {{TAG|NELMDL}} is set, the Davidson algorithm is used in the first {{TAG|NELMDL}} steps as described above. Using a positive {{TAG|NELMDL}} (i.e. delay in every ionic step) does not work reliably in VASP.5, due to issues in the orbital and charge density prediction. In VASP.6, using {{TAG|NELMDL}}=1 (or {{TAG|NELMDL}}=2) and direct minimization often improves the stability and efficiency of molecular dynamics simulations or relaxations ({{TAG|ALGO}}=ALL or {{TAG|ALGO}}=DAMPED). Note, however, that this might require one to prepare a reasonable {{TAG|WAVECAR}} file since {{TAG|NELMDL}} =1/2 might not suffice to obtain a reasonable set of orbitals from the initial random numbers.\n\n* For HF-type calculations, if {{TAG|NELMDL}} is larger or equal to 3, VASP will perform  {{TAG|NELMDL}} non-selfconsistent steps using the Davidson algorithm, and a local Hamiltonian is calculated using the semi-local DFT functional corresponding to the chosen hybrid functional (i.e. PBE for HSE and PBE0). This is expedient if the ions move by a large distance between the ionic steps. Setting  {{TAG|NELMDL}} =3 can thus improve the stability and performance during relaxations using HF-type Hamiltonians. Try to use {{TAG|ALGO}}=All and {{TAG|NELMDL}}=3 if you encounter convergence issues during relaxations using HF-type Hamiltonians.\n\n== Related tags and articles ==\n{{TAG|NELM}},\n{{TAG|NELMIN}},\n{{TAG|IALGO}}\n\n{{sc|NELMDL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-07T15:35:43Z"}, "NELMIN": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NELMIN\">NELMIN</a> specifies the minimum number of electronic self-consistency steps. </span>", "wikicode": "{{TAGDEF|NELMIN|[integer]|2}}\n\nDescription: {{TAG|NELMIN}} specifies the minimum number of electronic self-consistency steps. \n----\nIt is rarely necessary to change the value of the {{TAG|NELMIN}} tag. In some cases, e.g., in [[:Category:Molecular dynamics|molecular-dynamics]] runs, or [[:Category:Ionic minimization|ionic-minimization]] methods, we recommend increasing the {{TAG|NELMIN}} tag to a value between 4 and 8.\n\n== Related tags and articles ==\n{{TAG|NELM}},\n{{TAG|NELMDL}}\n\n{{sc|NELMIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-07T14:54:10Z"}, "IALGO": {"datatype": "integer", "options": {"-1": null, "2": null, "3": null, "4": null, "5": null, "6": null, "7": null, "8": null, "15": null, "16": null, "17": null, "18": null, "28": null, "38": null, "44": null, "45": null, "46": null, "47": null, "48": null, "53": null, "54": null, "55": null, "56": null, "57": null, "58": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IALGO\">IALGO</a> selects the algorithm to optimize the orbitals.</span>", "wikicode": "{{TAGDEF|IALGO|-1 {{!}} 2-4 {{!}} 5-8 {{!}} 15-18 {{!}} 28 {{!}} 38 {{!}} 44-48 {{!}} 53-58}}\n{{DEF|IALGO|8|for VASP.4.4 and older|38|else (if {{TAG|ALGO}} is not set)}}\n\nDescription: {{TAG|IALGO}} selects the algorithm to optimize the orbitals.\n----\n{{NB|warning|We suggest selecting the algorithms via {{TAG|ALGO}} instead of {{TAG|IALGO}}. Algorithms other than those available via {{TAG|ALGO}} are subject to instabilities.}} \n== Conjugate gradient algorithms ==\nThe band-by-band conjugate gradient algorithms are no longer maintained or supported.\n\n*{{TAG|IALGO}}=5-8: Conjugate gradient algorithms {{NB|deprecated|Not supported since vasp.5.}}\n:Optimize each band iteratively using a conjugate gradient algorithm. Subspace-diagonalization before conjugate gradient algorithm. The conjugate gradient algorithm is used to optimize the eigenvalue of each band.\n:*{{TAG|IALGO}}=5\tsteepest descent\n:*{{TAG|IALGO}}=6\tconjugated gradient\n:*{{TAG|IALGO}}=7\tpreconditioned steepest descent\n:*{{TAG|IALGO}}=8\tpreconditioned conjugated gradient\n:{{TAG|IALGO}}=8 is always fastest, whereas {{TAG|IALGO}}=5-7 are only implemented for test purposes.\n:Please mind, that {{TAG|IALGO}}=8 is not supported as of VASP.4.5, since M. Teter, Corning and M. Payne hold a patent on this algorithm. The algorithms have been replaced by faster and more efficient Davidson-like algorithms.\n\n*{{TAG|IALGO}}=15-18: Conjugate gradient algorithms {{NB|deprecated|Not supported since vasp.5.}}\n:Subspace-diagonalization after iterative refinement of the eigenvectors using the conjugate gradient algorithm. These switches are retained for compatibility reasons only and should not be used any longer. Generally {{TAG|IALGO}}=5-8 is preferable. Sub-switches as above.\n\n*{{TAG|IALGO}}=28: Conjugate gradient algorithm {{NB|deprecated|Not supported since vasp.5.}}\n:Subspace-diagonalization before conjugate gradient algorithm. No explicit orthonormalization of the gradients to the trial orbitals is done. This setting saves time, but does fail in most cases (mainly included for test purposes). Try {{TAG|IALGO}}=4X (RMM-DIIS) instead.\n\n== The blocked-Davidson scheme ==\n\n*{{TAG|IALGO}}=38: Blocked-Davidson algorithm ({{TAG|ALGO}}=N).\n:Kosugi algorithm (special blocked-Davidson iteration scheme). This algorithm is the default in VASP.4.6 and VASP.5.X. It optimizes a subset of {{TAG|NSIM}} bands simultaneously. The optimized bands are kept orthogonal to all other bands. If problems are encountered with the algorithm, try to decrease {{TAG|NSIM}}. Such problems are encountered, if linear dependencies develop in the search space. By reducing {{TAG|NSIM}} the rank of the search space is decreased.\n\n== RMM-DIIS ==\n\n*{{TAG|IALGO}}=44-48: Residual minimization method direct inversion in the iterative subspace ({{TAG|ALGO}}= F). {{TAG|IALGO}}=44-48 does not support hybrid functionals.\n:The RMM-DIIS algorithm{{cite|wood:jpa:1985}}{{cite|pulay:cpl:1980}} reduces the number of orthonormalization steps (<math>O(N^3)</math>) considerably and is therefore much faster than {{TAG|IALGO}}=8 and {{TAG|IALGO}}=38, at least for large systems and for workstations with a small memory band width. For optimal performance, we recommend to use this switch together with {{TAG|LREAL}}=Auto). The algorithm works in a blocked mode in which several bands are optimized at the same time. This can improve the performance even further on systems with a low memory band width (default is presently {{TAG|NSIM}}=4).\n\n:The following sub-switches exist:\n:*{{TAG|IALGO}}=44 steepest descent eigenvalue minimization\n:*{{TAG|IALGO}}=46 residuum-minimization + preconditioning\n:*{{TAG|IALGO}}=48 preconditioned residuum-minimization ({{TAG|ALGO}}=F)\n\n:{{TAG|IALGO}}=48 is usually most reliable ({{TAG|IALGO}}=44 and 46 are mainly for test purposes).\n\n:For {{TAG|IALGO}}=4X, a subspace-diagonalization is performed before the residual vector minimization, and a Gram-Schmidt orthogonalization is employed after the RMM-DIIS step. In the RMM-DIIS step, each band is optimized individually (without the orthogonality constraint); a maximum of {{TAG|NRMM}} iterative steps per band are performed for each band. The default is {{TAG|NRMM}}=4, and we recommend leaving this value unchanged.\n\n:Please mind, that the RMM-DIIS algorithm can fail in rare cases, whereas {{TAG|IALGO}}=38 did not fail for any system tested up to date. Therefore, if you have problems with {{TAG|IALGO}}=48 try first to switch to {{TAG|IALGO}}=38.\n\n:However, in some cases the performance gains due to {{TAG|IALGO}}=48 are so significant that {{TAG|IALGO}}=38 might not be a feasible option. In the following we try to explain what to do if {{TAG|IALGO}}=48 does not work reliably:\n\n:In general two major problems can be encountered when using {{TAG|IALGO}}=48: First, the optimization of unoccupied bands might fail for molecular dynamics and relaxations. This is because our implementation of the RMM-DIIS algorithm treats unoccupied bands more \"sloppy\" then occupied bands during MD's. The problem can be solved rather easily by specifying {{TAG|WEIMIN}}=0 in the INCAR file. In that case all bands are treated accurately.\n\n:The other major problem (which occurs also for static calculations) is the initialization of the orbitals. Because the RMM-DIIS algorithm tends to find eigenvectors which are close the the initial set of trial vectors there is no guarantee to converge to the correct ground state! This situation is usually very easy to recognize; whenever one eigenvector is missing in the final solution, the convergence becomes slow at the end (mind, that it is possible that one state with a small fractional occupancy above the Fermi-level is missing). If you suspect that this is the case switch to {{TAG|ICHARG}}=12 (i.e. no update of charge and Hamiltonian) and try to calculate the orbitals with high accuracy (<math>10^{-6}</math>). If the convergence is fairly slow or stucks at some precision, the RMM-DIIS algorithm has problems with the initial set of orbitals (as a rule of thumb not more than 12 electronic iterations should be required to determine the orbital for the default precision for {{TAG|ICHARG}}=12). The first thing to do in that case is to increase the number of bands ({{TAG|NBANDS}}) in the {{FILE|INCAR}} file. This is usually the simplest and most efficient fix, but it does not work in all cases. This solution is also undesirable for MD's and long relaxations because it increases the computational demand somewhat. A simple alternative - which worked in all tested cases - is to use {{TAG|IALGO}}=38 (Davidson) for a few non selfconsistent iterations and to switch then to the RMM-DIIS algorithm. This setup is automatically selected when {{TAG|ALGO}}= Fast is specified in the INCAR file ({{TAG|IALGO}} must not specified in the {{FILE|INCAR}} file in this case).\n\n:The final option is somewhat complicated and requires an understanding of how the initialization algorithm of the RMM-DIIS algorithm works: after the random initialization of the orbitals, the initial orbitals for the RMM-DIIS algorithm are determined during a non selfconsistent steepest descent phase (the number of steepest descent sweeps is given by {{TAG|NELMDL}}, default is {{TAG|NELMDL}}=-12 for RMM-DIIS). During this initial phase in each sweep, one steepest descent step per orbital is performed between each sub space rotation. This \"automatic\" simple steepest descent approach during the delay is faced with a rather ill-conditioned minimization problem and can fail to produce reasonable trial orbitals for the RMM-DIIS algorithm. In this case the quantity in the column \"rms\" will not decrease during the initial phase (12 steps), and you must improve the conditioning of the problem by setting the {{TAG|ENINI}} parameter in the {{FILE|INCAR}} file. {{TAG|ENINI}} controls the cutoff during the initial (steepest descent) phase for {{TAG|IALGO}}=48. Default for {{TAG|ENINI}} is {{TAG|ENINI}}= {{TAG|ENCUT}}. If convergence problems are observed, start with a slightly smaller {{TAG|ENINI}}; reduce {{TAG|ENINI}} in steps of 20%, till the norm of the residual vector (column \"rms\") decreases continuously during the first 12 steps.\n\n:The algorithm can be combined with {{TAG|LDIAG}}=.FALSE. to conserve the initial orbital order (when orbitals are read from the {{TAG|WAVECAR}} file).\n\n:A final note concerns the mixing: {{TAG|IALGO}}=48 dislikes too abrupt mixing. Since the RMM-DIIS algorithm always stays in the space spanned by the initial orbitals, and too strong mixing (large {{TAG|AMIX}}, small {{TAG|BMIX}}) might require discontinuous changes of the orbitals, the initial mixing must not be too sizable for {{TAG|IALGO}}=48. Try to reduce {{TAG|AMIX}} and increase {{TAG|BMIX}} if you suspect such a situation. Increasing {{TAG|NBANDS}} also helps in this situation.\n\n== Direct optimization ==\n\n*{{TAG|IALGO}}=53-58: Treat total free energy as variational quantity and minimize the functional completely selfconsistently{{cite|stich:prb:89}}{{cite|gillan:jpc:89}}{{cite|arias:prl:92}}.\n\n:These algorithms have been carefully optimized and should be selected for Hartree-Fock type as well as meta-GGA functionals. The present version is rather stable and robust even for metallic systems.\n\n:Important sub-switches:\n\n:*{{TAG|IALGO}}=53 damped MD with damping term automatically determined by the given time-step ({{TAG|ALGO}}=D).\n:*{{TAG|IALGO}}=54 damped MD (velocity quenched or quickmin)\n:*{{TAG|IALGO}}=58 preconditioned conjugated gradient ({{TAG|ALGO}}=A)\n\n:Furthermore, {{TAG|LSUBROT}} determines whether the subspace rotation matrix (rotation matrix in the space spanned by the occupied and unoccupied orbitals) is optimized. The current default is {{TAG|LSUBROT}}=.FALSE. This allows for efficient groundstate calculations for insulators. When hybrid functionals are used,  {{TAG|LSUBROT}}=.TRUE. can be tried for small gap semiconductors and  metals. This algorithm performs standard SCF steps during the direct optimization steps in order to determine an optimal rotation matrix between occupied and unoccupied orbitals. For hybrid functionals, {{TAG|LSUBROT}}=.TRUE. is generally faster, however, in rare cases, it can lead to instabilities{{cite|kresse:prb:96}}.\n\n:The preconditioned conjugate gradient ({{TAG|IALGO}}= 58, {{TAG|ALGO}}= A) algorithm is recommended for insulators. The best stability is usually obtained if the number of bands equals half the number of electrons (non-spin-polarized case). In this case, the algorithm is fairly robust and foolproof and might even outperform the mixing algorithm.\n\n:For small gap systems and for metals, it is however usually required (metals) or desirable (semiconductors) to use a larger value for {{TAG|NBANDS}}. In this case, we recommend using the damped MD algorithm ({{TAG|IALGO}}=53, {{TAG|ALGO}}=Damped) instead of the conjugate gradient.\n\n:The stability of the all bands simultaneously algorithms depends strongly on the setting of {{TAG|TIME}}. For the conjugate gradient case, {{TAG|TIME}} controls the step size in the trial step, which is required in order to perform a line minimization of the energy along the gradient (or conjugated gradient). Too small steps make the line minimization less accurate, whereas too large steps can cause instabilities. The step size is usually automatically scaled by the actual step size minimizing the total energy along the gradient (values can range from 1.0 for insulators to 0.01 for metals with a large density of states at the Fermi-level).\n\n:For the damped MD algorithm ({{TAG|IALGO}}=53, {{TAG|ALGO}}=Damped), a sensible {{TAG|TIME}} step is even more important. In this case {{TAG|TIME}} is not automatically adjusted, and the user is entirely responsible to choose an appropriate value. Too small time steps slow the convergence significantly, whereas too large values will always lead to divergence. It is sensible to optimize this value, in particular, if many different configurations are considered for a particular system. It is recommended to start with a small step size {{TAG|TIME}}, and to increase {{TAG|TIME}} by a factor 1.2 until the calculations diverge. The largest stable step {{TAG|TIME}} should then be used for all calculations.\nThe damped MD algorithm can be combined with {{TAG|LDIAG}}=.FALSE. to conserve the initial orbital order (when orbitals are read from the {{TAG|WAVECAR}} file).\n\n:The final algorithm {{TAG|IALGO}}=54 also uses a damped molecular dynamics algorithm but quenches the velocities to zero, if they are antiparallel to the present gradient (quick-min). It is usually not as efficient as {{TAG|IALGO}}=53, but it is also less sensitive to the {{TAG|TIME}} parameter.\n\n:'''Mind''': it is very important to set an appropriate {{TAG|TIME}} for these algorithms. Furthermore, it might be expedient to set {{TAG|NELMDL}} to 1 or 2 for molecular dynamics simulations or relaxations in vasp.6. See the corresponding section in the documentation of {{TAG|NELMDL}}. If the ions move by a very large distance during relaxations, even {{TAG|NELMDL}}=3 can be tried (in particular for HF type Hamiltonians).\n\n== Miscellaneous ==\n\n*{{TAG|IALGO}}=-1: Performance test.\n:VASP does not perform an actual calculation, only some important parts of the program will be executed and the timing for each part is printed out at the end.\n\n*{{TAG|IALGO}}=2: Orbitals and one-electron energies are kept fixed.\n:One electron occupancies and electronic density of states (DOS) are, however, recalculated. This option is only useful if a pre-converged {{FILE|WAVECAR}} file is read. The option allows running selected post-processing tasks, such as local DOS, or the interface code to Wannier90.\n\n*{{TAG|IALGO}}=3: Orbitals are kept fixed.\n:One-electron energies, band structure energies, and the electronic density of states (DOS) are, as well as, the total energy are recalculated for the present Hamiltonian (the one-electron occupancies are kept fixed, however). This option is only useful if a pre-converged {{FILE|WAVECAR}} file is read. The option also allows running selected post-processing tasks, such as local DOS, or the interface code to Wannier90.\n\n*{{TAG|IALGO}}=4: Orbitals are updated by applying a sub-space rotation.\n:The Hamiltonian is evaluated in the space spanned by the orbitals (read from {{FILE|WAVECAR}}), and one diagonalization in this space is performed. No optimization outside the subspace spanned by the orbitals is performed. Note: if {{TAG|NBANDS}} is larger or equal to the total number of plane waves, the resulting one-electron orbitals are exact.\n\n*{{TAG|IALGO}}=90: Exact Diagonalization. This flag selects an exact diagonalization of the one-electron Hamiltonian. This requires a fairly large amount of memory and should be selected with caution. Specifically, we recommend selecting this algorithm to prepare the {{FILE|WAVECAR}} for RPA or GW calculations, where many unoccupied orbitals are calculated (more than 30-50 % of the states spanned by the full plane-wave basis). To speed up the calculations, we recommend performing a routine ground-state calculation before calculating the unoccupied states.\n\n== Related tags and articles ==\n{{TAG|ALGO}},\n{{TAG|LSUBROT}},\n{{TAG|NELM}},\n{{TAG|TIME}},\n{{TAG|LDIAG}} \n\n{{sc|IALGO|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2023-05-11T10:25:19Z"}, "NBANDS": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDS\">NBANDS</a> specifies the total number of KS or QP orbitals in the calculation.</span>", "wikicode": "{{TAGDEF|NBANDS|[integer]}}\n{{DEF|NBANDS|max({{TAG|NELECT}}/2+NIONS/2,{{TAG|NELECT}}*0.6)|}}\n\nDescription: {{TAG|NBANDS}} specifies the total number of KS or QP orbitals in the calculation.\n----\nThe right choice of {{TAG|NBANDS}} strongly depends on the type of the performed calculation and the system. As a minimum, VASP requires all occupied states + one empty band, otherwise, a warning is given. \n\n==== Electronic minimization ====\nIn the electronic minimization calculations, empty states do not contribute to the total energy, however, empty states are required to achieve a better convergence. \nIn iterative matrix-diagonalization algorithms (see {{TAG|ALGO}}) eigenvectors close to the top of the calculated number of states converge much slower than the lowest eigenstates, thus it is important to choose a sufficiently large {{TAG|NBANDS}}.  Therefore, we recommend using the default settings for {{TAG|NBANDS}}, i.e.,  ''NELECT/2 + NIONS/2'', which is a safe choice in most cases. In some cases, it is also possible to decrease it to ''NELECT/2+NIONS/4'', however, in some transition metals with open ''f'' shells a much larger number of empty bands might be required (up to ''NELECT/2+2*NIONS'').  To check this parameter perform several calculations for a fixed potential ({{TAG|ICHARG}}=12) with an increasing number of bands (e.g. starting from ''NELECT/2 + NIONS/2''). An accuracy of <math> 10^{-6}</math> should be obtained in 10-15 iterations. \n{{NB|tip|Note that the {{TAG|RMM-DIIS}} scheme ({{TAG|ALGO}}{{=}}Fast) is more sensitive to the number of bands than the default Davidson algorithm ({{TAG|ALGO}}{{=}}Normal) and can require more bands for fast convergence.|}}\n\n==== Many-body perturbation theory calculations ====\nIn the Many-Body Perturbation Theory calculations ([[Practical guide to GW calculations|''GW'']],[[RPA/ACFDT: Correlation energy in the Random Phase Approximation|RPA]], and [[BSE calculations|BSE]]), a large number of empty orbitals is usually required, which can be much higher than the number of occupied states.  The convergence of the calculations with a large number of empty states can be very slow. In such cases, we recommend performing an exact diagonalization ({{TAG|ALGO}}=Exact) of the Hamiltonian with empty bands starting from a converged charge density.\n\n==== Parallelization ====\nWhen executed on multiple CPUs, VASP automatically increases the number of bands, so that {{TAG|NBANDS}} is divisible by the number of CPU cores.  If {{TAG|NCORE}} > 1, {{TAG|NBANDS}} is increased until it is divisible by the number of cores in a group ({{TAG|NCORE}}).  If {{TAG|KPAR}} > 1, {{TAG|NBANDS}} is increased until it is divisible by the number of cores in a group. \n\n==== Spin-polarized calculation ====\nIn the case of spin-polarized calculations, the default value for {{TAG|NBANDS}} is increased to account for the initial magnetic moments.\n\n==== Noncollinear calculation ====\nIn noncollinear calculations, the default {{TAG|NBANDS}} value is doubled to account for the spinors components.\n\n== Related tags and article ==\n{{TAG|NCORE}}, {{TAG|NBANDS}}, {{TAG|NBANDSGW}}, {{TAG|NBANDSV}}, {{TAG|NBANDSO}}, {{TAG|NPAR}},{{TAG|KPAR}} \n\n----\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Dielectric properties]]", "last_revised": "2022-05-30T13:35:27Z"}, "NELECT": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NELECT\">NELECT</a> sets the number of electrons.</span>", "wikicode": "{{TAGDEF|NELECT|[real]|number of valence electrons}}\n\nDescription: {{TAG|NELECT}} sets the number of electrons.\n----\nUsually you should not set this line. The number of electrons is determined automatically from the {{FILE|POTCAR}} (ZVAL of the element) and {{FILE|POSCAR}} file (number of the atoms of the respective atom type).\n\nIf the number of electrons is not compatible with the number derived from the valence and the number of atoms a homogeneous background charge is assumed.\n\nIf the number of ions specified in the {{FILE|POSCAR}} file is 0 and {{TAG|NELECT}}=n, then the energy of a homogeneous LDA-electron gas is calculated.\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|EPSILON}},\n{{TAG|DIPOL}},\n{{TAG|IDIPOL}},\n{{TAG|LMONO}},\n{{TAG|LDIPOL}},\n{{TAG|EFIELD}}\n\n{{sc|NELECT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Linear response]][[Category:Dielectric properties]]", "last_revised": "2022-07-19T07:59:42Z"}, "LREAL": {"datatype": "string", "options": {".FALSE.": null, "Auto (or A)": null, "On (or O)": null, ".TRUE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LREAL\">LREAL</a> determines whether the projection operators are evaluated in real-space or in reciprocal space.</span>", "wikicode": "{{TAGDEF|LREAL|.FALSE. {{!}} Auto (or A) {{!}} On (or O) {{!}} .TRUE. |.FALSE.}}\n\nDescription: {{TAG|LREAL}} determines whether the projection operators are evaluated in real-space or in reciprocal space.\n----\n{|\n|{{TAG|LREAL}}=.FALSE.  || projection done in reciprocal space\n|-\n|{{TAG|LREAL}}=Auto or A|| projection done in real space, fully automatic optimization of projection operators (little to no user interference required)\n|-\n|{{TAG|LREAL}}=On or O  || projection done in real space, projection operators are re-optimized (not recommended)\n|-\n|{{TAG|LREAL}}=.TRUE.   || projection done in real space, use projectors on file (not recommended)\n|}\n\n\nThe non local part of the pseudopotential requires the evaluation of an expression:\n\n\n::<math>\\sum_{ij}D_{ij}|\\beta_j\\rangle\\langle\\beta_i|\\tilde{\\psi}_{n\\mathbf{k}}\\rangle</math>.\n\nwhere the \"projected wavefunction character\" is defined as:\n\n<span id=\"cproj\">\n::<math>\\begin{align}C_{in\\mathbf{k}}=\\langle\\beta_i|\\tilde{\\psi}_{n\\mathbf{k}}\\rangle &=\\frac{\\Omega}{N_{\\rm FFT}}\\sum_{\\mathbf{r}}\\langle\\beta_i|\\mathbf{r}\\rangle\\langle\\mathbf{r}|\\tilde{\\psi}_{n\\mathbf{k}}\\rangle=\\frac{\\Omega}{N_{\\rm FFT}}\\sum_{\\mathbf{r}}\\beta(\\mathbf{r})\\tilde{\\psi}_{n\\mathbf{k}}(\\mathbf{r}) \\\\ &=\\sum_{\\mathbf{G}}\\langle\\beta_i|\\mathbf{k}+\\mathbf{G}\\rangle\\langle\\mathbf{k}+\\mathbf{G}|\\tilde{\\psi}_{n\\mathbf{k}}\\rangle=\\sum_\\mathbf{G}\\bar\\beta(\\mathbf{k}+\\mathbf{G}) C_{\\mathbf{G}n\\mathbf{k}}\\end{align}</math>\n</span>\n\nThis expression can be evaluated in reciprocal or real space: In reciprocal space (second line) the number of operations scales with the size of the basis set (i.e. number of plane waves). In real space (first line) the projection operators are confined to spheres around each atom. Therefore the number of operations necessary to evaluate one C<sub>in'''k'''</sub> does not increase with the system size (usually the number of grid points within the cut-off-sphere is between 500 and 2000). One of the major obstacles to the method working in real space is that the projection operators must be optimized, i.e. all high Fourier components must be removed from the projection operators. If this is not done \"aliasing\" can happen, i.e., the high Fourier components of the projection operators are downfolded to low Fourier components and random noise is introduced).\n\nCurrently, VASP supports three different schemes to remove the high Fourier components from the projectors. {{TAG|LREAL}}=.TRUE. is the simplest one. For {{TAG|LREAL}}=.TRUE., the real space projectors that have been generated by the pseudopotential generation code are used. This requires no user interference but is potentially very inaccurate. For the outdated {{TAG|LREAL}}=On, the real space projectors are optimized by VASP using an algorithm proposed by King-Smith et al.<ref name=\"kingsmith:prb:91\"/> For the recommended {{TAG|LREAL}}=Auto, an unpublished scheme<ref name=\"kresse:tobepublished\"/> is used which  results in simultaneously more accurate and localized projector functions than for the King-Smith et al. method. To fine-tune the optimization procedure the flag {{TAG|ROPT}} can and should be used, if {{TAG|LREAL}}=Auto (or {{TAG|LREAL}}=On) is used. Specifically, perform first reference calculations using {{TAG|LREAL}}=.False. and decrease {{TAG|ROPT}} until an acceptable accuracy of say 1 meV/atom is attained. Please also check carefully the documentation for {{TAG|ROPT}}.\n\nWe recommend using the real-space projection scheme for systems containing more than about 30 atoms. We also strongly recommend using only {{TAG|LREAL}}=Auto.\n\nFor {{TAG|LREAL}}=A (and {{TAG|LREAL}}=O) the projection operators are optimized by VASP on the fly (i.e. on startup). Several flags influence the optimization:\n\n*{{TAG|ENCUT}} (i.e. the energy cutoff), components beyond the energy cutoff are 'removed' from the projection operators.\n\n*{{TAG|PREC}} tag specifies how precise the real space projectors should be and sets the variables {{TAG|ROPT}} accordingly to the following values:\n\n:For {{TAG|LREAL}}=Auto\n::{|\n|{{TAG|PREC}}=Fast || accuracy 2&nbsp;\u00b7&nbsp; 10<sup>-3</sup> ({{TAG|ROPT}}=0.002)\n|-\n|{{TAG|PREC}}=Normal || accuracy 5&nbsp;\u00b7&nbsp;10<sup>-4</sup> ({{TAG|ROPT}}=5E-4)\n|-\n|{{TAG|PREC}}=Accurate|| accuracy 2.5&nbsp;\u00b7&nbsp;10<sup>-4</sup> ({{TAG|ROPT}}=2.5E-4)\n|-\n|{{TAG|PREC}}=Low || accuracy 1&nbsp;\u00b7&nbsp;10<sup>-2</sup> ({{TAG|ROPT}}=0.01)\n|-\n|{{TAG|PREC}}=Med || accuracy 2&nbsp;\u00b7&nbsp;10<sup>-3</sup> ({{TAG|ROPT}}=0.002)\n|-\n|{{TAG|PREC}}=High|| accuracy 2&nbsp;\u00b7&nbsp;10<sup>-4</sup> ({{TAG|ROPT}}=2E-4)\n|}\n\n:For {{TAG|LREAL}}=On\n::{|\n|{{TAG|PREC}}=Low || 700 points in the real space sphere ({{TAG|ROPT}}=0.67)\n|-\n|{{TAG|PREC}}=Med || 1000 points in the real space sphere ({{TAG|ROPT}}=1.0)\n|-\n|{{TAG|PREC}}=High|| 1500 points in the real space sphere ({{TAG|ROPT}}=1.5)\n|}\n\n\n:These defaults can be superseded by specifying the {{TAG|ROPT}} tag in the {{FILE|INCAR}} file.\n\n'''Mind''': Real-space optimization ({{TAG|LREAL}}=Auto) always results in a small (not necessarily negligible) error (the error is usually a constant energy shift for each atom). If you are interested in energy differences of a few meV use only calculations with the same setup (i.e. same {{TAG|ENCUT}}, {{TAG|PREC}}, {{TAG|LREAL}} and {{TAG|ROPT}} setting) for all calculations. For example, if you want to calculate surface or defect energies recalculate the bulk ground-state energy with exactly the same setting you are using for the surface. Another possibility is to relax the structure using real space projection and to perform one final total energy calculation using {{TAG|LREAL}}=.FALSE. to get very precise energies. Anyway, for {{TAG|PREC}}=Normal, the errors introduced by the real space projection are usually of the same order magnitude as those introduced by the wrap-around errors. For {{TAG|PREC}}=Accurate errors are usually less than 1 meV. {{TAG|PREC}}=Fast should be used only for, say, fast molecular-dynamics calculations, if compute resources are really an issue.\n\nWhen the energy cutoff {{TAG|ENCUT\n}} way above their defaults, the real space projection scheme sometimes becomes unreliable, and it might be necessary to decrease ROPT to values as small as {{TAG|ROPT}}= 1E-4. \n\n== Related tags and articles ==\n{{TAG|ROPT}},\n{{TAG|PREC}}\n\n{{sc|LREAL|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kingsmith:prb:91\">[http://link.aps.org/doi/10.1103/PhysRevB.44.13063 R.D. King-Smith, M.C. Payne and J.S. Lin, Phys. Rev B 44, 13063 (1991).]</ref>\n<ref name=\"kresse:tobepublished\">G. Kresse, to be published.</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2023-04-28T14:06:44Z"}, "ROPT": {"datatype": "real array, one entry for each species on the {{file|potcar}} file", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">ROPT</a> determines how accurately the projectors are represented in real space. If <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">LREAL</a>=<span><span class=\"tag-value\">Auto</span> is used, </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">ROPT</a> will be internally set to negative values. If <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">LREAL</a>=<span><span class=\"tag-value\">On</span> is used, </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">ROPT</a> will be internally set to positive values. Whether the user supplies negative or positive values in the INCAR file is irrelevant. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">LREAL</a>=<span><span class=\"tag-value\">On</span> is outdated and should be only used, if compatibility to old calculations is desired. For </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">LREAL</a>=<span><span class=\"tag-value\">On</span>, the real space projectors are optimized using an algorithm proposed by King-Smith et al.</span><ref name=\"kingsmith:prb:91\"></ref> For the recommended <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ROPT\">LREAL</a>=<span><span class=\"tag-value\">Auto</span>, an unpublished scheme</span><ref name=\"kresse:tobepublished\"></ref> is used. This scheme is considerably more accurate resulting in more localized projector functions than for the King-Smith et al. method.</span>", "wikicode": "{{TAGDEF|ROPT|[real array], one entry for each species on the {{FILE|POTCAR}} file}}\n\n{{DEF|ROPT|-0.002|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}Fast|-5E-4|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}Normal|-2.5E-4|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}Accurate|-0.01|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}Low|-0.002|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}Med|-1E-4|if {{TAG|LREAL}}{{=}}Auto and {{TAG|PREC}}{{=}}High}}\n\n{{DEF|ROPT|0.67|if {{TAG|LREAL}}{{=}}On and {{TAG|PREC}}{{=}}Low|1.0|if {{TAG|LREAL}}{{=}}On and {{TAG|PREC}}{{=}}Med|1.5|if {{TAG|LREAL}}{{=}}On and {{TAG|PREC}}{{=}}High}}\n\n\nDescription: {{TAG|ROPT}} determines how accurately the projectors are represented in real space. If {{TAG|LREAL}}{{=}}Auto is used, {{TAG|ROPT}} will be internally set to negative values. If {{TAG|LREAL}}{{=}}On is used, {{TAG|ROPT}} will be internally set to positive values. Whether the user supplies negative or positive values in the INCAR file is irrelevant. {{TAG|LREAL}}{{=}}On is outdated and should be only used, if compatibility to old calculations is desired. For {{TAG|LREAL}}{{=}}On, the real space projectors are optimized using an algorithm proposed by King-Smith et al.<ref name=\"kingsmith:prb:91\"/> For the recommended {{TAG|LREAL}}=Auto, an unpublished scheme<ref name=\"kresse:tobepublished\"/> is used. This scheme is considerably more accurate resulting in more localized projector functions than for the King-Smith et al. method.\n----\nDepending on their value, VASP interprets {{TAG|ROPT}} entries in one of two ways:\n\n*ABS|{{TAG|ROPT}}| &ge; 0.1: \"conventional\"-mode:\n:Sets the number of real space points within the cutoff sphere for a particular species to approximately 1000&times;{{TAG|ROPT}}. So for instance, the line\n\n {{TAG|ROPT}} = 0.7 1.5\n\n:will set the number of real space points within the cutoff sphere for the first species to approximately 700, and that for the second species to 1500.\n\n*ABS|{{TAG|ROPT}}| < 0.1 : \"precision\"-mode:\n\n:In this case, the real-space operators will be optimized for an accuracy of approximately {{TAG|ROPT}} eV/atom.  So, for instance specifying the following line in the {{TAG|INCAR}} file\n\n {{TAG|ROPT}} = 1E-3 1E-3\n\n:tells VASP to optimize the real-space projector operators for species 1 and 2 for an accuracy of approximately 1 meV/atom (10<sup>-3</sup>). The estimate is, however, fairly rough: this means that even if an error of say 0.5 meV/atom is selected, the actual error might well approach 5 meV/atom for transition metals with many electrons. It is recommended to first perform reference calculations using {{TAG|LREAL}}=.FALSE., then switch to {{TAG|LREAL}}=Auto and decrease {{TAG|ROPT}} until the desired accuracy is reached.\n\nThe \"precision\" and \"conventional\" modes may be intermixed, i.e., it is possible to specify\n\n {{TAG|ROPT}} = 0.7 -1E-3\n\nIn this case, the number of real space points within the cutoff sphere for the first species will be approximately 700, whereas the real space projector functions for the second species are optimized for an accuracy of approximately 1 meV. We recommend to use the \"precision\" mode with a target accuracy of around 2x10<sup>-4</sup> - 10<sup>-3</sup> eV/atom.\n\nIf you use the \"conventional\" mode, in which the number of grid points in the real space projection sphere is specified, you have to select {{TAG|ROPT}} carefully, especially if a hard species is mixed with a soft species. In that case the following lines in the {{FILE|OUTCAR}} file must be checked (here is the output for {{TAG|LREAL}}=Auto, however, the one for {{TAG|LREAL}}=On is quite similar)\n\n Optimization of the real space projectors\n maximal supplied QI-value         = 13.98\n optimisation between [QCUT,QGAM] = [  8.81, 17.62] = [ 21.73, 86.94] Ry\n Optimized for a Real-space Cutoff    1.41 Angstroem\n   l    n(q)    QCUT    max X(q) W(low)/X(q) W(high)/X(q)  e(spline)\n   2      6     8.810    59.645    0.61E-03    0.18E-02    0.11E-06\n   2      6     8.810    58.460    0.65E-03    0.19E-02    0.12E-06\n   0      7     8.810    97.683    0.18E-02    0.15E-03    0.13E-06\n   0      7     8.810    53.223    0.17E-02    0.15E-03    0.12E-06\n   1      7     8.810    13.596    0.47E-02    0.65E-02    0.33E-06\n   1      7     8.810     7.885    0.35E-02    0.48E-02    0.25E-06\n\n{{TAG|QCUT}} and {{TAG|QGAM}} are parameters chosen for the generation of this particular PAW dataset (or ultrasoft pseudopotential). The most important information is given in the columns <tt>W(low)/X(q)</tt> and <tt>W(high)/X(q)</tt> for {{TAG|LREAL}}=Auto). In these columns, the values  must be as small as possible. If these values are too large increase the {{TAG|ROPT}} value from the default value (or decrease it if it smaller than 0.1). As a rule of thumb, the maximum allowed value in this column is 10<sup>-3</sup> for {{TAG|PREC}}=Normal. (For {{TAG|PREC}}=Fast or Low errors might be around 10<sup>-2</sup>. If W(q)/X(q) is larger than 10<sup>-2</sup> the errors introduced by the real space projections can be substantial. In this case {{TAG|ROPT}} must be specified in the {{FILE|INCAR}} file to avoid incorrect results. \n\n== Related Tags and Sections ==\n{{TAG|LREAL}}\n\n{{sc|ROPT|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kingsmith:prb:91\">[http://link.aps.org/doi/10.1103/PhysRevB.44.13063 R.D. King-Smith, M.C. Payne and J.S. Lin, Phys. Rev B 44, 13063 (1991).]</ref>\n<ref name=\"kresse:tobepublished\">G. Kresse, to be published.</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Projector-augmented-wave method]]", "last_revised": "2022-04-06T15:47:06Z"}, "AEXX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AEXX\">AEXX</a> specifies the fraction of exact exchange in a Hartree-Fock-type/hybrid-functional calculation.</span>", "wikicode": "{{TAGDEF|AEXX|[real]}}\n{{DEF|AEXX|0.25|if {{TAG|LHFCALC}}{{=}}.TRUE.|0|if {{TAG|LHFCALC}}{{=}}.FALSE.}}\n\nDescription: {{TAG|AEXX}} specifies the fraction of exact exchange in a Hartree-Fock-type/hybrid-functional calculation.\n----\n{{NB|mind|For versions of VASP prior to 6.4.0, {{TAG|ALDAX}} was constrained to be equal to 1.0-{{TAG|AEXX}}. This constraint is lifted since VASP.6.4.0.}}\n{{NB|mind|For {{TAG|AEXX}}{{=}}1.0, VASP switches off correlation by default ({{TAG|ALDAC}}{{=}}0.0, {{TAG|AGGAC}}{{=}}0.0, and {{TAG|AMGGAC}}{{=}}0.0) and thus runs a full Hartree-Fock calculation.}}\n\n== Related tags and articles ==\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n{{TAG|HFSCREEN}},\n[[List_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|AEXX|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T19:55:32Z"}, "AGGAX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AGGAX\">AGGAX</a> is a parameter that multiplies the gradient correction in the GGA exchange functional.</span>", "wikicode": "{{TAGDEF|AGGAX|[real]}}\n{{DEF|AGGAX|1.0-{{TAG|AEXX}} | if {{TAG|LHFCALC}}{{=}}.TRUE. | 1.0 | if {{TAG|LHFCALC}}{{=}}.FALSE.}}\n\nDescription: {{TAG|AGGAX}} is a parameter that multiplies the gradient correction in the GGA exchange functional.\n----\n{{TAG|AGGAX}} can be used as the fraction of gradient correction in the GGA exchange in a Hartree-Fock/GGA hybrid functional. \n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|AGGAX|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-15T21:26:45Z"}, "AGGAC": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AGGAC\">AGGAC</a> is a parameter that multiplies the gradient correction in the GGA correlation functional.</span>", "wikicode": "{{TAGDEF|AGGAC|[real]}}\n{{DEF|AGGAC|1.0 | if {{TAG|LHFCALC}}<math>=</math>.FALSE. or {{TAG|AEXX}}<math>\\neq</math>1.0 | 0.0 | if {{TAG|LHFCALC}}<math>=</math>.TRUE. and {{TAG|AEXX}}<math>=</math>1.0}}\n\nDescription: {{TAG|AGGAC}} is a parameter that multiplies the gradient correction in the GGA correlation functional.\n----\n{{TAG|AGGAC}} can be used as the fraction of gradient correction in the GGA correlation in a Hartree-Fock/DFT hybrid functional. \n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|AGGAC|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T10:22:34Z"}, "ALDAC": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ALDAC\">ALDAC</a> is a parameter that multiplies the LDA correlation functional or the LDA part of the GGA correlation functional. </span>", "wikicode": "{{TAGDEF|ALDAC|[real]}}\n{{DEF|ALDAC|1.0 | if {{TAG|LHFCALC}}<math>=</math>.FALSE. or {{TAG|AEXX}}<math>\\neq</math>1.0 | 0.0 | if {{TAG|LHFCALC}}<math>=</math>.TRUE. and {{TAG|AEXX}}<math>=</math>1.0}}\n\nDescription: {{TAG|ALDAC}} is a parameter that multiplies the LDA correlation functional or the LDA part of the GGA correlation functional. \n----\n{{TAG|ALDAC}} can be used as the fraction of LDA correlation in a Hartree-Fock/DFT hybrid functional. \n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|ALDAC|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-15T21:33:49Z"}, "LHFCALC": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LHFCALC\">LHFCALC</a> specifies whether a Hartree-Fock/DFT hybrid functional type calculation is performed.</span>", "wikicode": "{{TAGDEF|LHFCALC|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: {{TAG|LHFCALC}} specifies whether a Hartree-Fock/DFT hybrid functional type calculation is performed.\n----\nIf one does not specifically request a particular hybrid functional (see {{TAG|AEXX}}, {{TAG|ALDAX}}, {{TAG|ALDAC}}, {{TAG|AGGAX}}, {{TAG|AGGAC}}, {{TAG|AMGGAX}}, {{TAG|AMGGAC}}, and the section on [[list_of_hybrid_functionals|settings for specific hybrid functionals]]) VASP will default to the [[list_of_hybrid_functionals#PBE0|PBE0 hybrid functional]].\n\nIt is recommended to select a \"direct optimization\" algorithm for HF/DFT hybrid functonal type calculations, i.e., {{TAG|ALGO}}=Damped ({{TAG|IALGO}}=53) or {{TAG|ALGO}}=All ({{TAG|IALGO}}=58) in the {{FILE|INCAR}} file.\n\nThe blocked-Davidson algorithm {{TAG|ALGO}}=Normal is, with certain caveat, also supported, whereas calculations for the other algorithms ({{TAG|ALGO}}=Fast) are not properly supported (note: no warning is printed). The blocked-Davidson algorithm ({{TAG|ALGO}}=Normal) is generally rather slow, and in many cases the Pulay mixer will be unable to determine the proper ground-state. We hence recommend to select the blocked-Davidson algorithm only in combination with straight mixing or a Kerker like mixing (see the [[density_mixing|section on mixing]]). The following combination have been successfully applied for small and medium sized systems\n\n {{TAG|LHFCALC}} = .TRUE. ; {{TAG|ALGO}} = Normal ; {{TAG|IMIX}} = 1 ; {{TAG|AMIX}} = a\n\nDecrease the parameter a until convergence is reached.\n\nIn most cases, however, it is recommended to use the \"Damped\" algorithm with suitably chosen timestep. The following setup for the electronic optimization works reliably in most cases:\n\n {{TAG|LHFCALC}} = .TRUE. ; {{TAG|ALGO}} = Damped ; {{TAG|TIME}} = 0.5\n\nIf convergence is not obtained, it is recommended to reduce the timestep {{TAG|TIME}}.\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|HFSCREEN}},\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n{{sc|LHFCALC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T10:12:21Z"}, "TIME": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TIME\">TIME</a> controls the time step for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TIME\">IALGO</a>=<span><span class=\"tag-value\">5X</span> and for the initial (steepest descent) phase of </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TIME\">IALGO</a>=<span><span class=\"tag-value\">4X</span>.</span></span>", "wikicode": "{{TAGDEF|TIME|[real]|0.4}}\n\nDescription: {{TAG|TIME}} controls the time step for {{TAG|IALGO}}=5X and for the initial (steepest descent) phase of {{TAG|IALGO}}=4X.\n----\n== Related tags and articles ==\n{{TAG|IALGO}}\n\n{{sc|TIME|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-08T14:55:08Z"}, "LMAXFOCK": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMAXFOCK\">LMAXFOCK</a> sets the maximum angular momentum quantum number <i>L</i> for the augmentation of charge densities in Hartree-Fock type routines.</span>", "wikicode": "{{TAGDEF|LMAXFOCK|[integer]|4}}\n\nDescription: {{TAG|LMAXFOCK}} sets the maximum angular momentum quantum number ''L'' for the augmentation of charge densities in Hartree-Fock type routines.\n----\nIn the [[Projector-augmented-wave_formalism|PAW method]], the difference between the charge density of the all-electron partial waves <math>\\phi_\\beta</math> and\nthe pseudo partial waves <math>\\tilde \\phi_\\beta</math>\n\n<math>\nQ_{\\alpha\\beta}({\\mathbf r})= \\phi^*_\\alpha({\\mathbf r})\\phi_\\beta({\\mathbf r})  - \\tilde \\phi^*_\\alpha({\\mathbf r})\\tilde \\phi_\\beta({\\mathbf r})\n</math>\n\nis usually treated on spherical grids centered at each atom\n(one-center terms inside the PAW spheres, see [[Projector-augmented-wave_formalism|PAW method]]). To describe long range electrostatic effects, the ''moments'' of the differences of the all-electron and pseudo charge density \nalso need to be added on the plane wave grid (compensation density, see [[Projector-augmented-wave_formalism|PAW method]]).\nThese compensation charges exactly restore the moments of the all-electron density on the plane wave\ngrid. For the charge densities used in the Hartree and DFT term, \nthe augmentation is done exactly up to the maximum ''L'' quantum number required by the POTCAR files, \nwhereas for the Fock exchange, for reasons of efficiency, \nthe augmentation on the plane wave grid is controlled by {{TAG|LMAXFOCK}}.\n\nSpecifically, when the  exchange energy is evaluated\n\n<span id=\"ExFock\">\n:<math>\nE_{\\mathrm{x}}= -\\frac{e^2}{2}\\sum_{n\\mathbf{k},m\\mathbf{q}} \nf_{n\\mathbf{k}} f_{m\\mathbf{q}} \\times \n\\int\\int d^3\\mathbf{r} d^3\\mathbf{r}'\n\\frac{\\psi_{n\\mathbf{k}}^{*}(\\mathbf{r})\\psi_{m\\mathbf{q}}^{*}(\\mathbf{r}')\n\\psi_{n\\mathbf{k}}(\\mathbf{r}')\\psi_{m\\mathbf{q}}(\\mathbf{r})}\n{\\vert \\mathbf{r}-\\mathbf{r}' \\vert}\n</math>\n</span>\n\nthe overlap density <math> \\psi_{n\\mathbf{k}}^{*}(\\mathbf{r})\\psi_{m\\mathbf{q}}(\\mathbf{r}) </math>\nbetween two Bloch orbitals needs to be calculated on the plane wave grid (see [[Projector-augmented-wave_formalism|PAW method]]). The tag {{TAG|LMAXFOCK}}\ncontrols up to which ''L'' quantum number, the compensation charge <math>\\widehat{n}(\\mathbf{r})</math> is calculated on the plane wave grid (compared [[Projector-augmented-wave_formalism|PAW method]] compensation charge):\n\n<math>\n  \\widehat{n}(\\mathbf{r}) = \\sum_{\\alpha,\\beta,LM} \\widehat{Q}_{\\alpha,\\beta}^{LM}(\\mathbf{r})\\,\n              \\langle \\widetilde{\\psi}_{nk} | \\widetilde{p}_{\\alpha} \\rangle\n              \\langle \\widetilde{p}_{\\beta} | \\widetilde{\\psi}_{mk} \\rangle.\n</math>\n\nTo accelerate convergence with respect to {{TAG|LMAXFOCK}}, VASP uses a small trick: the contributions from the Hartree-Fock one-center terms are evaluated for the pseudo orbitals also only up to ''L''={{TAG|LMAXFOCK}}, whereas the one-center terms for the exact all-electron orbitals are evaluated up to the maximum required ''L'' (twice the angular quantum number of the partial wave with the highest ''l''). The default is {{TAG|LMAXFOCK}}=4, and it might be necessary to increase this parameter, if the system contains f-electrons. Since this increases the computational load considerably (about factor 2), it is recommended to perform tests, whether the results are already reasonably converged using the default {{TAG|LMAXFOCK}}=4.\n\nTo be compatible w.r.t. old releases, VASP also reads the flag {{TAG|HFLMAX}} to the same effect as {{TAG|LMAXFOCK}}.\n\n== Related tags and articles ==\n{{TAG|HFLMAX}},\n{{TAG|LMAXFOCKAE}}\n\n{{sc|LMAXFOCK|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-05-18T12:44:31Z"}, "LMAXFOCKAE": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NMAXFOCKAE\">NMAXFOCKAE</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NMAXFOCKAE\">LMAXFOCKAE</a> determine whether </span>", "wikicode": "#REDIRECT [[NMAXFOCKAE and LMAXFOCKAE]]\n\n{{TAGDEF|LMAXFOCKAE|[integer]}}\n{{DEF|LMAXFOCKAE|-1|for Hartree-Fock and hybrid functionals |   4 | for post DFT methods}}\n\nDescription: {{TAG|NMAXFOCKAE}} and {{TAG|LMAXFOCKAE}} determine whether \nthe overlap densities in the Fock exchange and correlated wave function methods are accurately reconstructed on the plane wave grid. This flag generally only applies to the Fock-exchange part as well as many-body\npost DFT methods (GW, RPA, MP2, etc.). \n\n----\nIn the PAW method, the difference between the charge density of the all-electron partial waves <math>\\phi_\\beta</math> and\nthe pseudo partial waves <math>\\tilde \\phi_\\beta</math>\n<math>\nQ_{\\alpha\\beta}(r)= \\phi^*_\\alpha(r)\\phi_\\beta(r)  - \\tilde \\phi^*_\\alpha(r)\\tilde \\phi_\\beta(r)\n</math>\nis usually restored on spherical grids centered at each atom\n(one-center terms inside the PAW spheres).  To describe long range electrostatic effect, the ''moments'' of the differences of the all-electron and pseudo charge density \nalso need to added to the pseudo density on the plane wave grid. This is done up to a certain ''l'' quantum number.\nThese augmentation charges exactly restore the moments of the all-electron density on the plane wave\ngrid. For the charge densities used in the Hartree and DFT term, \nthis augmentation is done exactly up to the maximum ''l'' quantum number required by the POTCAR files, \nwhereas for the Fock exchange,  the augmentation on the plane wave grid is controlled by {{TAG|LMAXFOCK}}.\n\nFor the RPA, GW, and most post DFT methods, the one-center terms are, however, presently\nnot implemented. Depending on the material, this can cause sizable errors\nin particular for 3d and (to a lesser extent) 2p, 4d and 5d elements.\nTo correct for this error, an alternative treatment is implemented\non the plane wave grid. This  allows to restore the all-electron densities accurately on the plane wave grid\ninstead of the one-center grids by specifying the flags {{TAG|LMAXFOCKAE}} and {{TAG|NMAXFOCKAE}}.\n\nTo achieve this improved treatment on the plane wave grid, <math> Q_{\\alpha\\beta}(r) </math> is Fourier transformed  to reciprocal space <math> Q_{\\alpha\\beta}(q) </math> and then expanded\nin a set of orthogonal functions localized at each atomic site. These augmentation charges\nare then added to the pseudo charge densities on the plane wave grid.\n\n\nFor {{TAG|LMAXFOCKAE}}=-1 (the default for DFT and Hartree-Fock calculations), only the moments of the all-electron charge densities are restored on the plane wave grid. This setting is exact for Hartree-Fock \nsince the one-center terms are implemented. \n\nIf {{TAG|LMAXFOCKAE}} is set to values larger than -1 (and {{TAG|NMAXFOCKAE}}=1), not only the moments of the all-electron charge density are restored, but also the all-electron charge density is restored up to a typical plane wave energy of 140 eV. This setting yields very accurate results for post DFT methods (MP2, RPA, GW, etc.) for most sp bonded materials.  {{TAG|LMAXFOCKAE}} is used to specify the maximum spherical (l) quantum number up \nto which this more accurate treatment is used. The default is {{TAG|LMAXFOCKAE}}=4 for post DFT methods.\nIf no accurate augmentation is desired by the user, simply set {{TAG|LMAXFOCKAE}}=-1 in the INCAR file.\n\nIf {{TAG|LMAXFOCKAE}} is set to values larger than -1 and {{TAG|NMAXFOCKAE}}=2, the charge density is restored accurately on the plane wave grid up to a typical plane wave energy of 380 eV. As before,  {{TAG|LMAXFOCKAE}} can be used to specify the maximum spherical (l) quantum number up \nto which this more accurate treatment is used.  {{TAG|NMAXFOCKAE}}=2 yields very accurate results for \npost DFT methods (MP2, RPA, GW) even for difficult 3d elements. For RPA and MP2 total energy calculations, differences between {{TAG|NMAXFOCKAE}}=1 and {{TAG|NMAXFOCKAE}}=2 are usually tiny for total energy differences. Since the absolute correlation energies might change, it is vital to use the same setting for\n{{TAG|NMAXFOCKAE}} and {{TAG|LMAXFOCKAE}}, if energy differences are calculated. \nFor GW calculations, increasing  {{TAG|NMAXFOCKAE}} from 1 to 2 might change QP energies by 100-200 meV for 3d and late 4d and 5d elements.\n\n\nThe setting for {{TAG|LMAXFOCKAE}} should be also considered carefully. Generally, it suffices to set {{TAG|LMAXFOCKAE}} to twice the maximum ''l'' quantum number found in the {{FILE|POTCAR}} file.\nFor instance for sp elements, {{TAG|LMAXFOCKAE}} = 2 suffices. For d elements, {{TAG|LMAXFOCKAE}} = 4 suffices\n(a d electron can create charge densities with ''l''-quantum numbers up to 4), whereas for f elements, users\nshould test whether  {{TAG|LMAXFOCKAE}} = 6 is required.\n\nIn summary, useful manual settings of {{TAG|NMAXFOCKAE}}  and {{TAG|LMAXFOCKAE}} are:\n*  {{TAG|LMAXFOCKAE}}=-1, to switch off the accurate augmentation altogether \n* {{TAG|LMAXFOCKAE}}=4 (or larger) to force an accurate treatment for the charge augmentation on the plane wave grid (can be selected even in Hartree-Fock type calculations).\n* {{TAG|NMAXFOCKAE}}=2, to select the very accurate augmentation on the plane wave grid. Please check whether the VASP default setting for {{TAG|LMAXFOCKAE}} suffices (OUTCAR file).\n\n\n== Related tags and articles ==\n{{TAG|LMAXFOCK}}, {{TAG|NMAXFOCKAE}}, {{TAG|QMAXFOCKAE}}, {{TAG|LFOCKAEDFT}}\n----\n\n[[Category:INCAR tag]][[Category:Hybrids]][[Category:GW]]", "last_revised": "2022-04-08T14:38:52Z"}, "HFSCREEN": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFSCREEN\">HFSCREEN</a> (in \u00c5<sup>-1</sup>) specifies the range-separation parameter in <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AHybrid_functionals\">range separated hybrid functionals</a>.</span>", "wikicode": "{{TAGDEF|HFSCREEN|[real]|0 (none)}}\n\nDescription: {{TAG|HFSCREEN}} (in &Aring;<sup>-1</sup>) specifies the range-separation parameter in [[:Category:Hybrid_functionals|range separated hybrid functionals]].\n----\nIn case {{TAG|LHFCALC}}=.TRUE., in combination with PBE potentials (or {{TAG|GGA}}=PE), attributing a value to {{TAG|HFSCREEN}} will switch from the PBE0 functional to e.g., the closely related [[list_of_hybrid_functionals#HSE03|HSE03]] ({{TAG|HFSCREEN}}=0.3) or [[list_of_hybrid_functionals#HSE06|HSE06]] ({{TAG|HFSCREEN}}=0.2) functionals.\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|LTHOMAS}},\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n{{sc|HFSCREEN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T10:23:34Z"}, "EDIFFG": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EDIFFG\">EDIFFG</a> defines the break condition for the ionic relaxation loop.</span>", "wikicode": "{{TAGDEF|EDIFFG|[real]|{{TAG|EDIFF}}&times;10}}\n\nDescription: {{TAG|EDIFFG}} defines the break condition for the ionic relaxation loop.\n----\nWhen {{TAG|EDIFFG}} is positive, the relaxation is stopped when the change of the total energy is smaller than {{TAG|EDIFFG}} between two ionic steps.\n\nWhen {{TAG|EDIFFG}} is negative, the relaxation is stopped when the norms of all the forces are smaller than |{{TAG|EDIFFG}}|. This is usually a more convenient setting.\n\nIf {{TAG|EDIFFG}} = 0, the ionic relaxation is stopped after {{TAG|NSW}} steps.\n{{NB|warning|{{TAG|EDIFFG}} does not apply to [[:Category:Molecular dynamics|molecular-dynamics]] simulations.}}\n\n== Related tags and articles ==\n{{TAG|EDIFF}}\n\n{{sc|EDIFFG|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Forces]][[Category:Ionic minimization]]", "last_revised": "2022-04-07T15:31:51Z"}, "GGA": {"datatype": "string", "options": {"PE": null, "RP": null, "PS": null, "AM": null, "LIBXC": null, "...": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/GGA\">GGA</a> specifies a LDA or GGA exchange-correlation functional.</span>", "wikicode": "{{TAGDEF|GGA|PE {{!}} RP {{!}} PS {{!}} AM {{!}} LIBXC {{!}} ...| exchange-correlation functional in accordance with the {{FILE|POTCAR}} file}}\n\nDescription: {{TAG|GGA}} specifies a LDA or GGA exchange-correlation functional.\n----\nThis tag was added to perform GGA calculations with pseudopotentials generated with conventional LDA reference configurations.\n{{NB| important| VASP recalculates the exchange-correlation energy inside the PAW sphere and corrects the atomic energies given by the {{FILE|POTCAR}} file. For this to work, the original LEXCH tag must not be modified in the {{FILE|POTCAR}} file.}}\n\nA few points should be noted:\n*The LIBXC option (or just LI) allows to use a LDA or GGA functional from the library of exchange-correlation functionals Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}}. Along with {{TAG|GGA}}=LIBXC, it is also necessary to specify the {{TAG|LIBXC1}} and {{TAG|LIBXC2}} tags that specify the particular functional. Note that it is necessary to have [[Makefile.include#Libxc_.28optional.29|Libxc >= 5.2.0 installed]] and VASP.6.3.0 or higher compiled with [[Precompiler_options#-DUSELIBXC|precompiler options]].\n*When the OR, BO, MK, ML or CX GGA is used in combination with the nonlocal vdW-DF functional of Dion ''et al.''{{cite|dion:prl:2004}}, the GGA component of the correlation should in principle be turned off with {{TAG|AGGAC}}=0 (see {{TAG|nonlocal vdW-DF functionals}}).\n<!--\n*The options in the last table allow to select range-separated ACFDT calculations, where a short-range local (DFT-like) exchange and correlation kernel is added to the long-range exchange and RPA correlation energy.\n-->\n\nThe possible options for the {{TAG|GGA}} tag are:\n<!--\n:'''No functional:'''\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n|-\n|CO  || No exchange-correlation\n|-\n|}\n-->\n\n:'''LDA functionals:'''\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n|CA (or PZ)  || Slater exchange{{cite|dirac:mpcps:1930}} + Perdew-Zunger parametrization of Ceperley-Alder Monte-Carlo correlation data{{cite|ceperley1980}}{{cite|perdewzunger1981}}\n|-\n|VW  || Slater exchange{{cite|dirac:mpcps:1930}} + Vosko-Wilk-Nusair correlation (VWN5){{cite|vosko1980}}\n|-\n|HL  || Slater exchange{{cite|dirac:mpcps:1930}} + Hedin-Lundqvist correlation{{cite|hedin1971}}\n|-\n|WI  || Slater exchange{{cite|dirac:mpcps:1930}} + Wigner correlation{{cite|Wigner:tfs:1938}} (Eq. (3.2) in Ref. {{cite|pines:ssp:1955}})\n|-\n|LIBXC (or LI)  || Any LDA from Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}} (the {{TAG|LIBXC1}} and {{TAG|LIBXC2}} tags are also required)\n|-\n|}\n\n:'''GGA functionals:'''\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n<!-- these first three options have been obsolete since VASP.4.X\n|PB  || Perdew - Becke\n|-\n|PW  || Perdew - Wang 86\n|-\n|LM  || Langreth-Mehl-Hu\n|- -->\n|LIBXC (or LI)  || Any GGA from Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}} (the {{TAG|LIBXC1}} and {{TAG|LIBXC2}} tags are also required)\n|-\n|91  || Perdew-Wang (PW91){{cite|perdew:prb:1991}}\n|-\n|PE  || Perdew-Burke-Ernzerhof (PBE){{cite|perdew:prl:1996}}\n|-\n|RE  || Revised PBE from Zhang and Yang (revPBE){{cite|zhang1998}}\n|-\n|RP  || Revised PBE from Hammer et al. (RPBE){{cite|hammer1999}}\n|-\n|PS  || Revised PBE for solids (PBEsol){{cite|perdew:prl:08}}\n|-\n|AM  || Armiento-Mattson (AM05){{cite|armiento:prb:05}}{{cite|mattson:jcp:08}}{{cite|mattson:prb:09}}\n|-\n|B3  || B3LYP{{cite|stephens:jpc:1994}} with VWN3{{cite|vosko1980}} for LDA correlation\n|-\n|B5  || B3LYP{{cite|stephens:jpc:1994}} with VWN5{{cite|vosko1980}} for LDA correlation\n|-\n|BF  || BEEF (requires VASP compiled with [[Precompiler_options#-Dlibbeef|-Dlibbeef]]){{cite|beef2012}}\n|-\n|Designed to be combined with {{TAG|nonlocal vdW-DF functionals}}: ||\n|-\n|OR  || optPBE exchange{{cite|klimes:jpcm:2010}} + PBE correlation{{cite|perdew:prl:1996}}\n|-\n|BO (with {{TAGBL|PARAM1}}=0.1833333333 and {{TAGBL|PARAM2}}=0.22)  || optB88 exchange{{cite|klimes:jpcm:2010}} + PBE correlation{{cite|perdew:prl:1996}}\n|-\n|MK  || optB86b exchange{{cite|klimes:prb:2011}} + PBE correlation{{cite|perdew:prl:1996}}\n|-\n|ML  || PW86R exchange{{cite|lee:prb:2010}} + PBE correlation{{cite|perdew:prl:1996}}\n|-\n|CX  || CX (LV-PW86r) exchange{{cite|berland:prb:2015}} + PBE correlation{{cite|perdew:prl:1996}}\n|-\n|}\n\n<!--\n:'''Short-range functionals for range-separated ACFDT-RPA (WARNING: not extensively tested and should be used only after careful inspection of the source code):'''\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n|-\n|RA  || New RPA Perdew-Wang\n|-\n|PL  || New RPA+ Perdew-Wang\n|-\n|03  || Range-separated ACFDT (LDA - sr RPA) <math>\\mu=0.3~\\AA^3</math> \n|-\n|05  || Range-separated ACFDT (LDA - sr RPA) <math>\\mu=0.5~\\AA^3</math>\n|-\n|10  || Range-separated ACFDT (LDA - sr RPA) <math>\\mu=1.0~\\AA^3</math> \n|-\n|20  || Range-separated ACFDT (LDA - sr RPA) <math>\\mu=2.0~\\AA^3</math>\n|}\n-->\n\n== Related tags and articles ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC2}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|METAGGA}}\n\n{{sc|GGA|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]]", "last_revised": "2023-03-07T14:19:12Z"}, "ADDGRID": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ADDGRID\">ADDGRID</a> determines whether an additional support grid is used for the evaluation of the augmentation charges.</span>", "wikicode": "{{TAGDEF|ADDGRID|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: {{TAG|ADDGRID}} determines whether an additional support grid is used for the evaluation of the augmentation charges.\n----\nWhen {{TAG|ADDGRID}}=.TRUE. VASP uses an additional support grid for the evaluation of the augmentation charges. This grid contains 8 times more points than the standard \"fine\" grid ({{TAG|NGXF}}&times;{{TAG|NGYF}}&times;{{TAG|NGZF}}). Whenever terms involving augmentation charges are evaluated, this additional grid is used. For instance: The augmentation charge is evaluated first in real space on this additional grid, FFT-transformed to reciprocal space, and then added to the total charge density on the standard \"fine\" grid ({{TAG|NGXF}}&times;{{TAG|NGYF}}&times;{{TAG|NGZF}}). The additional grid often helps to reduce the noise in the forces. In some cases, it even allows to perform calculations with {{TAG|NGXF}}={{TAG|NGX}}. \n\nCaveat:\nIf there is any contribution in the density or potential at the highest Fourier component <math>G</math> of\nthe conventional fine grid (given by {{TAG|NGXF}}&times;{{TAG|NGYF}}&times;{{TAG|NGZF}}), then Fourier interpolation to twice the grid density leads to\noscillations in real space. These oscillations correspond to the largest wave vector <math> G_{cut} </math> i.e. <math>e^{i G_{cut} r}</math>.\nIn real space, the charge density or potential will therefore alternate between positive and negative\nvalues on the ultra-fine grid, in particular, in regions where the density or potential are small.\nThe terminus techniques is \"termination wiggles\".\nAlthough this is a somewhat oversimplified presentation, it is fairly straightforward to derive more rigorous results in 1D. \nThe upshot is that Fourier-interpolation can lead to termination wiggles with oscillations <math>e^{i G_{cut} r}</math> in the interpolated potential   (where <math> G_{cut}</math> corresponds to\nthe largest Fourier components on the fine grid). Fourier smoothing, which is in essence used for the augmentation densities, is generally less problematic, but it can also result in negative density in real space.\nTherefore, we recommend performing careful tests, on whether {{TAG|ADDGRID}} works as desired; please do not use this tag as default in all your calculations!\n\n{{sc|ADDGRID|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-04-08T14:05:26Z"}, "LMAXPAW": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMAXPAW\">LMAXPAW</a> sets the maximum <i>l</i> -quantum number for the evaluation of the one-center terms on the radial support grids in the PAW method. </span>", "wikicode": "{{TAGDEF|LMAXPAW|[integer]|2''l''<sub> max</sub>, where ''l''<sub> max</sub> is the maximum angular quantum number of the PAW partial waves in the {{FILE|POTCAR}} file.}}\n\nDescription: {{TAG|LMAXPAW}} sets the maximum ''l'' -quantum number for the evaluation of the one-center terms on the radial support grids in the PAW method. \n----\nUseful settings for LMAXPAW are for instance:\n\n {{TAG|LMAXPAW}}= 0\nIn this case, only spherical terms are evaluated on the radial grid. This does not mean that aspherical terms are totally neglected, because the compensation charges are always expanded up to 2''l''<sub> max</sub>  on the plane wave grid.\n\n {{TAG|LMAXPAW}}=-1 \nFor {{TAG|LMAXPAW}}=-1, no one-center correction terms are evaluated on the radial support grid, which effectively means that the behavior of US-PP's is recovered with PAW input datasets. Usually, this allows for somewhat faster calculations, and this switch might be of interest for relaxations and molecular dynamics runs. Energies should be evaluated with the default setting for {{TAG|LMAXPAW}}. For spinpolarized calculations, results using LMAXPAW=-1 might differ significantly from conventional PAW calculations, hence the use of  LMAXPAW=-1  is not recommended for magnetic materials, spin-polarized molecules or atoms.\n\n{{sc|LMAXPAW|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-11-10T13:02:32Z"}, "AMIX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMIX\">AMIX</a> specifies the linear mixing parameter.</span>", "wikicode": "{{TAGDEF|AMIX|[real]}}\n{{DEF|AMIX|0.8|if {{TAG|ISPIN}}{{=}}1 and one uses US-PPs|0.4|if {{TAG|ISPIN}}{{=}}2 and one uses US-PPs|0.4|if one uses PAW datasets}}\n\nDescription: {{TAG|AMIX}} specifies the linear mixing parameter.\n----\nIn VASP the eigenvalue spectrum of the charge dielectric matrix is calculated and written to the {{FILE|OUTCAR}} file at each electronic step. This allows a rather easy optimization of the mixing parameters, if required. Search in the {{FILE|OUTCAR}} file for\n eigenvalues of (default mixing * dielectric matrix)\nThe parameters for the mixing are optimal if the mean eigenvalue &Gamma;<sub>mean</sub>=1, and if the width of the eigenvalue spectrum is minimal. For an initial linear mixing ({{TAG|BMIX}}&asymp;0) an optimal setting for {{TAG|AMIX}} can be found easily by setting {{TAG|AMIX}}<sub>optimal</sub>={{TAG|AMIX}}<sub>current</sub>*&Gamma;<sub>mean</sub>. For the Kerker scheme ({{TAG|IMIX}}=1) either {{TAG|AMIX}} or {{TAG|BMIX}} can be optimized, but we recommend to change only {{TAG|BMIX}} and keep {{TAG|AMIX}} fixed (you must decrease {{TAG|BMIX}} if the mean eigenvalue is larger than one, and increase {{TAG|BMIX}} if the mean eigenvalue &Gamma;<sub>mean</sub><1).\nHowever, the optimal {{TAGBL|AMIX}} depends very much on the system, for metals this parameter usually has to be rather small, e.g. AMIX= 0.02.\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|AMIX|Examples|Examples that use this tag}}\n\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:07:23Z"}, "BMIX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX\">BMIX</a> sets the cutoff wave vector for Kerker mixing scheme<ref name=\"kerker:prb:81\"></ref> (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX\">IMIX</a>=<span><span class=\"tag-value\">1</span> and/or </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX\">INIMIX</a>=<span><span class=\"tag-value\">1)</span>.</span></span>", "wikicode": "{{TAGDEF|BMIX|[real]|1.0}}\n\nDescription: {{TAG|BMIX}} sets the cutoff wave vector for Kerker mixing scheme<ref name=\"kerker:prb:81\"/> ({{TAG|IMIX}}=1 and/or {{TAG|INIMIX}}=1).\n----\nThe mixed density is given by\n::<math>\\rho_{\\rm mix}\\left(G\\right)=\\rho_{\\rm in}\\left(G\\right)+A \\frac{G^2}{G^2+B^2}\\Bigl(\\rho_{\\rm out}\\left(G\\right)-\\rho_{\\rm in}\\left(G\\right)\\Bigr)</math>\nwith <math>A</math>={{TAG|AMIX}} and <math>B</math>={{TAG|BMIX}}\n\nIn VASP the eigenvalue spectrum of the charge dielectric matrix is calculated and written to the {{FILE|OUTCAR}} file at each electronic step. This allows a rather easy optimization of the mixing parameters, if required. Search in the {{FILE|OUTCAR}} file for\n eigenvalues of (default mixing * dielectric matrix)\nThe parameters for the mixing are optimal if the mean eigenvalue &Gamma;<sub>mean</sub>=1, and if the width of the eigenvalue spectrum is minimal. For an initial linear mixing ({{TAG|BMIX}}&asymp;0) an optimal setting for {{TAG|AMIX}} can be found easily by setting {{TAG|AMIX}}<sub>optimal</sub>={{TAG|AMIX}}<sub>current</sub>*&Gamma;<sub>mean</sub>. For the Kerker scheme ({{TAG|IMIX}}=1) either {{TAG|AMIX}} or {{TAG|BMIX}} can be optimized, but we recommend to change only {{TAG|BMIX}} and keep {{TAG|AMIX}} fixed (you must decrease {{TAG|BMIX}} if the mean eigenvalue is larger than one, and increase {{TAG|BMIX}} if the mean eigenvalue &Gamma;<sub>mean</sub><1).\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|BMIX|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kerker:prb:81\">[http://link.aps.org/doi/10.1103/PhysRevB.23.3082 G. P. Kerker, Phys. Rev. B 23, 3082 (1981).]</ref>\n</references>\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:07:49Z"}, "IMIX": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IMIX\">IMIX</a> specifies the type of <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3ADensity_mixing\">density mixing</a>.</span>", "wikicode": "{{TAGDEF|IMIX|0 {{!}} 1 {{!}} 2 {{!}} 4|4}}\n\nDescription: {{TAG|IMIX}} specifies the type of [[:Category:Density mixing|density mixing]].\n----\n=={{TAG|IMIX}}=0: No mixing ==\n::<math>\\rho_{\\rm mix}=\\rho_{\\rm out}\\,</math>\n=={{TAG|IMIX}}=1: Kerker mixing==\n:For Kerker mixing<ref name=\"kerker:prb:81\"/>, the mixed density is given by\n::<math>\\rho_{\\rm mix}\\left(G\\right)=\\rho_{\\rm in}\\left(G\\right)+A \\frac{G^2}{G^2+B^2}\\Bigl(\\rho_{\\rm out}\\left(G\\right)-\\rho_{\\rm in}\\left(G\\right)\\Bigr)</math>\n:with <math>A</math>={{TAG|AMIX}} and <math>B</math>={{TAG|BMIX}}. If {{TAG|BMIX}} is very small, e.g., {{TAG|BMIX}}=0.0001, a straight mixing is obtained. \n{{NB|mind|{{TAG|BMIX}}{{=}}0 might cause floating-point exceptions on some platforms.|:}}\n=={{TAG|IMIX}}=2: Variant of Tchebycheff mixing==\n:VASP uses a variant of the popular Tchebycheff-mixing scheme<ref name=\"akai:jpc:85\"/>. Here, the following second order equation of motion is used:\n::<math>\\ddot{\\rho}_{\\rm in}\\left(G\\right) = 2*A \\frac{G^2}{G^2+B^2}\\Bigl(\\rho_{\\rm out}\\left(G\\right)-\\rho_{\\rm in}\\left(G\\right)\\Bigr)-\\mu \\dot{\\rho}_{\\rm in}\\left(G\\right)</math>\n:with <math>A</math>={{TAG|AMIX}}, <math>B</math>={{TAG|BMIX}}, and <math>\\mu</math>={{TAG|AMIN}}. A velocity Verlet algorithm is used to integrate this equation. The discretized equation reads: \n::<math>\\dot{\\rho}_{N+1/2} =  \\Bigl(\\left(1-\\mu/2\\right) \\dot{\\rho}_{N-1/2} + 2*F_N \\Bigr)/\\left(1+\\mu/2\\right)</math>\n:where\n::<math>F\\left(G\\right)=A\\frac{G^2}{G^2+B^2} \\Bigl(\\rho_{\\rm out}\\left(G\\right)-\\rho_{\\rm in}\\left(G\\right)\\Bigr)</math>\n:and\n::<math>\\rho_{N+1}=\\rho_{N+1}+\\dot{\\rho}_{N+1/2}</math>,\n:where the index ''N'' is the electronic iteration, and ''F'' is the force acting on the charge.\n\n:For {{TAG|BMIX}}&asymp;0, no model for the dielectric matrix is used. For <math>\\mu=2</math> a simple straight mixing is obtained. Therefore, <math>\\mu=2</math> corresponds to maximal damping, while <math>\\mu=0</math> implies no damping. To determine the optimal parameters for <math>\\mu</math> and {{TAG|AMIX}}, first converge to the ground state with the Pulay mixer ({{TAG|IMIX}}=4). Then, search for the the eigenvalues of the charge-dielectric matrix in the {{FILE|OUTCAR}} file at the last occurrence of\n eigenvalues of (default mixing * dielectric matrix)\n:The optimal parameters are then given by:\n::{|\n|{{TAG|AMIX}}|| ||<math>={\\rm AMIX}({\\rm as\\; used\\; in\\; Pulay\\; run})*{\\rm smallest\\; eigenvalue}</math>\n|-\n|{{TAG|AMIN}}|| ||<math>=\\mu=2\\sqrt{{\\rm smallest\\; eigenvalue}/{\\rm largest\\; eigenvalue}}</math>\n|}\n\n=={{TAG|IMIX}}=4: Broyden's 2<sup>nd</sup> method and Pulay-mixing method (default) ==\n:For {{TAG|WC}}=0, VASP uses Broyden's 2<sup>nd</sup> method,<ref name=\"bluegel:thesis:88\"/><ref name=\"johnson:prb:88\"/> and, for {{TAG|WC}}>0, VASP uses Pulay-mixing method<ref name=\"pulay:cpl:80\"/>.\n:The default is a Pulay mixer with an initial approximation for the charge-dielectric function according to Kerker<ref name=\"kerker:prb:81\"/>\n::<math>A\\times\\min\\left(\\frac{G^2}{G^2+B^2},A_{\\rm min}\\right)</math>\n:where <math>A</math>={{TAG|AMIX}}, <math>B</math>={{TAG|BMIX}}, and <math>A_{\\rm min}</math>={{TAG|AMIN}}.\n\n:{{TAG|AMIN}}=0.4 usually yields good convergence. {{TAG|AMIX}} strongly depends on the system, for instance, it should be small, e.g., {{TAG|AMIX}}= 0.02, for metals.\n:In the Broyden scheme, the functional form of the initial mixing matrix is determined by {{TAG|AMIX}} and {{TAG|BMIX}} or the {{TAG|INIMIX}} tag. The metric used in the Broyden scheme is specified through {{TAG|MIXPRE}}.\n\n== Related tags and articles ==\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|IMIX|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kerker:prb:81\">[http://link.aps.org/doi/10.1103/PhysRevB.23.3082 G. P. Kerker, Phys. Rev. B 23, 3082 (1981).]</ref>\n<ref name=\"akai:jpc:85\">[http://dx.doi.org/10.1088/0022-3719/18/12/009 H. Akai and P.H. Dederichs, J. Phys. C 18 (1985).]</ref>\n<ref name=\"bluegel:thesis:88\">S. Bl\u00fcgel, PhD Thesis, RWTH Aachen (1988).</ref>\n<ref name=\"johnson:prb:88\">[http://link.aps.org/doi/10.1103/PhysRevB.38.12807 D. D. Johnson, Phys. Rev. B38, 12807 (1988).]</ref>\n<ref name=\"pulay:cpl:80\">[http://dx.doi.org/10.1016/0009-2614(80)80396-4 P. Pulay, Chem. Phys. Lett. 73, 393 (1980).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-07-26T09:04:05Z"}, "ISPIN": {"datatype": "integer", "options": {"2": null, "1": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISPIN\">ISPIN</a> specifies spin polarization.</span>", "wikicode": "{{TAGDEF|ISPIN|1 {{!}} 2|1}}\n\nDescription: {{TAG|ISPIN}} specifies spin polarization.\n----\n*{{TAG|ISPIN}}=1: non-spin-polarized calculations are performed.\n*{{TAG|ISPIN}}=2: spin-polarized calculations (collinear) are performed.\n\nBy combining {{TAG|ISPIN}} with {{TAG|MAGMOM}} collinear magnetism can be studied.\n\n== Related tags and articles ==\n{{TAG|MAGMOM}}\n\n{{sc|ISPIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Magnetism]]", "last_revised": "2022-04-08T14:23:56Z"}, "INIMIX": {"datatype": "integer", "options": {"0": null, "1": null, "2": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/INIMIX\">INIMIX</a> determines the functional form of the initial mixing matrix in the Broyden scheme (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/INIMIX\">IMIX</a>=<span><span class=\"tag-value\">4)</span>.</span></span>", "wikicode": "{{TAGDEF|INIMIX|0 {{!}} 1 {{!}} 2|1}}\n\nDescription: {{TAG|INIMIX}} determines the functional form of the initial mixing matrix in the Broyden scheme ({{TAG|IMIX}}=4).\n----\nThe initial mixing matrix might influence the convergence speed for complex situations (especially surfaces and magnetic systems), nevertheless {{TAG|INIMIX}} must not be changed from the default setting: anything which can be done with {{TAG|INIMIX}} can also be done with {{TAG|AMIX}} and {{TAG|BMIX}}, and changing {{TAG|AMIX}} and {{TAG|BMIX}} is definitely preferable.\n\nPossible choices for INIMIX are:\n\n*{{TAG|INIMIX}}=0\n:Linear mixing according to the setting of {{TAG|AMIX}}\n*{{TAG|INIMIX}}=1\n:Kerker mixing (see {{TAG|IMIX}}=1) according to the settings of {{TAG|AMIX}} and {{TAG|BMIX}}.\n:The mixed density is given by\n::<math>\\rho_{\\rm mix}\\left(G\\right)=\\rho_{\\rm in}\\left(G\\right)+A \\frac{G^2}{G^2+B^2}\\Bigl(\\rho_{\\rm out}\\left(G\\right)-\\rho_{\\rm in}\\left(G\\right)\\Bigr)</math>\n:with <math>A</math>={{TAG|AMIX}} and <math>B</math>={{TAG|BMIX}}\n*{{TAG|INIMIX}}=2\n:No mixing (equal to {{TAG|INIMIX}}=0 and {{TAG|AMIX}}=1, not recommended)\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|INIMIX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:22:58Z"}, "MIXPRE": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MIXPRE\">MIXPRE</a> specifies the metric in the Broyden mixing scheme(<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MIXPRE\">IMIX</a>=<span><span class=\"tag-value\">4)</span>.</span></span>", "wikicode": "{{TAGDEF|MIXPRE|0 {{!}} 1 {{!}} 2 {{!}} 3|1}}\n\nDescription: {{TAG|MIXPRE}} specifies the metric in the Broyden mixing scheme({{TAG|IMIX}}=4).\n----\n*{{TAG|MIXPRE}}=0\n:No preconditioning, metric=1\n*{{TAG|MIXPRE}}=1\n:\"Inverse Kerker\" metric with automatically determined {{TAG|BMIX}} (determined in such a way that the variation of the preconditioning weights covers a range of a factor 20)\n*{{TAG|MIXPRE}}=2\n:\"Inverse Kerker\" metric with automatically determined {{TAG|BMIX}} (determined in such a way that the variation of the preconditioning weights covers a range of a factor 200)\n*{{TAG|MIXPRE}}=3 (implemented for test purposes; '''not''' recommended)\n:\"Inverse Kerker\" metric with {{TAG|BMIX}} from {{FILE|INCAR}}, the weights for the metric are given by \n::<math>P\\left(G\\right)=1+\\frac{B^2}{G^2}</math>\n:with <math>B</math>={{TAG|BMIX}}.\n\nThe preconditioning is done only on the total charge density (i.e. up+down component) and not on the magnetization charge density (i.e. up-down component). In our experience, the introduction of a metric always improves the convergence speed. The best choice is {{TAG|MIXPRE}}=1 (i.e. the default).\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|WC}}\n\n{{sc|MIXPRE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:46:10Z"}, "WC": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WC\">WC</a> specifies the weight factor for each step in Broyden mixing scheme (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WC\">IMIX</a>=<span><span class=\"tag-value\">4)</span>.</span></span>", "wikicode": "{{TAGDEF|WC|[real]|1000.}}\n\nDescription: {{TAG|WC}} specifies the weight factor for each step in Broyden mixing scheme ({{TAG|IMIX}}=4).\n----\n*{{TAG|WC}}>0\n:Set all weights identical to {{TAG|WC}} (resulting in Pulay's mixing method), up to now Pulay's scheme was always superior to Broyden's 2<sup>nd</sup> method.\n\n*{{TAG|WC}}=0\n:Switch to Broyden's 2<sup>nd</sup> method, i.e., set the weight for the last step equal to 1000 and all other weights equal to 0.\n\n*{{TAG|WC}}<0 (implemented for test purposes: '''not''' recommended)\n:Try some automatic setting of the weights according to:\n::<math>W_{\\rm iter}=0.01 |{\\rm WC}|/||\\rho_{\\rm out}-\\rho_{\\rm in}||_{\\rm precond.}\\,</math>\n\n:in order to set small weights for the first steps and increase weights for the last steps.\n\n== Related Tags and Sections ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}}\n\n{{sc|WC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-06T15:33:09Z"}, "AMIN": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMIN\">AMIN</a> specifies the minimal mixing parameter in Kerker's initial approximation to the charge-dielectric function used in the Broyden/Pulay mixing scheme (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMIN\">IMIX</a>=<span><span class=\"tag-value\">4</span>, </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMIN\">INIMIX</a>=<span><span class=\"tag-value\">1)</span>.</span></span>", "wikicode": "{{TAGDEF|AMIN|[real]|min(0.1,{{TAG|AMIX}},{{TAG|AMIX_MAG}})}}\n\nDescription: {{TAG|AMIN}} specifies the minimal mixing parameter in Kerker's initial approximation{{cite|kerker:prb:1981}} to the charge-dielectric function used in the Broyden{{Cite|bluegel:phd:1988}}{{cite|johnson:prb:1988}}/Pulay{{cite|pulay:cpl:1980}} mixing scheme ({{TAG|IMIX}}=4, {{TAG|INIMIX}}=1).\n----\nKerker's initial approximation{{cite|kerker:prb:1981}} for the charge-dielectric function is given by\n:<math>A\\times\\min\\left(\\frac{G^2}{G^2+B^2},A_{\\rm min}\\right),</math>\nwhere <math>A</math>={{TAG|AMIX}}, <math>B</math>={{TAG|BMIX}}, and <math>A_{\\rm min}</math>={{TAG|AMIN}}.\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|AMIN|Examples|Examples that use this tag}}\n\n== References ==\n\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:07:11Z"}, "MAXMIX": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAXMIX\">MAXMIX</a> specifies the maximum number of steps stored in the Broyden mixer (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAXMIX\">IMIX</a>=<span><span class=\"tag-value\">4)</span>.</span></span>", "wikicode": "{{TAGDEF|MAXMIX|[integer]|-45}}\n\nDescription: {{TAG|MAXMIX}} specifies the maximum number of steps stored in the Broyden mixer ({{TAG|IMIX}}=4).\n----\n{{TAG|MAXMIX}} specifies the maximum number of vectors stored in the Broyden/Pulay mixer, in other words, it corresponds to the maximal rank of the approximation of the charge-dielectric function build up by the mixer. {{TAG|MAXMIX}} can be either negative or positive:\n*{{TAG|MAXMIX}}<0\n:The mixer is reset after each ionic step or if the number of electronic steps exceeds |{{TAG|MAXMIX}}| (this is the default and similar to the behavior of VASP.4.3 and VASP.3.2).\n*{{TAG|MAXMIX}}>0\n:The charge density mixer is only reset if the storage capabilities are exceeded. The reset is done \"smoothly\" by removing the five oldest vectors from the iteration history. Therefore, if {{TAG|MAXMIX}} is positive, the approximation for the charge dielectric function which was obtained in previous ionic steps is \"reused\" in the current ionic step, and this, in turn, can reduce the number of electronic steps during relaxations and MD's. Especially for relaxations that start from a good ionic starting guess and for systems with a strong charge sloshing behavior the speedup can be significant. We found that for a 12 &Aring; long box containing 16 Fe atoms the number of electronic iterations decreased from 8 to 2-3 when {{TAG|MAXMIX}} was set to 40. For a carbon surface the number of iterations decreased from 7 to 3. At the same time, the energy stability increased significantly. But be careful, this option increases the memory requirements for the mixer considerably, and thus the option is not recommended for systems where charge sloshing is negligible anyway (like bulk simple metals). The optimal setting for {{TAG|MAXMIX}} is usually around three times the number of electronic steps required in the first iteration. Too large values for {{TAG|MAXMIX}} might cause the code to crash (because linear dependencies between input vectors might develop). Too small values for {{TAG|MAXMIX}} can slow your convergence significantly. For instance, if you need 50 self-consistency cycles, and set {{TAG|MAXMIX}}  to 20, you force the mixer to remove iteration history continuously, which can cause divergence and at least a slow down of the convergence. \n* Caution: do not set {{TAG|MAXMIX}}>0 in the following cases. (i) If your initial positions in the {{TAG|POSCAR}} file are far from the fully relaxed positions, the ions might move considerably during relaxation. In this case, it is not expedient to \"reuse\" charge mixing information from the previous ionic steps. (ii) During machine learning, the first-principles calculations are often bypassed for hundreds or even thousands of ionic steps, and the ions might move considerably between first-principles calculations. In these cases using {{TAG|MAXMIX}} will very often lead to electronic divergence or strange errors during the self-consistency cycle. In general, whenever the column RMS(c) in the {{TAG|OSZICAR}} files shows a sudden increase in the norm of the charge density residual vector, try to remove the tag {{TAG|MAXMIX}} from the INCAR file.\n\n\n'''Mind''': {{TAG|MAXMIX}} is only available in VASP.4.4 and newer versions, and it is strongly recommended to use this option for molecular dynamics and relaxations.\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|AMIX_MAG}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|MAXMIX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-04-08T14:45:30Z"}, "AMIX_MAG": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMIX_MAG\">AMIX_MAG</a> linear mixing parameter for the magnetization density.</span>", "wikicode": "{{DISPLAYTITLE:AMIX_MAG}}\n{{TAGDEF|AMIX_MAG|[real]|1.6}}{{DISPLAYTITLE:AMIX_MAG}}\n\nDescription: {{TAG|AMIX_MAG}} linear mixing parameter for the magnetization density.\n----\nThe default mixing parameters for spinpolarized calculations are:\n:{{TAG|IMIX}}=4, {{TAG|AMIX}}=0.4, {{TAG|AMIN}}=min(0.1,{{TAG|AMIX}},{{TAG|AMIX_MAG}}), {{TAG|BMIX}}=1.0, {{TAG|AMIX_MAG}}=1.6, and {{TAG|BMIX_MAG}}=1.0.\n\nThese settings are consistent with an (initial) spin enhancement factor of 4, which is usually a reasonable approximation.\n\nThere are only a few other parameter combinations that can be tried if convergence turns out to be very slow. In particular, for slabs, magnetic systems, and insulating systems (e.g. molecules and clusters), an initial \"linear mixing\" can result in faster convergence than the Kerker model function.<ref name=\"kerker:prb:81\"/> One can therefore try to use the following setting \n\n {{TAGBL|AMIX}}     = 0.2\n {{TAGBL|BMIX}}     = 0.0001 ! almost zero, but 0 will crash some versions\n AMIX_MAG = 0.8\n {{TAGBL|BMIX_MAG}} = 0.0001 ! almost zero, but 0 will crash some versions\n\n'''Mind''': For spinpolarized calculations the defaults for the mixing parameters {{TAG|AMIX}} and {{TAG|BMIX}} are different than for the non-spinpolarized case.\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|AMIX_MAG|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kerker:prb:81\">[http://link.aps.org/doi/10.1103/PhysRevB.23.3082 G. P. Kerker, Phys. Rev. B 23, 3082 (1981).]</ref>\n</references>\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]][[Category:Magnetism]]", "last_revised": "2022-04-07T15:26:10Z"}, "BMIX_MAG": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX_MAG\">BMIX_MAG</a> sets the cutoff wave vector for Kerker mixing scheme<ref name=\"kerker:prb:81\"></ref> (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX_MAG\">IMIX</a>=<span><span class=\"tag-value\">1</span> and/or </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BMIX_MAG\">INIMIX</a>=<span><span class=\"tag-value\">1)</span> for the magnetization density.</span></span>", "wikicode": "{{DISPLAYTITLE:BMIX_MAG}}\n{{TAGDEF|BMIX_MAG|[real]|1.0}}{{DISPLAYTITLE:BMIX_MAG}}\n\nDescription: {{TAG|BMIX_MAG}} sets the cutoff wave vector for Kerker mixing scheme<ref name=\"kerker:prb:81\"/> ({{TAG|IMIX}}=1 and/or {{TAG|INIMIX}}=1) for the magnetization density.\n----\nThe default mixing parameters for spinpolarized calculations are:\n:{{TAG|IMIX}}=4, {{TAG|AMIX}}=0.4, {{TAG|AMIN}}=min(0.1,{{TAG|AMIX}},{{TAG|AMIX_MAG}}), {{TAG|BMIX}}=1.0, {{TAG|AMIX_MAG}}=1.6, and {{TAG|BMIX_MAG}}=1.0.\n\nThese settings are consistent with an (initial) spin enhancement factor of 4, which is usually a reasonable approximation.\n\nThere are only a few other parameter combinitions which can be tried, if convergence turns out to be very slow. In particular, for slabs, magnetic systems and insulating systems (e.g. molecules and clusters), an initial \"linear mixing\" can result in faster convergence than the Kerker model function.<ref name=\"kerker:prb:81\"/> One can therefore try to use the following setting \n\n {{TAG|AMIX}}     = 0.2\n {{TAG|BMIX}}     = 0.0001 ! almost zero, but 0 will crash some versions\n {{TAG|AMIX_MAG}} = 0.8\n {{TAG|BMIX_MAG}} = 0.0001 ! almost zero, but 0 will crash some versions\n\n'''Mind''': For spinpolarized calculations the defaults for the mixing parameters {{TAG|AMIX}} and {{TAG|BMIX}} are different than for the non-spinpolarized case.\n\n== Related tags and articles ==\n{{TAG|IMIX}},\n{{TAG|INIMIX}},\n{{TAG|MAXMIX}},\n{{TAG|AMIX}},\n{{TAG|BMIX}},\n{{TAG|BMIX_MAG}},\n{{TAG|AMIN}},\n{{TAG|MIXPRE}},\n{{TAG|WC}}\n\n{{sc|BMIX_MAG|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"kerker:prb:81\">[http://link.aps.org/doi/10.1103/PhysRevB.23.3082 G. P. Kerker, Phys. Rev. B 23, 3082 (1981).]</ref>\n</references>\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density mixing]][[Category:Magnetism]]", "last_revised": "2022-04-07T15:51:39Z"}, "MAGMOM": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAGMOM\">MAGMOM</a> Specifies the initial magnetic moment for each atom, if and only if <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAGMOM\">ICHARG</a>=<span><span class=\"tag-value\">2</span>, or if  </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAGMOM\">ICHARG</a>=<span><span class=\"tag-value\">1</span> and the </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAGMOM\">CHGCAR</a> file contains no magnetisation density</span>", "wikicode": "{{TAGDEF|MAGMOM|[real array]}}\n{{DEF|MAGMOM|NIONS * 1.0|for {{TAG|ISPIN}}{{=}}2|3 * NIONS * 1.0 |for non-collinear magnetic systems ({{TAG|LNONCOLLINEAR}}{{=}}.TRUE.)}}\n\nDescription: {{TAG|MAGMOM}} Specifies the initial magnetic moment for each atom, if and only if {{TAG|ICHARG}}=2, or if  {{TAG|ICHARG}}=1 and the {{TAG|CHGCAR}} file contains no magnetisation density\n----\nIf one is searching for a spin polarised (ferro- or antiferromagnetic) solution,\nit is usually safest to start from larger local magnetic moments, because in\nsome cases, the default values might not be sufficiently big.\nA safe default is usually the experimental magnetic moment multiplied by\n1.2 or 1.5. It is important to emphasize that the {{TAG|MAGMOM}} tag is\nused ''only'', if\nthe {{TAG|CHGCAR}} file holds no information on the magnetisation density, ''and''\nif the initial charge density is not calculated from the wavefunctions supplied in\nthe {{TAG|WAVECAR}} file.\nThis means that the {{TAG|MAGMOM}} tag is useful for two kind of calculations\n\n*Calculations starting from scratch with no {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file.\n\n*Calculations starting from  a ''non magnetic'' {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file ({{TAG|ICHARG}}=1).\n\nOften such calculations converge more reliably to the desired magnetic\nconfiguration than calculations of the first kind. Hence, if you have problems converging to a desired magnetic solution, try to calculate first the non-magnetic groundstate, and continue from the generated {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file. For the continuation job, you need to set\n {{TAG|ISPIN}} {{=}} 2\n {{TAG|ICHARG}} {{=}} 1 \nin the {{TAG|INCAR}} file.\n\nStarting from VASP.4.4.4, VASP also determines whether the magnetic moments supplied in\nthe {{TAG|MAGMOM}} line break the symmetry. If they do, the corresponding symmetry operations are removed\nand not applied during the symmetrization of charges and forces. This means that antiferromagnetic (AFM) calculations can be performed by\nspecifying anti-parallel magnetic moments for the atoms in the cell: The most simple  {{TAG|POSCAR}}-file for a bcc-cell with AFM spin alignment \nwould be\n AFM\n  2.80000\n  1.00000   .00000   .00000\n   .00000  1.00000   .00000\n   .00000   .00000  1.00000\n  1 1\n Carthesian\n   .00000   .00000   .00000\n   .50000   .50000   .50000\nwith \n  {{TAG|ISPIN}} = 2\n  {{TAG|MAGMOM}} = 1.0 -1.0\nspecified in {{TAG|INCAR}}.\nIn a perfectly AFM ordered cell, the total net magnetisation\nis zero as a matter of fact, but it is possible to determine the local magnetic moments by using the {{TAG|LORBIT}} tag (and if {{TAG|LORBIT}}<10 , the {{TAG|RWIGS}}-tag in addition).\n\nIn the case of spin-orbit coupling ({{TAG|LSORBIT}}) the 3D-orientation of the magnetic moments has to be given with respect to the spin-quantisation axis {{TAG|SAXIS}}. \n\n== Related Tags and Sections ==\n{{TAG|ISPIN}},\n{{TAG|ICHARG}},\n{{TAG|LNONCOLLINEAR}}, {{TAG|LSORBIT}}, {{TAG|SAXIS}},\n{{TAG|LORBIT}}, {{TAG|RWIGS}}\n\n{{sc|MAGMOM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Symmetry]]", "last_revised": "2022-04-07T08:37:13Z"}, "RWIGS": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/RWIGS\">RWIGS</a> specifies the Wigner-Seitz radius (in <math>\\AA</math>) for each atom type.</span>", "wikicode": "{{TAGDEF|RWIGS|[real array]|-1}}\n\nDescription: {{TAG|RWIGS}} specifies the Wigner-Seitz radius (in <math>\\AA</math>) for each atom type.\n----\n*{{TAG|RWIGS}} ''has'' to be supplied for each atom type if {{TAG|LORBIT}} is set to <10. In this case,  the ''spd''- and site projected wave function character of each band is evaluated, and the local partial DOS (see sections {{TAG|PROCAR}} and {{TAG|DOSCAR}}) and local magnetic moments are calculated. \n\n*If  {{TAG|LORBIT}} >= 10, {{TAG|RWIGS}} is ignored\n\n*{{TAG|RWIGS}} ''must''  be set in calculations with constraining the local magnetic moments (see {{TAG|I_CONSTRAINED_M}})\n\nFor '''mono-atomic systems''' {{TAG|RWIGS}} can be defined\nunambiguously. The sum of the volume of the spheres around each atom should be\nthe same as the total volume of the cell (assuming that you do not have a\nvacuum region within your cell).  This is in the spirit of atomic sphere calculations.\nVASP writes a line\n Volume of Typ   1:     98.5 %\nto the {{TAG|OUTCAR}} file. You should use a {{TAG|RWIGS}} value which yields a\nvolume of approximately 100%.\n\nFor systems consisting of '''more than one atom type''', there is no unambiguous way to define {{TAG|RWIGS}} and\nseveral choices are possible.  In all cases, the sum of\nthe volume of the spheres should be close to the total\nvolume of the cell (i.e the sum of the values given by VASP should be\naround 100%).\n\n*One possible choice is to set {{TAG|RWIGS}} such that the overlap between the spheres is minimized.\n\n*a more elaborate way is to apply a Bader-type charge analysis to estimate the radius of an atom in a specific compound.\n\n*in most cases, it is simplest to choose the radius of each sphere such that they are close to the covalent radius as tabulated in most periodic tables. This simple criterion can be used in most cases, and it relies at least on some ``physical intuition''.\n\n\n\nPlease keep in mind that results are '''qualitative''' i.e. there is no unambiguous way to determine the location of an electron\n(and hence the local magnetic moments). With the current implementation, it is for instance\nhardly possible to determine charge transfer. What can be derived from the partial DOS is the typical character of a peak in a DOS.\nQuantitative results can be obtained only by careful comparison with a reference system  (e.g. bulk versus surface).\n\n== Related tags and articles ==\n{{TAG|LORBIT}},\n{{TAG|I_CONSTRAINED_M}}\n\n{{sc|RWIGS|Examples|Examples that use this tag}}\n----\n\n[[Category:POTCAR tag]][[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Projector-augmented-wave method]]", "last_revised": "2022-04-06T15:48:52Z"}, "NBLOCK": {"datatype": "integer", "options": {}, "summary": "After <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBLOCK\">NBLOCK</a>  ionic steps the pair-correlation function and the DOS are calculated", "wikicode": "{{TAGDEF|NBLOCK|[integer]|1}}\n\nDescription: After {{TAG|NBLOCK}}  ionic steps the pair-correlation function and the DOS are calculated\nand the ionic configuration is written to the {{FILE|XDATCAR}}-file. It is recommended to leave  {{TAG|NBLOCK}} to 1, since the computational overhead to determine the DOS and pair correlation function is minimal. Only for  molecular dynamics simulations with many 1000 steps or machine learning, it might be expedient to increase {{TAG|NBLOCK}} to say 10 or even 100, to avoid large {{FILE|XDATCAR}}-files and the evaluation of the pair correlation function at every step.\n----\nIn addition\n\n*{{TAG|NBLOCK}} controls how often the kinetic energy is scaled if {{TAG|SMASS}}=-1.\n\n*After {{TAG|KBLOCK}}*{{TAG|NBLOCK}} ionic steps the averaged pair correlation function and DOS are written to the files {{FILE|PCDAT}}  and {{FILE|DOSCAR}}. The internal accumulators are reset, and after another KBLOCK*NBLOCK steps the new averaged quantities are written out.\n\n''Mind'': The CPU costs for these tasks are quite small, so use {{TAG|NBLOCK}}=1, except when you apply machine-learned force fields. In that case, you might want to increase {{TAG|NBLOCK}} to 10 to 100 to decrease the computational load and the file size of the XDATCAR file.\n\n== Related tags and articles ==\n[[PCDAT]], [[DOSCAR]], [[XDATCAR]], {{TAG|KBLOCK}}\n\n{{sc|NBLOCK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Performance]]", "last_revised": "2023-06-02T08:50:55Z"}, "KBLOCK": {"datatype": "integer", "options": {}, "summary": "After <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KBLOCK\">KBLOCK</a>*<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KBLOCK\">NBLOCK</a> ionic steps the averaged pair-correlation function and DOS are written to the files <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PCDAT\">PCDAT</a>  and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PCDAT\">DOSCAR</a>. More details can be found on the page describing the tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KBLOCK\">NBLOCK</a>.", "wikicode": "{{TAGDEF|KBLOCK|[integer]|{{TAG|NSW}}}}\n\nDescription: After {{TAG|KBLOCK}}*{{TAG|NBLOCK}} ionic steps the averaged pair-correlation function and DOS are written to the files {{FILE|PCDAT}}  and {{FILE|DOSCAR}}. More details can be found on the page describing the tag {{TAG|NBLOCK}}.\n----\n== Related tags and articles ==\n{{TAG|NBLOCK}}, {{FILE|PCDAT}}, {{FILE|DOSCAR}}\n\n{{sc|KBLOCK|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Performance]]", "last_revised": "2022-04-07T14:00:01Z"}, "LWAVE": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWAVE\">LWAVE</a> determines whether the wavefunctions are written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WAVECAR\">WAVECAR</a> file at the end of a run.</span>", "wikicode": "{{TAGDEF|LWAVE|[logical]|.NOT.{{TAG|LH5}}}}\n\nDescription: {{TAG|LWAVE}} determines whether the wavefunctions are written to the {{FILE|WAVECAR}} file at the end of a run.\n\n== Related tags and articles ==\n{{TAG|LCHARG}}, {{TAG|LCHARGH5}}, {{TAG|LWAVEH5}}, {{TAG|LH5}}\n\n\n{{sc|LWAVE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-06-02T07:48:39Z"}, "LCHARG": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LCHARG\">LCHARG</a> determines whether the charge densities (files <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">CHGCAR</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">CHG</a>) are written.</span>", "wikicode": "{{TAGDEF|LCHARG|[logical]|.NOT.{{TAG|LH5}}}}\n\nDescription: {{TAG|LCHARG}} determines whether the charge densities (files {{FILE|CHGCAR}} and {{FILE|CHG}}) are written.\n\n== Related tags and articles ==\n{{TAG|LWAVE}}, {{TAG|LWAVEH5}}, {{TAG|LCHARGH5}}, {{TAG|LH5}}\n\n\n{{sc|LCHARG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-06-02T07:49:03Z"}, "IMAGES": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IMAGES\">IMAGES</a> defines how many instances of VASP are started. These instances execute VASP calculations in separate directories 01, 02, 03, etc. This flag is used to support elastic band calculations, parallel tempering, thermodynamic integration as well as other scenaria where a simultaneous calculation of several VASP instances is required.</span>", "wikicode": "{{TAGDEF|IMAGES|[integer]|0}}\n\nDescription: {{TAG|IMAGES}} defines how many instances of VASP are started. These instances execute VASP calculations in separate directories 01, 02, 03, etc. This flag is used to support elastic band calculations, parallel tempering, thermodynamic integration as well as other scenaria where a simultaneous calculation of several VASP instances is required.\n\n----\nVASP supports various modes where simultaneous calculations for different INCAR, KPOINTS, POTCAR, or POSCAR file are performed. \nThe elastic band method to calculate energy barriers, as well as parallel tempering are explained in this section.\n\nGenerally a primary  {{TAG|INCAR}} file must be located in the root directory. Most of the other files, including {{TAG|KPOINTS}}, {{TAG|POTCAR}}, {{TAG|POSCAR}} can either reside in the subdirectories (named 00, 01, 02...) or in the root directory.\nThe files in the subdirectories take precedence over those in the root directory (for details\nsee the paragraph \"File handling\" below). The tag\n {{TAG|IMAGES}} = number of images\nforces VASP to execute multiple instances, performing calculations in the subdirectors 01, 02, .., number of images. \nThe number of nodes must be dividable by the number of images (the tags {{TAG|NCORE}}, {{TAG|KPAR}} or {{TAG|NPAR}} can still be use and might even be different, if INCAR files are supplied in the subdirectories).\nVASP divides the nodes in groups, and each group then works on one ''image'' 01, 02, ... IMAGES.\nFor nudged elastic band calculations, it is usually sufficient to provide all input files in the root directory, \nexcept for the POSCAR files which need to be provided in the subdirectories. \nThe first group of nodes will then read the {{TAG|POSCAR}} file from  the directory 01, the second group from 02 etc.\nIn the elastic band method, the endpoints are kept fixed, and the position\nof the end points must be supplied in the files 00/POSCAR and XX/POSCAR, where  XX is\n XX = number of images+1.\n(the directories 00 and XX are only required for elastic band calculations).\n\nIf the tag {{TAG| LTEMPER}}=.TRUE. is set in the {{TAG| INCAR}} file, VASP performs parallel tempering calculations. In this case, it is necessary to supply different {{TAG| INCAR}} and {{TAG| POSCAR}} files in each subdirectory. For each subdirectory a different simulation temperature should be supplied using the tags  {{TAG| TEBEG}} in the INCAR files of the subdirectories. For further details, we refer to the description of the tag {{TAG| LTEMPER}}.\n \nAll output files ({{TAG|OUTCAR}}, {{TAG|WAVECAR}}, {{TAG|CHGCAR}} etc.) are all written to the subdirectories.\nSince no nodes are executing for the positions supplied in the\ndirectories 00 and XX, no output files will be created in these sub directories.\nImage 01 writes to the usual stdout file, located in the directory from which VASP is started,\nthe other images write to the files 02/stdout, 03/stdout etc.\nIn addition to the {{TAG|IMAGES}} tag, a spring constant can be\nsupplied in the {{TAG|SPRING}} tag. The default is\n {{TAG|SPRING}}= -5\nThe '''nudged elastic band method'''<ref name=\"jons95\"/><ref name=\"jons98\"/> is applied\nwhen {{TAG|SPRING}} is set to a negative value, e.g.\n{{TAG|SPRING}}= -5. This is also the recommended setting.\nCompared to the previous case, additional tangential springs\nare introduced to keep the images equidistant\nduring the relaxation (remember the constraint is only\nconserved to first order otherwise). Do not use too large values,\nbecause this can slow down convergence. The default value\nusually works reliably.\n\nOne problem of the nudged elastic band method is\nthat the constraint (i.e movements only\nin the hyper-plane perpendicular to the current tangent) is\nnon linear. Therefore, the CG algorithm usually fails\nto converge, and  we recommended to use\nthe RMM-DIIS algorithm ({{TAG|IBRION}}=1) or the quick-min algorithm ({{TAG|IBRION}}=3).\nAdditionally,\nthe non-linear constraint (equidistant images) tends to be  violated\nsignificantly during the first few steps (it is only enforced to first order).\nIf this problem is\nencountered, a very low dimensionality parameter ({{TAG|IBRION}}=1, {{TAG|NFREE}}=2)\nshould be applied in the first few steps, or a steepest\ndescent minimization without line optimization ({{TAG|IBRION}}=3, {{TAG|SMASS}}=2).\nshould be used, to  pre-converge the images.\n\nIf all degrees of freedom are allowed to relax (isolated\nmolecules, no surface, etc.), make sure that\nthe sum of all positions  is the same for each cell. In other words,\n\n<math> \\sum_{i=1,N_{ions}} \\vec R_i^{\\alpha} </math>\n\nmust be equal for all images. Otherwise ''fake'' forces\nare introduced, and the images drift against\neach other (this will not introduce problems\nduring the VASP calculations, but it is awkward to visualize\nthe final results).\nOften an initial linearly interpolated  starting guess is\nappropriate, this can e.g. be done with a small script called\n interpolatePOS\nThe script also removes as an option the center-of-mass motion.\n\nFinally, we strongly recommend to keep the number of images\nto an absolute minimum. The fewer images are used, the faster\nto convergence to the groundstate is. Often, it is\nadvisable to start with a single image between the two endpoints,\nand to increase the number of images, once this first run has converged.\n\n<!-- This should become a specialized form of the short description in the parallelization\nFile handling: When VASP is started, it reads the file {{TAG|INCAR}} in the root directory. \nThe following tags are also read from the root {{TAG|INCAR}} file:\n{{TAG|NCORE_IN_IMAGES1}}, {{TAG|IMAGES}}, {{TAG|KIMAGES}}, {{TAG|FOURORBIT}}, {{TAG|KPAR}}, {{TAG|NCORE}}, \n{{TAG|NCORES_PER_BAND}}, {{TAG|NPAR}}, {{TAG|NCSHMEM}}. Subsequently, VASP \nsplits the MPI communicator into subgroups and continues reading from the {{TAG|INCAR}}\nfile in the subdirectories 01, 02, 03, ... If the INCAR files are not present in the subdirectories, \nVASP continues reading from the root INCAR file. The same logic is used from the files {{TAG|KPOINTS}} and {{TAG|POTCAR}}:\nif they exist in the subdirectories, they will be read from the subdirectories; if they\nare missing, the files are read from the root directory. The {{TAG|POSCAR}} file and all other input files\nare always read from the subdirectories 01, 02, etc.. All output files (including {{TAG|OUTCAR}} and {{TAG|OSZICAR}})\nare always written to the subdirectories. \nFor the nudged elastic band method, it is recommended that all input files, except the {{TAG|POSCAR}}, {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file, reside in the root directory.   \n -->\n\n== Related tags and articles ==\n{{TAG|SPRING}},\n{{TAG|NPAR}},\n{{TAG|IBRION}},\n{{TAG|NFREE}},\n{{TAG|SMASS}},\n{{TAG|VCAIMAGES}}\n\n{{sc|IMAGES|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"jons95\">[http://dx.doi.org/10.1016/0039-6028(94)00731-4 G. Mills, H. Jonsson and G. K. Schenter, Surface Science, 324, 305 (1995).]</ref>\n<ref name=\"jons98\">H. Jonsson, G. Mills and K. W. Jacobsen,\n''Nudged Elastic Band Method for Finding Minimum Energy Paths of Transitions'',\nin ''Classical and Quantum Dynamics in Condensed Phase Simulations'',\ned. B. J. Berne, G. Ciccotti and D. F. Coker (World Scientific, 1998).</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Transition States]][[Category:Elastic band method]][[Category:Parallelization]]", "last_revised": "2022-07-19T15:33:52Z"}, "SPRING": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SPRING\">SPRING</a> gives the <i>spring constant</i> between the images as used in the elastic band method.</span>", "wikicode": "{{TAGDEF|SPRING|[integer]|-5}}\n\nDescription: {{TAG|SPRING}} gives the ''spring constant'' between the images as used in the elastic band method.\n\n----\n{{TAG|SPRING}} has to be set together with {{TAG|IMAGES}} if the elastic band method is used to calculate energy barriers between two ionic configurations of a system.\n \nFor {{TAG|SPRING}} = 0, each image is only allowed\nto move into the direction perpendicular to the current\nhyper-tangent, which is calculated as the normal vector\nbetween two neighboring images.\nThis algorithm keeps the distance between the images\nconstant to ''first order''. It is therefore possible to start\nwith a dense image spacing around the saddle point to obtain\na finer resolution around this point.\n\nThe nudged elastic band method<ref name=\"jons95\"/><ref name=\"jons98\"/>\nis applied when {{TAG|SPRING}} is set to a negative value e.g.\n {{TAG|SPRING}}= -5\nThis is also the recommended setting.\nCompared to the previous case, additional tangential springs\nare introduced to keep the images equidistant\nduring the relaxation (remember the constraint is only\nconserved to first order otherwise). Do not use too large values,\nbecause this can slow down convergence. The default value\nusually works quite reliably.\n\nOne problem of the nudged elastic band method is\nthat the constraint (i.e movements only\nin the hyper-plane perpendicular to the current tangent) is\nnon linear. Therefore, the CG algorithm usually fails\nto converge, and  we recommended to use\nthe RMM-DIIS algorithm ({{TAG|IBRION}}=1) or the quick-min algorithm ({{TAG|IBRION}}=3).\nAdditionally,\nthe non-linear constraint (equidistant images) tends to be  violated\nsignificantly during the first few steps (it is only enforced to first order).\nIf this problem is\nencountered, a very low dimensionality parameter ({{TAG|IBRION}}=1, {{TAG|NFREE}}=2)\nshould be applied in the first we steps, or a steepest\ndescent minimization without line optimization ({{TAG|IBRION}}=3, {{TAG|SMASS}}=2).\nshould be used, to  pre-converge the images.\n\n== Related tags and articles ==\n{{TAG|IMAGES}},\n{{TAG|IBRION}},\n{{TAG|NFREE}},\n{{TAG|SMASS}}\n\n{{sc|SPRING|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"jons95\">[http://dx.doi.org/10.1016/0039-6028(94)00731-4 G. Mills, H. Jonsson and G. K. Schenter, Surface Science, 324, 305 (1995).]</ref>\n<ref name=\"jons98\">H. Jonsson, G. Mills and K. W. Jacobsen, ''Nudged Elastic Band Method for Finding Minimum Energy Paths of Transitions'', in ''Classical and Quantum Dynamics in Condensed Phase Simulations'', ed. B. J. Berne, G. Ciccotti and D. F. Coker (World Scientific, 1998).</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Transition States]]", "last_revised": "2022-04-08T14:54:59Z"}, "NFREE": {"datatype": "integer", "options": {}, "summary": "depending on <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IBRION\">IBRION</a>, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IBRION\">NFREE</a> specifies the number of remembered steps in the history of ionic convergence runs, or the number of ionic displacements in frozen phonon calculations.", "wikicode": "{{TAGDEF|NFREE|[integer]}}\n\n{{DEF|NFREE|1|if {{TAG|IBRION}}{{=}}2|0|else|}}\n\nDescription: depending on {{TAG|IBRION}}, {{TAG|NFREE}} specifies the number of remembered steps in the history of ionic convergence runs, or the number of ionic displacements in frozen phonon calculations.\n----\n<span>\n*{{TAG|IBRION}}=1 (quasi-Newton algorithm for ionic relaxation):  \n\n:(i) If  {{TAG|NFREE}} is set, only up to {{TAG|NFREE}} ionic steps are kept in the iteration history (the rank of the approximate Hessian matrix is not larger than {{TAG|NFREE}}).\n\n:(ii) If {{TAG|NFREE}} is '''not''' specified, the criterion whether information is removed from the iteration history is based on the eigenvalue spectrum of the inverse Hessian matrix: if one eigenvalue of the inverse Hessian matrix is larger than 8, information from previous steps is discarded. For complex problems {{TAG|NFREE}} can usually be set to a rather large value (i.e. 10-20), however systems of low dimensionality require a careful setting of {{TAG|NFREE}} (or preferably an exact  counting of the number of degrees of freedom). To increase {{TAG|NFREE}} beyond 20 rarely improves convergence. If {{TAG|NFREE}} is set to too large, the RMM-DIIS algorithm might diverge.\n</span>\n<span>\n*{{TAG|IBRION}}=5 (from VASP.4.5) or {{TAG|IBRION}}=6 (from VASP.5.1): frozen phonon approach to calculate the zone-center vibrational frequencies of a system.\n:{{TAG|NFREE}} determines how many displacements are used for each direction and ion. The step size has to be given in {{TAG|INCAR}}, by the tag {{TAG|POTIM}}.  Displacements should be small enough to ensure that the harmonic approximation is safely fulfilled.   If too large values are supplied in the input file, it is defaulted to 0.015 &Aring; up from VASP.5.1 (but ''not'' in all earlier releases). Expertise shows that this is a very reasonable compromise.\n\n:{{TAG|NFREE}} = 2 uses central difference, ''i.e'' each ion is displaced in each direction by a small positive and negative displacement\n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{x}  </math>,  \n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{y}  </math>,\n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{z}  </math>,\n\n:For {{TAG|NFREE}} = 4, four displacements are used\n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{x}  </math> and <math>\\pm</math> 2 * {{TAG|POTIM}} * <math>\\hat{x}</math>,\n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{y}  </math> and <math>\\pm</math> 2 * {{TAG|POTIM}} * <math>\\hat{x}</math>,\n\n::<math>\\pm</math> {{TAG|POTIM}} * <math>\\hat{z}  </math> and <math>\\pm</math> 2 * {{TAG|POTIM}} * <math>\\hat{x}</math>,\n\n:For {{TAG|NFREE}}=1, only a single displacement is applied (it is strongly recommend to avoid {{TAG|NFREE}}=1).\n\n== Related tags and articles ==\n{{TAG|IBRION}},\n{{TAG|POTIM}}\n\n{{sc|NFREE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]][[Category:Phonons]]", "last_revised": "2022-04-07T08:27:20Z"}, "NGX": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGX\">NGX</a> sets the number of grid points in the FFT-grid along the first lattice vector.</span>", "wikicode": "{{TAGDEF|NGX|[integer]|set in accordance with {{TAG|PREC}} and {{TAG|ENCUT}}}}\n\nDescription: {{TAG|NGX}} sets the number of grid points in the FFT-grid along the first lattice vector.\n----\nBy default {{TAG|NGX}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}) and the plane wave kinetic energy cutoff {{TAG|ENCUT}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGX}} \n|-\n| Normal || 3/2&times;G<sub>cut</sub> \n|-\n| Single || 3/2&times;G<sub>cut</sub>\n|-\n| Accurate || 2&times;G<sub>cut</sub>\n|-\n| Low || 3/2&times;G<sub>cut</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub>\n|-\n| High ||  2&times;G<sub>cut</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}}.\n\nAlternatively, set {{TAG|NGX}} to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGY}},\n{{TAG|NGZ}},\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:47:59Z"}, "NGY": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGY\">NGY</a> sets the number of grid points in the FFT grid along the second lattice vector.</span>", "wikicode": "{{TAGDEF|NGY|[integer]|set in accordance with {{TAG|PREC}} and {{TAG|ENCUT}}}}\n\nDescription: {{TAG|NGY}} sets the number of grid points in the FFT grid along the second lattice vector.\n----\nBy default {{TAG|NGY}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}) and the plane wave kinetic energy cutoff {{TAG|ENCUT}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGY}} \n|-\n| Normal || 3/2&times;G<sub>cut</sub> \n|-\n| Single || 3/2&times;G<sub>cut</sub>\n|-\n| Accurate || 2&times;G<sub>cut</sub>\n|-\n| Low || 3/2&times;G<sub>cut</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub>\n|-\n| High ||  2&times;G<sub>cut</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}}.\n\nAlternatively {{TAG|NGY}} may be set to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGZ}},\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGY|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:48:17Z"}, "NGZ": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGZ\">NGZ</a> sets the number of grid points in the FFT-grid along the third lattice vector.</span>", "wikicode": "{{TAGDEF|NGZ|[integer]|set in accordance with {{TAG|PREC}} and {{TAG|ENCUT}}}}\n\nDescription: {{TAG|NGZ}} sets the number of grid points in the FFT-grid along the third lattice vector.\n----\nBy default {{TAG|NGZ}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}) and the plane wave kinetic energy cutoff {{TAG|ENCUT}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGZ}} \n|-\n| Normal || 3/2&times;G<sub>cut</sub> \n|-\n| Single || 3/2&times;G<sub>cut</sub>\n|-\n| Accurate || 2&times;G<sub>cut</sub>\n|-\n| Low || 3/2&times;G<sub>cut</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub>\n|-\n| High ||  2&times;G<sub>cut</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}}.\n\nAlternatively {{TAG|NGZ}} may be set to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGY}},\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGZ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:48:40Z"}, "POTIM": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/POTIM\">POTIM</a> sets the time step in molecular dynamics or the step width in ionic relaxations. </span>", "wikicode": "{{TAGDEF|POTIM|[real]}}\n\n{{DEF|POTIM|none,| ''must'' be set if {{TAG|IBRION}}{{=}} 0 (MD)|0.5| if {{TAG|IBRION}}{{=}} 1, 2, and 3 (ionic relaxation), and 5 (up to VASP.4.6)|0.015|if {{TAG|IBRION}}{{=}}5, and 6 (as of VASP.5.1)}}\n\nDescription: {{TAG|POTIM}} sets the time step in molecular dynamics or the step width in ionic relaxations. \n\n----\n\n* For {{TAG|IBRION}} = 0, {{TAG|POTIM}} gives the time step (in fs) in all ab-initio Molecular Dynamics runs, it ''has'' to be supplied therefore, otherwise VASP crashes immediately after having started.\n\n* For {{TAG|IBRION}} =1, 2, and 3, which corresponds to ionic relaxation using a quasi-Newton algorithm, conjugate-gradient algorithm, and damped molecular dynamics, respectively, the {{TAG|POTIM}} tag serves as a scaling constant for the step widths. The quasi-Newton algorithm is especially sensitive to the choice of this parameter.\n\n* For {{TAG|IBRION}} = 5, and 6, a phonon calculations using the finite differences approach is done, where {{TAG|POTIM}} is the width of the displacement of each ion to calculate the Hessian Matrix. \n:VASP.4.6 and older releases: {{TAG|POTIM}} has to be small enough to ensure that the displacements are within the harmonic limit. The vibrational frequencies using the frozen phonon approach are based on the harmonic approximation.\n{{NB|mind| For VASP.5.1 and newer releases, {{TAG|POTIM}} is automatically reset to 0.015 &Aring;, if the supplied value for {{TAG|POTIM}} is unreasonably large.|:}}\n</span>\n== Related tags and articles ==\n{{TAG|IBRION}}, {{TAG|NFREE}}\n\n{{sc|POTIM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]][[Category:Phonons]]", "last_revised": "2022-04-07T08:28:50Z"}, "NGXF": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGXF\">NGXF</a> sets the number of grid points in the \"fine\" FFT grid along the first lattice vector.</span>", "wikicode": "{{TAGDEF|NGXF|[integer]|set in accordance with {{TAG|PREC}}, {{TAG|NGX}}, {{TAG|ENCUT}} and {{TAG|ENAUG}}}}\n\nDescription: {{TAG|NGXF}} sets the number of grid points in the \"fine\" FFT grid along the first lattice vector.\n----\nOn this \"fine\" FFT mesh the localized augmentation charges are represented if ultrasoft pseudopotentials (USPPs) or the PAW method are used. In case USPPs are used, the local potentials (exchange-correlation, Hartree-potential and ionic potentials) are also calculated on this \"fine\" FFT-mesh.\n\nBy default {{TAG|NGXF}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}), {{TAG|NGX}}, and the plane wave kinetic energy cutoffs {{TAG|ENCUT}} and {{TAG|ENAUG}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGX}} || {{TAG|NGXF}}\n|-\n| Normal || 3/2&times;G<sub>cut</sub> || 2&times;{{TAG|NGX}}\n|-\n| Single || 3/2&times;G<sub>cut</sub> || {{TAG|NGX}}\n|-\n| Accurate || 2&times;G<sub>cut</sub> || 2&times;{{TAG|NGX}}\n|-\n| Low || 3/2&times;G<sub>cut</sub> || 3&times;G<sub>aug</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub> || 4&times;G<sub>aug</sub>\n|-\n| High ||  2&times;G<sub>cut</sub> || 16/3&times;G<sub>aug</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2 \\qquad E_{\\rm aug}=\\frac{\\hbar^2}{2m_e}G_{\\rm aug}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}} and E<sub>aug</sub>={{TAG|ENAUG}}.\n\nAlternatively {{TAG|NGXF}} may be set to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGY}},\n{{TAG|NGZ}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGXF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:48:08Z"}, "NGYF": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGYF\">NGYF</a> sets the number of grid points in the \"fine\" FFT grid along the second lattice vector.</span>", "wikicode": "{{TAGDEF|NGYF|[integer]|set in accordance with {{TAG|PREC}}, {{TAG|NGY}}, {{TAG|ENCUT}} and {{TAG|ENAUG}}}}\n\nDescription: {{TAG|NGYF}} sets the number of grid points in the \"fine\" FFT grid along the second lattice vector.\n----\nOn this \"fine\" FFT mesh the localized augmentation charges are represented if ultrasoft pseudopotentials (USPPs) or the PAW method are used. In case USPPs are used, the local potentials (exchange-correlation, Hartree-potential and ionic potentials) are also calculated on this \"fine\" FFT-mesh.\n\nBy default {{TAG|NGYF}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}), {{TAG|NGY}}, and the plane wave kinetic energy cutoffs {{TAG|ENCUT}} and {{TAG|ENAUG}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGY}} || {{TAG|NGYF}}\n|-\n| Normal || 3/2&times;G<sub>cut</sub> || 2&times;{{TAG|NGY}}\n|-\n| Single || 3/2&times;G<sub>cut</sub> || {{TAG|NGY}}\n|-\n| Accurate || 2&times;G<sub>cut</sub> || 2&times;{{TAG|NGY}}\n|-\n| Low || 3/2&times;G<sub>cut</sub> || 3&times;G<sub>aug</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub> || 4&times;G<sub>aug</sub>\n|-\n| High ||  2&times;G<sub>cut</sub> || 16/3&times;G<sub>aug</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2 \\qquad E_{\\rm aug}=\\frac{\\hbar^2}{2m_e}G_{\\rm aug}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}} and E<sub>aug</sub>={{TAG|ENAUG}}.\n\nAlternatively, {{TAG|NGYF}} may be set to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGY}},\n{{TAG|NGZ}},\n{{TAG|NGXF}},\n{{TAG|NGZF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGYF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:48:24Z"}, "NGZF": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGZF\">NGZF</a> sets the number of grid points in the \"fine\" FFT grid along the first lattice vector.</span>", "wikicode": "{{TAGDEF|NGZF|[integer]|set in accordance with {{TAG|PREC}}, {{TAG|NGZ}}, {{TAG|ENCUT}} and {{TAG|ENAUG}}}}\n\nDescription: {{TAG|NGZF}} sets the number of grid points in the \"fine\" FFT grid along the first lattice vector.\n----\nOn this \"fine\" FFT mesh the localized augmentation charges are represented if ultrasoft pseudopotentials (USPPs) or the PAW method are used. In case USPPs are used, the local potentials (exchange-correlation, Hartree-potential, and ionic potentials) are also calculated on this \"fine\" FFT-mesh.\n\nBy default {{TAG|NGZF}} is set in accordance with the requested \"precision\"-mode ({{TAG|PREC}}), {{TAG|NGZ}}, and the plane wave kinetic energy cutoffs {{TAG|ENCUT}} and {{TAG|ENAUG}}:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PREC}} || {{TAG|NGZ}} || {{TAG|NGZF}}\n|-\n| Normal || 3/2&times;G<sub>cut</sub> || 2&times;{{TAG|NGZ}}\n|-\n| Single || 3/2&times;G<sub>cut</sub> || {{TAG|NGZ}}\n|-\n| Accurate || 2&times;G<sub>cut</sub> || 2&times;{{TAG|NGZ}}\n|-\n| Low || 3/2&times;G<sub>cut</sub> || 3&times;G<sub>aug</sub>\n|-\n| Medium || 3/2&times;G<sub>cut</sub> || 4&times;G<sub>aug</sub>\n|-\n| High ||  2&times;G<sub>cut</sub> || 16/3&times;G<sub>aug</sub>\n|}\nwhere\n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2 \\qquad E_{\\rm aug}=\\frac{\\hbar^2}{2m_e}G_{\\rm aug}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}} and E<sub>aug</sub>={{TAG|ENAUG}}.\n\nAlternatively, {{TAG|NGZF}} may be set to a specific value in the {{FILE|INCAR}} file. \n\n== Related tags and articles ==\n{{TAG|NGX}},\n{{TAG|NGY}},\n{{TAG|NGZ}},\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n{{TAG|ENAUG}},\n{{TAG|ENMAX}}\n\n{{sc|NGZF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:48:47Z"}, "PRECFOCK": {"datatype": "string", "options": {"Normal": null, "Accurate": null, "Fast": null, "Medium": null, "Single": null, "Low": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PRECFOCK\">PRECFOCK</a> controls the FFT grids used in the exact exchange routines (Hartree-Fock and hybrid functionals).</span>", "wikicode": "{{TAGDEF|PRECFOCK|Normal {{!}} Accurate {{!}} Fast  {{!}} Medium {{!}} Single {{!}} Low}}\n{{DEF|PRECFOCK|Fast|for RPAR calculations |Single|if {{TAG|PREC}}{{=}}Single or SingleN |Normal |  else}}\n\nDescription: {{TAG|PRECFOCK}} controls the FFT grids used in the exact exchange routines (Hartree-Fock and hybrid functionals).\n----\nThe FFT grid used for the exact exchange contributions can be chose to be different from the one used for the Hartree and DFT potentials. Information on the  FFT grid that is used in the exact Fock exchange routines is written to the {{FILE|OUTCAR}} file after the lines\n\n FFT grid for exact exchange (Hartree Fock)\n\nWe recommend to set {{TAG|PRECFOCK}}=Normal for routine calculations.\nIf speed is an issue, you can also use {{TAG|PRECFOCK}}=Fast (e.g. use this to pre-converge the orbitals). For very high precision, in particular for phonon calculations, {{TAG|PRECFOCK}}=Accurate is recommended.\nThe two setting, {{TAG|PRECFOCK}}=Medium and {{TAG|PRECFOCK}}=Low are not recommended, but have been kept to maintain compatibility with older VASP versions.\n\nGenerally, as opposed to gradient corrected density functionals, the exact exchange energy is rather insensitive to the FFT grids, and in many cases a rather coarse grid can be used to calculate the overlap densities and the exact exchange (Fock) potential. [[Hybrid_functionals|Exact exchange]] requires one to evaluation the overlap density\n\n::<math>\\psi_{\\mathbf{k}n}^{*}(\\mathbf{r})\\psi_{\\mathbf{q}m}(\\mathbf{r})</math>\n\nbetween two orbitals. Strictly speaking, errors in the convolution (aliasing errors) are only avoided, if the FFT grid contains all Fourier components up to twice the plane wave with the largest wave vector, 2|G<sub>cut</sub>|. As usual, |G<sub>cut</sub>| is determined by the plane wave cutoff ({{TAG|ENCUT}}). \nA grid avoiding aliasing errors is chosen by setting {{TAG|PRECFOCK}}=Accurate. In this case, the FFT grid for the exact exchange is identical to the FFT grid used for the orbitals for {{TAG|PREC}}=Accurate in the DFT part. {{TAG|PRECFOCK}}=Accurate is the recommended setting for very accurate calculations.\n\nFor {{TAG|PRECFOCK}}=Low and Fast, the smallest possible FFT grid that just encloses the cutoff sphere (G<sub>cut</sub>|) is used. This accelerates the calculations by roughly a factor two to three, but causes slight errors in the total energies and some noise in the calculated forces. To reduce the noise, the augmentation charges\nare made very soft for {{TAG|PRECFOCK}}=Fast (whereas {{TAG|PRECFOCK}}=Low uses the standard augmentation charges also used for DFT).\n\nFor {{TAG|PRECFOCK}}=Normal, the FFT grid for the exact exchange is identical to the FFT grid used for the orbitals for {{TAG|PREC}}=Normal in the DFT part. In this case, the grid density is between the ones for\n{{TAG|PRECFOCK}}=Accurate and {{TAG|PRECFOCK}}=Fast. This is often a very reasonable comprise and hence recommended for most routine calculations.\n \nFor {{TAG|PRECFOCK}}=Fast, Normal and Accurate, the augmentation charges (required to restore the norm and dipoles of the overlap density on the plane wave grid) are softened, such that an accurate presentation on the plane wave grid is possible even for relatively coarse FFT grids. The sphere size is printed out after\n\n Radii for the augmentation spheres in the nonlocal exchange\n\nSince VASP always uses one-center terms to correct for the difference between all-electron and pseudo orbitals, the precise shape of the augmentation charges matters little for exchange \nenergies. Still it is recommended to keep PRECFOCK and PREC the same if relative energies are calculated (for instance adsorption energies, energies differences between different phases, etc.).\n\nThe following table summarizes the possible setting:\n\n:{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|PRECFOCK}} || FFT-grid || Augmentation charge || Quality || Comment \n|-\n|Normal\n|3/2&times;G<sub>cut</sub>  identical to std. FFT for PREC=Normal\n|soft augmentation charge<sup>a</sup>\n|accurate forces and energy\n|good compromise\n|-\n|Accurate\n|2&times;G<sub>cut</sub> identical to std. FFT for PREC=Accurate\n|soft augmentation charge<sup>a</sup>\n|very accurate forces and energy\n|for phonons\n|-\n| Fast || G<sub>cut</sub> d|| very soft augmentation charge<sup>b</sup>|| some noise in forces/good energy || need for speed\n|-\n| Medium || strictly identical to std. FFT|| identical to standard DFT || identical to standard DFT || outdated\n|-\n|Single<sup>c</sup>\n|strictly identical to std. FFT\n|identical to standard DFT\n|identical to standard DFT\n|if compatibility between Hartree and exchange is desired\n|-\n| Low || G<sub>cut</sub> || identical to standard DFT || large noise in forces/energy errors  || outdated \n|-\n| colspan=\"5\" |<sup>a</sup> radius for augmentation sphere is increased by factor 1.25 compared to default.\n<sup>b</sup> radius is increased by factor 1.35 compared to default except for ''s'' -like charge; for the ''s'' -channel the radius of the augmentation sphere is increased by a factor 1.25.\n\n<sup>c</sup> if user selects {{TAG|PREC}} = Single or {{TAG|PREC}} = SingleN, the default for PRECFOCK also becomes Single.\n|}\n\nMedium and Single are synonyms. They are useful the select the same treatment for the Hartree  and exchange term. This can be advantageously for correlated wave function calculations to obtain a numerically exact balance and compensation between Hartree and exchange (for instance for the upcoming auxiliary field Monte-Carlo module in VASP). For conventional Hartree-Fock or hybrid functional calculations, Normal or Accurate should be used. \n\nIn this table, G<sub>cut</sub> is determined by the relation \n:<math>E_{\\rm cut}=\\frac{\\hbar^2}{2m_e}G_{\\rm cut}^2</math>\nwith E<sub>cut</sub>={{TAG|ENCUT}}. \n\nEven {{TAG|PRECFOCK}}=Fast yields fairly low noise in the forces and virtually no egg-box effects (aliasing errors). In the forces, the noise is usually below 0.01 eV/&Aring;. For {{TAG|PRECFOCK}}=N and {{TAG|PRECFOCK}}=A, noise is usually not an issue, and the accuracy is sufficient even for phonon calculations in large supercells.\n\nAny combination of {{TAG|PREC}} and {{TAG|PRECFOCK}} is allowed by the code. Useful settings of increasing precision are however:\n\n PREC = Normal ; PRECFOCK = Fast       ! if your are in need for speed\n PREC = Normal ; PRECFOCK = Normal     ! the default\n PREC = Accurate ; PRECFOCK = Normal   ! increase the precision for DFT part; since exchange dominates the compute time, only slightly slower\n PREC = Accurate ; PRECFOCK = Accurate ! highest accuracy, suggested for phonons\n\n== Related tags and articles ==\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n{{sc|PRECFOCK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-06-14T12:31:27Z"}, "LTHOMAS": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTHOMAS\">LTHOMAS</a> selects a decomposition of the exchange functional based on Thomas-Fermi screening.</span>", "wikicode": "{{TAGDEF|LTHOMAS|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LTHOMAS}} selects a decomposition of the exchange functional based on Thomas-Fermi screening.\n----\nIf {{TAG|LTHOMAS}}=.TRUE. the decomposition of the exchange operator (in a range separated hybrid functional) into a short range and a long range part will be based on Thomas-Fermi screening.\nThe Thomas-Fermi screening length ''k''<sub>TF</sub> is specified by means of the {{TAG|HFSCREEN}} tag.\n\nFor typical semiconductors, a Thomas-Fermi screening length of about 1.8 &Aring;<sup>-1</sup> yields reasonable band gaps. In principle, however, the Thomas-Fermi screening length depends on the valence electron density; VASP determines this parameter from the number of valence electrons (read from the {{FILE|POTCAR}} file) and the volume and writes the corresponding value to the {{FILE|OUTCAR}} file:\n  Thomas-Fermi vector in A             =   2.00000\nSince, VASP counts the semi-core states and ''d''-states as valence electrons, although these states do not contribute to the screening, the values reported by VASP are often incorrect.\n\n== Related tags and articles ==\n{{TAG|LHFCALC}},\n{{TAG|HFSCREEN}},\n[[Hybrid functionals: formalism#Thomas_Fermi|Thomas-Fermi screening]],\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|LTHOMAS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-05-10T11:33:29Z"}, "LNONCOLLINEAR": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LNONCOLLINEAR\">LNONCOLLINEAR</a> specifies whether fully non-collinear magnetic calculations are performed.</span>", "wikicode": "{{TAGDEF|LNONCOLLINEAR|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LNONCOLLINEAR}} specifies whether fully non-collinear magnetic calculations are performed.\n----\nSupported as of VASP.4.5.\n\nSetting {{TAG|LNONCOLLINEAR}} = .TRUE. in the {{TAG|INCAR}} file allows to perform fully non-collinear magnetic structure calculations. VASP is capable of reading {{TAG|WAVECAR}} and {{TAG|CHGCAR}} files from previous non-magnetic or collinear calculations, it is however not possible to rotate the magnetic field locally on selected atoms.\n\nHence, in practice, we recommend to perform non-collinear calculations in two steps:\n*First, calculate the non magnetic groundstate and generate a {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file.\n*Second, read the {{TAG|WAVECAR}} and {{TAG|CHGCAR}} file, and supply initial magnetic moments by means of the {{TAG|MAGMOM}} tag (compare {{TAG|MAGMOM}}). \n\nFor a non-collinear setup, three values must be supplied for each ion in the {{TAG|MAGMOM}} line. The three entries correspond to the initial local magnetic moment for each ion in x, y and z direction respectively. The line\n\n    MAGMOM = 1 0 0   0 1 0\n\ninitialises the magnetic moment on the first atom in the x-direction, and on the second atom in the y direction. Mind, that the {{TAG|MAGMOM}} line supplies initial magnetic moments only if {{TAG|ICHARG}} = 2, or if the {{TAG|CHGCAR}} file contains only charge but no magnetisation density.\n\n== Related tags and articles ==\n{{TAG|MAGMOM}},\n{{TAG|ICHARG}},\n{{TAG|LSORBIT}}\n\n{{sc|LNONCOLLINEAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Noncollinear magnetism]]", "last_revised": "2022-04-08T14:37:01Z"}, "NKRED": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NKRED\">NKRED</a> specifies an uniform reduction factor for the <b>q</b>-point grid representation of the exact exchange potential and the correlation part in GW calculations.</span>", "wikicode": "{{TAGDEF|NKRED|[integer]|1}}\n\nDescription: {{TAG|NKRED}} specifies an uniform reduction factor for the '''q'''-point grid representation of the exact exchange potential and the correlation part in GW calculations.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>. This leads to a reduction in the computational workload by a factor:\n\n:<math>\n\\frac{1}{C_1 C_2 C_3}\n</math>\n\nIn case one sets {{TAG|NKRED}}, the grid reduction factors will be uniformly set to ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>={{TAG|NKRED}}. If one wants to specify separate grid reduction factors for ''C''<sub>1</sub>, ''C''<sub>2</sub>, and ''C''<sub>3</sub> one should use ''C''<sub>1</sub>={{TAG|NKREDX}}, ''C''<sub>2</sub>={{TAG|NKREDY}}, and ''C''<sub>3</sub>={{TAG|NKREDZ}}, respectively.\n\nThis flag also applies to GW and RPA calculations with a similar speedup. In GW and RPA type calculations,\nanalogously to hybrid functional calculations the outermost loop over the momentum transfer '''q''' \nis reduced to a subgrid specified by the {{TAG|NKRED}} parameters.\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKREDX}},\n{{TAG|NKREDY}},\n{{TAG|NKREDZ}},\n{{TAG|EVENONLY}},\n{{TAG|ODDONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|NKRED|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:21:49Z"}, "NKREDX": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NKREDX\">NKREDX</a> specifies a reduction factor for the <b>q</b>-point grid representation of the exact exchange potential along reciprocal space direction <b>b</b><sub>1</sub>.</span>", "wikicode": "{{TAGDEF|NKREDX|[integer]|1}}\n\nDescription: {{TAG|NKREDX}} specifies a reduction factor for the '''q'''-point grid representation of the exact exchange potential along reciprocal space direction '''b'''<sub>1</sub>.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>. This leads to a reduction in the computational workload by a factor:\n\n:<math>\n\\frac{1}{C_1 C_2 C_3}\n</math>\n\nIn case one sets {{TAG|NKRED}}, the grid reduction factors will be uniformly set to ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>={{TAG|NKRED}}. If one wants to specify separate grid reduction factors for ''C''<sub>1</sub>, ''C''<sub>2</sub>, and ''C''<sub>3</sub> one should use ''C''<sub>1</sub>={{TAG|NKREDX}}, ''C''<sub>2</sub>={{TAG|NKREDY}}, and ''C''<sub>3</sub>={{TAG|NKREDZ}}, respectively.\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKRED}},\n{{TAG|NKREDY}},\n{{TAG|NKREDZ}},\n{{TAG|EVENONLY}},\n{{TAG|ODDONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|NKREDX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-29T19:47:50Z"}, "NKREDY": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NKREDY\">NKREDY</a> specifies a reduction factor for the <b>q</b>-point grid representation of the exact exchange potential along reciprocal space direction <b>b</b><sub>2</sub>.</span>", "wikicode": "{{TAGDEF|NKREDY|[integer]|1}}\n\nDescription: {{TAG|NKREDY}} specifies a reduction factor for the '''q'''-point grid representation of the exact exchange potential along reciprocal space direction '''b'''<sub>2</sub>.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>. This leads to a reduction in the computational workload by a factor:\n\n:<math>\n\\frac{1}{C_1 C_2 C_3}\n</math>\n\nIn case one sets {{TAG|NKRED}}, the grid reduction factors will be uniformly set to ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>={{TAG|NKRED}}. If one wants to specify separate grid reduction factors for ''C''<sub>1</sub>, ''C''<sub>2</sub>, and ''C''<sub>3</sub> one should use ''C''<sub>1</sub>={{TAG|NKREDX}}, ''C''<sub>2</sub>={{TAG|NKREDY}}, and ''C''<sub>3</sub>={{TAG|NKREDZ}}, respectively.\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKRED}},\n{{TAG|NKREDX}},\n{{TAG|NKREDZ}},\n{{TAG|EVENONLY}},\n{{TAG|ODDONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|NKREDY|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-29T19:48:21Z"}, "NKREDZ": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NKREDZ\">NKREDZ</a> specifies a reduction factor for the <b>q</b>-point grid representation of the exact exchange potential along reciprocal space direction <b>b</b><sub>3</sub>.</span>", "wikicode": "{{TAGDEF|NKREDZ|[integer]|1}}\n\nDescription: {{TAG|NKREDZ}} specifies a reduction factor for the '''q'''-point grid representation of the exact exchange potential along reciprocal space direction '''b'''<sub>3</sub>.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>. This leads to a reduction in the computational workload by a factor:\n\n:<math>\n\\frac{1}{C_1 C_2 C_3}\n</math>\n\nIn case one sets {{TAG|NKRED}}, the grid reduction factors will be uniformly set to ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>={{TAG|NKRED}}. If one wants to specify separate grid reduction factors for ''C''<sub>1</sub>, ''C''<sub>2</sub>, and ''C''<sub>3</sub> one should use ''C''<sub>1</sub>={{TAG|NKREDX}}, ''C''<sub>2</sub>={{TAG|NKREDY}}, and ''C''<sub>3</sub>={{TAG|NKREDZ}}, respectively.\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKRED}},\n{{TAG|NKREDX}},\n{{TAG|NKREDY}},\n{{TAG|EVENONLY}},\n{{TAG|ODDONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|NKREDZ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-29T19:48:04Z"}, "LSORBIT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSORBIT\">LSORBIT</a> specifies whether spin-orbit coupling is taken into account.</span>", "wikicode": "{{TAGDEF|LSORBIT|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LSORBIT}} specifies whether spin-orbit coupling is taken into account.\n----\nSupported as of VASP.4.5.\n\n{{TAG|LSORBIT}} = .TRUE. switches on spin-orbit coupling (automatically sets {{TAG|LNONCOLLINEAR}} = .TRUE.).{{cite|Steiner:2016}} This option works only for PAW potentials and is not supported by ultrasoft pseudopotentials. If spin-orbit coupling is not included, the energy does not depend on the direction of the magnetic moment, i.e. rotating all magnetic moments by the same angle results in principle exactly in the same energy. Hence there is no need to define the spin quantization axis, as long as spin-orbit coupling is not included. Spin-orbit coupling however couples the spin to the crystal structure. Spin-orbit coupling is switched on by selecting\n\n  {{TAG|LSORBIT}} = .TRUE.\n\nThe spin quantization axis may be specified by means of the {{TAG|SAXIS}}-tag,\n\n  {{TAG|SAXIS}} =   s<sub>x</sub> s<sub>y</sub> s<sub>z</sub>    ! global spin quantisation axis\n\nwhere the default for {{TAG|SAXIS}} = (0+,0,1) (the notation 0+ implies an infinitesimal small positive number in ''x''-direction). All magnetic moments are now given with respect to the axis \n(s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>), where we have adopted the convention '''that all magnetic moments and spinor-like quantities written or read by VASP are given with respect to this axis'''. This includes the {{TAG|MAGMOM}} line in the {{FILE|INCAR}} file, the total and local magnetizations in the {{FILE|OUTCAR}} and {{FILE|PROCAR}} file, the spinor-like orbitals in the {{TAG|WAVECAR}} file, and the magnetization density in the {{FILE|CHGCAR}} file. With respect to the Cartesian lattice vectors the components of the magnetization are (internally) given by\n\n:<math>\n\\begin{align}\nm_x & = & \\cos(\\beta) \\cos(\\alpha) m^{\\rm axis}_x - \\sin(\\alpha) m^{\\rm axis}_y + \\sin(\\beta) \\cos(\\alpha) m^{\\rm axis}_z \\\\ \nm_y & = & \\cos(\\beta) \\sin(\\alpha) m^{\\rm axis}_x + \\cos(\\alpha) m^{\\rm axis}_y + \\sin(\\beta) \\sin(\\alpha) m^{\\rm axis}_z \\\\ \nm_z & = & -\\sin(\\beta) m^{\\rm axis}_x+ \\cos(\\beta) m^{\\rm axis}_z \n\\end{align}\n</math>\n\n\nWhere ''m''<sup>axis</sup> is the externally visible magnetic moment. Here, <math>\\alpha</math> is the angle between the {{TAG|SAXIS}} vector (s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>) and the Cartesian vector <math>\\hat x</math>, and <math>\\beta</math> is the angle between the vector {{TAG|SAXIS}} and the Cartesian vector <math>\\hat z</math>:\n\n:<math>\n\\begin{align}\n\\alpha &=& {\\rm atan} \\frac{s_y}{s_x} \\\\ \n\\beta &=& {\\rm atan} \\frac{\\vert s_x^2+s_y^2\\vert}{s_z} \n\\end{align}\n</math>\n\nThe inverse transformation is given by\n\n:<math>\n\\begin{align}\nm^{\\rm axis}_x & = & \\cos(\\beta) \\cos(\\alpha) m_x + \\cos(\\beta) \\sin(\\alpha) m_y + \\sin(\\beta) m_z \\\\\nm^{\\rm axis}_y & = & -\\sin(\\alpha) m_z + \\cos(\\alpha) m_y \\\\\nm^{\\rm axis}_z & = & \\sin(\\beta) \\cos(\\alpha) m_x + \\sin(\\beta) \\sin(\\alpha) m_y + \\cos(\\beta) m_z \n\\end{align}\n</math>\n\nIt is easy to see that for the default (s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>)=(0+,0,1), both angles are zero, i.e. <math>\\beta=0</math> and <math>\\alpha=0</math>. In this case, the internal representation is simply equivalent to the external representation:\n\n:<math>\n\\begin{align}\nm_x & = & m^{\\rm axis}_x \\\\ \nm_y & = & m^{\\rm axis}_y \\\\ \nm_z & = & m^{\\rm axis}_z \n\\end{align}\n</math>\n\nThe second important case, is ''m''<sup>axis</sup>=(0,0,''m''). In this case\n\n:<math>\n\\begin{align}\nm_x & = & \\sin(\\beta)*\\cos(\\alpha) m = m s_x / \\sqrt{s_x^2+s_y^2+s_z^2} \\\\\nm_y & = & \\sin(\\beta)*\\sin(\\alpha) m = m s_y / \\sqrt{s_x^2+s_y^2+s_z^2} \\\\\nm_z & = & \\cos(\\beta) m = m s_z / \\sqrt{s_x^2+s_y^2+s_z^2}\n\\end{align}\n</math>\n\n\nHence now the magnetic moment is parallel to the vector {{TAG|SAXIS}}. Thus there are two ways to rotate the spins in an arbitrary direction, either by changing the initial magnetic moments {{TAG|MAGMOM}} or by changing {{TAG|SAXIS}}.\n\nTo initialize calculations with the magnetic moment parallel to a chosen vector (''x'',''y'',''z''), it is therefore possible to either specify (assuming a single atom in the cell)\n\n {{TAG|MAGMOM}} = x y z   ! local magnetic moment in x,y,z\n {{TAG|SAXIS}} =  0 0 1   ! quantisation axis parallel to z\n\nor\n\n {{TAG|MAGMOM}} = 0 0 total_magnetic_moment   ! local magnetic moment parallel to {{TAG|SAXIS}}\n {{TAG|SAXIS}} =  x y z   ! quantization axis parallel to vector (''x'',''y'',''z'')\n\nBoth setups should in principle yield exactly the same energy, but for implementation reasons the second method is usually more precise. The second method also allows to read a preexisting {{FILE|WAVECAR}} file (from a collinear or non collinear run), and to continue the calculation with a different spin orientation. When a non collinear {{FILE|WAVECAR}} file is read, the spin is assumed to be parallel to {{TAG|SAXIS}} (hence VASP will initially report a magnetic moment in the ''z''-direction only).\n\nThe recommended procedure for the calculation of magnetic anisotropies is therefore (please check the section on {{TAG|LMAXMIX}}):\n\n*Start with a collinear calculation and calculate a {{FILE|WAVECAR}} and {{FILE|CHGCAR}} file.\n*Add the tags\n\n   {{TAG|LSORBIT}} = .TRUE.\n   {{TAG|ICHARG}} = 11      ! non selfconsistent run, read {{FILE|CHGCAR}}\n   {{TAG|LMAXMIX}} = 4      ! for d-elements increase {{TAG|LMAXMIX}} to 4, f-elements: {{TAG|LMAXMIX}} = 6\n                            ! you need to set {{TAG|LMAXMIX}} already in the collinear calculation\n   {{TAG|SAXIS}} =  x y z   ! direction of the magnetic field\n   {{TAG|NBANDS}} = 2 * number of bands of collinear run\n\nVASP reads in the {{FILE|WAVECAR}} and {{FILE|CHGCAR}} files, aligns the spin quantization axis parallel to {{TAG|SAXIS}}, which implies that the magnetic field is now parallel to {{TAG|SAXIS}}, and performs a non selfconsistent calculation. By comparing the energies for different orientations the magnetic anisotropy can be determined. Please mind, that a completely selfconsistent calculation ({{TAG|ICHARG}} = 1) is in principle also possible with VASP, but this would allow the spinor wavefunctions to rotate from their initial orientation parallel to {{TAG|SAXIS}} until the correct groundstate is obtained, i.e. until the magnetic moment is parallel to the easy axis. In practice this rotation will be slow, however, since reorientation of the spin gains little energy. Therefore if the convergence criterion is not too tight, sensible results might be obtained even for fully selfconsistent calculations (in the few cases we have tried this worked beautifully).\n    \n*Be very careful with symmetry. We recommend to switch off symmetry altogether ({{TAG|ISYM}}=-1), when spin-orbit coupling is selected. Often the k-point set changes from one to the other spin orientation, worsening the transferability of the results (also the {{FILE|WAVECAR}} file can not be reread properly if the number of k-points changes). Additionally VASP.4.6 (and all older versions) had a bug in the symmetrization of magnetic fields (fixed only VASP.4.6.23).\n\n*Generally be extremely careful, when using spin-orbit coupling: energy differences are tiny, k-point convergence is tedious and slow, and the computer time you require might be infinite.\n\n*It is recommended to set {{TAG|GGA_COMPAT}} = .FALSE. for non collinear calculations in VASP.4.6, since this improves the numerical precision of GGA calculations.\n\n== Assumptions and output ==\nSwitching on spin-orbit coupling (SOC) in a conventional DFT calculation adds an additional term <math>H^{\\alpha\\beta}_{soc}\\propto\\vec{\\sigma}\\cdot\\vec{L}</math> to the Hamiltonian that couples the Pauli-spin operator <math>\\vec{\\sigma}</math> with the angular momentum operator <math>\\vec{L}=\\vec{r}\\times \\vec{p}</math>.{{cite|Steiner:2016}}\nAs an relativistic correction SOC acts predominantly in the immediate vicinity of the nuclei, such that it is assumed that contributions of <math>H_{soc}</math> outside the PAW spheres are negligible. VASP, therefore, calculates the matrix elements of <math>H_{soc}</math> only for the all-electron one-center contributions\n\n<math>\nE_{soc}^{ij} = \\delta_{{\\bf R}_i{\\bf R}_j}\\delta_{l_il_j} \\sum_{n \\bf k} w_{\\bf k} f_{n\\bf k} \\sum_{\\alpha\\beta} \\langle \\tilde{\\psi}^\\alpha_{n\\bf k} |\\tilde{p}_i \\rangle \\langle \\phi_i | H^{\\alpha\\beta}_{soc} | \\phi_j \\rangle \\langle \\tilde{p}_j | \\tilde{\\psi}^\\beta_{n\\bf k} \\rangle\n</math>\n\nwhere <math> \\phi_i({\\bf r}) = R_i(|{\\bf r}-{\\bf R}_i|) Y_{l_im_i}(\\hat{ \\bf r-\\bf R}_i) </math> are the partial waves of an atom centered at <math>{\\bf R}_i</math>, <math>\\tilde{\\psi}^\\alpha_{n\\bf k}</math> is the spinor-component &alpha; of the pseudo-orbital with band-index ''n'' and Bloch-vector '''k''', and <math>f_{n\\bf k}</math> and <math>w_{\\bf k}</math> are the Fermi- and '''k'''-point weights, respectively.{{cite|Steiner:2016}}\nAfter a successful calculation with inclusion of spin-orbit coupling, VASP writes following results to the {{TAG|OUTCAR}}: \n\n Spin-Orbit-Coupling matrix elements\n \n Ion:    1  E_soc:     -0.0984080\n l=   1\n     0.0000000    -0.0134381    -0.0134381\n    -0.0134381     0.0000000    -0.0134381\n    -0.0134381    -0.0134381     0.0000000\n l=   2\n     0.0000000    -0.0005072     0.0000000    -0.0005072    -0.0024560\n    -0.0005072     0.0000000    -0.0018420    -0.0005072    -0.0006140\n     0.0000000    -0.0018420     0.0000000    -0.0018420     0.0000000\n    -0.0005072    -0.0005072    -0.0018420     0.0000000    -0.0006140\n    -0.0024560    -0.0006140     0.0000000    -0.0006140     0.0000000\n l=   3\n     0.0000000    -0.0000000     0.0000000     0.0000000     0.0000000    -0.0000000    -0.0000000\n    -0.0000000     0.0000000    -0.0000000     0.0000000    -0.0000000    -0.0000000    -0.0000000\n     0.0000000    -0.0000000     0.0000000    -0.0000000    -0.0000000    -0.0000000     0.0000000\n     0.0000000     0.0000000    -0.0000000     0.0000000    -0.0000000     0.0000000     0.0000000\n     0.0000000    -0.0000000    -0.0000000    -0.0000000     0.0000000    -0.0000000     0.0000000\n    -0.0000000    -0.0000000    -0.0000000     0.0000000    -0.0000000     0.0000000    -0.0000000\n    -0.0000000    -0.0000000     0.0000000     0.0000000     0.0000000    -0.0000000     0.0000000\nHere \"E_soc\" represents the accumulated energy <math>E_{soc}=\\sum_{ij} E_{soc}^{ij}</math> contribution inside the augmentation sphere that is centered at <math>{\\bf R}_1</math> (position of ion 1), while the following entries correspond to the matrix elements \n<math>E_{soc}^{ij}</math>\nfor the angular momentum <math>l</math>.\n\n== Related tags and articles ==\n{{TAG|MAGMOM}},\n{{TAG|SAXIS}},\n{{TAG|LNONCOLLINEAR}}\n\n{{sc|LSORBIT|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Spin-orbit coupling]][[Category:Noncollinear magnetism]]", "last_revised": "2022-04-08T14:42:21Z"}, "EVENONLY": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EVENONLY\">EVENONLY</a>=<span><span class=\"tag-value\">.TRUE.</span> selects a subset of </span><b>k</b>-points for the representation of the Fock exchange potential, with <i>C</i><sub>1</sub>=<i>C</i><sub>2</sub>=<i>C</i><sub>3</sub>=1, and <i>n</i><sub>1</sub>+<i>n</i><sub>2</sub>+<i>n</i><sub>3</sub> even.</span>", "wikicode": "{{TAGDEF|EVENONLY|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|EVENONLY}}=.TRUE. selects a subset of '''k'''-points for the representation of the Fock exchange potential, with ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>=1, and ''n''<sub>1</sub>+''n''<sub>2</sub>+''n''<sub>3</sub> even.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>.\n\n{{TAG|EVENONLY}}=.TRUE. selects a subset of '''k'''-points with ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>=1, and ''n''<sub>1</sub>+''n''<sub>2</sub>+''n''<sub>3</sub> even. It reduces the computational work load for HF type calculations by a factor two, but is only sensible for high symmetry cases (such as sc, fcc or bcc cells).\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKRED}},\n{{TAG|NKREDX}},\n{{TAG|NKREDY}},\n{{TAG|NKREDZ}},\n{{TAG|ODDONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|EVENONLY|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-11-11T14:29:34Z"}, "ODDONLY": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ODDONLY\">ODDONLY</a>=<span><span class=\"tag-value\">.TRUE.</span> selects a subset of </span><b>k</b>-points for the representation of the Fock exchange potential, with <i>C</i><sub>1</sub>=<i>C</i><sub>2</sub>=<i>C</i><sub>3</sub>=1, and <i>n</i><sub>1</sub>+<i>n</i><sub>2</sub>+<i>n</i><sub>3</sub> odd.</span>", "wikicode": "{{TAGDEF|ODDONLY|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|ODDONLY}}=.TRUE. selects a subset of '''k'''-points for the representation of the Fock exchange potential, with ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>=1, and ''n''<sub>1</sub>+''n''<sub>2</sub>+''n''<sub>3</sub> odd.\n----\nOne may restrict the sum over '''q''' in the [[Hybrid functionals: formalism|Fock exchange potential]] (or one of its short range counterparts) to a subset, {'''q'''<sub>'''k'''</sub>}, of the full (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>)  '''k'''-point set, {'''k'''}, for which the following holds\n\n:<math>\n\\mathbf{q_k} = \\mathbf{b}_1 \\frac{n_1 C_1}{N_1} + \\mathbf{b}_2 \\frac{n_2 C_2}{N_2}\n+ \\mathbf{b}_3 \\frac{n_3 C_3}{N_3},\\quad(n_i=0,..,N_i-1)\n</math>\n\nwhere '''b'''<sub>1,2,3</sub> are the reciprocal lattice vectors of the primitive cell,\nand ''C''<sub>i</sub> is the integer grid reduction factor along reciprocal lattice direction\n'''b'''<sub>i</sub>.\n\n{{TAG|ODDONLY}}=.TRUE. selects a subset of '''k'''-points with ''C''<sub>1</sub>=''C''<sub>2</sub>=''C''<sub>3</sub>=1, and ''n''<sub>1</sub>+''n''<sub>2</sub>+''n''<sub>3</sub> odd. It reduces the computational work load for HF type calculations by a factor two, but is only sensible for high symmetry cases (such as sc, fcc or bcc cells).\n\n'''Mind''': [[Downsampling_of_the_Hartree-Fock_operator#Caveat: when one should not use downsampling|there are circumstances under which '''NKRED''' and '''NKREDX''','''Y''','''Z''' should not be used!]]\n\n== Related tags and articles ==\n{{TAG|NKRED}},\n{{TAG|NKREDX}},\n{{TAG|NKREDY}},\n{{TAG|NKREDZ}},\n{{TAG|EVENONLY}},\n[[Downsampling of the Hartree-Fock operator|downsampling]]\n\n{{sc|ODDONLY|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-11-11T14:30:08Z"}, "I_CONSTRAINED_M": {"datatype": "integer", "options": {"2": null, "1": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/I_CONSTRAINED_M\">I_CONSTRAINED_M</a> switches on the constrained local moments approach.</span>", "wikicode": "{{DISPLAYTITLE:I_CONSTRAINED_M}}\n{{TAGDEF|I_CONSTRAINED_M|1 {{!}} 2|none}}\n\nDescription: {{TAG|I_CONSTRAINED_M}} switches on the constrained local moments approach.\n----\nVASP offers the possibility to add a penalty contribution to the total energy expression (and consequently a penalty functional to the Hamiltonian) that drives the local magnetic moment (integral of the magnetization in a site centered sphere of radius {{TAG|RWIGS}}) into a direction given by the {{TAG|M_CONSTR}}-tag.\n\n*{{TAG|I_CONSTRAINED_M}}=1: Constrain the ''direction'' of the magnetic moments.\n:The total energy is given by\n\n::<math>E=E_0+ \\sum_I\\lambda \\left[ \\vec{M}_I-\\hat{M}^0_I \\left( \\hat{M}^0_I \\cdot \\vec{M_I}\\right)\\right]^2</math>\n\n:where ''E''<sub>0</sub> is the usual DFT energy, and the second term on the right-hand-side represents the penalty. The sum is taken over all atomic sites ''I'', <math>\\hat{M}^0_I</math> is the desired direction of the magnetic moment at site ''I'' (as specified using {{TAG|M_CONSTR}}), and <math>\\vec{M}_I</math> is the integrated magnetic moment inside a sphere &Omega;<sub>''I''</sub> (the radius '''must''' be specified by means of {{TAG|RWIGS}}) around the position of atom ''I'',\n\n<span id=\"MWint\">\n::<math>\\vec{M}_I=\\int_{\\Omega_I} \\vec{m}(\\mathbf{r}) F_I(|\\mathbf{r}|) d\\mathbf{r}</math>\n</span>\n\n:where ''F''<sub>''I''</sub>(|'''r'''|) is a function of norm 1 inside &Omega;<sub>''I''</sub>, that smoothly goes to zero towards the boundary of &Omega;<sub>''I''</sub>.\n\n:The penalty term in the total energy introduces an additional potential inside the aforementioned spheres centered at the atomic sites ''I'', given by\n\n::<math>\nV_I (\\mathbf{r})=2\\lambda \\left[ \\vec{M}_I-\\hat{M}^0_I \\left( \\hat{M}^0_I \\cdot \\vec{M_I}\\right)\\right]\n\\cdot \\vec{\\sigma} F_I(|\\mathbf{r}|) \n</math>\n\n:where <math>\\vec{\\sigma}=(\\sigma_x,\\sigma_y,\\sigma_z)</math> are the Pauli spin-matrices.\n\n*{{TAG|I_CONSTRAINED_M}}=2: Constrain the ''size and direction'' of the magnetic moments.\n:The total energy is given by\n\n::<math>E=E_0+ \\sum_I\\lambda \\left( \\vec{M}_I-\\vec{M}^0_I \\right)^2</math>\n\n:where <math>\\vec{M}^0_I</math> is the desired magnetic moment at site ''I'' (as specified using {{TAG|M_CONSTR}}).\n:The additional potential that arises from the penalty contribution to the total energy is given by\n::<math>V_I (\\mathbf{r})=2\\lambda \\left( \\vec{M}_I-\\vec{M}^0_I \\right)\\cdot \\vec{\\sigma} F_I(|\\mathbf{r}|)</math>\n\nThe weight &lambda;, with which the penalty terms enter into the total energy expression and the Hamiltonian in the above is specified through the {{TAG|LAMBDA}} tag.\n\nAs is probably clear from the above, applying constraints by means of a penalty functional contributes to the total energy. This contribution, however, decreases with increasing {{TAG|LAMBDA}} and can in principle be made vanishingly small. Increasing {{TAG|LAMBDA}} stepwise, from one run to another (slowly so the solution remains stable) one thus converges towards the DFT total energy for a given magnetic configuration.\n----\n\nWhen one uses the constrained moment approach, additional information pertaining to the effect of the constraints is written into the {{FILE|OSZICAR}} file:\n\n  E_p =  0.36856E-07  lambda =  0.500E+02\n <lVp>=  0.30680E-02\n  DBL = -0.30680E-02\n  ion        MW_int                 M_int\n   1 -0.565  0.000  0.000   -0.770  0.000  0.000\n   2  0.565  0.000  0.000    0.770  0.000  0.000\n   3 -0.565  0.000  0.000   -0.770  0.000  0.000\n   4  0.565  0.000  0.000    0.770  0.000  0.000\n DAV:   8    -0.133293620177E+03    0.15284E-05   -0.29410E-08  4188   0.144E-03    0.119E-04\n\n<tt>E_p</tt> is the contribution to the total energy arising from the penalty functional. Under <tt>M_int</tt> VASP lists the integrated magnetic moment at each atomic site. The column labeled <tt>MW_int</tt> shows the result of the integration of magnetization density which has been smoothed towards the boundary of the sphere. It is actually the [[#MWint|smoothed integrated moment]] which enters in the penalty terms (the smoothing ensures that the total local potential remains continuous at the sphere boundary). One should look at the latter numbers to check whether enough of the magnetization density around each atomic site is contained within the integration sphere and increase {{TAG|RWIGS}} accordingly. What exactly constitutes \"enough\" in this context is hard to say. It is best to set {{TAG|RWIGS}} in such a manner that the integration spheres do not overlap and are otherwise as large as possible.\n\n DAV:   9    -0.133293621087E+03   -0.91037E-06   -0.18419E-08  4188   0.104E-03\n    1 F= -.13329362E+03 E0= -.13329362E+03  d E =0.000000E+00  mag=     0.0000     0.0000     0.0000\n \n  E_p =  0.36600E-07  lambda =  0.500E+02\n  ion             lambda*MW_perp\n   1  -0.67580E-03  -0.12424E-22  -0.88276E-23\n   2   0.67580E-03   0.14700E-22  -0.24744E-22\n   3  -0.67790E-03  -0.82481E-23  -0.19834E-22\n   4   0.67790E-03   0.15710E-23   0.34505E-22\n\nUnder <tt>lambda*MW_perp</tt> the constraining \"magnetic field\" at each atomic site is listed. It shows which magnetic field is added to the DFT Hamiltonian to stabilize the magnetic configuration.\n\n== Related tags and articles ==\n{{TAG|M_CONSTR}},\n{{TAG|LAMBDA}},\n{{TAG|RWIGS}},\n{{TAG|LNONCOLLINEAR}}\n\n{{sc|I_CONSTRAINED_M|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Magnetism]]", "last_revised": "2022-04-07T15:55:26Z"}, "M_CONSTR": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/M_CONSTR\">M_CONSTR</a> specifies the desired local magnetic moment (size and/or direction) for the constrained local moments approach. </span>", "wikicode": "{{TAGDEF|M_CONSTR|[real array]|3*NIONS*0.0}}\n\nDescription: {{TAG|M_CONSTR}} specifies the desired local magnetic moment (size and/or direction) for the constrained local moments approach. \n----\nThe {{TAG|M_CONSTR}} tag sets the desired size and/or direction of the integrated local magnetic moments in cartesian coordinates.\n\nFor each ion 3 coordinates must be specified, i.e., for a system of ''N'' ions\n\n {{TAG|M_CONSTR}}= M_1x M_1y M_1z  M_2x M_2y M_2z  ....  M_Nx M_Ny M_Nz\n\nFor {{TAG|I_CONSTRAINED_M}}=1 the norm of this vector is meaningless since only the direction will be constrained. For {{TAG|I_CONSTRAINED_M}}=2 both the norm as well as the direction of the moments specified by means of {{TAG|M_CONSTR}} are subject to constraints.\n\nSetting\n\n {{TAG|M_CONSTR}}=  ... 0 0 0 ... \n\nfor a certain ion is equivalent to imposing no constraints on the integrated local magnetic moment at this ionic site.\n\nFor an explanation of the constrained local moments approach see the description of the {{TAG|I_CONSTRAINED_M}} tag.\n \n== Related tags and articles ==\n{{TAG|I_CONSTRAINED_M}},\n{{TAG|LAMBDA}},\n{{TAG|RWIGS}},\n{{TAG|LNONCOLLINEAR}}\n\n{{sc|M_CONSTR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]]", "last_revised": "2022-04-08T14:45:11Z"}, "LAMBDA": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LAMBDA\">LAMBDA</a> sets the weight with which the penalty terms of the constrained local moment approach enter into the total energy expression and the Hamiltonian.</span>", "wikicode": "{{TAGDEF|LAMBDA|[real]|0}}\n\nDescription: {{TAG|LAMBDA}} sets the weight with which the penalty terms of the constrained local moment approach enter into the total energy expression and the Hamiltonian.\n----\nSee the explanation given in the description of the {{TAG|I_CONSTRAINED_M}} tag.\n\n== Related tags and articles ==\n{{TAG|I_CONSTRAINED_M}},\n{{TAG|M_CONSTR}},\n{{TAG|RWIGS}},\n{{TAG|LNONCOLLINEAR}}\n\n{{sc|LAMBDA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]]", "last_revised": "2022-04-08T14:26:14Z"}, "LEPSILON": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LEPSILON\">LEPSILON</a>=<span><span class=\"tag-value\">.TRUE.</span> determines the static dielectric matrix, ion-clamped piezoelectric tensor and the Born effective charges using density functional perturbation theory.</span></span>", "wikicode": "{{TAGDEF|LEPSILON|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LEPSILON}}=.TRUE. determines the static dielectric matrix, ion-clamped piezoelectric tensor and the Born effective charges using density functional perturbation theory.\n----\nDetermines the static ion-clamped dielectric matrix using density functional perturbation\ntheory. The dielectric matrix is calculated with and without local field effects. Usually local field effects are determined on the Hartree level, i.e. including changes of the Hartree potential.\nTo include microscopic changes of the exchange correlation potential \nthe tag {{TAG|LRPA}}=.FALSE. must be set. The method is explained in detail in paper by Gajdo\u0161 ''et al.'',<ref name=\"gajdos:prb:06\"/> and closely follows the original work of Baroni and Resta.<ref name=\"baroni:prb:86\"/>\nA summation over empty conduction band states is not required, instead the usual expressions in perturbation theory ({{TAG|LOPTICS}}=.TRUE.),\n\n:<math>\n| \\nabla_{\\mathbf{k}} |\\tilde{u}_{n\\mathbf{k}} \\rangle = \\sum_{n'\\ne n} \n\\frac{  | \\tilde{u}_{n'\\mathbf{k}} \\rangle  \\langle \\tilde{u}_{n'\\mathbf{k}} |\n   \\frac{\\partial\\, (\\mathbf{H}(\\mathbf k) -\\epsilon_{n\\mathbf{k}} \\mathbf{S}(\\mathbf k))}{ \\partial {\\mathbf{k}}}\n | \\tilde{u}_{n\\mathbf{k}} \\rangle }{\\epsilon_{n\\mathbf{k}}-  \\epsilon_{n'\\mathbf{k}}},\n</math>\n\nare rewritten as linear Sternheimer equations:\n\n:<math>\n \\left( \\mathbf{H}(\\mathbf k) - \\epsilon_{n\\mathbf k} \\mathbf{S}(\\mathbf k) \\right) \n | \\nabla_{\\mathbf{k}} \\tilde{u}_{n\\mathbf{k}} \\rangle  = -\n \\frac{\\partial  \\,(\\mathbf{H}(\\mathbf k)-  \\epsilon_{n\\mathbf{k}} \\mathbf{S}(\\mathbf k)) }\n{ \\partial {\\mathbf{k}}} | \\tilde{u}_{n\\mathbf{k}} \\rangle .\n</math>\n\nThe solution of this equation involves similar iterative techniques as the conventional selfconsistency cycles. Hence, for each element of the dielectric matrix several lines will be written to the <tt>stdout</tt> and {{FILE|OSZICAR}}. These possess a similar structure as for conventional selfconsistent or non-selfconsistent calculations (a residual minimization scheme is used to solve the linear equation, other schemes such as Davidson do not apply to a linear equation):\n\n        N       E              dE             d eps       ncg     rms          rms(c)\n RMM:   1    -0.14800E+01   -0.85101E-01   -0.72835E+00   220   0.907E+00    0.146E+00\n RMM:   2    -0.14248E+01    0.55195E-01   -0.27994E-01   221   0.449E+00    0.719E-01\n RMM:   3    -0.13949E+01    0.29864E-01   -0.10673E-01   240   0.322E+00    0.131E-01\n RMM:   4    -0.13949E+01    0.13883E-04   -0.31511E-03   242   0.600E-01    0.336E-02\n RMM:   5    -0.13949E+01    0.28357E-04   -0.25757E-04   228   0.177E-01    0.126E-02\n\nIt is important to note that exact values for the dielectric matrix are obtained even if only valence band states are calculated. Hence this method does not require to increase the {{TAG|NBANDS}} parameter. The final values for the static dielectric matrix can be found in the {{FILE|OUTCAR}} file after the lines\n  MICROSCOPIC STATIC DIELECTRIC TENSOR (excluding local field effects)\nand\n  MACROSCOPIC STATIC DIELECTRIC TENSOR (including local field effects in DFT)\nThe values found after <tt>MACROSCOPIC STATIC DIELECTRIC TENSOR (excluding local field effects)</tt> should match exactly to the zero frequency values &omega;&rarr;0 determined by the method selected using {{TAG|LOPTICS}}=.TRUE..\nThis offers a convenient way to determine how many empty bands are required for\n{{TAG|LOPTICS}}=.TRUE.. Simply execute VASP using {{TAG|LEPSILON}}=.TRUE. in order to determine the exact values for the dielectric constants. Next, switch to {{TAG|LOPTICS}}=.TRUE. and increase the number of conduction bands until the same values are obtained as using density functional perturbation theory.\n\nNote that the routine also parses and uses the value supplied in the {{TAG|LNABLA}} tag.\nFurthermore, the routine calculates the Born effective charge tensor (dynamical charges) and electronic contribution to the the piezoelectric tensor ,\nand prints them after\n  BORN EFFECTIVE CHARGES (in e, cummulative output)\nand\n  PIEZOELECTRIC TENSOR  for field in x, y, z        (C/m^2)\nif {{TAG|LRPA}}=.FALSE. is set (the calculated tensors are not sensible in the random phase approximation {{TAG|LRPA}}=.TRUE.).\n\n\n;Pros compared to {{TAG|LOPTICS}}=.TRUE.\n*no conduction bands required.\n*local field effects included on the RPA and DFT level (see {{TAG|ACFDT/RPA calculations}}).\n\n\n;Cons compared to {{TAG|LOPTICS}}=.TRUE.\n*presently only static properties available.\n*requires a relatively time consuming iterative process.\n*does not support HF or hybrid functionals, whereas {{TAG|LOPTICS}}=.TRUE. and the GW routines do.\n\n\nWe do not recommend to select {{TAG|LOPTICS}}=.TRUE. and {{TAG|LEPSILON}}=.TRUE.\nin a single run (although it might work in some versions).\nDensity functional perturbation theory {{TAG|LEPSILON}}=.TRUE. does not require to increase {{TAG|NBANDS}} and is, in fact, much slower if  {{TAG|NBANDS}} is increased, whereas the summation over emtpy conduction band states requires a large number of such states.\n\n== Related tags and articles ==\n{{TAG|LOPTICS}},\n{{TAG|LRPA}},\n{{TAG|LCALCEPS}},\n{{TAG|IBRION}}\n\n{{sc|LEPSILON|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"gajdos:prb:06\">[http://link.aps.org/doi/10.1103/PhysRevB.73.045112 M. Gajdo\u0161, K. Hummer, G. Kresse, J. Furthm\u00fcller, and F. Bechstedt, Phys. Rev. B 73, 045112 (2006).]</ref>\n<ref name=\"baroni:prb:86\">[http://link.aps.org/doi/10.1103/PhysRevB.33.7017 S. Baroni and R. Resta, Phys. Rev. B 33, 7017, (1986).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Static dielectric properties]]", "last_revised": "2022-07-19T07:46:58Z"}, "LOPTICS": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LOPTICS\">LOPTICS</a>=<span><span class=\"tag-value\">.TRUE.</span> calculates the frequency dependent dielectric matrix after the electronic ground state has been determined.</span></span>", "wikicode": "{{TAGDEF|LOPTICS|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LOPTICS}}=.TRUE. calculates the frequency dependent dielectric matrix after the electronic ground state has been determined.\n----\nThe imaginary part is determined by a summation over empty states using the equation:\n\n<span id=\"epsilon\">\n:<math>\n\\epsilon^{(2)}_{\\alpha \\beta}\\left(\\omega\\right) = \\frac{4\\pi^2 e^2}{\\Omega} \n\\mathrm{lim}_{q \\rightarrow 0} \\frac{1}{q^2} \\sum_{c,v,\\mathbf{k}} 2 w_\\mathbf{k} \\delta( \\epsilon_{c\\mathbf{k}} - \\epsilon_{v\\mathbf{k}} - \\omega)\n  \\times   \\langle u_{c\\mathbf{k}+\\mathbf{e}_\\alpha q}  | u_{v\\mathbf{k}} \\rangle \n             \\langle u_{v\\mathbf{k}} | u_{c\\mathbf{k}+\\mathbf{e}_\\beta q} \\rangle\n</math>\n</span>\n\nhere the indices ''c'' and ''v'' refer to conduction and valence band states respectively, and ''u''<sub>''c'''''k'''</sub> is the cell periodic part of the orbitals at the k-point '''k'''. The real part of the dielectric tensor  &epsilon;<sup>(1)</sup> is obtained by the usual Kramers-Kronig\ntransformation\n\n<span id=\"kramerskronig\">\n:<math>\n\\epsilon^{(1)}_{\\alpha \\beta} (\\omega) = 1 + \\frac{2}{ \\pi} P \\int_0^{\\infty} \n \\frac{ \\epsilon^{(2)}_{\\alpha \\beta} (\\omega') \\omega'}{ \\omega'^2- \\omega^2 + i \\eta } d \\omega'\n</math>\n</span>\n\nwhere ''P'' denotes the principle value. The method is explained in detail in the paper by Gajdo\u0161 ''et al.'' (see Eqs. 15, 29, and 30).<ref name=\"gajdos:prb:06\"/> The complex shift &eta; is determined by the parameter {{TAG|CSHIFT}}.\n\nNote that local field effects, i.e. changes of the cell periodic part of the potential are neglected in this approximation.  These can be evaluated using either the implemented density functional perturbation theory ({{TAG|LEPSILON}}=.TRUE.), or the GW routines.\n\nThe method selected using {{TAG|LOPTICS}}=.TRUE. requires an appreciable number of empty conduction band states. Reasonable results are usually only obtained, if the parameter {{TAG|NBANDS}} is roughly doubled or tripled in the {{FILE|INCAR}} file with respect to the VASP default.\nFurthermore it is emphasized that the routine works properly even for [[:Category:Hybrid_functionals|HF and screened exchange type calculations and hybrid functionals]]. In this case, finite differences are used to determine the derivatives of the Hamiltonian with respect to '''k'''.\n\nNote that the number of frequency grid points is determined by the parameter {{TAG|NEDOS}}. In many cases it is desirable to increase this parameter significantly from its default value. Values around {{TAG|NEDOS}}=2000 are strongly recommended.\n\nVASP posses multiple other routines to calculate the frequency dependent dielectric function.\nSpecifically, one can use {{TAG|ALGO}} = TDHF (Casida/[[BSE calculations]]), {{TAG|ALGO}} = GW ([[GW calculations]]) and {{TAG|ALGO}} = TIMEEV ([[Time Evolution]]: apply a delta kick and follow the induced dipoles).\nCompared to {{TAG|LOPTICS}}=.TRUE., all those routines have the advantage to include\neffects beyond the independent particle approximation, however, they are usually\nalso much more expensive than {{TAG|LOPTICS}}=.TRUE.\n\n{{NB|warning|Note that {{TAG|LOPTICS}} {{=}} .TRUE. with {{TAG|ISMEAR}} {{=}} -2 is currently not supported.}}\n{{NB|mind|Furthermore the combination of {{TAG|LOPTICS}} {{=}} .TRUE. and {{TAG|ISMEAR}} selecting the tetrahedron method is only supported as of VASP 6.3.}}\n\n== Related tags and articles ==\n{{TAG|CSHIFT}},\n{{TAG|LNABLA}},\n{{TAG|LEPSILON}}\n\nSee also: {{sc|LOPTICS|Examples|Examples that use this tag}}, [[Time Evolution]]\n\n== References ==\n<references>\n<ref name=\"gajdos:prb:06\">[http://link.aps.org/doi/10.1103/PhysRevB.73.045112 M. Gajdo\u0161, K. Hummer, G. Kresse, J. Furthm\u00fcller, and F. Bechstedt, Phys. Rev. B 73, 045112 (2006).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]]", "last_revised": "2022-07-19T14:27:32Z"}, "CSHIFT": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CSHIFT\">CSHIFT</a> sets the (small) complex shift \u03b7 in the <a href=\"https://www.vasp.at/wiki/index.php/LOPTICS%23kramerskronig\">Kramers-Kronig transformation</a> and Hilbert transformation in linear response and GW calculations, respectively.</span>", "wikicode": "{{TAGDEF|CSHIFT|[real]}}\n{{DEF|CSHIFT|{{TAG|OMEGAMAX}}*1.3 / max({{TAG|NOMEGA}},40)| for [[GW calculations]] |0.1| for linear response calculations}}\nDescription: {{TAG|CSHIFT}} sets the (small) complex shift &eta; in the [[LOPTICS#kramerskronig|Kramers-Kronig transformation]] and Hilbert transformation in linear response and GW calculations, respectively.\n----\nThe default {{TAG|CSHIFT}}=0.1 is perfectly acceptable for most calculations and causes a slight smoothing of the real part of the dielectric function. If the gap is very small (i.e. approaching two times {{TAG|CSHIFT}}), slight inaccuracies in the static dielectric constant are possible, which can be remedied by decreasing {{TAG|CSHIFT}}. If {{TAG|CSHIFT}} is further decreased, it is strongly recommended to increase the parameter {{TAG|NEDOS}} to values around 2000.\n\nFor GW type calculations, one should manually check that {{TAG|CSHIFT}} is at least as large\nas the grid spacing at low frequencies. If {{TAG|CSHIFT}} is smaller than the grid spacing,\nthe QP energies might show erratic behavior (for instance large re-normalization factors Z). \n== Related tags and articles ==\n{{TAG|OMEGAMIN}},\n{{TAG|OMEGAMAX}},\n{{TAG|LOPTICS}},\n{{TAG|LNABLA}}\n\n{{sc|CSHIFT|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Static dielectric properties]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-09-26T10:36:25Z"}, "LNABLA": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LNABLA\">LNABLA</a>=<span><span class=\"tag-value\">.TRUE.</span> evaluates the transversal expression for the frequency dependent dielectric matrix.</span></span>", "wikicode": "{{TAGDEF|LNABLA|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LNABLA}}=.TRUE. evaluates the transversal expression for the frequency dependent dielectric matrix.\n----\nUsually VASP uses the [[LOPTICS#epsilon|longitudinal expression for the frequency dependent dielectric matrix]].\nIt is however possible to switch to the computationally somewhat simpler transversal expressions by selecting {{TAG|LNABLA}}=.TRUE. (Eqs. 17 and 20 in Ref.<ref name=\"gajdos:prb:06\"/>).\nIn this simplification the imaginary part of the macroscopic dielectric function is given by\n\n:<math>\n\\epsilon^{(2)}_{\\alpha \\beta} (\\omega) = \\frac{4 \\pi^2 e^2  \\hbar^4}{\\Omega \\omega^2 m_e^2} \n \\mathrm{lim}_{\\mathbf{q} \\rightarrow 0} \\sum_{c,v, \\mathbf{k}} 2 w_\\mathbf{k} \n  \\delta( \\epsilon_{c\\mathbf{k+q}} - \\epsilon_{v\\mathbf{k}} - \\omega)  \n  \\times  \\langle u_{c\\mathbf{k}} | i{\\mathbf{\\nabla}_{\\alpha} - \\mathbf{k}}_{\\alpha} | u_{v\\mathbf{k}} \\rangle\n             \\langle u_{c\\mathbf{k}} | i{\\mathbf{\\nabla}_{\\beta}  - \\mathbf{k}}_{\\beta}  | u_{v\\mathbf{k}} \\rangle^*.\n</math>\n\nExcept for the purpose of testing, there is however hardly ever a reason\nto use the transversal expression, since it is less accurate.\n== Related tags and articles ==\n{{TAG|LOPTICS}},\n{{TAG|CSHIFT}}\n\n{{sc|LNABLA|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"gajdos:prb:06\">[http://link.aps.org/doi/10.1103/PhysRevB.73.045112 M. Gajdo\u0161, K. Hummer, G. Kresse, J. Furthm\u00fcller, and F. Bechstedt, Phys. Rev. B 73, 045112 (2006).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]]", "last_revised": "2022-07-19T14:27:48Z"}, "LRPA": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LRPA\">LRPA</a>=<span><span class=\"tag-value\">.TRUE.</span> includes local field effect on the Hartree level only.</span></span>", "wikicode": "{{TAGDEF|LRPA|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LRPA}}=.TRUE. includes local field effect on the Hartree level only.\n----\nFor {{TAG|LRPA}}=.TRUE. local field effect are included on the Hartree level only. This means that cell periodic microscopic changes of the local potential related to the change of the Hartree potential are included.\n\nFor {{TAG|LRPA}}=.FALSE. changes of the Hartree ''and the exchange correlation potential'' are included. This usually increases the dielectric constants. The final values for the dielectric tensor can be found in the {{TAG|OUTCAR}} file after the lines.\n MACROSCOPIC STATIC DIELECTRIC TENSOR (including local field effects in RPA (Hartree))\nFor {{TAG|LRPA}}=.FALSE. the dielectric tensor is written after the lines:\n MACROSCOPIC STATIC DIELECTRIC TENSOR (including local field effects in DFT)\nThe dielectric tensor ''excluding'' local field effects is always calculated (irregardless of {{TAG|LRPA}}). The piezoelectric tensors and the Born effective charges as well as the ionic contributions the to dielectric tensor are only calculated for {{TAG|LRPA}}=.FALSE..\n\n== Related tags and articles ==\n{{TAG|LEPSILON}},\n{{TAG|LCALCEPS}},\n{{TAG|LHARTREE}},\n{{TAG|LADDER}}\n\n{{sc|LRPA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Static dielectric properties]]", "last_revised": "2022-07-19T07:59:18Z"}, "NOMEGA": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NOMEGA\">NOMEGA</a> specifies the number of (imaginary) frequency and imaginary time grid points.</span>", "wikicode": "{{TAGDEF|NOMEGA|[integer]}}\n{{DEF|NOMEGA|100|for [[GW calculations]] |12|for [[ACFDT calculations]]}}\n\nDescription: {{TAG|NOMEGA}} specifies the number of (imaginary) frequency and imaginary time grid points.\n----\nTypically {{TAG|NOMEGA}} should be chosen around 50-100 (for the parallel version, {{TAG|NOMEGA}} should be dividable by the number of compute nodes to obtain maximum efficiency). For quick and memory conserving calculations, it is sufficient to set {{TAG|NOMEGA}} to values around {{TAG|NOMEGA}} = 20-30, but then you must expect errors of the order of 20-50 meV for the gap and 100-200 meV for the bottom of the conduction band. We furthermore recommend to increase {{TAG|NOMEGA}} not beyond 100 for a <math>k</math>-point sampling of 4&times;4&times;4 points/atom: the joint DOS and the self-energy tend to possess spurious fine structure related to the finite <math>k</math>-point grid. This fine structure is smoothed when smaller values for {{TAG|NOMEGA}} are used or if more <math>k</math>-points are used. For 6&times;6&times;6 <math>k</math>-points/atom {{TAG|NOMEGA}} can be usually increased to 200-300 without noticing problems associated with this kind of noise.\n\nNote that the spectral method (see {{TAG|LSPECTRAL}}) scales very favorable with respect to the number of frequency points hence {{TAG|NOMEGA}}=30 is usually only slightly faster than {{TAG|NOMEGA}}=100. \n\n*N.B: Low-scaling GW and RPA/ACFDT calculations require considerably fewer imaginary frequency (and time) points.\n\n== Related tags and articles ==\n{{TAG|NOMEGAR}}, \n{{TAG|NTAUPAR}},\n{{TAG|LSPECTRAL}}\n{{TAG|NOMEGA_DUMP}}\n\n{{sc|NOMEGA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]] [[Category:GW]][[Category:ACFDT]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-11-23T14:47:14Z"}, "NOMEGAR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NOMEGAR\">NOMEGAR</a> specifies the number of frequency grid points along the real axis.</span>", "wikicode": "{{TAGDEF|NOMEGAR|[integer]}}\n{{DEF|NOMEGAR|{{TAG|NOMEGA}}|for [[GW_calculations|GW calculations]]|0|for [[ACFDT_calculations|ACFDT calculations]]}}\n\nDescription: {{TAG|NOMEGAR}} specifies the number of frequency grid points along the real axis.\n----\nUsually {{TAG|NOMEGAR}} equals {{TAG|NOMEGA}}. If {{TAG|NOMEGAR}} is smaller than  {{TAG|NOMEGA}} (for instance 0), frequencies along the imaginary time axis are included (this feature is currently not fully supported). \n\n== Related tags and articles ==\n{{TAG|NOMEGA}}\n\n{{sc|NOMEGAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]] [[Category:GW]][[Category:ACFDT]]", "last_revised": "2022-04-08T14:50:16Z"}, "LSPECTRAL": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSPECTRAL\">LSPECTRAL</a> specifies to use the spectral method.</span>", "wikicode": "{{TAGDEF|LSPECTRAL|.FALSE. {{!}} .TRUE.}}\n{{DEF|LSPECTRAL|.TRUE.|if {{TAG|NOMEGA}}>2}}\n\nDescription: {{TAG|LSPECTRAL}} specifies to use the spectral method.\n----\n\nIf {{TAG|LSPECTRAL}} = .TRUE. is set, the imaginary part of the independent particle polarizability <math>\\chi_{\\mathbf{q}}^0 (\\mathbf{G}, \\mathbf{G}', \\omega)</math> is calculated first, and afterwards the full independent particle polarizability is determined using a Kramers-Kronig (or Hilbert) transform. This reduces the computational workload by almost a factor {{TAG|NOMEGA}}/2. The downside of the coin is that the response function must be kept in memory for all considered frequencies, which can cause excessive memory requirements. VASP, therefore, distributes the dielectric functions among the available compute nodes.\n\nA similar trick is used when the QP-shifts are calculated. In general it is strongly recommended to set {{TAG|LSPECTRAL}} = .TRUE., except if memory requirements are too excessive.\n\n== Related tags and articles ==\n{{TAG|NOMEGA}},\n{{TAG|LSPECTRALGW}}\n\n{{sc|LSPECTRAL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:11:52Z"}, "LDAU": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDAU\">LDAU</a>=<span><span class=\"tag-value\">.TRUE.</span> switches on DFT+U.</span></span>", "wikicode": "{{TAGDEF|LDAU|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LDAU}}=.TRUE. switches on DFT+U.\n----\n'''Note on bandstructure calculation''': The {{FILE|CHGCAR}} file contains only information up to angular momentum quantum number <math>l</math>={{TAG|LMAXMIX}} for the [[LDAUTYPE#occmat|on-site PAW occupancy matrices]]. When the {{FILE|CHGCAR}} file is read and kept fixed in the course of the calculations ({{TAG|ICHARG}}=11), the results will be necessarily not identical to a self-consistent run. The deviations are often large for DFT+U calculations. For the calculation of band structures within the DFT+U approach, it is hence strictly required to increase {{TAG|LMAXMIX}} to 4 (<math>d</math> elements) and 6 (<math>f</math> elements).\n\n== Related tags and articles ==\n{{TAG|LDAUTYPE}},\n{{TAG|LDAUL}},\n{{TAG|LDAUU}},\n{{TAG|LDAUJ}},\n{{TAG|LDAUPRINT}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2022-04-11T13:11:03Z"}, "LDAUTYPE": {"datatype": "integer", "options": {"1": null, "2": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDAUTYPE\">LDAUTYPE</a> specifies the DFT+U variant that will be used.</span>", "wikicode": "{{TAGDEF|LDAUTYPE|1 {{!}} 2 {{!}} 4|2}}\n\nDescription: {{TAG|LDAUTYPE}} specifies the DFT+U variant that will be used.\n----\nThe following variants of the [[DFT+U: formalism|DFT+U approach]] are available:\n\n*{{TAG|LDAUTYPE}}=1: The rotationally invariant DFT+U introduced by Liechtenstein ''et al.''{{cite|liechtenstein:prb:95}}\n\n*{{TAG|LDAUTYPE}}=2: The simplified (rotationally invariant) approach to DFT+U, introduced by Dudarev ''et al.''{{cite|dudarev:prb:98}}\n\n*{{TAG|LDAUTYPE}}=3: Linear response ansatz of Cococcioni et al. {{cite|cococcioni:2005}} to compute U. See [[Calculate U for LSDA+U|how to calculate U]].\n{{NB|mind|For {{TAG|LDAUTYPE}}{{=}}3, the {{TAG|LDAUU}} and {{TAG|LDAUJ}} tags specify the strength of the spherical potential acting on the spin-up and spin-down manifolds, respectively.|:}}\n\n*{{TAG|LDAUTYPE}}=4: Same as {{TAG|LDAUTYPE}}=1, but without exchange splitting.\n\nA method to estimate the parameters for DFT+U is the [[Constrained-random-phase approximation|constrained-random-phase approximation]]. Another method is the linear response ansatz with {{TAG|LDAUTYPE}}=3, mentioned above. On the other hand, in many applications, the DFT+U parameters are used as tuning parameters to fit experimental data.\n{{NB|tip|For band-structure calculations, increase {{TAG|LMAXMIX}} to 4 (<math>d</math> elements) or 6 (<math>f</math> elements).}}\nThis is because the {{FILE|CHGCAR}} file contains only information up to angular momentum quantum number set by {{TAG|LMAXMIX}} for the [[LDAUTYPE#occmat|on-site PAW occupancy matrices]]. When the {{FILE|CHGCAR}} file is read and kept fixed in the course of the calculations ({{TAG|ICHARG}}=11), the results will necessarily not be identical to a self-consistent run. The deviations are often large for DFT+U calculations.\n{{NB|warning|The total energy will depend on the parameters <math>U</math> ({{TAG|LDAUU}}) and <math>J</math> ({{TAG|LDAUJ}}). It is, therefore, not meaningful to compare the total energies resulting from calculations with different <math>U</math> and/or <math>J</math>; or <math>U-J</math> in the case of Dudarev's approach ({{TAG|LDAUTYPE}}{{=}}2).}}\n\nIt is possible to use {{TAG|LDAUTYPE}}=1, 2, and 3 for a non\u2013spin-polarized calculation with {{TAG|ISPIN}}=1.\n\n== Related tags and articles ==\n{{TAG|LDAU}},\n{{TAG|LDAUL}},\n{{TAG|LDAUU}},\n{{TAG|LDAUJ}},\n{{TAG|LDAUPRINT}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAUTYPE|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2023-05-09T08:53:08Z"}, "LDAUL": {"datatype": "integer array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDAUL\">LDAUL</a> specifies the <math>l</math>-quantum number for which the on-site interaction is added.</span>", "wikicode": "{{TAGDEF|LDAUL|[integer array]|NTYP*2}}\n\nDescription: {{TAG|LDAUL}} specifies the <math>l</math>-quantum number for which the on-site interaction is added.\n----\nFor {{TAG|LDAUL}}=-1 no on-site interaction is added.\n\n'''Mind''': one ''has'' to specify one number for each atomic species.\n\n== Related tags and articles ==\n{{TAG|LDAU}},\n{{TAG|LDAUTYPE}},\n{{TAG|LDAUU}},\n{{TAG|LDAUJ}},\n{{TAG|LDAUPRINT}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAUL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2022-04-11T13:11:11Z"}, "LDAUU": {"datatype": "real array", "options": {}, "summary": "Sets the effective on-site Coulomb interactions (eV).", "wikicode": "{{TAGDEF|LDAUU|[real array]|NTYP*0.0}}\n\nDescription: Sets the effective on-site Coulomb interactions (eV).\n----\n{{TAG|LDAUU}} specifies the strength of the effective on-site Coulomb interactions in eV. It must hold one value for each atomic species.\n{{NB|warning|The total energy will depend on the parameters <math>U</math> ({{TAG|LDAUU}}) and <math>J</math> ({{TAG|LDAUJ}}). It is, therefore, not meaningful to compare the total energies resulting from calculations with different <math>U</math> and/or <math>J</math>; or <math>U-J</math> in the case of Dudarev's approach ({{TAG|LDAUTYPE}}{{=}}2).}}\n{{NB|mind|For {{TAG|LDAUTYPE}}{{=}}3, the {{TAG|LDAUU}} and {{TAG|LDAUJ}} tags specify the strength (in eV) of the spherical potential acting on the spin-up and spin-down manifolds, respectively.}}\n\n== Related tags and articles ==\n{{TAG|LDAU}},\n{{TAG|LDAUTYPE}},\n{{TAG|LDAUL}},\n{{TAG|LDAUJ}},\n{{TAG|LDAUPRINT}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAUU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2023-05-09T08:14:25Z"}, "LDAUJ": {"datatype": "real array", "options": {}, "summary": "Sets the effective on-site exchange interactions (eV).", "wikicode": "{{TAGDEF|LDAUJ|[real array]|NTYP*0.0}}\n\nDescription: Sets the effective on-site exchange interactions (eV).\n----\n{{TAG|LDAUJ}} specifies the strength of the effective on-site exchange interactions in eV. It must hold one value for each atomic species.\n{{NB|warning|The total energy will depend on the parameters <math>U</math> ({{TAG|LDAUU}}) and <math>J</math> ({{TAG|LDAUJ}}). It is, therefore, not meaningful to compare the total energies resulting from calculations with different <math>U</math> and/or <math>J</math>; or <math>U-J</math> in the case of Dudarev's approach ({{TAG|LDAUTYPE}}{{=}}2).}}\n{{NB|mind|For {{TAG|LDAUTYPE}}{{=}}3, the {{TAG|LDAUU}} and {{TAG|LDAUJ}} tags specify the strength (in eV) of the spherical potential acting on the spin-up and spin-down manifolds, respectively.}}\n\n== Related tags and articles ==\n{{TAG|LDAU}},\n{{TAG|LDAUTYPE}},\n{{TAG|LDAUL}},\n{{TAG|LDAUU}},\n{{TAG|LDAUPRINT}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAUJ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2023-05-09T08:13:39Z"}, "LDAUPRINT": {"datatype": "integer", "options": {"1": null, "0": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDAUPRINT\">LDAUPRINT</a> controls the verbosity of a DFT+U calculation.</span>", "wikicode": "{{TAGDEF|LDAUPRINT|0 {{!}} 1|0}}\n\nDescription: {{TAG|LDAUPRINT}} controls the verbosity of a DFT+U calculation.\n----\n*{{TAG|LDAUPRINT}}=0: No onsite occupancy matrix is written to the {{FILE|OUTCAR}} file.\n*{{TAG|LDAUPRINT}}=1: The spin up and spin down onsite occupancy matrices of the atoms types to which a <math>U</math> is applied are written to the {{FILE|OUTCAR}} file at each iteration (below \"onsite density matrix\"). The eigenvalues and eigenvectors of the total (spin up + spin down) onsite matrix is also written (below \"occupancies and eigenvectors\").\n<!--\n*{{TAG|LDAUPRINT}}=2: same as {{TAG|LDAUPRINT}}=1, plus potential matrix dumped to {{FILE|stdout}}.\n-->\n\n== Related tags and articles ==\n{{TAG|LDAU}},\n{{TAG|LDAUTYPE}},\n{{TAG|LDAUL}},\n{{TAG|LDAUU}},\n{{TAG|LDAUJ}},\n{{TAG|LMAXMIX}},\n{{TAG|DFT+U: formalism}}\n\n{{sc|LDAUPRINT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:DFT+U]]", "last_revised": "2023-04-11T09:05:24Z"}, "OMEGAMAX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OMEGAMAX\">OMEGAMAX</a> specifies the maximum frequency for the dense part of the frequency grid for GW calculations (old GW code, does not apply to GWR). </span>", "wikicode": "{{TAGDEF|OMEGAMAX|[real]|outermost node in dielectric function <math>\\epsilon(\\omega)</math>/1.3}}\n\nDescription: {{TAG|OMEGAMAX}} specifies the maximum frequency for the dense part of the frequency grid for GW calculations (old GW code, does not apply to GWR). \nFor CRPA calculations, {{TAG|OMEGAMAX}} is the frequency point of the interaction. \nFor BSE calculations {{TAG|OMEGAMAX}} determines the maximum energy difference for excitation pairs to be included. Since the flag controls different aspects of the code, be careful when setting it (and remember to remove the tag, when you change the type of calculations).\n----\nGW type calculations:\n\nFor the frequency grid along the real and imaginary axis sophisticated schemes are used, which are based on simple model functions for the macroscopic dielectric function. The grid spacing is dense up to roughly 1.3*{{TAG|OMEGAMAX}} and becomes coarser for larger frequencies. The default value for {{TAG|OMEGAMAX}} is either determined by the outermost node in the dielectric function (corresponding to a singularity in the inverse of the dielectric function) or the energy difference between the valence band minimum and the conduction band minimum. The larger of these two values is used. Except for pseudopotentials with deep lying core states, {{TAG|OMEGAMAX}} is usually determined by the node in the dielectric function.\n\nFor {{TAG|ACFDT calculations}}, only {{TAG|OMEGAMIN}} and {{TAG|OMEGATL}} determine the frequency grid (using a minimax algorithm). \n\nThe defaults have been carefully tested, and it is recommended to leave them unmodified, whenever possible. The grid should be solely controlled by {{TAG|NOMEGA}}. The only other value that can be modified is the complex shift {{TAG|CSHIFT}}. In principle, {{TAG|CSHIFT}} should NOT be chosen independently of {{TAG|NOMEGA}} and {{TAG|OMEGAMAX}}: e.g. for less dense grids (smaller {{TAG|NOMEGA}}) the complex shift must be accordingly increased. The default for {{TAG|CSHIFT}} has been chosen such that the calculations are converged to 10 meV with respect to {{TAG|NOMEGA}}: i.e. if {{TAG|CSHIFT}} is kept constant and {{TAG|NOMEGA}} is increased, the QP shifts should not change by more than 10 meV; at least for {{TAG|LSPECTRAL}} = .TRUE.. This was the case for the considered test materials. For {{TAG|LSPECTRAL}} = .FALSE. this does not apply. In this case it is recommended to set {{TAG|CSHIFT}} manually and to perform careful convergence tests.\n\nFor {{TAG|LSPECTRAL}} = .TRUE. independent convergence tests with respect to {{TAG|NOMEGA}} and {{TAG|CSHIFT}} are usually not required, and it should be sufficient to control the technical parameters via the single parameter {{TAG|NOMEGA}}. Also note that too large values for {{TAG|NOMEGA}} in combination with coarse k-point grids can cause a decrease in precision (see {{TAG|NOMEGA}}). \n\n\nBSE and TD-DFT type calculations (see {{TAG| BSE calculations}}):\n\nIn this case, {{TAG|OMEGAMAX}} allows to reduce the number of conduction/ valence band pairs. Usually these are determined by {{TAG| NBANDSV}} and {{TAG| NBANDSO}}. The number of pairs is roughly proportional to the products of {{TAG| NBANDSV}}, {{TAG| NBANDSO}}, and the number of k-points in the full Brillouin zone. If {{TAG|OMEGAMAX}} is set, pairs for which the difference of the independent particle energy is larger than \n{{TAG|OMEGAMAX}} will be removed from the basis set (and from the BSE calculations). This can improve performance, without significantly affecting the imaginary part of the dielectric function. The real part of the dielectric function is, however, rather sensitive to reducing {{TAG|OMEGAMAX}}, {{TAG|NBANDSV}}, {{TAG|NBANDSO}}.\n\n== Related tags and articles ==\n{{TAG|OMEGATL}},\n{{TAG|CSHIFT}},\n{{TAG|NOMEGA}},\n{{TAG|OMEGAMIN}}\n\n{{sc|OMEGAMAX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:25:13Z"}, "OMEGATL": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OMEGATL\">OMEGATL</a> specifies the maximum frequency for the coarse part of the frequency grid. </span>", "wikicode": "{{TAGDEF|OMEGATL|[real]|10 <math>\\times</math> outermost node in dielectric function <math>\\epsilon(\\omega)</math>}}\n\nDescription: {{TAG|OMEGATL}} specifies the maximum frequency for the coarse part of the frequency grid. \n----\nFor the frequency grid along the real and imaginary axis sophisticated schemes are used, which are based on simple model functions for the macroscopic dielectric function. The grid spacing is dense up to roughly 1.3*{{TAG|OMEGAMAX}} and becomes coarser for larger frequencies. \nThe default has been carefully tested, and it is recommended to leave it unmodified whenever possible.  \n\n== Related tags and articles ==\n{{TAG|OMEGAMAX}},\n{{TAG|OMEGAMIN}},\n{{TAG|CSHIFT}},\n{{TAG|NOMEGA}}\n\n{{sc|OMEGATL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:ACFDT]]", "last_revised": "2022-07-19T10:26:46Z"}, "LCALCPOL": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LCALCPOL\">LCALCPOL</a>=<span><span class=\"tag-value\">.TRUE.</span>  switches on the evaluation of the Berry phase expressions for the macroscopic electronic polarization in accordance with the so-called </span><a href=\"https://www.vasp.at/wiki/index.php/Berry_phases_and_finite_electric_fields%23Modern_Theory_of_Polarization\">Modern Theory of Polarization</a>.</span>", "wikicode": "{{TAGDEF|LCALCPOL|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LCALCPOL}}=.TRUE.  switches on the evaluation of the Berry phase expressions for the macroscopic electronic polarization in accordance with the so-called [[Berry_phases_and_finite_electric_fields#Modern_Theory_of_Polarization|Modern Theory of Polarization]].\n----\nFor {{TAG|LCALCPOL}}=.TRUE., VASP calculates the electronic contribution to the polarization, along the three reciprocal lattice vectors '''G'''<sub>i</sub>, i=1,2,3,  (i.e. &Sigma;<sub>i</sub> '''P'''&middot;'''G'''<sub>i</sub>) in a single run (unlike {{TAG|LBERRY}}=.TRUE.).\n\n=== An example: The fluorine displacement dipole (Born effective charge) in NaF ===\n\n*With {{FILE|INCAR}} file:\n\n {{TAGBL|PREC}} = Med\n {{TAGBL|EDIFF}}= 1E-6\n \n {{TAGBL|ISMEAR}} = 0\n {{TAGBL|DIPOL}}  = 0.25 0.25 0.25\n \n {{TAGBL|LCALCPOL}} = .TRUE.\n\n*{{FILE|KPOINTS}} file:\n\n 6x6x6\n  0\n Gamma\n  6 6 6\n  0 0 0\n\n*{{FILE|POSCAR}} file:\n\n NaF\n  4.5102\n  0.0 0.5 0.5\n  0.5 0.0 0.5\n  0.5 0.5 0.0\n 1 1\n Direct\n   0.0000000000000000  0.0000000000000000  0.0000000000000000\n   0.5000000000000000  0.5000000000000000  0.5000000000000000\n\n*and LDA Na_sv and F PAW datasets.\n\nThe {{FILE|OUTCAR}} file should now contain the following lines:\n\n             Ionic dipole moment: p[ion]=(     2.25510     2.25510     2.25510 ) electrons Angst\n \n  Total electronic dipole moment: p[elc]=(     0.00000     0.00000     0.00000 ) electrons Angst\nHere the units \"electrons Angst\" denote <math>e\\AA=-1.602 10^{-19}C\\AA</math>.\n\nTo calculate the change in the electronic polarization of NaF due to the displacement of the fluorine sublattice we repeat the previous calculation with the following {{FILE|POSCAR}} file:\n\n NaF\n  4.5102\n  0.0 0.5 0.5\n  0.5 0.0 0.5\n  0.5 0.5 0.0\n 1 1\n Direct\n   0.0000000000000000  0.0000000000000000  0.0000000000000000\n   0.5100000000000000  0.5100000000000000  0.4900000000000000\n\nThe {{FILE|OUTCAR}} should now contain something very similar to the following lines:\n\n             Ionic dipole moment: p[ion]=(     2.25510     2.25510     1.93939 ) electrons Angst\n \n  Total electronic dipole moment: p[elc]=(     0.00000     0.00000     0.36061 ) electrons Angst\n\nFrom the above one easily recognizes that the change in the electronic dipole moment due to the F-sublattice displacement is: \n\n<math>\\Delta\\mathrm{p[elc]}=0.3606\\hat{z}\\;e\\AA</math>\n\nand the corresponding change in the ionic dipole moment:\n\n<math>\\Delta\\mathrm{p[ion]}=1.93939-2.25510=-0.31571\\hat{z}\\;e\\AA</math>\n\nThus the total change is found to be:\n\n<math>\\Delta\\mathrm{p[tot]}=0.36061-0.31571=0.0449\\hat{z}\\;e\\AA</math>\n\nand considering that the F-sublattice was displaced by 0.045102 &Aring; these calculations yield a Born effective charge for fluorine of \n\n<math>Z^*=0.0449/0.045102=-0.995|e|\\;</math>.\n\nThe socalled parallel or <math>\\bold{G}_{\\parallel}</math>\ndirection in the integration over the reciprocal space unit cell is set in {{TAG|IGPAR}}.\n\n== Related tags and articles ==\n{{TAG|LCALCEPS}},\n{{TAG|EFIELD_PEAD}},\n{{TAG|LPEAD}},\n{{TAG|IPEAD}},\n{{TAG|LBERRY}},\n{{TAG|IGPAR}},\n{{TAG|NPPSTR}},\n{{TAG|DIPOL}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|LCALCPOL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-07-19T07:58:37Z"}, "LCALCEPS": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LCALCEPS\">LCALCEPS</a>=<span><span class=\"tag-value\">.TRUE.</span> the macroscopic ion-clamped static dielectric tensor, Born effective charge tensors, and the ion-clamped piezoelectric tensor of the system are determined from the response to finite electric fields.</span>", "wikicode": "{{TAGDEF|LCALCEPS|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: for {{TAG|LCALCEPS}}=.TRUE. the macroscopic ion-clamped static dielectric tensor, Born effective charge tensors, and the ion-clamped piezoelectric tensor of the system are determined from the response to finite electric fields.\n----\nFor {{TAG|LCALCEPS}}=.TRUE., VASP calculates the ion-clamped static dielectric tensor\n\n:<math>\n\\epsilon^\\infty_{ij}=\\delta_{ij}+\n\\frac{4\\pi}{\\epsilon_0}\\frac{\\partial P_i}{\\partial \\mathcal{E}_j},\n\\qquad\n{i,j=x,y,z}\n</math>\n\nthe Born effective charge tensors\n\n:<math>\nZ^*_{ij}=\\frac{\\Omega}{e}\\frac{\\partial P_i}{\\partial u_j}\n        =\\frac{1}{e}\\frac{\\partial F_i}{\\partial \\mathcal{E}_j},\n\\qquad\n{i,j=x,y,z}\n</math>\n\nand the ion-clamped piezoelectric tensor of the system\n\n:<math>\ne^{(0)}_{ij}=-\\frac{\\partial \\sigma_i}{\\partial \\mathcal{E}_j},\n\\qquad\n{i=xx, yy, zz, xy, yz, zx}\\quad{j=x,y,z}\n</math>\n\nfrom the [[Berry_phases_and_finite_electric_fields#Self-consistent_response_to_finite_electric_fields|self-consistent response to a finite electric field]] <span style=\"font-size:16pt\">''&epsilon;''</span>.\nIn this case, the \"response\" of the system is the change in the polarization '''P''', the Hellmann-Feynman forces '''F''', and the stress tensor &sigma;.\n\nIf this is combined with {{TAG|IBRION}}=6, the contribution from the ionic relaxations to the piezoelectric and dielectric tensors are calculated as well.\n\nTo this end VASP will perform essentially three successive calculations, with: \n\n {{TAG|EFIELD_PEAD}}= <span style=\"font-size:16pt\">''&epsilon;''</span><sub>x</sub> 0 0\n\n {{TAG|EFIELD_PEAD}}= 0 <span style=\"font-size:16pt\">''&epsilon;''</span><sub>y</sub> 0\n\n {{TAG|EFIELD_PEAD}}= 0 0 <span style=\"font-size:16pt\">''&epsilon;''</span><sub>z</sub> \n\nwhere, by default, VASP chooses <span style=\"font-size:16pt\">''&epsilon;''</span><sub>x</sub>=<span style=\"font-size:16pt\">''&epsilon;''</span><sub>y</sub>=<span style=\"font-size:16pt\">''&epsilon;''</span><sub>z</sub>=0.01 eV/&Aring;.\n\nThis default may be overwritten by specifying\n\n {{TAG|EFIELD_PEAD}}= <span style=\"font-size:16pt\">''&epsilon;''</span><sub>x</sub> <span style=\"font-size:16pt\">''&epsilon;''</span><sub>y</sub> <span style=\"font-size:16pt\">''&epsilon;''</span><sub>z</sub>\n\nin the {{FILE|INCAR}} file.\n\nThe relevant output is found in the {{FILE|OUTCAR}} file, immediately following the lines (see the description of {{TAG|LEPSILON}}=.TRUE. as well):\n\n MACROSCOPIC STATIC DIELECTRIC TENSOR (including local field effects) \n\n BORN EFFECTIVE CHARGES (including local field effects) \n\n PIEZOELECTRIC TENSOR (including local field effects) \n\nIn the above, \"including local field effects\" pertains to the fact that changes in the orbitals due to the electric field induce changes in the Hartree- and exchange-correlation potential. One may choose to limit this to changes in the Hartree potential alone, by specifying:\n\n {{TAG|LRPA}}=.TRUE.\n\nThis is commonly referred to as the response within the \"Random Phase Approximation\" (RPA), or the \"neglect of local field effects\". The OUTCAR file will now contain additional sections, headed by the lines: \n\n MACROSCOPIC STATIC DIELECTRIC TENSOR (excluding local field effects) \n\n BORN EFFECTIVE CHARGES (excluding local field effects) \n\n PIEZOELECTRIC TENSOR (excluding local field effects)\n\n----\n'''Note''': For standard DFT functionals, &epsilon;<sub>&infin;</sub>, ''Z''<sup>*</sup>, and ''e''<sup>(0)</sup> may be more easily calculated from density functional perturbation theory (see {{TAG|LEPSILON}}=.TRUE.). For functionals that depend not only on the density but also explicitly on the orbitals, like [[:Category:Hybrid_functionals|hybrid functionals]], density functional perturbation theory is presently not implemented and {{TAG|LEPSILON}}=.TRUE. is not applicable.\n\n'''Note''': The piezoelectric tensor has the wrong sign in Vasp 5.4.4 and older. The bug is fixed with [http://cms.mpi.univie.ac.at/patches/patch.5.4.4.16052018.gz patch.5.4.4.16052018.gz].\n\n== Related tags and articles ==\n{{TAG|LEPSILON}},\n{{TAG|LCALCPOL}},\n{{TAG|EFIELD_PEAD}},\n{{TAG|LPEAD}},\n{{TAG|IPEAD}},\n{{TAG|LBERRY}},\n{{TAG|IGPAR}},\n{{TAG|NPPSTR}},\n{{TAG|DIPOL}},\n{{TAG|IBRION}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|LCALCEPS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]][[Category:Howto]]", "last_revised": "2022-07-19T07:51:54Z"}, "EFIELD_PEAD": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EFIELD_PEAD\">EFIELD_PEAD</a> specifies the homogeneous electric force field in the electric enthalpy functional used to compute the <a href=\"https://www.vasp.at/wiki/index.php/Berry_phases_and_finite_electric_fields%23Self-consistent_response_to_finite_electric_fields\">self-consistent response to finite electric fields</a>. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EFIELD_PEAD\">EFIELD_PEAD</a> is specified in units of eV/\u00c5.</span>", "wikicode": "{{DISPLAYTITLE:EFIELD_PEAD}}\n{{TAGDEF|EFIELD_PEAD|[real array]}}\n{{DEF|EFIELD_PEAD|3*0.01|if {{TAG|LCALCEPS}}{{=}}.TRUE.|3*0.0|else}}\n\nDescription: {{TAG|EFIELD_PEAD}} specifies the homogeneous electric force field in the electric enthalpy functional used to compute the [[Berry_phases_and_finite_electric_fields#Self-consistent_response_to_finite_electric_fields|self-consistent response to finite electric fields]]. {{TAG|EFIELD_PEAD}} is specified in units of eV/\u00c5.\n----\nIf\n {{TAG|EFIELD_PEAD}}=<span style=\"font-size:16pt\">''&epsilon;''</span><sub>x</sub> <span style=\"font-size:16pt\">''&epsilon;''</span><sub>y</sub> <span style=\"font-size:16pt\">''&epsilon;''</span><sub>z</sub> \n\nis set, with |<span style=\"font-size:14pt\">''&epsilon;''</span>|>0, VASP will first determine the zero-field groundstate of the system, and subsequently switch on the electric field and compute the field-polarized groundstate orbitals.\n\nAdditionally, from the change in the macroscopic electronic polarization due to the applied electric field, VASP calculates (part of) the components on the diagonal of the ion-clamped static dielectric tensor (&epsilon;<sub>&infin;</sub>), in accordance with:\n\n:<math>\n\\epsilon^\\infty_{ii}=1+\n\\frac{4\\pi}{\\epsilon_0}\\frac{\\partial P_i}{\\partial \\mathcal{E}_i},\n\\qquad\n{i=x,y,z}\n</math>\n\nBeware: this option is only useful if one is interested in selected components on the diagonal of the ion-clamped dielectric tensor (for instance, in cubic systems). To calculate the full ion-clamped dielectric tensor of a system\n\n:<math>\n\\epsilon^\\infty_{ij}=\\delta_{ij}+\n\\frac{4\\pi}{\\epsilon_0}\\frac{\\partial P_i}{\\partial \\mathcal{E}_j},\n\\qquad\n{i,j=x,y,z}\n</math>\n\nfrom field-polarized calculations, use {{TAG|LCALCEPS}}=.TRUE..\n\n'''Note''': One should be aware that when the electric field is chosen to be too large, the electric enthalpy functional will lose its minima, and VASP will not be able to find a stationary solution for the field-polarized orbitals.\nThis is discussed in some detail by Souza ''et al.''.<ref name=\"souza:prl:02\"/>\nVASP will produce a warning if:\n\n:<math>\ne|\\mathcal{E}\\cdot \\mathbf{a}_i|>\\frac{1}{10}E_{\\mathrm{gap}}/N_i,\n</math>\n\nwhere ''E''<sub>gap</sub> is the bandgap, '''a'''<sub>i</sub> are the lattice vectors, and ''N''<sub>i</sub> is the number of '''k'''-points along the reciprocal lattice vector ''i'', in the regular (''N''<sub>1</sub>&times;''N''<sub>2</sub>&times;''N''<sub>3</sub>) '''k'''-mesh. The factor 1/10 is chosen to be on the safe side. If one does not include unoccupied bands, VASP is obviously not able to determine the bandgap and can not check whether the electric field might be too large. This will also produce a warning message.\n\n=== An example: &epsilon;<sub>&infin;</sub> in NaF ===\n\n*Using the following {{FILE|INCAR}} file:\n\n PREC = Med\n EDIFF= 1E-6\n \n ISMEAR = 0\n \n EFIELD_PEAD = 0.0 0.0 0.01\n\n:The computation of the static dielectric properties from the field-polarized groundstate orbitals requires a very tight convergence of the solutions. The {{TAG|EDIFF}}-tag specifies the usual convergence criterium for the zero-field solution. As a default VASP will try for an even tighter convergence of the field-polarized groundstate: {{TAG|EDIFF}}/100! Reaching this level of convergence may be very costly and in rare cases even impossible.\n\n*{{FILE|KPOINTS}} file:\n\n 6x6x6\n  0\n Gamma\n  6 6 6\n  0 0 0 \n\n:'''Note''': The ''PEAD'' related routines only work for regular meshes of '''k'''-points that include the &Gamma;-point, i.e.~either uneven meshes (not recommended) or &Gamma;-centered meshes (like the one above).\n\n*{{FILE|POSCAR}} file:\n\n NaF\n  4.5102\n  0.0 0.5 0.5\n  0.5 0.0 0.5\n  0.5 0.5 0.0\n 1 1\n Direct\n   0.0000000000000000  0.0000000000000000  0.0000000000000000\n   0.5000000000000000  0.5000000000000000  0.5000000000000000\n\n*and LDA Na_sv and F PAW datasets.\n\nWith the input above, running VASP should produce something akin to:\n\n  entering main loop\n        N       E                     dE             d eps       ncg     rms          rms(c)\n DAV:   1    -0.121171874254E+03   -0.12117E+03   -0.11093E+04   392   0.169E+03\n DAV:   2    -0.290944564657E+03   -0.16977E+03   -0.15372E+03   412   0.454E+02\n DAV:   3    -0.296448270211E+03   -0.55037E+01   -0.54726E+01   516   0.857E+01\n DAV:   4    -0.296558918897E+03   -0.11065E+00   -0.11062E+00   432   0.122E+01\n DAV:   5    -0.296564115002E+03   -0.51961E-02   -0.51960E-02   568   0.177E+00    0.512E+00\n       ...         ...                ...\n       ...         ...                ...\n DAV:  11    -0.295718441201E+03    0.31316E-05   -0.40516E-06   436   0.471E-02    0.256E-03\n DAV:  12    -0.295718441337E+03   -0.13610E-06   -0.13352E-06   276   0.146E-02\n        N       E                     dE             d eps       ncg     rms          rms(c)\n  gam= 0.000 g(H,U,f)=  0.142E-07 0.000E+00 0.322E-02 ort(H,U,f) = 0.000E+00 0.000E+00 0.000E+00\n SDA:   1    -0.295718441659E+03   -0.29572E+03   -0.12885E-02   360   0.322E-02 0.000E+00\n       ...         ...                ...\n  gam= 0.382 g(H,U,f)=  0.220E-07 0.167E-07 0.186E-10 ort(H,U,f) =-0.260E-08-0.389E-08 0.523E-10\n DMP:   4    -0.295718441597E+03    0.43565E-09   -0.14510E-07   360   0.387E-07-0.644E-08\n  gam= 0.382 g(H,U,f)=  0.232E-08 0.318E-09 0.166E-11 ort(H,U,f) =-0.471E-08-0.181E-08 0.590E-11\n DMP:   5    -0.295718441603E+03   -0.59431E-08   -0.61690E-10   360   0.264E-08-0.651E-08\n  final diagonalization\n  p_tot=(  0.875E-06  0.875E-06  0.875E-06 )\n        N       E                     dE             d eps       ncg     rms          rms(c)\n  p_tot=(  0.875E-06  0.875E-06  0.875E-06 )\n dp_tot=(  0.000E+00  0.000E+00  0.000E+00 )  diag[e(oo)]=(    ---      ---    1.00000 )\n  gam= 0.000 g(H,U,f)=  0.149E-04 0.000E+00 0.000E+00 ort(H,U,f) = 0.000E+00 0.000E+00 0.000E+00\n SDA:   1    -0.295718441612E+03   -0.14804E-07   -0.59582E-05   360   0.149E-04 0.000E+00\n       ...         ...                ...\n       ...         ...                ...\n  gam= 0.519 g(H,U,f)=  0.392E-07 0.000E+00 0.000E+00 ort(H,U,f) = 0.919E-08 0.000E+00 0.000E+00\n DMP:   9    -0.295718447444E+03   -0.21085E-07   -0.17608E-07   360   0.392E-07 0.919E-08\n  p_tot=(  0.868E-06  0.868E-06  0.116E-02 )\n dp_tot=( -0.721E-08 -0.723E-08  0.116E-02 )  diag[e(oo)]=(    ---      ---    1.91593 )\n  gam= 0.519 g(H,U,f)=  0.210E-07 0.000E+00 0.000E+00 ort(H,U,f) =-0.164E-08 0.000E+00 0.000E+00\n DMP:  10    -0.295718447453E+03   -0.83301E-08   -0.80481E-08   360   0.210E-07-0.164E-08\n  final diagonalization\n  p_tot=(  0.860E-06  0.860E-06  0.118E-02 )\n dp_tot=( -0.154E-07 -0.155E-07  0.118E-02 )  diag[e(oo)]=(    ---      ---    1.92723 )\n    1 F= -.29571845E+03 E0= -.29571845E+03  d E =-.223452E-12\n\nwhere one can discern three distinct blocks of SCF iterations. The first one (steps marked with <tt>DAV</tt>) corresponds to the calculation of the zero-field groundstate. After this groundstate has been reached, the '''k'''-point mesh is regenerated using a set of symmetry operations, which takes into account that the symmetry of the system is possibly reduced by the applied electric field. In most cases the new set of '''k'''-points is larger than the original one. The orbitals at the additional '''k'''-points are generated from their symmetry equivalent counterparts in the zero-field case. This expanded set of orbitals is now reoptimized until convergence is better than {{TAG|EDIFF}}/100 (the second block, marked <tt>DMP</tt>), and the initial electronic polarization is computed.\n\nThen the electric field is switched on, and the field-polarized groundstate is calculated. This is the last block of steps marked with DMP. From the change in the electronic dipole moment due to the electric field VASP computes (part of) the components on the diagonal of the ion-clamped static dielectric tensor.\n\nThis information is found both in the {{FILE|OUTCAR}} file and on <tt>stdout</tt>:\n\n    diag[e(oo)]=(       ----        ----      1.92723 )\n\n----\nTo speed up the computation of the field-polarized groundstate one may set {{TAG|SKIP_EDOTP}}=.TRUE. to avoid the recalculation of the [[Berry_phases_and_finite_electric_fields#pol|electronic polarization]] at each iteration during the SCF procedure.\nHowever, the additional term in Hamiltonian (second term on the right-hand-side of [[Berry_phases_and_finite_electric_fields#HdotP|the electric enthalpy functional]]) has to be correctly included and can not be kept fixed.\nBasically this means one does not minimize the total energy but optimizes the orbitals until a stationary point is reached. A stationary point is considered to be reached as soon as the norm of the gradient on the orbitals is smaller than {{TAG|EDIFF}}/100, and the SCF procedure will stop.\nIn the case of the previous example this will lead to:\n\n        N       E                     dE             d eps       ncg     rms          rms(c)\n  gam= 0.000 g(H,U,f)=  0.149E-04 0.000E+00 0.000E+00 ort(H,U,f) = 0.000E+00 0.000E+00 0.000E+00\n SDA:   1    -0.295718441603E+03   -0.60750E-08   -0.59581E-05   360   0.149E-04 0.000E+00\n  gam= 0.519 g(H,U,f)=  0.332E-05 0.000E+00 0.000E+00 ort(H,U,f) = 0.629E-05 0.000E+00 0.000E+00\n       ...         ...                ...\n       ...         ...                ...\n  gam= 0.519 g(H,U,f)=  0.124E-07 0.000E+00 0.000E+00 ort(H,U,f) =-0.141E-08 0.000E+00 0.000E+00\n DMP:  11    -0.295718435607E+03    0.13956E-06   -0.46725E-08   360   0.124E-07-0.141E-08\n  gam= 0.519 g(H,U,f)=  0.637E-08 0.000E+00 0.000E+00 ort(H,U,f) = 0.218E-10 0.000E+00 0.000E+00\n DMP:  12    -0.295718435599E+03    0.78403E-08   -0.25522E-08   360   0.637E-08 0.218E-10\n  final diagonalization\n  p_tot=(  0.844E-06  0.844E-06  0.117E-02 )\n dp_tot=( -0.313E-07 -0.313E-07  0.117E-02 )  diag[e(oo)]=(    ---      ---    1.92478 )\n    1 F= -.29571844E+03 E0= -.29571844E+03  d E =-.223448E-12\n\n== Related tags and articles ==\n{{TAG|SKIP_EDOTP}},\n{{TAG|LCALCPOL}},\n{{TAG|LCALCEPS}},\n{{TAG|LPEAD}},\n{{TAG|IPEAD}},\n{{TAG|LBERRY}},\n{{TAG|IGPAR}},\n{{TAG|NPPSTR}},\n{{TAG|DIPOL}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|EFIELD_PEAD|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"souza:prl:02\">[http://link.aps.org/doi/10.1103/PhysRevLett.89.117602 I. Souza, J. \u00cd\u00f1iguez, and D. Vanderbilt, Phys. Rev. Lett. 89, 117602 (2002).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-07-29T13:55:32Z"}, "LPEAD": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPEAD\">LPEAD</a>=<span><span class=\"tag-value\">.TRUE.</span>, the derivative of the cell-periodic part of the orbitals w.r.t. </span><b>k</b>, |\u2207<sub><b>k</b></sub>u<sub>n<b>k</b></sub>\u232a, is calculated using finite differences.", "wikicode": "{{TAGDEF|LPEAD|.TRUE. {{!}} .FALSE|.FALSE.}}\n\nDescription: for {{TAG|LPEAD}}=.TRUE., the derivative of the cell-periodic part of the orbitals w.r.t. '''k''', |&nabla;<sub>'''k'''</sub>u<sub>n'''k'''</sub>&rang;, is calculated using finite differences.\n----\nThe derivative of the cell-periodic part of the orbitals w.r.t. '''k''', '''k''', |&nabla;<sub>'''k'''</sub>u<sub>n'''k'''</sub>&rang;, may be written as:\n\n:<math>\n|\\mathbf{\\nabla_{k}} \\tilde{u}_{n\\mathbf{k}} \\rangle =\n\\sum_{n\\neq n'}\n\\frac{| \\tilde{u}_{n'\\mathbf{k}} \\rangle \\langle \\tilde{u}_{n'\\mathbf{k}} |\n\\frac{\\partial\\left[H(\\mathbf{k})-\\epsilon_{n\\mathbf{k}}S(\\mathbf{k})\\right]}{\\partial \\mathbf{k}}\n| \\tilde{u}_{n\\mathbf{k}} \\rangle}{\\epsilon_{n\\mathbf{k}}-\\epsilon_{n'\\mathbf{k}}}\n</math>\n\nwhere H('''k''') and S('''k''') are the Hamiltonian and overlap operator for the cell-periodic part of the orbitals, and the sum over ''n''&acute; must include a sufficiently large number of unoccupied states.\n\nIt may also be found as the solution to the following linear Sternheimer equation (see {{TAG|LEPSILON}}):\n\n:<math>\n\\left[H(\\mathbf{k})-\\epsilon_{n\\mathbf{k}}S(\\mathbf{k})\\right]\n|\\mathbf{\\nabla_{k}} \\tilde{u}_{n\\mathbf{k}} \\rangle\n=-\\frac{\\partial\\left[H(\\mathbf{k})-\\epsilon_{n\\mathbf{k}}S(\\mathbf{k})\\right]}\n{\\partial \\mathbf{k}}|\\tilde{u}_{n\\mathbf{k}} \\rangle\n</math>\n\nAlternatively one may compute <math>\\nabla_{\\mathbf{k}} \\tilde{u}_{n\\mathbf{k}}</math> from finite differences:\n\n:<math>\n\\frac{\\partial | \\tilde{u}_{n\\mathbf{k}_j} \\rangle}{\\partial k}=\n\\frac{ie}{2\\Delta k} \\sum^N_{m=1}\n\\left[ | \\tilde{u}_{m\\mathbf{k}_{j+1}} \\rangle\nS^{-1}_{mn}(\\mathbf{k}_j,\\mathbf{k}_{j+1})\\rangle -\n| \\tilde{u}_{m\\mathbf{k}_{j-1}} \\rangle\nS^{-1}_{mn}(\\mathbf{k}_j,\\mathbf{k}_{j-1})\\rangle\\right]\n</math>\n\nwhere ''m'' runs over the ''N'' occupied bands of the system, &Delta;''k''='''k'''<sub>j+1</sub>-'''k'''<sub>j</sub>, and\n\n:<math>\nS_{nm}(\\mathbf{k}_j,\\mathbf{k}_{j+1})=\n\\langle \\tilde{u}_{n\\mathbf{k}_{j}}| \\tilde{u}_{m\\mathbf{k}_{j+1}}\\rangle\n</math>.\n\nAs mentioned in the context of [[Berry_phases_and_finite_electric_fields#Self-consistent_response_to_finite_electric_fields|the self-consistent response to finite electric fields]] one may derive analoguous expressions for |&nabla;<sub>'''k'''</sub>u<sub>n'''k'''</sub>&rang; using higher-order finite difference approximations.\n\nWhen {{TAG|LPEAD}}=.TRUE., VASP will compute |&nabla;<sub>'''k'''</sub>u<sub>n'''k'''</sub>&rang; using the aforementioned finite difference scheme. The order of the finite difference approximation can be specified by means of the {{TAG|IPEAD}}-tag (default: {{TAG|IPEAD}}=4).\n\nThese tags may be used in combination with {{TAG|LOPTICS}}=.TRUE. and {{TAG|LEPSILON}}=.TRUE..\n----\n*N.B. Please note that {{TAG|LPEAD}} = .TRUE. '''is not supported for metallic systems'''. \n\n== Related tags and articles ==\n{{TAG|IPEAD}},\n{{TAG|LEPSILON}},\n{{TAG|LOPTICS}},\n{{TAG|LCALCEPS}},\n{{TAG|EFIELD_PEAD}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|LPEAD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-07-19T07:59:05Z"}, "IPEAD": {"datatype": "integer", "options": {"1": null, "2": null, "3": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IPEAD\">IPEAD</a> specifies the order of the finite difference stencil used to compute the derivative of the cell-periodic part of the orbitals w.r.t. <b>k</b>, |\u2207<sub><b>k</b></sub>u<sub>n<b>k</b></sub>\u232a (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IPEAD\">LPEAD</a>=<span><span class=\"tag-value\">.TRUE.</span>), and the derivative of the polarization w.r.t. the orbitals, \u03b4</span><b>P</b>/\u03b4\u2329\u03c8<sub>n<b>k</b></sub>| for (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IPEAD\">LCALCEPS</a>=<span><span class=\"tag-value\">.TRUE.</span>, or </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IPEAD\">EFIELD_PEAD</a>\u2260<b>0</b>).</span>", "wikicode": "{{TAGDEF|IPEAD|1 {{!}} 2 {{!}} 3 {{!}} 4|4}}\n\nDescription: {{TAG|IPEAD}} specifies the order of the finite difference stencil used to compute the derivative of the cell-periodic part of the orbitals w.r.t. '''k''', |&nabla;<sub>'''k'''</sub>u<sub>n'''k'''</sub>&rang; ({{TAG|LPEAD}}=.TRUE.), and the derivative of the polarization w.r.t. the orbitals, &delta;'''P'''/&delta;&lang;&psi;<sub>n'''k'''</sub>| for ({{TAG|LCALCEPS}}=.TRUE., or {{TAG|EFIELD_PEAD}}&ne;'''0''').\n----\nA central finite differences formula or order {{TAG|IPEAD}} is used to compute the first-order derivative of the cell-periodic part of the orbitals w.r.t. '''k'''.\nThe coefficients for the different orders can be found [https://en.wikipedia.org/wiki/Finite_difference_coefficient#Central_finite_difference here].\n== Related tags and articles ==\n{{TAG|LPEAD}},\n{{TAG|LCALCEPS}},\n{{TAG|EFIELD_PEAD}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|IPEAD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-11-14T11:23:07Z"}, "ENAUG": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENAUG\">ENAUG</a> specifies the cut-off energy of the plane wave representation of the augmentation charges in eV.</span>", "wikicode": "{{TAGDEF|ENAUG|[real]|largest ''EAUG'' read from the {{FILE|POTCAR}} file}}\n\nDescription: {{TAG|ENAUG}} specifies the cut-off energy of the plane wave representation of the augmentation charges in eV.\n----\n{{TAG|ENAUG}} determines {{TAG|NGXF}}, {{TAG|NGYF}}, and {{TAG|NGZF}} in accordance with the {{TAG|PREC}} tag.\n== Related tags and articles ==\n{{TAG|NGXF}},\n{{TAG|NGYF}},\n{{TAG|NGZF}},\n{{TAG|ENCUT}},\n{{TAG|PREC}},\n{{TAG|PRECFOCK}}\n\n{{sc|ENAUG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:12:05Z"}, "IBRION": {"datatype": "integer", "options": {"-1": null, "0": null, "1": null, "2": null, "3": null, "5": null, "6": null, "7": null, "8": null, "40": null, "44": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IBRION\">IBRION</a> determines how the ions are updated and moved.</span>", "wikicode": "{{TAGDEF|IBRION|-1 {{!}} 0 {{!}} 1 {{!}} 2 {{!}} 3 {{!}} 5 {{!}} 6 {{!}} 7 {{!}} 8 {{!}} 40 {{!}} 44}}\n{{DEF|IBRION|-1|for {{TAG|NSW}}{{=}}&minus;1 or 0|0|else}}\n\nDescription: {{TAG|IBRION}} determines how the ions are updated and moved.\n----\nFor {{TAG|IBRION}}=0, a molecular dynamics is performed, whereas all other algorithms are destined for relaxations into a local energy minimum. For difficult relaxation problems it is recommended to use the conjugate gradient algorithm ({{TAG|IBRION}}=2), which presently possesses the most reliable backup routines. Damped molecular dynamics ({{TAG|IBRION}}=3) are often useful when starting from very bad initial guesses. Close to the local minimum the RMM-DIIS ({{TAG|IBRION}}=1) is usually the best choice. {{TAG|IBRION}}=5 and {{TAG|IBRION}}=6 are using finite differences to determine the second derivatives (Hessian matrix and phonon frequencies), whereas {{TAG|IBRION}}=7 and {{TAG|IBRION}}=8 use density functional perturbation theory to calculate the derivatives.\n\n== {{TAG|IBRION}}=-1: no update.==\nThe ions are not moved, but {{TAG|NSW}} outer loops are performed. In each outer loop the electronic degrees of freedom are re-optimized (for {{TAG|NSW}}>0 this obviously does not make much sense, except for test purposes). If no ionic update is required use {{TAG|NSW}}=0 instead.\n\n== {{TAG|IBRION}}=0: molecular dynamics.==\nStandard ab-initio molecular dynamics. A Verlet algorithm (or fourth-order predictor-corrector if VASP was linked with stepprecor.o) is used to integrate Newton's equations of motion. {{TAG|POTIM}} supplies the timestep in femto seconds. The parameter {{TAG|SMASS}} provides additional control.\n{{NB|tip|{{TAG|NWRITE}}{{=}}0,1}}\n\n== {{TAG|IBRION}}=1: ionic relaxation (RMM-DIIS).==\nFor {{TAG|IBRION}}=1, a quasi-Newton (variable metric) algorithm is used to relax the ions into their instantaneous groundstate. The forces and the stress tensor are used to determine the search directions for finding the equilibrium positions (the total energy is not taken into account). This algorithm is very fast and efficient close to local minima, but fails badly if the initial positions are a bad guess (use {{TAG|IBRION}}=2 in that case). Since the algorithm builds up an approximation of the Hessian matrix it requires very accurate forces, otherwise it will fail to converge. An efficient way to achieve this is to set {{TAG|NELMIN}} to a value between 4 and 8 (for simple bulk materials 4 is usually adequate, whereas 8 might be required for complex surfaces where the charge density converges very slowly). This forces a minimum of 4 to 8 electronic steps between each ionic step, and guarantees that the forces are well converged at each step.\n\nThe implemented algorithm is called RMM-DIIS.{{cite|pulay:cpl:1980}} It implicitly calculates an approximation of the inverse Hessian matrix by taking into account information from previous iterations. On startup, the initial Hessian matrix is diagonal and equal to {{TAG|POTIM}}. Information from old steps (which can lead to linear dependencies) is automatically removed from the iteration history, if required. The number of vectors kept in the iterations history (which corresponds to the rank of the Hessian matrix must not exceed the degrees of freedom. Naively the number of degrees of freedom is 3(NIONS-1). But symmetry arguments or constraints can reduce this number significantly.\n\nThere are two algorithms build in to remove information from the iteration history:\n#If {{TAG|NFREE}} is set in the {{FILE|INCAR}} file, only up to {{TAG|NFREE}} ionic steps are kept in the iteration history (the rank of the approximate Hessian matrix is not larger than {{TAG|NFREE}}).\n#If {{TAG|NFREE}} is not specified, the criterion whether information is removed from the iteration history is based on the eigenvalue spectrum of the inverse Hessian matrix: if one eigenvalue of the inverse Hessian matrix is larger than 8, information from previous steps is discarded.\n\nFor complex problems {{TAG|NFREE}} can usually be set to a rather large value (i.e. 10-20), however systems of low dimensionality require a carful setting of {{TAG|NFREE}} (or preferably an exact counting of the number of degrees of freedom). To increase {{TAG|NFREE}} beyond 20 rarely improves convergence. If {{TAG|NFREE}} is set to too large, the RMM-DIIS algorithm might diverge.\n\nThe choice of a reasonable {{TAG|POTIM}} is also important and can speed up calculations significantly, we recommend to find an optimal {{TAG|POTIM}} using {{TAG|IBRION}}=2 or performing a few test calculations (see below).\n\n== {{TAG|IBRION}}=2: ionic relaxation (conjugate gradient algorithm).==\nA conjugate-gradient algorithm (a discussion of this algorithm can be found for instance in ''Numerical Recipes'', by Press ''et al.''{{cite|press:book:1986}}) is used to relax the ions into their instantaneous groundstate. In the first step ions (and cell shape) are changed along the direction of the steepest descent (i.e. the direction of the calculated forces and stress tensor). The conjugate gradient method requires a line minimization, which is performed in several steps: \n#First a trial step into the search direction (scaled gradients) is done, with the length of the trial step controlled by the {{TAG|POTIM}} tag. Then the energy and the forces are recalculated.\n#The approximate minimum of the total energy is calculated from a cubic (or quadratic) interpolation taking into account the change of the total energy and the change of the forces (3 pieces of information), then a corrector step to the approximate minimum is performed.\n#After the corrector step the forces and energy are recalculated and it is checked whether the forces contain a significant component parallel to the previous search direction. If this is the case, the line minimization is improved by further corrector steps using a variant of Brent's algorithm.{{cite|press:book:1986}}\n\nTo summarize: In the first ionic step the forces are calculated for the initial configuration read from the {{FILE|POSCAR}} file, the second step is a trial (or predictor step), the third step is a corrector step. If the line minimization is sufficiently accurate in this step, the next trial step is performed.\n\n:NSTEP:\t \n:#\tinitial positions\n:#\ttrial step\n:#\tcorrector step, i.e. positions corresponding to anticipated minimum\n:#\ttrial step\n:#\tcorrector step\n::...\n\t \n== {{TAG|IBRION}}=3: ionic relaxation (damped molecular dynamics).==\nIf a damping factor is supplied in the {{FILE|INCAR}} file by means of the {{TAG|SMASS}} tag, a damped second order equation of motion is used for the update of the ionic degrees of freedom:\n:<math>\n{\\ddot {\\vec x}} = -2 \\alpha {\\vec F} - \\mu  {\\dot {\\vec x}},\n</math>\nwhere {{TAG|SMASS}} supplies the damping factor &mu;, and {{TAG|POTIM}} controls &alpha;. A simple velocity Verlet algorithm is used to integrate the equation, the discretised equation reads: \n:<math>\n\\begin{align}\n{\\vec v_{N+1/2}} =&  \\Big((1-\\mu/2) {\\vec v_{N-1/2}} - 2\\alpha {\\vec F_N} \\Big)/(1+\\mu/2)\\\\\n{\\vec x_{N+1}} =&  {\\vec x_{N+1}} + {\\vec v_{N+1/2}}\n\\end{align}\n</math>\nOne may immediately recognize, that &mu;=2 is equivalent to a simple steepest descent algorithm (of course without line optimization). Hence, &mu;=2 corresponds to maximal damping, &mu;=0 corresponds to no damping. The optimal damping factor depends on the Hessian matrix (matrix of the second derivatives of the energy with respect to the atomic positions). A reasonable first guess for &mu; is usually 0.4.\n\nMind that our implementation is particular user-friendly, since changing &mu; usually does not require to re-adjust the time step {{TAG|POTIM}}. To choose an optimal time step and damping factor, we recommend the following two step procedure: First fix &mu; (for instance to 1) and adjust {{TAG|POTIM}}. {{TAG|POTIM}} should be chosen as large as possible without getting divergence in the total energy. Then decrease &mu; and keep {{TAG|POTIM}} fixed. If {{TAG|POTIM}} and {{TAG|SMASS}} are chosen correctly, the damped molecular dynamics mode usually outperforms the conjugate gradient method by a factor of two.\n\nIf {{TAG|SMASS}} is not set in the {{FILE|INCAR}} file (respectively {{TAG|SMASS}}<0), a velocity quench algorithm is used. In this case the ionic positions are updated according using the following algorithm: '''F''' are the current forces, and &alpha; equals {{TAG|POTIM}}. This equation implies that, if the forces are antiparallel to the velocities, the velocities are quenched to zero. Otherwise the velocities are made parallel to the present forces, and they are increased by an amount that is proportional to the forces.\n\n'''Mind''': For {{TAG|IBRION}}=3, a reasonable time step ''must'' be supplied by the {{TAG|POTIM}} parameter. Too large time steps will result in divergence, too small ones will slow down the convergence. The stable time step is usually twice the ''smallest'' line minimization step in the conjugate gradient algorithm.\n\n<span id=\"ibrion56\">\n\n== {{TAG|IBRION}}=5 and 6: second derivatives, Hessian matrix and phonon frequencies (finite differences).==\n\nWhen {{TAG|IBRION}}=5 or {{TAG|IBRION}}=6 are set VASP computes the second order derivatives of the total energy with respect to the position of the ions using a [[Phonons from finite differences|finite differences approach]],\nthe dynamical matrix is constructed and diagonalized and the phonon modes and frequencies of the system are reported in the {{FILE|OUTCAR}} file.\n\n{{TAG|IBRION}}=5 does not apply symmetry, whereas {{TAG|IBRION}}=6 uses symmetry to reduce the number of displacements.\n\nIf {{TAG|IBRION}}=6 and {{TAG|ISIF}}>=3 the elastic and internal strain tensors are computed as well.\n\nBorn effective charges, piezoelectric constants, and the ionic contribution to the dielectric tensor can be\ncalculated additionally by specifying {{TAG|LEPSILON}}=.TRUE. (linear response theory) or {{TAG|LCALCEPS}}=.TRUE. (finite external field).\n</span>\n\n<span id=\"ibrion78\">\n\n== {{TAG|IBRION}}=7 and 8: second derivatives, Hessian matrix, and phonon frequencies (perturbation theory).==\nWhen {{TAG|IBRION}}=7 and {{TAG|IBRION}}=8 are set VASP computes second derivatives of the total energy with respect to the position of the ions using [[Phonons_from_density-functional-perturbation_theory|density-functional-perturbation theory]] (DFPT),\nthe dynamical matrix is constructed and diagonalized and the phonon modes and frequencies of the system are reported in the {{FILE|OUTCAR}} file.\n\n{{TAG|IBRION}}=7 does not apply symmetry, whereas {{TAG|IBRION}}=8 uses symmetry to reduce the number of displacements.\n\nThe output is similar for [[IBRION#ibrion56|'''IBRION'''=5 and 6]] with the exception that it does not determine the elastic tensors, since the linear response with respect to the strain tensor is not implemented.\n</span>\n\n== {{TAG|IBRION}}=40: calculation of energy profile along IRC.==\nThis method is described in the {{TAG|IRC calculations}} section.\n\n== {{TAG|IBRION}}=44: the Improved Dimer Method.==\nThis method is described in the {{TAG|Improved Dimer Method}} section.\n\n== Some general comments ==\nFor {{TAG|IBRION}}=1, 2, and 3, the flag {{TAG|ISIF}} determines whether the ions and/or the cell shape is changed. Update of the cell shape is supported for molecular dynamics ({{TAG|IBRION}}=0) only if the dynamics module of Tomas Bucko (precompiler flag <tt>-Dtbdyn</tt>) is used.\n\nWithin all relaxation algorithms ({{TAG|IBRION}}=1, 2, and 3) the parameter {{TAG|POTIM}} should be supplied in the {{FILE|INCAR}} file. For {{TAG|IBRION}}>0, ''the forces are scaled internally before calling the minimization routine''. Therefore for relaxations, {{TAG|POTIM}} has no physical meaning and serves only as a scaling factor. For many systems, the optimal {{TAG|POTIM}} is around 0.5. Because the Quasi-Newton algorithm and the damped algorithms are sensitive to the choice of this parameter, use {{TAG|IBRION}}=2, if you are not sure how large the optimal {{TAG|POTIM}} is.\n\nIn this case, the {{FILE|OUTCAR}} file and <tt>stdout</tt> will contain a line indicating a reliable {{TAG|POTIM}}. For {{TAG|IBRION}}=2, the following lines will be written to <tt>stdout</tt> after each corrector step (usually each odd step):\n\n  trial: gam=  .00000 g(F)=   .152E+01 g(S)=  .000E+00 ort = .000E+00\n  (trialstep = .82)\n\nThe quantity <tt>gam</tt> is the conjugation parameter to the previous step, <tt>g(F)</tt> and <tt>g(S)</tt> are the norm of the force respectively the norm of the stress tensor. The quantity <tt>ort</tt> is an indicator whether this search direction is orthogonal to the last search direction (for an optimal step this quantity should be much smaller than <tt>(g(F) + g(S))</tt>. The quantity <tt>trialstep</tt> is the size of the current trialstep. This value is the average step size leading to a line minimization in the previous ionic step. An optimal {{TAG|POTIM}} can be determined, by multiplying the current {{TAG|POTIM}} with the quantity trialstep.\n\nAfter at the end of a trial step, the following lines are written to <tt>stdout</tt>:\n\n  trial-energy change:   -1.153185  1.order   -1.133   -1.527  -.739\n  step:   1.7275(harm=  2.0557)  dis=  .12277  \n                             next Energy= -1341.57 (dE= -.142E+01)\n\nThe quantity <tt>trial-energy</tt> change is the change of the energy in the trial step. The first value after <tt>1.order</tt> is the expected energy change calculated from the forces: ('''F'''(start)+'''F'''(trial))/2&times;change of positions. The second and third value corresponds to  '''F'''(start)&times;change of positions, and '''F'''(trial)&times;change of positions.\n\nThe first value in the second line is the size of the step leading to a line minimization along the current search direction. It is calculated from a third order interpolation formula using data from the start and trial step (forces and energy change). <tt>harm</tt> is the optimal step using a second order (or harmonic) interpolation. Only information on the forces is used for the harmonic interpolation. Close to the minimum both values should be similar. <tt>dis</tt> is the maximum distance moved by the ions in fractional (direct) coordinates. <tt>next Energy</tt> gives an indication how large the next energy should be (i.e. the energy at the minimum of the line minimization), dE is the estimated energy change.\n\nThe {{FILE|OUTCAR}} file will contain the following lines, at the end of each trial step:\n\n  trial-energy change:   -1.148928  1.order   -1.126  -1.518  -.735\n   (g-gl).g =  .152E+01      g.g   =  .152E+01  gl.gl    =  .000E+00\n  g(Force)  =  .152E+01   g(Stress)=  .000E+00 ortho     =  .000E+00\n  gamma     =    .00000\n  opt step  =   1.72745  (harmonic =   2.05575) max dist = .12277085\n  next E    = -1341.577507   (d E  =   1.42496)\n\nThe line <tt>trial-energy change</tt> was already discussed. <tt>g(Force)</tt> corresponds to <tt>g(F)</tt>, <tt>g(Stress)</tt> to <tt>g(S)</tt>, <tt>ortho</tt> to <tt>ort</tt>, <tt>gamma</tt> to <tt>gam</tt>. The values after <tt>gamma</tt> correspond to the second line (<tt>step:</tt> ...) previously described.\n\n== Related Tags and Sections ==\n{{TAG|NSW}},\n{{TAG|SMASS}},\n{{TAG|POTIM}},\n{{TAG|NFREE}},\n{{TAG|ISIF}},\n{{TAG|LEPSILON}},\n{{TAG|LCALCEPS}},\n{{TAG|Improved Dimer Method}}\n\n{{sc|IBRION|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]][[Category:Phonons]]", "last_revised": "2022-12-07T10:12:49Z"}, "SMASS": {"datatype": "string", "options": {"-3": null, "-2": null, "-1": null, "[real] &ge; 0": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SMASS\">SMASS</a> controls the velocities during an ab-initio molecular-dynamics run.</span>", "wikicode": "{{TAGDEF|SMASS|-3 {{!}} -2 {{!}} -1 {{!}} [real] &ge; 0|-3}}\n\nDescription: {{TAG|SMASS}} controls the velocities during an ab-initio molecular-dynamics run.\n----\n* {{TAG|SMASS}}=-3\n:For {{TAG|SMASS}}=-3 a micro canonical ensemble ({{TAG|NVE ensemble}}) is simulated (constant energy molecular dynamics). The calculated Hellmann-Feynman forces serve as an acceleration acting onto the ions. The total free energy (i.e. free electronic energy + Madelung energy of ions + kinetic energy of ions) is conserved. '''Mind''': This option only works with {{TAG|MDALGO}}=0 (not with {{TAG|MDALGO}}=2) and is hence rather considered as obsolete. To calculate an {{TAG|NVE_ensemble}} we recommend the user to use {{TAG|MDALGO}}=1 and {{TAG|ANDERSEN_PROB}}=0.0.\n\n* {{TAG|SMASS}}=-2\n:For {{TAG|SMASS}}=-2 the initial velocities are kept constant. This allows to calculate the energy for a set of different linear dependent positions (for instance frozen phonons, or dimers with varying bond-length).\n:'''Mind''': if {{TAG|SMASS}}=-2 the actual steps taken are {{TAG|POTIM}}&times;(velocities-read-from-the-{{FILE|POSCAR}}-file). To avoid ambiguities, set {{TAG|POTIM}}=1.\n\n* {{TAG|SMASS}}=-1\n:In this case the velocities are scaled each {{TAG|NBLOCK}} step (starting at the first step i.e. MOD(NSTEP,{{TAG|NBLOCK}})=1) to the temperature: T={{TAG|TEBEG}}+({{TAG|TEEND}}-{{TAG|TEBEG}})&times;NSTEP/{{TAG|NSW}},\n:where NSTEP is the current step (starting from 1). This allows a continuous increase or decrease of the kinetic energy. In the intermediate period a micro-canonical ensemble is simulated.\n\n* {{TAG|SMASS}}&ge;0\n:For {{TAG|SMASS}}&ge;0, a canonical ensemble is simulated using the algorithm of Nos\u00e9. The Nos\u00e9 mass controls the frequency of the temperature oscillations during the simulation.{{cite|nose:jcp:1984}}{{cite|nose:ptp:1991}}{{cite|bylander:prb:1992}} For {{TAG|SMASS}}=0, a Nos\u00e9-mass corresponding to period of 40 time steps will be chosen. The Nos\u00e9-mass should be set such that the induced temperature fluctuation show approximately the same frequencies as the typical 'phonon'-frequencies for the specific system. For liquids something like 'phonon'-frequencies might be obtained from the spectrum of the velocity auto-correlation function. If the ionic frequencies differ by an order of magnitude from the frequencies of the induced temperature fluctuations, Nos\u00e9 thermostat and ionic movement might decouple leading to a non canonical ensemble. The frequency of the approximate temperature fluctuations induced by the Nos\u00e9-thermostat is written to the {{FILE|OUTCAR}} file.\n\n== Related tags and articles ==\n{{TAG|IBRION}},\n{{TAG|POTIM}},\n{{TAG|NBLOCK}},\n{{TAG|TEBEG}},\n{{TAG|TEEND}}\n\n{{sc|SMASS|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermostats]]", "last_revised": "2022-04-07T14:30:58Z"}, "TEBEG": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TEBEG\">TEBEG</a> sets the starting temperature (in K) for an ab-initio molecular dynamics run (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TEBEG\">IBRION</a>=<span><span class=\"tag-value\">0)</span> and other routines (e.g. {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}).</span></span>", "wikicode": "{{TAGDEF|TEBEG|[real]|0}}\n\nDescription: {{TAG|TEBEG}} sets the starting temperature (in K) for an ab-initio molecular dynamics run ({{TAG|IBRION}}=0) and other routines (e.g. {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}).\n----\nIf no initial velocities are supplied on the {{FILE|POSCAR}} file, the velocities are set randomly according to a Maxwell-Boltzmann distribution at the initial temperature {{TAG|TEBEG}}. Velocities are only used for molecular dynamics ({{TAG|IBRION}}=0).\n\n'''Mind''': If {{TAG|MDALGO}}>0 is used VASP defines the temperature as \n:<math>\nT= \\frac{1}{ k_B T 3 (N_{\\rm ions}-N_{\\rm constraints})} \\sum\\limits_{n}^{N_{\\rm ions}} M_n | \\vec v_n |^2.\n</math>\n\nThis temperature ist written to the {{FILE|OUTCAR}} file. \nDepending on the type of thermostat this temperature has to be rescaled to obtain the real simulation temperature. \n\n*{{TAG|Nose-Hoover thermostat}}:\nIn this thermostat the number of degrees of freedom including constraines are already acounted for in the potential energy term. In this this method the center of mass is conserved. This lowers the degrees of freedom by one which is also taken into account in the {{TAG|OUTCAR}} file. \n\n*{{TAG|Andersen thermostat}}:\nSame as for {{TAG|Nose-Hoover thermostat}}.\n\n*{{TAG|Langevin thermostat}}:\nAs for the {{TAG|Nose-Hoover thermostat}} and {{TAG|Andersen thermostat}} in this thermostat the number of degrees of freedom including constraines are already acounted for. The center of mass is not conserved in this method, hence this method has 3 degrees of freedom more than the {{TAG|Nose-Hoover thermostat}} and {{TAG|Andersen thermostat}}. \n\n== Related tags and articles ==\n{{TAG|TEEND}},\n{{TAG|IBRION}},\n{{TAG|SMASS}}\n\n{{sc|TEBEG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-09-07T12:22:53Z"}, "TEEND": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TEEND\">TEEND</a> sets the final temperature (in K) for an ab-initio molecular-dynamics run (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TEEND\">IBRION</a>=<span class=\"tag-value\">0;</span> <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TEEND\">SMASS</a>=<span><span class=\"tag-value\">\u22121)</span>.</span></span>", "wikicode": "{{TAGDEF|TEEND|[real]|{{TAG|TEBEG}}}}\n\nDescription: {{TAG|TEEND}} sets the final temperature (in K) for an ab-initio molecular-dynamics run ({{TAG|IBRION}}=0; {{TAG|SMASS}}=&minus;1).\n----\n== Related tags and articles ==\n{{TAG|TEBEG}},\n{{TAG|IBRION}},\n{{TAG|SMASS}}\n\n{{sc|TEEND|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-09-07T12:23:16Z"}, "NSIM": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NSIM\">NSIM</a> sets the number of bands that are optimized simultaneously by the RMM-DIIS algorithm.</span>", "wikicode": "{{TAGDEF|NSIM|[integer]|4}}\n\nDescription: {{TAG|NSIM}} sets the number of bands that are optimized simultaneously by the RMM-DIIS algorithm.\n----\nThe RMM-DIIS algorithm ({{TAG|IALGO}}=48) works in a blocked mode. {{TAG|NSIM}} bands are optimized at the same time. This allows to use matrix-matrix operations instead of matrix-vector operation for the evaluations of the non local projection operators in real space, and might speed up calculations on some machines. There should be no difference in the total energy and the convergence behavior between {{TAG|NSIM}}=1 and {{TAG|NSIM}}>1, only the performance should improve.\n\n== Related tags and articles ==\n{{TAG|IALGO}},\n{{TAG|NCORE}},\n{{TAG|NPAR}},\n{{TAG|LPLANE}},\n{{TAG|LSCALU}},\n{{TAG|KPAR}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}}\n\n{{sc|NSIM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-04-08T14:51:20Z"}, "WEIMIN": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WEIMIN\">WEIMIN</a> specifies the maximum weight for a band to be considered empty.</span>", "wikicode": "{{TAGDEF|WEIMIN|[real]}}\n{{DEF|WEIMIN|0.001|for {{TAG|IBRION}}&ge;0|0|for {{TAG|IBRION}}{{=}}&minus;1}}\n\nDescription: {{TAG|WEIMIN}} specifies the maximum weight for a band to be considered empty.\n----\nThe tags {{TAG|WEIMIN}}, {{TAG|EBREAK}}, and {{TAG|DEPER}} allow fine-tuning of the iterative matrix diagonalization and are best not changed. They are optimized for a large variety of systems, and changing one of the parameters usually decreases performance or can even screw up the iterative matrix diagonalization totally.\nIn general, these tags control when the optimization of a single band is stopped within the iterative matrix diagonalization schemes:\n\nWithin all implemented iterative schemes a distinction between empty and occupied bands is made to speed up calculations. Unoccupied bands are optimized only twice, whereas occupied bands are optimized up to four times till another break criterion is met. Eigenvalue/eigenvector pairs for which the partial occupancies are smaller than {{TAG|WEIMIN}} are treated as unoccupied states (and are thus only optimized twice).\n\n== Related tags and articles ==\n{{TAG|EBREAK}},\n{{TAG|DEPER}},\n{{TAG|IBRION}}\n\n{{sc|WEIMIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-06T16:07:12Z"}, "DEPER": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/DEPER\">DEPER</a> specifies a relative stopping criterion for the optimization of an eigenvalue.</span>", "wikicode": "{{TAGDEF|DEPER|[real]|0.3}}\n\nDescription: {{TAG|DEPER}} specifies a relative stopping criterion for the optimization of an eigenvalue.\n----\nThe tags {{TAG|DEPER}}, {{TAG|WEIMIN}}, and {{TAG|EBREAK}} allow fine tuning of the iterative matrix diagonalization, and are best not changed. They are optimized for a large variety of systems, and changing one of the parameters usually decreases performance or can even screw up the iterative matrix diagonalization totally.\nIn general, these tags control when the optimization of a single band is stopped within the iterative matrix diagonalization schemes:\n\n{{TAG|DEPER}} specifies a relative break-criterion: the optimization of a band is stopped after the energy change becomes smaller than {{TAG|DEPER}} multiplied with the energy change in the first iterative optimization step. The maximum number of optimization steps is always 4.\n\n== Related tags and articles ==\n{{TAG|WEIMIN}},\n{{TAG|EBREAK}}\n\n{{sc|DEPER|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:10:19Z"}, "EBREAK": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EBREAK\">EBREAK</a> specifies an absolute stopping criterion for the optimization of an eigenvalue.</span>", "wikicode": "{{TAGDEF|EBREAK|[real]|{{TAG|EDIFF}}/{{TAG|NBANDS}}/4}}\n\nDescription: {{TAG|EBREAK}} specifies an absolute stopping criterion for the optimization of an eigenvalue.\n----\nThe tags {{TAG|EBREAK}}, {{TAG|DEPER}}, and {{TAG|WEIMIN}} allow fine tuning of the iterative matrix diagonalization, and are best not changed. They are optimized for a large variety of systems, and changing one of the parameters usually decreases performance or can even screw up the iterative matrix diagonalization totally.\nIn general, these tags control when the optimization of a single band is stopped within the iterative matrix diagonalization schemes:\n\n{{TAG|EBREAK}} determines whether a band is fully converged or not. Optimization of an eigenvalue/eigenvectors pair is stopped if the change in the eigenenergy is smaller than {{TAG|EBREAK}}.\n\n== Related tags and articles ==\n{{TAG|WEIMIN}},\n{{TAG|DEPER}}\n\n{{sc|EBREAK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:11:01Z"}, "LWANNIER90": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWANNIER90\">LWANNIER90</a>=<span><span class=\"tag-value\">.TRUE.</span> switches on the interface between VASP and [http://www.wannier.org WANNIER90].</span></span>", "wikicode": "{{TAGDEF|LWANNIER90|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LWANNIER90}}=.TRUE. switches on the interface between VASP and [http://www.wannier.org WANNIER90].\n\n'''N.B.''': This feature is only present if VASP is compiled with [[Precompiler_flags#Optional|-DVASP2WANNIER90 or -DVASP2WANNIER90v2]].\n----\n\nFor {{TAG|LWANNIER90}}=.TRUE., VASP will write the input files for a preceding WANNIER90 run: '''wannier90.win''', '''wannier90.mmn''', '''wannier90.eig''', '''wannier90.amn''', and if {{TAG|LWRITE_UNK}}=.TRUE. '''wannier90.UNKp.s'''. This is done by running <tt>wannier_setup</tt> in library mode as described in Chapter 6 of the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual]. For documentation of these files and tags therein, please refer to the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual].\n\nThe following cases may occur:\n\n* If '''wannier90.win''' does not exist, VASP will write the following template\n\n num_wann = {{TAG|NBANDS}}\n \n begin unit_cell_cart\n   ... ... ...\n   ... ... ...\n   ... ... ...\n end unit_cell_cart\n \n begin atoms_cart\n    ... ... ...\n    ... ... ...\n    ... ... ...\n    ... ... ...  \n end atoms_cart\n \n mp_grid = .. .. ..\n \n begin kpoints\n    ... ... ...\n    ... ... ...\n    ... ... ...\n    ... ... ...\n end kpoints\n:Here, the <tt>unit_cell_cart</tt>, <tt>atoms_cart</tt>, and <tt>kpoints</tt> blocks, and <tt>mp_grid</tt> array, will be set in accordance with the setup of the VASP calculation. This basically corresponds to the information given in the {{FILE|POSCAR}} and {{FILE|KPOINTS}} files. \n* If the '''wannier90.win''' file already exists, VASP will only add the aforementioned information if it is not already present. This means that VASP will check, for instance, whether or not the '''wannier90.win''' file contains a <tt>kpoints</tt> block, and add one if not. '''Mind''': If it finds a <tt>kpoints</tt> block, VASP will not check whether this block agrees with the k points used in the VASP calculation!\n\nThe user may create a '''wannier90.win''' file prior to running VASP with {{TAG|LWANNIER90}}=.TRUE., and specify any tag and/or block that is understood by <tt>wannier_setup</tt> and/or <tt>wannier_run</tt>. For instance, one can specify the <tt>projections</tt> block in the '''wannier90.win''' file that controls the initial guess for the maximally localized Wannier functions.\nThen, VASP writes the projections of the Bloch functions onto the relevant projectors to the '''wannier90.amn''' file. See Chapter 3 of the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual] for more information.\n\n\n----\n\n\n== Related tags and articles ==\n{{TAG|LWRITE_UNK}},\n{{TAG|LWRITE_MMN_AMN}},\n{{TAG|LWANNIER90_RUN}},\n{{TAG|NUM_WANN}}\n\n{{sc|LWANNIER90|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:53:12Z"}, "LWANNIER90_RUN": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWANNIER90_RUN\">LWANNIER90_RUN</a> executes <tt>wannier_setup</tt> (see <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWANNIER90_RUN\">LWANNIER90</a>=<span><span class=\"tag-value\">.TRUE.</span>) and subsequently runs [http://www.wannier.org WANNIER90] in library mode (</span><tt>wannier_run</tt>).</span>", "wikicode": "{{DISPLAYTITLE:LWANNIER90_RUN}}\n{{TAGDEF|LWANNIER90_RUN|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LWANNIER90_RUN}} executes <tt>wannier_setup</tt> (see {{TAG|LWANNIER90}}=.TRUE.) and subsequently runs [http://www.wannier.org WANNIER90] in library mode (<tt>wannier_run</tt>).\n----\nFor details on the execution of <tt>wannier_setup</tt> in VASP, see the description of the {{TAG|LWANNIER90}}-tag.\nFor information on the many tags one may set in the {{FILE|wannier90.win}} file to control the execution of WANNIER90 (be it standalone or in library mode) we refer to the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual].\n\n'''Mind''': when running WANNIER90 in library mode, the {{FILE|wannier90.mmn}} and {{FILE|wannier90.amn}} files are not written. The information these files normally contain is passed on to <tt>wannier_run</tt> internally. If you want these files to be written anyway, for instance to be able to run WANNIER90 standalone later on, one should add\n\n {{TAG|LWRITE_MMN_AMN}}=.TRUE.\n\nto the {{FILE|INCAR}} file.\n\n== Related tags and articles ==\n{{TAG|LWANNIER90}},\n{{TAG|LWRITE_MMN_AMN}},\n{{TAG|LWRITE_UNK}},\n{{TAG|NUM_WANN}}\n\n{{sc|LWANNIER90_RUN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:53:23Z"}, "LWRITE_MMN_AMN": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWRITE_MMN_AMN\">LWRITE_MMN_AMN</a>=<span><span class=\"tag-value\">.TRUE.</span> tells the VASP2WANNIER90 interface to write the </span><b>wannier90.mmn</b> and <b>wannier90.amn</b> files.</span>", "wikicode": "{{DISPLAYTITLE:LWRITE_MMN_AMN}}\n{{TAGDEF|LWRITE_MMN_AMN|.TRUE. {{!}} .FALSE.}}\n{{DEF|LWRITE_MMN_AMN|.TRUE.|if {{TAG|LWANNIER90}}{{=}}.TRUE.|.FALSE.|otherwise}}\n\nDescription: {{TAG|LWRITE_MMN_AMN}}=.TRUE. tells the VASP2WANNIER90 interface to write the '''wannier90.mmn''' and '''wannier90.amn''' files.\n----\nWhen running WANNIER90 in library mode ({{TAG|LWANNIER90_RUN}}=.TRUE.), the '''wannier90.mmn''' and '''wannier90.amn''' files are not written. The information these files normally contain is passed on to <tt>wannier_run</tt> internally. If you want these files to be written anyway, for instance, to be able to run WANNIER90 standalone later on, set {{TAG|LWRITE_MMN_AMN}}=.TRUE. in the {{FILE|INCAR}} file.\n\n== Related tags and articles ==\n{{TAG|LWANNIER90}},\n{{TAG|LWANNIER90_RUN}}\n\n{{sc|LWRITE_MMN_AMN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:55:28Z"}, "ISMEAR": {"datatype": "string", "options": {"-5": null, "-4": null, "-3": null, "-2": null, "-1": null, "0": null, "[integer]>0": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISMEAR\">ISMEAR</a> determines how the partial occupancies <i>f</i><sub>n<b>k</b></sub> are set for each orbital. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISMEAR\">SIGMA</a> determines the width of the smearing in eV.</span>", "wikicode": "{{TAGDEF|ISMEAR|-5 {{!}} -4 {{!}} -3 {{!}} -2 {{!}} -1 {{!}} 0 {{!}} [integer]>0 |1}}\n\nDescription: {{TAG|ISMEAR}} determines how the partial occupancies ''f''<sub>n'''k'''</sub> are set for each orbital. {{TAG|SIGMA}} determines the width of the smearing in eV.\n----\n\n== Tag options ==\n*{{TAG|ISMEAR}}=''N'' (''N''>0): method of Methfessel-Paxton order ''N''.\n:'''Mind''': For the Methfessel-Paxton scheme the partial occupancies can be negative, as well as larger than 1. This can yield erroneous results for insulators.\n*{{TAG|ISMEAR}}=0: Gaussian smearing.\n*{{TAG|ISMEAR}}=&minus;1: Fermi smearing.\n*{{TAG|ISMEAR}}=&minus;2: partial occupancies are read in from the {{FILE|WAVECAR}} or {{FILE|INCAR}} file, and kept fixed throughout run.\n:To set the occupancies, specify\n  {{TAG|FERWE}} = f(1) f(2) f(3) ... f({{TAG|NBANDS}}&times;N<sub>'''k'''</sub>)\n:and for spin-polarized calculations, additionally\n  {{TAG|FERDO}} = f(1) f(2) f(3) ... f({{TAG|NBANDS}}&times;N<sub>'''k'''</sub>)\n:in the {{TAG|INCAR}} file. The (partial) occupancies must be specified for all bands and k-points. The band-index runs fastest. The occupancies must be between 0 and 1 (for spin-polarized and non-spin-polarized calculations). \n\n:The occupancies are even kept fixed during ionic relaxations or molecular dynamics simulations. However, keeping the orbital occupancies fixed, requires that the orbital order does not change during the self-consistency cycle or during the optimization of the orbitals. Imagine, for instance, that the eigenenergy of the 65th orbital moves below the orbital energy of the 64th orbital. Then the subspace diagonalization step will swap both orbitals, but the occupancies will remain as read from the INCAR file (this means that the originally unoccupied 65th orbital will move to the 64th place and it will hence become occupied). This problem can be often circumvented by specifying {{TAG|LDIAG}}=.FALSE. in the INCAR file.\n\n:Note that the partial occupancies are also written to the {{FILE|OUTCAR}} file, but in this case they are multiplied by 2, i.e. they are between 0 and 2.\n\n\n*{{TAG|ISMEAR}}=&minus;3: perform a loop over smearing-parameters supplied in the {{FILE|INCAR}} file.\n:In this case a tag\n  {{TAG|SMEARINGS}}= ismear<sub>1</sub> sigma<sub>1</sub>  ismear<sub>2</sub> sigma<sub>2</sub>  ...\n:must be present in the {{FILE|INCAR}} file, supplying different smearing parameters. {{TAG|IBRION}} has to be set to -1 and {{TAG|NSW}} to the number of supplied pairs ismear<sub>i</sub>/sigma<sub>i</sub>. The first loop is done using the tetrahedron method with Bl\u00f6chl corrections.\n\n*{{TAG|ISMEAR}}=&minus;4: tetrahedron method (use a [[KPOINTS|&Gamma;-centered '''k'''-mesh]]).\n*{{TAG|ISMEAR}}=&minus;5: tetrahedron method with Bl\u00f6chl corrections (use a [[KPOINTS|&Gamma;-centered '''k'''-mesh]]).\n{{NB|mind|{{TAG|SIGMA}} is ignored for the tetrahedron method.|:}}\n\n== How to set ISMEAR ==\nFor the calculation of the ''total energy'' in bulk materials, we recommend the tetrahedron method with Bl\u00f6chl corrections ({{TAG|ISMEAR}}=-5). This method also gives a good account of the electronic [[:Category:Density of states|density of states]] (DOS). The only drawback is that the method is not variational with respect to the partial occupancies. Therefore the calculated forces and the stress tensor can be wrong by up to 5 to 10% for metals. Only for semiconductors and insulators, the forces are correct because the partial occupancies do not vary and are either zero or one. For the calculation of forces and phonon frequencies in metals, we recommend the method of Methfessel-Paxton ({{TAG|ISMEAR}}>0). \nThe method of Methfessel-Paxton ({{TAG|ISMEAR}}>0) also results in a very accurate description of the total energy, nevertheless, the width of the smearing ({{TAG|SIGMA}}) must be chosen carefully. Too large smearing parameters might result in an incorrect total energy, small smearing parameters require a dense mesh of '''k''' points. {{TAG|SIGMA}} should be as large as possible, while keeping the difference between the free energy and the total energy (i.e. the term <tt>entropy T*S</tt>) in the {{FILE|OUTCAR}} file negligible (1 meV/atom). \n{{NB|warning| Avoid using {{TAG|ISMEAR}}>0 for semiconductors and insulators, since this often leads to incorrect results (the occupancies of some states might be smaller than 0, or larger than 1).}} Errors for, e.g., phonons frequencies can be substantial, i.e., exceeding 20 %. These errors are very hard to spot if you do not look carefully. For insulators, use {{TAG|ISMEAR}}=0 or {{TAG|ISMEAR}}=-5. \n\nThe Gaussian-smearing method leads to very reasonable results in most cases. Within this method it is necessary to extrapolate from finite {{TAG|SIGMA}} results to {{TAG|SIGMA}}=0 results. You can find an extra line in the {{FILE|OUTCAR}} file: <tt>energy( SIGMA&rarr;0 )</tt>, giving the extrapolated results. Large {{TAG|SIGMA}} values lead to a similar error as the Methfessel-Paxton scheme, but in contrast to the Methfessel-Paxton scheme one can not determine how large the error due to the smearing is without systematically reducing {{TAG|SIGMA}}. In this respect, the method of Methfessel-Paxton is more convenient than the Gaussian smearing method. In addition, in the Gaussian smearing method forces and the stress tensor are consistent with the free energy and not the energy for {{TAG|SIGMA}}&rarr;0. Overall the Methfessel-Paxton method is somewhat easier to use for metallic systems.\n\n=== Summary ===\n\n*If you have no a priori knowledge of your system, for instance, if you do not know whether your system is an insulator, semiconductor or metal then always use Gaussian smearing {{TAG|ISMEAR}}=0 in combination with a small {{TAG|SIGMA}}=0.03-0.05.\n:This is not the default in VASP yet, so to be on the safe side, you might want to include this setting in all your {{TAG|INCAR}} files.\n\n*For semiconductors or insulators, use the tetrahedron method ({{TAG|ISMEAR}}=-5), if the cell is too large (or if you use only a single or two '''k''' points) use {{TAG|ISMEAR}}=0 in combination with a small {{TAG|SIGMA}}=0.03-0.05.\n\n*For relaxations ''in metals'', use {{TAG|ISMEAR}}=1 or {{TAG|ISMEAR}}=2 and an appropriate {{TAG|SIGMA}} value (the entropy term should be less than 1 meV per atom). For metals a reasonable value is often SIGMA= 0.2 (which is the default).\n:'''Mind again''': Avoid using {{TAG|ISMEAR}}>0 for semiconductors and insulators since it might cause severe problems.\n\n*For the calculations of the DOS and very accurate total-energy calculations (no relaxation in metals), use the tetrahedron method ({{TAG|ISMEAR}}=-5).\n\n== Related tags and articles ==\n{{TAG|SIGMA}},\n{{TAG|FERWE}},\n{{TAG|FERDO}},\n{{TAG|SMEARINGS}}\n\n{{sc|ISMEAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2023-04-28T07:06:26Z"}, "SIGMA": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SIGMA\">SIGMA</a> specifies the width of the smearing in eV.</span>", "wikicode": "{{TAGDEF|SIGMA|[real]|0.2}}\n\nDescription: {{TAG|SIGMA}} specifies the width of the smearing in eV.\n----\n== Related tags and articles ==\n{{TAG|ISMEAR}}\n\n{{sc|SIGMA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-06T15:54:53Z"}, "FERWE": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FERWE\">FERWE</a> sets the occupancies of the states for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FERWE\">ISMEAR</a>=<span><span class=\"tag-value\">-2</span>.</span></span>", "wikicode": "{{TAGDEF|FERWE|[real array]}}\n\nDescription: {{TAG|FERWE}} sets the occupancies of the states for {{TAG|ISMEAR}}=-2.\n----\nTo set the occupancies, specify\n  {{TAG|FERWE}} = f(1) f(2) f(3) ... f({{TAG|NBANDS}}&times;N<sub>'''k'''</sub>)\nThe occupancies must be specified for all bands and k points. The band index runs fastest. The occupancies must be between 0 and 1.\n\nIn the case of spin-polarized calculations ({{TAG|ISPIN}}=2), {{TAG|FERWE}} sets the occupancies of the states in the up-spin channel. Specify the occupancies of the states in the down-spin channel by means of the {{TAG|FERDO}} tag.\n\n{{NB|mind|If the calculation stops with an error message when reading {{TAG|FERWE}}, then this may be due to an automatic increase of the number of bands {{TAG|NBANDS}} in parallel calculation (the new value of {{TAG|NBANDS}} is indicated in the corresponding warning message). If this is the case, then the number of occupancies provided to {{TAG|FERWE}} should be increased according to the new {{TAG|NBANDS}}.}}\n\n== Related tags and articles ==\n{{TAG|FERDO}},\n{{TAG|ISMEAR}}\n\n{{sc|FERWE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2023-06-06T13:17:30Z"}, "FERDO": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FERDO\">FERDO</a> sets the occupancies of the states in the down-spin channel for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FERDO\">ISMEAR</a>=<span><span class=\"tag-value\">-2</span> and </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FERDO\">ISPIN</a>=<span><span class=\"tag-value\">2</span>.</span></span>", "wikicode": "{{TAGDEF|FERDO|[real array]}}\n\nDescription: {{TAG|FERDO}} sets the occupancies of the states in the down-spin channel for {{TAG|ISMEAR}}=-2 and {{TAG|ISPIN}}=2.\n----\nTo set the occupancies, specify\n  {{TAG|FERDO}} = f(1) f(2) f(3) ... f({{TAG|NBANDS}}&times;N<sub>'''k'''</sub>)\nThe occupancies must be specified for all bands and k points. The band-index runs fastest. The occupancies must be between 0 and 1.\n\nSpecify the occupancies of the states in the spin-up channel by means of the {{TAG|FERWE}} tag.\n\n{{NB|mind|If the calculation stops with an error message when reading {{TAG|FERDO}}, then this may be due to an automatic increase of the number of bands {{TAG|NBANDS}} in parallel calculation (the new value of {{TAG|NBANDS}} is indicated in the corresponding warning message). If this is the case, then the number of occupancies provided to {{TAG|FERDO}} should be increased according to the new {{TAG|NBANDS}}.}}\n\n== Related tags and articles ==\n{{TAG|FERWE}},\n{{TAG|ISMEAR}}\n\n{{sc|FERDO|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2023-06-06T13:18:06Z"}, "SAXIS": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SAXIS\">SAXIS</a> specifies the quantisation axis for noncollinear spins.</span>", "wikicode": "{{TAGDEF|SAXIS|[real array]| (0+, 0, 1)}}\n\nDescription: {{TAG|SAXIS}} specifies the quantisation axis for noncollinear spins.\n----\nThe spin quantization axis may be specified by means of the {{TAG|SAXIS}}-tag,\n\n  {{TAG|SAXIS}} =   s<sub>x</sub> s<sub>y</sub> s<sub>z</sub>    ! global spin quantisation axis\n\nwhere the default for {{TAG|SAXIS}} = (0+,0,1) (the notation 0+ implies an infinitesimal small positive number in ''x''-direction). All magnetic moments are now given with respect to the axis \n(s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>), where we have adopted the convention '''that all magnetic moments and spinor-like quantities written or read by VASP are given with respect to this axis'''. This includes the {{TAG|MAGMOM}} line in the {{FILE|INCAR}} file, the total and local magnetizations in the {{FILE|OUTCAR}} and {{FILE|PROCAR}} file, the spinor-like orbitals in the {{TAG|WAVECAR}} file, and the magnetization density in the {{FILE|CHGCAR}} file. With respect to the Cartesian coordinates, the components of the magnetization are (internally) given by\n\n:<math>\n\\begin{align}\nm_x & = & \\cos(\\beta) \\cos(\\alpha) m^{\\rm axis}_x - \\sin(\\alpha) m^{\\rm axis}_y + \\sin(\\beta) \\cos(\\alpha) m^{\\rm axis}_z \\\\ \nm_y & = & \\cos(\\beta) \\sin(\\alpha) m^{\\rm axis}_x + \\cos(\\alpha) m^{\\rm axis}_y + \\sin(\\beta) \\sin(\\alpha) m^{\\rm axis}_z \\\\ \nm_z & = & -\\sin(\\beta) m^{\\rm axis}_x+ \\cos(\\beta) m^{\\rm axis}_z \n\\end{align}\n</math>\n\n\nWhere ''m''<sup>axis</sup> is the externally visible magnetic moment. Here, <math>\\alpha</math> is the angle between the {{TAG|SAXIS}} vector (s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>) and the Cartesian vector <math>\\hat x</math>, and <math>\\beta</math> is the angle between the vector {{TAG|SAXIS}} and the Cartesian vector <math>\\hat z</math>:\n\n:<math>\n\\begin{align}\n\\alpha &=& {\\rm atan} \\frac{s_y}{s_x} \\\\ \n\\beta &=& {\\rm atan} \\frac{\\sqrt{s_x^2+s_y^2}}{s_z} \n\\end{align}\n</math>\n\nThe inverse transformation is given by\n\n:<math>\n\\begin{align}\nm^{\\rm axis}_x & = & \\cos(\\beta) \\cos(\\alpha) m_x + \\cos(\\beta) \\sin(\\alpha) m_y - \\sin(\\beta) m_z \\\\\nm^{\\rm axis}_y & = & -\\sin(\\alpha) m_z + \\cos(\\alpha) m_y \\\\\nm^{\\rm axis}_z & = & \\sin(\\beta) \\cos(\\alpha) m_x + \\sin(\\beta) \\sin(\\alpha) m_y + \\cos(\\beta) m_z \n\\end{align}\n</math>\n\nIt is easy to see that for the default (s<sub>x</sub>,s<sub>y</sub>,s<sub>z</sub>)=(0+,0,1), both angles are zero, i.e. <math>\\beta=0</math> and <math>\\alpha=0</math>. In this case, the internal representation is simply equivalent to the external representation:\n\n:<math>\n\\begin{align}\nm_x & = & m^{\\rm axis}_x \\\\ \nm_y & = & m^{\\rm axis}_y \\\\ \nm_z & = & m^{\\rm axis}_z \n\\end{align}\n</math>\n\nThe second important case, is ''m''<sup>axis</sup>=(0,0,''m''). In this case\n\n:<math>\n\\begin{align}\nm_x & = & \\sin(\\beta)*\\cos(\\alpha) m = m s_x / \\sqrt{s_x^2+s_y^2+s_z^2} \\\\\nm_y & = & \\sin(\\beta)*\\sin(\\alpha) m = m s_y / \\sqrt{s_x^2+s_y^2+s_z^2} \\\\\nm_z & = & \\cos(\\beta) m = m s_z / \\sqrt{s_x^2+s_y^2+s_z^2}\n\\end{align}\n</math>\n\n\nHence now the magnetic moment is parallel to the vector {{TAG|SAXIS}}. Thus there are two ways to rotate the spins in an arbitrary direction, either by changing the initial magnetic moments {{TAG|MAGMOM}} or by changing {{TAG|SAXIS}}.\n\nTo initialize calculations with the magnetic moment parallel to a chosen vector (''x'',''y'',''z''), it is therefore possible to either specify (assuming a single atom in the cell)\n\n {{TAG|MAGMOM}} = x y z   ! local magnetic moment in x,y,z\n {{TAG|SAXIS}} =  0 0 1   ! quantisation axis parallel to z\n\nor\n\n {{TAG|MAGMOM}} = 0 0 total_magnetic_moment   ! local magnetic moment parallel to {{TAG|SAXIS}}\n {{TAG|SAXIS}} =  x y z   ! quantization axis parallel to vector (''x'',''y'',''z'')\n\nBoth setups should in principle yield exactly the same energy, but for implementation reasons the second method is usually more precise. The second method also allows to read a preexisting {{FILE|WAVECAR}} file (from a collinear or non collinear run), and to continue the calculation with a different spin orientation. When a non collinear {{FILE|WAVECAR}} file is read, the spin is assumed to be parallel to {{TAG|SAXIS}} (hence VASP will initially report a magnetic moment in the ''z''-direction only).\n\nThe recommended procedure for the calculation of magnetic anisotropies is therefore (please check the section on {{TAG|LMAXMIX}}):\n\n*Start with a collinear calculation and calculate a {{FILE|WAVECAR}} and {{FILE|CHGCAR}} file.\n*Add the tags\n\n   {{TAG|LSORBIT}} = .TRUE.\n   {{TAG|ICHARG}} = 11      ! non selfconsistent run, read {{FILE|CHGCAR}}\n   {{TAG|LMAXMIX}} = 4      ! for d-elements increase {{TAG|LMAXMIX}} to 4, f-elements: {{TAG|LMAXMIX}} = 6\n                            ! you need to set {{TAG|LMAXMIX}} already in the collinear calculation\n   {{TAG|SAXIS}} =  x y z   ! direction of the magnetic field\n   {{TAG|NBANDS}} = 2 * number of bands of collinear run\n\nVASP reads in the {{FILE|WAVECAR}} and {{FILE|CHGCAR}} files, aligns the spin quantization axis parallel to {{TAG|SAXIS}}, which implies that the magnetic field is now parallel to {{TAG|SAXIS}}, and performs a non selfconsistent calculation. By comparing the energies for different orientations the magnetic anisotropy can be determined. Please mind, that a completely selfconsistent calculation ({{TAG|ICHARG}} = 1) is in principle also possible with VASP, but this would allow the spinor wavefunctions to rotate from their initial orientation parallel to {{TAG|SAXIS}} until the correct groundstate is obtained, i.e. until the magnetic moment is parallel to the easy axis. In practice this rotation will be slow, however, since reorientation of the spin gains little energy. Therefore if the convergence criterion is not too tight, sensible results might be obtained even for fully selfconsistent calculations (in the few cases we have tried this worked beautifully).\n\n== Related tags and articles ==\n{{TAG|LNONCOLLINEAR}},\n{{TAG|MAGMOM}},\n{{TAG|LSORBIT}}\n\n{{sc|SAXIS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Noncollinear magnetism]]", "last_revised": "2022-04-08T14:54:31Z"}, "LORBIT": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "5": null, "10": null, "11": null, "12": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LORBIT\">LORBIT</a>, together with an appropriate <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LORBIT\">RWIGS</a>, determines whether the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PROCAR\">PROCAR</a> or <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PROCAR\">PROOUT</a> files are written.</span>", "wikicode": "{{TAGDEF|LORBIT|0 {{!}} 1 {{!}} 2 {{!}} 5 {{!}} 10 {{!}} 11 {{!}} 12 | None }}\n\nDescription: {{TAG|LORBIT}}, together with an appropriate {{TAG|RWIGS}}, determines whether the {{FILE|PROCAR}} or {{FILE|PROOUT}} files are written.\n----\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n|{{TAG|LORBIT}} || {{TAG|RWIGS}} tag || files written\n|-\n| 0 || required || {{FILE|DOSCAR}} and {{FILE|PROCAR}}\n|-\n| 1 || required || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}}\n|-\n| 2 || required || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}} + phase factors\n|-\n| 5 || required || {{FILE|DOSCAR}} and {{FILE|PROOUT}}\n|-\n| 10 || ignored || {{FILE|DOSCAR}} and {{FILE|PROCAR}}\n|-\n| 11 || ignored || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}}\n|-\n| 12 || ignored || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}} + phase factors\n|-\n| 13 || ignored || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}} + phase factors, choose best projector for each band\n|-\n| 14 || ignored || {{FILE|DOSCAR}} and ''lm''-decomposed {{FILE|PROCAR}} + phase factors, choose single projector for interval EMIN,EMAX\n|}\n\n===Remarks:===\nLORBIT=13 and LORBIT=14 are only supported by version >=5.4.4. For LORBIT >= 11 and ISYM = 2 the partial charge densities are not correctly symmetrized and can result in different charges for symmetrically equivalent partial charge densities. This issue is fixed as of version >=6. For older versions of vasp a two-step procedure is recommended: \n*1. Self-consistent calculation with symmetry switched on (ISYM=2)\n*2. Recalculation of the partial charge density with symmetry switched off (ISYM=0)\nTo avoid unnecessary large {{TAG|WAVECAR}} files it recommended to set {{TAG|LWAVE}}=.FALSE. in step 2\n\nThe phase factors written by VASP can usually only be used as a qualitative measure of the projection of the orbitals into the atomic sphere. The main issue is\nthat most VASP POTCAR files have two or three projectors per l-quantum number, and projecting an orbital onto two projectors will obviously yield two complex numbers. VASP \ncombines these two numbers into a single number. The precise algorithms differ in different versions of VASP, and we recommend that you inspect the source\ncode for more details. From vasp.6 onward, a new improved scheme has been implemented and can be selected using LORBIT=14. In this case, VASP first\nselects a single projector for each l-quantum number by linearly combining all projectors with the same l-quantum number. This is done in such a way that the new projector is optimally chosen\nto represent the calculated orbitals in the energy interval specified by {{TAG|EMAX}} and {{TAG|EMIN}}. In the second step, VASP projects onto these optimized\nprojectors yielding a single complex number for each orbital, site and l-quantum number, which is written to the PROCAR file. For details we also refer to {{cite|Schuler:JPCM:2018}}.\nLORBIT=12 should no longer be used except for qualitative calculations. LORBIT=13 chooses the projectors also automatically, but allows for different optimal linear combinations for each orbital.\nNote that this is generally not desirable, since the  resultant projection is not compatible with the required properties of a projection operator (a projection operator needs\nto use energy and orbital independent projectors).\nHence do not use LORBIT=13 for anything but a qualitative analysis.\n\n*If LORBIT is set the partial charge densities can be found in the {{TAGBL|OUTCAR}}\n total charge     \n \n # of ion       s       p       d       tot\n ------------------------------------------\n     1        1.514   0.000   0.000   1.514\n     2        0.123   0.345   0.000   0.468\nHere the first column corresponds to the ion index <math>\\alpha</math>, the s, p, d,... columns correspond to the partial charges for <math>l=0,1,2,\\cdots</math> defined as\n\n<math>\\rho_{\\alpha l}=\\frac{1}{N_{\\bf k}} \\sum_{n{\\bf k}}f_{n{\\bf k}} \\sum_{m=-l}^{l}|\\langle Y_{lm}^{\\alpha}|\\phi_{n\\mathbf{k}}\\rangle|^2\n</math>\n\nThe <math>\\langle Y_{lm}^{\\alpha}|\\phi_{n\\mathbf{k}}\\rangle</math> are obtained from the projection of the (occupied) wavefunctions <math>|\\phi_{n{\\bf k}}\\rangle</math> onto spherical harmonics that are non zero within spheres of a radius {{TAG|RWIGS}} centered at ion <math>\\alpha</math> and\nthe last column is the sum <math>\\sum_{l}\\rho_{\\alpha l}</math>. \n\nNote that depending on the system an \"f\" column can be found as well. \n\n*In case of collinear calculations ({{TAGBL|ISPIN}}=2) the magnetization densities are written to the {{TAGBL|OUTCAR}}\n magnetization (x)\n  \n # of ion       s       p       d       tot\n ------------------------------------------\n     1        0.000   0.000   0.000   0.000\n     2        0.000   0.245   0.000   0.245\n\nHere the magnetization density (projection axis is the z-axis) is calculated from the difference in the up and down spin channel <math>m^{\\alpha l}_z = \\rho_{\\alpha l}^{\\uparrow}-\\rho_{\\alpha l}^{\\downarrow}\n</math>\n\n*In case of non-collinear calculations ({{TAGBL|LNONCOLLINEAR}}=.TRUE.) the lines after \"total charge\" correspond to the diagonal average \n<math> \\frac{\\rho_{\\alpha l}^{\\uparrow\\uparrow} - \\rho_{\\alpha l}^{\\downarrow \\downarrow}}{2} </math>\nof the density tensor\n\n::<math>\n\\rho_{\\alpha l} = \\left(\\begin{matrix}\n  \\rho_{\\alpha l}^{\\uparrow \\uparrow }   &  \\rho_{\\alpha l}^{\\uparrow \\downarrow}     \\\\\n  \\rho_{\\alpha l}^{\\downarrow \\uparrow}  &  \\rho_{\\alpha l}^{\\downarrow \\downarrow}   \\\\\n \\end{matrix}\\right), \n</math>\n\nwhich is determined from the projected components \n\n::<math>\n\\rho^{\\mu\\nu}_{\\alpha l} = \\frac{1}{N_{\\bf k}} \\sum_{n{\\bf k}}f_{n{\\bf k}} \\sum_{m=-l}^{l} \n\\langle \\chi_{n {\\bf k}}^\\mu | Y_{lm}^\\alpha \\rangle\n\\langle  Y_{lm}^\\alpha | \\chi_{n {\\bf k}}^\\nu \\rangle \n</math>\n\nof the spinor <math>|\\Psi_{n{\\bf k}}\\rangle=\\left(\\begin{matrix}\\chi_{n{\\bf k}}^\\uparrow \\\\\\chi_{n{\\bf k}}^\\downarrow \\end{matrix}\\right)</math> \n\nSimilarly, the lines after \"magnetization (x)\" correspond to the partial magnetization density projected onto the x direction and two additional entries \"magnetization (y)\", \"magnetization (z)\" are written for the y and z direction and are calculated from the three Pauli matrices \n\n::<math> \n\\sigma^x = \\left(\\begin{matrix}\n  0  &  1 \\\\\n  1  &  0 \\\\\n \\end{matrix}\\right), \\quad\n\\sigma^y = \\left(\\begin{matrix}\n  0  &  -i \\\\\n  i  &  0 \\\\\n \\end{matrix}\\right), \\quad\n\\sigma^z = \\left(\\begin{matrix}\n  1  &  0 \\\\\n  0  &  -1 \\\\\n \\end{matrix}\\right)\n</math>\n\nvia\n\n::<math>\nm_{\\alpha l}^j = \\frac{1}{2}\\sum_{\\mu,\\nu=1}^2 \\sigma^j_{\\mu \\nu} \\rho_{\\alpha l}^{\\mu \\nu}.\n</math>\n\n== References ==\n<references/>\n\n== Related tags and articles ==\n{{TAG|RWIGS}},\n{{FILE|PROCAR}},\n{{FILE|PROOUT}},\n{{FILE|DOSCAR}}\n\n{{sc|LORBIT|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]][[Category:Band structure]]", "last_revised": "2022-04-08T14:38:24Z"}, "PTHRESHOLD": {"datatype": "real", "options": {}, "summary": "Control flag for the output of the profiling routines.", "wikicode": "{{TAGDEF|PTHRESHOLD|[real]}}\n\nDescription: Control flag for the output of the profiling routines.\n----\n\nIf specified all routines with less execution time than {{TAG|PTHRESHOLD}}=''time'' are not printed out in the {{FILE|OUTCAR}} file.\n\n{{sc|PTHRESHOLD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]]", "last_revised": "2022-04-08T14:53:56Z"}, "PROUTINE": {"datatype": "integer", "options": {}, "summary": "Control flag for the output of the profiling routines.", "wikicode": "{{TAGDEF|PROUTINE|[integer]}}\n\nDescription: Control flag for the output of the profiling routines.\n----\n\nIf specified only the routine with the name {{TAG|PROUTINE}}=''routine'' is taken into account.\n\n{{sc|PROUTINE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]]", "last_revised": "2022-04-08T14:53:50Z"}, "PLEVEL": {"datatype": "integer", "options": {}, "summary": "Control flag for the output of the profiling routines.", "wikicode": "{{TAGDEF|PLEVEL|[integer]}}\n\nDescription: Control flag for the output of the profiling routines.\n \n----\nIf specified all routines with a level higher than {{TAG|PLEVEL}}=''level'' are not printed out in the {{FILE|OUTCAR}}.\n\n{{sc|PLEVEL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Performance]]", "last_revised": "2022-04-06T15:30:04Z"}, "PFLAT": {"datatype": "boolean", "options": {}, "summary": "Control flag for the output of the profiling routines.", "wikicode": "{{TAGDEF|PMASS|[logical]}}\n\nDescription: Control flag for the output of the profiling routines.\n----\nIf specified as {{TAG|PMASS}}=''.TRUE.'', only the flat profile is printed out in the {{FILE|OUTCAR}}.\n\n{{sc|PFLAT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]]", "last_revised": "2022-04-08T14:53:16Z"}, "DIPOL": {"datatype": "real array", "options": {}, "summary": "specifies the center of the cell in direct lattice coordinates with respect to which the total dipole-moment in the cell is calculated.", "wikicode": "{{TAGDEF|DIPOL|[real array]}}\n\nDescription: specifies the center of the cell in direct lattice coordinates with respect to which the total dipole-moment in the cell is calculated.\n----\nThe center of the cell w.r.t. which the total dipole-moment in the cell is calculated is specified as\n\n {{TAG|DIPOL}}='''R'''<sub>x</sub> '''R'''<sub>y</sub> '''R'''<sub>z</sub>\n\nwhere '''R'''<sub>x</sub>, '''R'''<sub>y</sub> and '''R'''<sub>z</sub> are given in direct lattice coordinates.\n\n'''Mind''': the calculation of the dipole ({{TAG|IDIPOL}}=1-4) requires a definition of the center of the cell, and results might differ for different positions.\nYou should use this option only for surfaces and isolated molecules.\nIn this case, use the center of mass for the position. Additionally, mind that for surfaces, only the component normal to the surface is meaningful.\n\nThe main problem is that the definition of the dipole 'destroys' the translational symmetry, i.e., the dipole is defined as\n\n:<math>\n\\int ({\\mathbf r}-{\\mathbf R}_{\\rm center}) \\rho_{\\rm ions+valence}({\\mathbf r}) d^3 {\\mathbf r}.\n</math>\n\nNow, this makes only sense if <math>\\rho_{\\rm ions+valence}</math> drops to zero at some distance from <math>\\mathbf R_{\\rm center}</math>. If this is \nnot the case, the values are extremely sensitive with respect to changes in <math>\\mathbf R_{\\rm center}</math>.\n\n'''Note''': If the flag is not set, VASP determines where the charge density averaged over one plane drops to a minimum and calculates the center of the charge distribution by adding half of the lattice vector perpendicular to the plane where the charge density has a minimum (this is a rather reliable approach for orthorhombic cells).\n\n== Related tags and articles ==\n{{TAG|NELECT}},\n{{TAG|EPSILON}},\n{{TAG|IDIPOL}},\n{{TAG|LDIPOL}},\n{{TAG|LMONO}},\n{{TAG|EFIELD}},\n[[Monopole_Dipole_and_Quadrupole_corrections|Monopole, Dipole and Quadrupole corrections]]\n\n{{sc|DIPOL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecules]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2022-04-08T14:10:36Z"}, "NEDOS": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NEDOS\">NEDOS</a> specifies the number of grid points on which the DOS is evaluated</span>", "wikicode": "{{TAGDEF|NEDOS|[integer]|<math>301</math>}}\n\nDescription: {{TAG|NEDOS}} specifies the number of grid points on which the DOS is evaluated\n----\nThe energy range between {{TAG|EMIN}} and {{TAG|EMAX}} is divided into\n{{TAG|NEDOS}} intervals, the DOS for each corresponding energy is written in\n{{FILE|DOSCAR}}.\n\n'''Mind''': If the DOS has narrow peaks, the default {{TAG|NEDOS}} may be too\nsmall to resolve all peaks properly. It may be helpful to compare the DOS\nto the integrated DOS (also written on {{FILE|DOSCAR}}) to find out whether\nthis is the case: at least one peak should show up at every step of the integrated DOS.\nIf so, the smallest peak widths from the dispersion of\nthe respective bands can be estimated by having a look at the Kohn-Sham eigenvalues written\nin {{FILE|OUTCAR}}. {{TAG|NEDOS}} has to be chosen sufficiently large to resolve this dispersion. Alternatively, the\nenergy interval defined by {{TAG|EMIN}} and {{TAG|EMAX}} can be modified.\n\n{{TAG|NEDOS}} is also used to set the total number of frequency points when calculating the dielectric function. \n== Related tags and articles ==\n{{TAG|EMIN}}, {{TAG|EMAX}},\n{{FILE|DOSCAR}}\n\n{{sc|NEDOS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2022-04-08T14:47:29Z"}, "EMIN": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EMAX\">EMAX</a> specifies the  lower boundary of the energy range </span>", "wikicode": "{{TAGDEF|EMIN|[real]}}\n{{DEF|EMIN| lowest KS-eigenvalue  - <math>\\Delta</math> | }}\n\nDescription: {{TAG|EMAX}} specifies the  lower boundary of the energy range \nfor the evaluation of the DOS\n----\nThe DOS is evaluated each {{TAG|NBLOCK}} steps, {{FILE|DOSCAR}}  is updated\neach  {{TAG|NBLOCK}}*{{TAG|KBLOCK}} steps. \n{{NB|tip| Set {{TAG|EMIN}} to a value larger than {{TAG|EMAX}}, if you are not sure where the region of interest lies.}}\n\n==Related tags and articles==\n{{TAG|EMAX}}, {{TAG|NEDOS}},\n{{FILE|DOSCAR}}\n\n{{sc|EMIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2022-04-08T14:11:56Z"}, "EMAX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EMAX\">EMAX</a> specifies the  upper boundary of the energy range</span>", "wikicode": "{{TAGDEF|EMAX|[real]}}\n{{DEF|EMAX| highest KS-eigenvalue  + <math>\\Delta</math> | }}\n\nDescription: {{TAG|EMAX}} specifies the  upper boundary of the energy range\nfor the evaluation of the DOS.\n----\nThe DOS is evaluated each {{TAG|NBLOCK}} steps, {{FILE|DOSCAR}}  is updated     each  {{TAG|NBLOCK}}*{{TAG|KBLOCK}} steps.\n\n\n== Related tags and articles ==\n{{TAG|EMIN}}, {{TAG|NEDOS}},\n{{FILE|DOSCAR}}\n\n{{sc|EMAX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2022-04-08T14:11:45Z"}, "ENCUT": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENCUT\">ENCUT</a> specifies the cutoff energy for the plane-wave-basis set in eV.</span>", "wikicode": "{{TAGDEF|ENCUT|[real]}}\n{{DEF|ENCUT|  largest {{TAG|ENMAX}} on the {{FILE|POTCAR}} file | }}\n\nDescription: {{TAG|ENCUT}} specifies the cutoff energy for the plane-wave-basis set in eV.\n\n----\nAll plane waves with a kinetic energy smaller than <math>E_{\\mathrm{cut}}</math> are included in the basis set, i.e.,\n\n::<math> | \\mathbf{G} + \\mathbf{k} | < G_{\\mathrm{cut}} </math> with <math> E_{\\mathrm{cut}} = \\frac{\\hbar^2}{2m} G^2_{\\mathrm{cut}} </math>\n\nThe number of plane waves differs for each '''k'''-point, leading to a superior behavior for, e.g. energy-volume calculations.\nIf the volume is increased the total number of plane waves changes fairly smoothly.\nThe criterion <math>| \\mathbf{G} | <   G_{\\mathrm{cut}} </math> (i.e. same basis set for each '''k'''-point) would lead to a very rough energy-volume curve and, generally, slower energy convergence.\n\nThe {{FILE|POTCAR}} files contain a default {{TAG|ENMAX}} (and {{TAG|ENMIN}}) line, therefore it is in principle not necessary to specify {{TAG|ENCUT}} in the {{FILE|INCAR}} file.\nFor calculations with more than one species, the maximum cutoff {{TAG|ENMAX}} or {{TAG|ENMIN}} value is used for the calculation (see {{TAG|PREC}}).\nFor consistency reasons we still recommend to specify the cutoff manually in the {{FILE|INCAR}} file and keep it constant throughout a set of calculations.\n\n== Related tags and articles ==\n{{TAG|ENMAX}},\n{{TAG|ENMIN}},\n{{TAG|ENINI}},\n{{TAG|PREC}},\n{{FILE|POTCAR}}\n\n{{sc|ENCUT|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:12:27Z"}, "KPAR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPAR\">KPAR</a> determines the number of <b>k</b>-points that are to be treated in parallel (available as of VASP.5.3.2). Also, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPAR\">KPAR</a> is used as parallelization tag for <a href=\"https://www.vasp.at/wiki/index.php/LTMP2_-_Tutorial\">Laplace transformed MP2 calculations</a>. </span>", "wikicode": "{{TAGDEF|KPAR|[integer]|1 }}\n\nDescription: {{TAG|KPAR}} determines the number of '''k'''-points that are to be treated in parallel (available as of VASP.5.3.2). Also, {{TAG|KPAR}} is used as parallelization tag for [[LTMP2_-_Tutorial|Laplace transformed MP2 calculations]]. \n\n----\nVASP currently offers parallelization and data distribution over bands and/or over plane wave coefficients (see {{TAG|NCORE}} and {{TAG|NPAR}}), and as of VASP.5.3.2, parallelization over '''k'''-points.\nTo obtain high efficiency on massively parallel systems or modern multi-core machines, it is strongly recommended to use all at the same time. Most algorithms work with any data distribution (except for the single band conjugated gradient, which is considered to be obsolete).\n\nThe set of '''k'''-points is distributed over {{TAG|KPAR}} groups of compute cores, in a round-robin fashion.\nThis means that a group of ''N''=(# of cores/{{TAG|KPAR}}) compute cores together work on an individual '''k'''-point (choose {{TAG|KPAR}} such that it is an integer divisor of the total number of cores).\nWithin this group of ''N'' cores that share the work on an individual '''k'''-point, the usual parallelism over bands and/or plane wave coefficients applies (as set by means of the {{TAG|NCORE}} and {{TAG|NPAR}} tags).\n\n'''Note''': the data is not distributed additionally over '''k'''-points.\n\n'''Note''': {{TAGBL|KPAR}} becomes obsolete if {{TAG|LMP2LT}} or {{TAG|LSMP2LT}} are set and specifies the number of plane-waves treated in parallel, see [[LTMP2_-_Tutorial#Parallelization|here]] for more information.\n\n== Related tags and articles ==\n{{TAG|NCORE}},\n{{TAG|NPAR}},\n{{TAG|LPLANE}},\n{{TAG|LSCALU}},\n{{TAG|NSIM}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}},\n{{TAG|LSMP2LT}},\n{{TAG|LMP2LT}}\n\n{{sc|KPAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]][[Category:MP2]]", "last_revised": "2022-04-08T14:24:51Z"}, "NCORE": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NCORE\">NCORE</a> determines the number of compute cores that work on an individual orbital (available as of VASP.5.2.13). </span>", "wikicode": "{{TAGDEF|NCORE|[integer]|1 }}\n\nDescription: {{TAG|NCORE}} determines the number of compute cores that work on an individual orbital (available as of VASP.5.2.13). \n\n----\nVASP currently offers parallelization and data distribution over bands and/or over plane wave coefficients, and as of VASP.5.3.2, parallelization over '''k'''-points (no data distribution, see {{TAG|KPAR}}).\nTo achieve high efficiency on massively parallel systems or modern multi-core machines, it is strongly recommended to use all parallelization options available. Most algorithms work with any data distribution (except for the single band conjugated gradient, which is obsolete).\n\n{{TAG|NCORE}} is available from VASP.5.2.13 on, and is more handy than the previous parameter {{TAG|NPAR}}. The user should either specify {{TAG|NCORE}} or {{TAG|NPAR}}, where {{TAG|NPAR}} takes a higher preference. The relation between both parameters is \n\nNCORE =number-of-cores /KPAR / NPAR\n\n{{TAG|NCORE}} determines how many cores share the work on an individual orbital. The current default is {{TAG|NCORE}}=1, meaning that one orbital is treated by one core. {{TAG|NPAR}} is then set to the total number of cores (divided by KPAR). If {{TAG|NCORE}} equals the total number of cores, {{TAG|NPAR}} is set to 1. This implies data distribution over plane wave coefficients only: all cores will work together on every individual band, i.e., the plane wave coefficients of each band are distributed over all cores. This is usually very slow and should be avoided.\n\n{{TAG|NCORE}}=1 is the optimal setting for small unit cells, and platforms with a small communication bandwidth. It is also a good choice for up to 8 cores. However, this mode substantially increases the memory requirements, because the non-local projector functions must be stored entirely on each core. In addition, substantial all-to-all communications are required to orthogonalize the bands. \n\nOn massively parallel systems and modern multi-core machines we strongly recommend to set \n\n NCORE = 2 up to number-of-cores-per-socket (or number-of-cores-per-node)\n\n\nFor large unit cells, we found that this can improve the performance by up to a factor four compared to the default, and it also significantly improves the stability of the code due to reduced memory requirements. Ideally, {{TAG|NCORE}} should be a factor of the number-of-cores-per-socket (or number-of-cores-per-node), since this reduces communication between the sockets or nodes. The best value {{TAG|NCORE}} depends somewhat on the number of atoms in the unit cell. Values around 4 are usually ideal for 100 atoms in the unit cell. For very large unit cells (more than 400 atoms) values around 12-16 are often optimal. If you run extensive simulations for similar systems, make your own tests.\n\n\nFinally, the optimal settings for {{TAG|NCORE}} and {{TAG|LPLANE}} depend strongly on the type of machine you are using.\nSome recommended setups:\n\n*LINUX cluster linked by Infiniband, modern multicore machines: \n:On a LINUX cluster with multicore machines linked by a fast network we recommend to set\n<pre>\nLPLANE = .TRUE.\nNCORE  = 2 up to number-of-cores-per-node\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:If very many nodes are used, it might be necessary to set LPLANE = .FALSE., but usually this offers only a very modest performance boost (if at all). \n\n*LINUX cluster linked by 1 Gbit Ethernet, and LINUX clusters with single cores: \n:On a LINUX cluster linked by a relatively slow network, LPLANE must be set to .TRUE., and the NCORE should be equal to 1:\n<pre>\nLPLANE = .TRUE.\nNCORE  = 1\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:Mind that you need at least a 100 Mbit full duplex network, with a fast switch offering at least 2 Gbit switch capacity to find useful speedups. Multi-core machines should be always linked by an Infiniband, since Gbit is too slow for multi-core machines.\n\n*Massively parallel machines with dedicated network (maybe Cray):\n:On massively parallel machines one is sometimes forced to use a large number of cores. In this case load balancing problems and problems with the communication bandwidth are likely to be experienced. In addition the local memory is fairly small on some massively parallel machines (too small keep the real space projectors in the cache using any reasonable VASP setting). Therefore, we recommend to set {{TAG|NCORE}} on these machines to &radic;''# of cores'' (explicit timing can be helpful to find the optimum value). The use of {{TAG|LPLANE}}=.TRUE. is only recommended if the number of nodes is significantly smaller than {{TAG|NGX}}, {{TAG|NGY}} and {{TAG|NGZ}}.\n\n:In summary, the following setting is recommended\n<pre>\nLPLANE = .FALSE.\nNPAR   = sqrt(number of cores)\nNSIM   = 1\n</pre>\n\n== Related tags and articles ==\n{{TAG|NPAR}},\n{{TAG|LPLANE}},\n{{TAG|LSCALU}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}},\n[[OpenACC_GPU_port_of_VASP|OpenACC GPU Port of VASP]],\n[[Combining MPI and OpenMP]]\n\n{{sc|NCORE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-05-25T09:23:58Z"}, "NPAR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NPAR\">NPAR</a> determines the number of bands that are treated in parallel. </span>", "wikicode": "{{TAGDEF|NPAR|[integer]|number of cores}}\n\nDescription: {{TAG|NPAR}} determines the number of bands that are treated in parallel. \n\n----\nVASP currently offers parallelization and data distribution over bands and/or over plane wave coefficients, and as of VASP.5.3.2, parallelization over '''k'''-points (no data distribution, see {{TAG|KPAR}}).\nTo obtain high efficiency on massively parallel systems or modern multi-core machines, it is strongly recommended to use all at the same time. Most algorithms work with any data distribution (except for the single band conjugated gradient, which is considered to be obsolete).\n\n{{TAG|NPAR}} determines how many bands are treated in parallel. The current default is {{TAG|NPAR}}=''number of cores'', meaning that one orbital is treated by one core. {{TAG|NCORE}} is then set to 1. If {{TAG|NPAR}}=1, {{TAG|NCORE}} is set to the number of cores. This implies data distribution over plane wave coefficients only: all cores will work together on every individual band, i.e., the plane wave coefficients of each band are distributed over all cores. This is usually very slow and should be avoided.\n\n{{TAG|NPAR}}=''number of cores'' is the optimal setting for platforms with a small communication bandwidth and is a good choice for up to 8 cores, as well as for machines with a single core per node and a Gigabit network. However, this mode substantially increases the memory requirements, because the non-local projector functions must be stored entirely on each core. In addition, substantial all-to-all communications are required to orthogonalize the bands. On massively parallel systems and modern multi-core machines we strongly urge to set \n\n:<math>\\textrm{NPAR}\\approx\\sqrt{\\textrm{\\#of}\\; \\textrm{cores}}</math>\n\nor\n\n:<math>\\textrm{NCORE}=\\textrm{\\#of}\\;\\textrm{cores}\\;\\textrm{per}\\;\\textrm{compute}\\;\\textrm{node}</math>\n\n\nIn selected cases, we found that this improves the performance by a factor of up to four compared to the default, and it also significantly improves the stability of the code due to reduced memory requirements.\n\n{{TAG|NCORE}} is available from VASP.5.2.13 on, and is more handy than the previous parameter {{TAG|NPAR}}.\nThe user should either specify {{TAG|NCORE}} or {{TAG|NPAR}}, where {{TAG|NPAR}} takes a higher preference.\nThe relation between both parameters is \n\n:<math>\\textrm{NCORE}=\\textrm{\\#of}\\; \\textrm{cores}/\\textrm{NPAR}</math>\n\n\nThe optimum settings for {{TAG|NPAR}} and {{TAG|LPLANE}} depend strongly on the type of machine you are using.\nSome recommended setups:\n\n*LINUX cluster linked by Infiniband, modern multicore machines: \n:On a LINUX cluster with multicore machines linked by a fast network we recommend to set\n<pre>\nLPLANE = .TRUE.\nNCORE  = number of cores per node (e.g. 4 or 8)\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:If very many nodes are used, it might be necessary to set {{TAG|LPLANE}}=.FALSE., but usually this offers very little advantage. For long (e.g. molecular dynamics runs), we recommend to optimize {{TAG|NPAR}} by trying short runs for different settings.\n\n*LINUX cluster linked by 1 Gbit Ethernet, and LINUX clusters with single cores: \n:On a LINUX cluster linked by a relatively slow network, {{TAG|LPLANE}} must be set to .TRUE., and the {{TAG|NPAR}} flag should be equal to the number of cores:\n<pre>\nLPLANE = .TRUE.\nNCORE  = 1\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:Mind that you need at least a 100 Mbit full duplex network, with a fast switch offering at least 2 Gbit switch capacity to find usefull speedups. Multi-core machines should be always linked by an Infiniband, since Gbit is too slow for multi-core machines.\n\n*Massively parallel machines (Cray, Blue Gene):\n:On many massively parallel machines one is forced to use a huge number of cores. In this case load balancing problems and problems with the communication bandwidth are likely to be experienced. In addition the local memory is fairly small on some massively parallel machines; too small keep the real space projectors in the cache with any setting. Therefore, we recommend to set {{TAG|NPAR}} on these machines to &radic;''# of cores'' (explicit timing can be helpful to find the optimum value). The use of {{TAG|LPLANE}}=.TRUE. is only recommended if the number of nodes is significantly smaller than {{TAG|NGX}}, {{TAG|NGY}} and {{TAG|NGZ}}.\n\n:In summary, the following setting is recommended\n<pre>\nLPLANE = .FALSE.\nNPAR   = sqrt(number of cores)\nNSIM   = 1\n</pre>\n\n== Related tags and articles ==\n{{TAG|NCORE}},\n{{TAG|LPLANE}},\n{{TAG|LSCALU}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}}\n\n{{sc|NPAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:parallelization]]", "last_revised": "2022-04-08T14:50:25Z"}, "METAGGA": {"datatype": "string", "options": {"SCAN": null, "RTPSS": null, "MBJ": null, "LIBXC": null, "...": null}, "summary": "selects a meta-GGA functional.", "wikicode": "{{TAGDEF|METAGGA|SCAN {{!}} RTPSS {{!}} MBJ {{!}} LIBXC {{!}} ... |none}}\n\nDescription: selects a meta-GGA functional.\n\n'''N.B.I:''' If you select a meta-GGA functional, make sure that you use [[METAGGA#POTCAR files: required information | POTCAR files that are suited for meta-GGA functionals]].\n\n'''N.B.II:''' Depending on the meta-GGA that is chosen, it may be recommended to use a [[Available PAW potentials|PAW potential]] that is more accurate than the standard/recommended one. This is particularly the case with functionals (e.g., MBJ or the Minnesota functionals) that are very different from the standard ones like PBE or SCAN. The reason is that for such ''special'' functionals, using a PAW potential that includes more states in the valence or that is harder may be required to obtain results that are closer to the results that would be obtained with an all-electron code. Thus, it may be a good idea to do test calculations with different PAW potentials.\n\n'''N.B.III:''' It is strongly recommended to set {{TAG|LASPH}} =.TRUE. to [[METAGGA#Aspherical contribtutions related to one-center terms | account for aspherical contributions to the PAW one-centre terms]]. \n\n'''N.B.IV:''' Since VASP.6.4.0 it is possible to use hybrid functionals that mix meta-GGA and Hartree-Fock exchange ({{TAG|AEXX}}). Furthermore, two new tags, {{TAG|AMGGAX}} and {{TAG|AMGGAC}}, were created.\n\n==  Available functionals  ==\n\n*{{TAG|METAGGA}}=LIBXC\n:The LIBXC tag allows to use a meta-GGA functional from the library of exchange-correlation functionals Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}}. Along with {{TAG|METAGGA}}=LIBXC, it is also necessary to specify the tags {{TAG|LIBXC1}} and {{TAG|LIBXC2}} that specify the particular functional. Note that it is necessary to have [[Makefile.include#Libxc_.28optional.29|Libxc >= 5.2.0 installed]] and VASP.6.3.0 or higher compiled with [[Precompiler_options#-DUSELIBXC|precompiler options]].\n\n*{{TAG|METAGGA}}=TPSS, RTPSS, or M06L\n:The implementation of the TPSS and RTPSS (revTPSS) self-consistent meta-generalized gradient approximation within the projector-augmented-wave method in VASP is discussed by Sun ''et al.''{{cite|sun:prb:11}}. For details on the M06-L functional, refer to the paper by Zhao and Truhlar{{cite|zhao:jcp:06}}.\n\n*{{TAG|METAGGA}}=MS0, MS1, or MS2\n:The MS (where MS stands for \"made simple\") functionals are presented in detail in references {{cite|sun:jcp:12}} and {{cite|sun:jcp:13}}. These functionals are believed to improve the description of noncovalent interactions over PBE, TPSS and revTPSS but not over M06L. The MS functionals are available as of VASP version \u2265 5.4.1.\n\n*{{TAG|METAGGA}}=SCAN\n:The SCAN (Strongly constrained and appropriately normed) {{cite|sun:prl:15}} functional is a semilocal density functional that fulfills all known constraints that the exact density functional must fulfill. There are indications that this functional is superior to most gradient corrected functionals {{cite|sun:natm:16}}. This functional is only available as of VASP version \u2265 5.4.3.\n\n*{{TAG|METAGGA}}=RSCAN\n:The rSCAN (regularized SCAN) functional {{cite|bartok:jcp:19}}, introduces regularizations that improve the numerical sensitivity and convergence behavior. These regularizations break several of the exact constraints that the parent SCAN functional was designed to satisfy. However, testing has indicated that the accuracy of rSCAN can be inferior to SCAN in some cases {{cite|mejia-rodriguez:jcp:19}}. This functional is available as of VASP version \u2265 6.2.0.\n\n*{{TAG|METAGGA}}=R2SCAN\n:The r<math>^2</math>SCAN (regularized-restored SCAN) functional {{cite|furness:jpcl:20}} modifies the regularizations introduced in rSCAN to enforce adherence to the exact constraints obeyed by SCAN. It fulfills all known constraints. However, it only recovers the slowly varying density-gradient expansion for exchange to second order, while SCAN recovers the expansion to 4th order. Testing indicates that r<math>^2</math>SCAN at least matches the accuracy of the parent SCAN functional but with significantly improved numerical efficiency and accuracy under low-cost computational settings. This functional is available as of VASP version \u2265 6.2.0, or in version 5.4.4 by [https://gitlab.com/dhamil/r2scan-subroutines/-/tree/master/vasp_patch_files patch 4].\n\n*{{TAG|METAGGA}}=SCANL, RSCANL, or R2SCANL\n:The functionals SCAN-L{{cite|mejia-rodriguez:pra:2017}}{{cite|mejia-rodriguez:prb:2018}}, rSCAN-L, and r<math>^2</math>SCAN-L{{cite|mejia-rodriguez:prb:2020}}{{cite|kaplan:prm:2022}} are deorbitalized versions of SCAN, rSCAN, and r<math>^2</math>SCAN, respectively. They do not depend on the kinetic-energy density <math>\\tau</math>, but on the Laplacian of the density <math>\\nabla^{2}n</math>, instead.\n\n*{{TAG|METAGGA}}=OFR2\n:The OFR2{{cite|kaplan:prm:2022}} functional depends on the Laplacian of the density <math>\\nabla^{2}n</math>, but not on the kinetic-energy density <math>\\tau</math>.\n\n*{{TAG|METAGGA}}=MBJ\n:The modified Becke-Johnson (MBJ) potential{{cite|becke:jcp:06}}{{cite|tran:prl:09}} yields band gaps with an accuracy similar to hybrid functionals or GW methods, but is computationally less expensive. The exchange part of the MBJ potential (that is combined with the LDA correlation potential, <math>v_{xc}^{\\rm MBJ}=v_{x}^{\\rm MBJ}+v_{c}^{\\rm LDA}</math>) consists of two terms whose relative weights are determined by a system-dependent constant <math>c</math>:\n:<math>\n v_{x}^{\\rm MBJ}(\\mathbf{r}) = cv_{x}^{\\rm BR}(\\mathbf{r}) + (3c-2)\\frac{1}{\\pi}\\sqrt{\\frac{5}{6}}\\sqrt{\\frac{\\tau(\\mathbf{r})}{n(\\mathbf{r})}}\n</math>\n:where <math>v_{x}^{\\rm BR}</math> is the Becke-Roussel (BR) potential that mimics the Coulomb potential created by the exchange hole{{cite|becke:pra:1989}} and depends on <math>n</math>, <math>\\nabla n</math>, <math>\\nabla^{2}n</math> and <math>\\tau</math>.\n\n:The system-dependent <math>c</math> is a function of the average of <math>|\\nabla n|/n</math> in the unit cell (of volume <math>V_{\\mathrm{cell}}</math>):\n:<math>\nc=\\alpha+\\beta \\left(\\frac{1}{V_{\\mathrm{cell}}}\\int_{\\mathrm{cell}}\\frac{|\\nabla n(\\mathbf{r}')|}{n(\\mathbf{r}')}d{\\mathbf{r}'}\\right)^{e}\n</math>\n:where <math>\\alpha</math>, <math>\\beta</math>, and <math>e</math> are free parameters that can be set by means of the {{TAG|CMBJA}}, {{TAG|CMBJB}}, and {{TAG|CMBJE}} tags, respectively. The default values are <math>\\alpha=-0.012</math>, <math>\\beta=1.023</math> bohr<math>^{1/2}</math>, and <math>e=1/2</math>{{cite|tran:prl:09}}. In Ref. {{cite|koller:prb:2012}}, the alternative values <math>\\alpha=0.488</math>, <math>\\beta=0.5</math> bohr, and <math>e=1</math> were proposed.\n\n:'''N.B.I''': The MBJ functional is a ''potential-only'' functional, ''i.e.'', there is no corresponding MBJ exchange-correlation energy, instead <math>E_{xc}</math> is taken from LDA. This means that MBJ calculations can never be self-consistent with respect to the total energy, and thus we cannot compute Hellmann-Feynman forces (''i.e.'', no ionic relaxation, etc.). Actually, MBJ calculations aim solely at a description of the electronic properties, primarily band gaps.\n\n:'''N.B.II''': MBJ calculations converge very slowly, so the number of maximum electronic steps ({{TAG|NELM}}) should be set higher than usual.\n\n:'''N.B.III''': In the presence of an extended vacuum region (e.g., surfaces), the average of <math>|\\nabla n|/n</math> has no meaning. Therefore, MBJ calculations should be done with a fixed value of <math>c</math>, which can be done with the {{TAG|CMBJ}} tag.\n\n*{{TAG|METAGGA}}=LMBJ\n:The local MBJ (LMBJ) potential{{cite|rauch:jctc:2020}}{{cite|rauch:prb:2020}} is a variant of the MBJ potential that was modified such that it does not suffer from the problems related to the presence of vacuum mentioned above for MBJ. The LMBJ potential has the same analytical form as the MBJ potential:\n:<math>\n v_{x}^{\\rm LMBJ}(\\mathbf{r}) = c(\\mathbf{r})v_{x}^{\\rm BR}(\\mathbf{r}) + (3c(\\mathbf{r})-2)\\frac{1}{\\pi}\\sqrt{\\frac{5}{6}}\\sqrt{\\frac{\\tau(\\mathbf{r})}{n(\\mathbf{r})}}\n</math>\n:with the difference that <math>c</math> is now a position-dependent function:\n:<math>\nc(\\mathbf{r})=\\alpha+\\beta(\\tilde{g}(\\mathbf{r}))^{e}\n</math>\n:where\n:<math>\n\\tilde{g}(\\mathbf{r})=\\frac{1}{\\left(2\\pi\\sigma^{2}\\right)^{3/2}}\\int g(\\mathbf{r}')e^{-\\frac{\\left\\vert\\mathbf{r}-\\mathbf{r}'\\right\\vert^2}{2\\sigma^2}}d{\\mathbf{r}'}\n</math>\n:with\n:<math>\ng(\\mathbf{r})=\\frac{1-\\alpha}{\\beta}\\left(1-\\mathrm{erf}\\left(\\frac{n(\\mathbf{r})}{n_{\\mathrm{th}}}\\right)\\right)+\\frac{\\left\\vert\\nabla n\\right\\vert}{n}\\mathrm{erf}\\left(\\frac{n(\\mathbf{r})}{n_{\\mathrm{th}}}\\right)\n</math>\n:The default values of the parameters in LMBJ are (see erratum of Ref. {{cite|rauch:prb:2020}}) <math>\\alpha=0.488</math>, <math>\\beta=0.5</math> bohr, <math>e=1</math>, <math>\\sigma=2</math> <math>\\AA</math> (<math>=3.78</math> bohr), and <math>n_{\\mathrm{th}}=6.96\\times10^{-4}</math> e/bohr<math>^{3}</math>. <math>\\sigma</math> is the smearing parameter that determines the size of the region over which the average of <math>g</math> is calculated, and <math>n_{\\mathrm{th}}</math> is the threshold density, which corresponds to the Wigner\u2013Seitz radius <math>r_{s}^{\\mathrm{th}}=((4/3)\\pi n_{\\mathrm{th}})^{-1/3}=7</math> bohr. <math>\\alpha</math>, <math>\\beta</math>, <math>e</math>, <math>\\sigma</math>, and <math>r_{s}^{\\mathrm{th}}</math> can be set by means of the {{TAG|CMBJA}}, {{TAG|CMBJB}}, {{TAG|CMBJE}}, {{TAG|SMBJ}}, and {{TAG|RSMBJ}} tags, respectively.\n\n:The points '''N.B.I''' and '''N.B.II''' for the MBJ potential also apply for the LMBJ potential.\n\n== POTCAR files: required information ==\nMeta-GGA calculations require {{FILE|POTCAR}} files that include information on the kinetic energy density of the core-electrons. To check whether a particular {{FILE|POTCAR}} contains this information, type:\n grep kinetic POTCAR\n\nThis should yield at least the following lines (for each element on the file):\n kinetic energy-density\n mkinetic energy-density pseudized\nand for PAW datasets with partial core corrections:\n kinetic energy density (partial)\n\n==  Aspherical contributions related to one-center terms  ==\n{{TAG|LASPH}} =.TRUE. should be selected if a meta-GGA functional is selected. If {{TAG|LASPH}} =.FALSE.,\nthe one-center contributions are only calculated for a spherically averaged density and kinetic-energy\ndensity. This means that the one-center contributions to the Kohn-Sham potential are also spherical. \nSince the PAW method describes the entire space using plane waves, errors are often small even\nif the non-spherical contributions to the Kohn-Sham potential are neglected inside the PAW spheres\n(additive augmentation, as opposed to the APW or FLAPW method where the plane wave contribution only\ndescribes the interstitial region between the atoms). Anyhow, if the density is strongly non-spherical\naround some atoms in your structure, {{TAG|LASPH}} =.TRUE. must be selected. Non-spherical terms are particularly encountered\nin d- and f-elements, dimers, molecules, and solids with strong directional bonds.\n\n== Convergence issues ==\n\nIf convergence problems are encountered, it is recommended to preconverge the\ncalculations using the PBE functional, and start the calculation from the {{FILE|WAVECAR}} file corresponding to the PBE ground state. Furthermore,\n{{TAG|ALGO}} = A (conjugate gradient algorithm for orbitals) is often more stable\nthan charge density mixing, in particular, if the system contains vacuum regions.\n\n== Related tags and articles ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC2}},\n{{TAG|GGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|CMBJE}},\n{{TAG|SMBJ}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}},\n{{TAG|LASPH}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|Band-structure calculation using meta-GGA functionals}}\n\n{{sc|METAGGA|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]\n</noinclude>", "last_revised": "2023-04-10T16:01:06Z"}, "LKPROJ": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "switches on the <b>k</b>-point projection scheme.", "wikicode": "{{TAGDEF|LKPROJ|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: switches on the '''k'''-point projection scheme.\n----\nFor {{TAG|LKPROJ}}=.TRUE., VASP will project the orbitals onto the reciprocal space of an alternative unit cell.\nThis unit cell has to be supplied in the file {{FILE|POSCAR.prim}}, in the usual {{FILE|POSCAR}} format.\n\nAs a first step, the '''k'''-projection scheme determines the set {'''k&prime;'''}, of '''k'''-points in the irreducible part of the first Brillouin zone of the structure given in {{FILE|POSCAR.prim}}, for which\n\n:<math>\n\\langle \\mathbf{k}'+\\mathbf{G}' | \\mathbf{k}+\\mathbf{G}\\rangle \\neq 0\n</math>\n\nwhere '''G''' and '''G&prime;''' are reciprocal space vectors in the reciprocal spaces of the structures specified in {{FILE|POSCAR}} and {{FILE|POSCAR.prim}}, respectively. As usual, the set of points {'''k'''} is specified in the {{FILE|KPOINTS}} file.\nThe set {'''k&prime;'''} is written to the {{FILE|OUTCAR}} file. Look at the part of the {{FILE|OUTCAR}} following <tt>NKPTS_PRIM</tt>. \n\nOnce the set {'''k&prime;'''} has been determined VASP will compute the following\n\n:<math>\n\\Kappa_{n\\mathbf{k}\\sigma\\mathbf{k}'}=\\sum_{\\mathbf{GG}'}\n|\\langle \\mathbf{k}'+\\mathbf{G}'| \\mathbf{k}+\\mathbf{G}\\rangle\n\\langle \\mathbf{k}+\\mathbf{G} | \\psi_{n\\mathbf{k}\\sigma}\\rangle |^2\n</math>\nand writes this information onto the {{FILE|PRJCAR}} and {{FILE|vasprun.xml}} files.\n\nK<sub>n'''k'''&sigma;'''k&prime;'''</sub> provides a measure of how strongly the orbital <math>\\Psi</math><sub>n'''k'''&sigma;</sub> contributes at the point '''k&prime;''' in the reciprocal space of structure {{FILE|POSCAR.prim}}.\n\nOne may, for instance, use this scheme to project the orbitals of a supercell onto the reciprocal space of a generating primitive cell.\n{{NB|warning| At the moment the '''k'''-point projection only works with {{TAG|NPAR}}{{=}}1.}}\n{{NB|mind| Available as of VASP version 6.0.0.}}\n\n== Related tags and articles ==\n{{FILE|PRJCAR}}\n\n{{sc|LKPROJ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:33:09Z"}, "LHYPERFINE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "compute the hyperfine tensors at the atomic sites (available as of vasp.5.3.2).", "wikicode": "{{TAGDEF|LHYPERFINE|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: compute the hyperfine tensors at the atomic sites (available as of vasp.5.3.2).\n----\nTo have VASP compute the hyperfine tensors at the atomic sites, set\n\n LHYPERFINE = .TRUE.\n\nThe hyperfine tensor A<sup>I</sup> describes the interaction between a nuclear spin S<sup>I</sup> (located at site '''R'''<sub>I</sub>) and the electronic spin distribution S<sup>e</sup> (in most cases associated with a paramagnetic defect state):\n\n:<math>\nE=\\sum_{ij} S^e_i A^I_{ij} S^I_j\n</math>\n\nIn general it is written as the sum of an isotropic part, the so-called Fermi contact term, and an anisotropic (dipolar) part.\n\nThe Fermi contact term is given by\n\n:<math>\n(A^I_{\\mathrm{iso}})_{ij}= \\frac{2}{3}\\frac{\\mu_0\\gamma_e\\gamma_I}{\\langle S_z\\rangle}\\delta_{ij}\\int \\delta_T(\\mathbf{r})\\rho_s(\\mathbf{r}+\\mathbf{R}_I)d\\mathbf{r}\n</math>\n\nwhere &rho;<sub>s</sub> is the spin density, &mu;<sub>0</sub> is the magnetic susceptibility of free space,\n&gamma;<sub>e</sub> the electron gyromagnetic ratio, &gamma;<sub>I</sub> the nuclear gyromagnetic ratio of the nucleus at '''R'''<sub>I</sub>, and <math>\\langle S_z \\rangle</math> the expectation value of the ''z''-component of the total electronic spin.\n\n&delta;<sub>T</sub>('''r''') is a smeared out &delta; function, as described in\nthe Appendix of Ref.<ref name=\"bloechl:prb:00\"/>.\n\nThe dipolar contributions to the hyperfine tensor are given by\n:<math>\n(A^I_{\\mathrm{ani}})_{ij}=\\frac{\\mu_0}{4\\pi}\\frac{\\gamma_e\\gamma_I}{\\langle S_z\\rangle}\n\\int \\frac{\\rho_s(\\mathbf{r}+\\mathbf{R}_I)}{r^3}\\frac{3r_ir_j-\\delta_{ij}r^2}{r^2} d\\mathbf{r}\n</math>\n\nIn the equations above ''r''=|'''r'''|, ''r''<sub>i</sub> the i-th component of '''r''', and '''r''' is\ntaken relative to the position of the nucleus '''R'''<sub>I</sub>.\n\nThe nuclear gyromagnetic ratios should be specified by means of the {{TAG|NGYROMAG}}-tag:\n\n NGYROMAG = gamma_1  gamma_2 ... gamma_N\n\nwhere one should specify one number for each of the ''N'' species on the {{FILE|POSCAR}} file.\nIf one does not set {{TAG|NGYROMAG}} in the {{FILE|INCAR}} file, VASP assumes a factor of 1 for each species.\n\nAs usual, all output is written to the {{FILE|OUTCAR}} file. VASP writes three blocks of data, that look\nsomething like:\n\n<pre>\n Fermi contact (isotropic) hyperfine coupling parameter (MHz)\n -------------------------------------------------------------\n  ion      A_pw      A_1PS     A_1AE     A_1c      A_tot\n -------------------------------------------------------------\n   1       ...       ...       ...       ...       ...\n  ..       ...       ...       ...       ...       ...\n\n -------------------------------------------------------------\n</pre>\n\nwith an entry for each ion on the POSCAR file.\nA<sub>pw</sub>, A<sub>1PS</sub>, A<sub>1AE</sub>, and A<sub>1c</sub> are the plane wave, pseudo one-center, all-electron one-center, and one-center core contributions to the Fermi contact term, respectively.\nThe total Fermi contact term is given by A<sub>tot</sub>. Beware: for the moment we\nhave chosen '''NOT''' to include the core contributions A<sub>1c</sub> in A<sub>tot</sub>.\nIf you so want, you should add them by hand to A<sub>tot</sub>.\nCore electronic contributions to the Fermi contact term are calculated in the frozen valence approximation as proposed by Yazyev ''et al.''<ref name=\"yazyev:prb:05\"/>\n\nThe dipolar constributions are listed next:\n\n<pre>\n Dipolar hyperfine coupling parameters (MHz)\n ---------------------------------------------------------------------\n  ion      A_xx      A_yy      A_zz      A_xy      A_xz      A_yz\n ---------------------------------------------------------------------\n   1       ...       ...       ...       ...       ...       ...\n  ..       ...       ...       ...       ...       ...       ...\n\n ---------------------------------------------------------------------\n</pre>\n\nAgain one line per ion in the POSCAR file.\n\nThe total hyperfine tensors are written as:\n\n<pre>\n Total hyperfine coupling parameters after diagonalization (MHz)\n (convention: |A_zz| > |A_xx| > |A_yy|)\n ----------------------------------------------------------------------\n  ion      A_xx      A_yy      A_zz     asymmetry (A_yy - A_xx)/ A_zz\n ----------------------------------------------------------------------\n   1       ...       ...       ...         ...\n  ..       ...       ...       ...         ...\n\n ----------------------------------------------------------------------\n</pre>\n\ni.e., the tensors have been diagonalized and rearranged.\n\n'''N.B.''': The Fermi contact term is strongly dominated by the all-electron one-center contribution A<sub>1AE</sub>.\nUnfortunately, this particular term is quite sensitive to the number and eigenenergy of the all-electron partial waves that\nmake up the one-center basis set, ''i.e.'', to the particulars of the PAW dataset you are using.\nAs a result the Fermi contact term may strongly depend on the choice of PAW dataset.\n\n=== Units ===\nThe Fermi contact term <math>A</math> is measured in following units\n\n<math>[A]=\n\\left[\\mu_0\\right]\\times \n\\left[g_e \\mu_e\\right]\\times \n\\left[g_j \\mu_j\\right]\\times\n\\left[|\\psi(0)|^2\\right] = \n\\frac{T^2m^3}{J}\\times \n\\frac{J}{T}\\times \n\\frac{MHz}{T}\\times\n\\frac{1}{m^3} = MHz\n</math>\n\nwith <math>\\mu_0=4\\pi\\times 10^{-7} T^2 m^3 J^{-1}</math>, <math>g_e\\mu_e=9.28476377\\times 10^{-24} J T^{-1}, |\\psi(0)|^2=10^{30}m^{-3}</math>. \n{{TAGBL|NGYROMAG}} is given in units of MHz/T, see [https://en.wikipedia.org/wiki/Gyromagnetic_ratio#For_a_nucleus here] for a table of different gyromagnetic ratios.\n\n== Related tags and articles ==\n{{TAG|NGYROMAG}}\n\n{{sc|LHYPERFINE|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"bloechl:prb:00\">[http://link.aps.org/doi/10.1103/PhysRevB.62.6158 P. E. Bl\u00f6chl, Phys. Rev. B 62, 6158 (2000).]</ref>\n<ref name=\"yazyev:prb:05\">[http://link.aps.org/doi/10.1103/PhysRevB.71.115110 O. V. Yazyev, I. Tavernelli, L. Helm, and U. R. R&ouml;thlisberger, Phys. Rev. B 71, 115110 (2006).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2022-04-08T14:32:08Z"}, "NGYROMAG": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NGYROMAG\">NGYROMAG</a> specifies the nuclear gyromagnetic ratios (in MHz, for H<sub>0</sub> = 1 T) for the atomic types on the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/POTCAR\">POTCAR</a> file. </span>", "wikicode": "{{TAGDEF|NGYROMAG|[real array]|NTYP*1.0}}\n\nDescription: {{TAG|NGYROMAG}} specifies the nuclear gyromagnetic ratios (in MHz, for H<sub>0</sub> = 1 T) for the atomic types on the {{FILE|POTCAR}} file. \n----\nBy means of the {{TAG|NGYROMAG}}-tag one can specify the nuclear gyromagnetic ratio:\n\n NGYROMAG = gamma_1  gamma_2 ... gamma_N\n\nwhere one should specify one number for each of the ''N'' species on the {{FILE|POSCAR}} file.\nIf one does not set {{TAG|NGYROMAG}} in the {{FILE|INCAR}} file, VASP assumes a factor of 1 for each species.\n\n== Related tags and articles ==\n{{TAG|LHYPERFINE}}\n\n{{sc|NGYROMAG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]][[Category:Electric-field gradient]]", "last_revised": "2022-07-19T14:23:11Z"}, "LEFG": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "The <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LEFG\">LEFG</a> Computes the {{TAG|Electric Field Gradient}} at positions of the atomic nuclei.", "wikicode": "{{TAGDEF|LEFG|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: The {{TAG|LEFG}} Computes the {{TAG|Electric Field Gradient}} at positions of the atomic nuclei.\n----\nFor {{TAG|LEFG}}=.TRUE., the electric field gradient tensors at the positions of the atomic nuclei are calculated using the method of Petrilli ''et al.''<ref name=\"petrilli:prb:98\"/>\n\nThe EFG tensors are symmetric. The principal components ''V''<sub>ii</sub> and asymmetry parameter &eta; are printed for each atom. Following convention the principal components ''V''<sub>ii</sub> are ordered such that:\n:<math>\n|V_{zz}| > |V_{xx}| > |V_{yy}|.\n</math>\n\nThe asymmetry parameter is defined as &eta;=(''V''<sub>yy</sub>-''V''<sub>xx</sub>)/''V''<sub>zz</sub>.\nFor so-called \"quadrupolar nuclei\", ''i.e.'', nuclei with nuclear spin I>1/2, NMR experiments can\naccess ''V''<sub>zz</sub> and &eta;.\n\n'''Beware''': Attaining convergence can require somewhat smaller {{TAG|EDIFF}} than the default of <tt>1.e-4</tt>\nand somewhat larger cutoff {{TAG|ENCUT}} than default with {{TAG|PREC}}=A. Moreover, the calculation of\nEFGs typically requires high quality PAW data sets. Semi-core electrons can be important (check with\n<tt>*_pv</tt> or <tt>*_sv</tt> POTCARs) as well as explicit inclusion of augmentation channel(s) with ''d''-projectors.\n\nTo convert the ''V''<sub>zz</sub> values into the ''C''<sub>q</sub> often encountered in NMR literature, one has to specify the nuclear quadrupole moment by means of the {{TAG|QUAD_EFG}}-tag.\n\n'''Beware''': for heavy nuclei inaccuracies are to be expected because of an incomplete treatement of relativistic effects.\n\n== Related tags and articles ==\n{{TAG|QUAD_EFG}}\n\n{{sc|LEFG|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"petrilli:prb:98\">[http://link.aps.org/doi/10.1103/PhysRevB.57.14690 H. M. Petrilli, P. E. Bl\u00f6chl, P. Blaha, and K. Schwarz, Phys. Rev. B 57, 14690 (1998).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Electric-field gradient]]", "last_revised": "2022-07-19T14:23:00Z"}, "QUAD_EFG": {"datatype": "real array", "options": {}, "summary": "nuclear quadrupole moment (in millbarn) for the atomic types on the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/POTCAR\">POTCAR</a> file.", "wikicode": "{{DISPLAYTITLE:QUAD_EFG}}\n\n{{TAGDEF|QUAD_EFG|[real array]|NTYP*1.0}}\n\nDescription: nuclear quadrupole moment (in millbarn) for the atomic types on the {{FILE|POTCAR}} file.\n----\nSetting the {{TAG|QUAD_EFG}}-tag allows the conversion of the ''V''<sub>zz</sub> (see {{TAG|LEFG}}) values into the ''C''<sub>q</sub> often encountered in NMR literature.\nThe conversion formula is as follows (''Q'' is the element and isotope specific quadrupole moment):\n:<math>\nC_q = \\frac{e Q V_{zz}}{h}.\n</math>\n\nThe {{TAG|QUAD_EFG}}-tag specifies the nuclear quadrupole moment in millibarns for each atomic species, in the same\norder as in the {{FILE|POTCAR}} file. The output ''C''<sub>q</sub> is in MHz. An online compilation of nuclear quadrupole moments can be found [http://www.chem.helsinki.fi/~pyykko/Q2008.pdf here] or in Ref.<ref name=\"pyykko:molphys:08\"/> (updated numbers in Ref.<ref name=\"pyykko:molphys:17\"/>).\n\nSuppose a solid contains Al, C and Si, than the {{TAG|QUAD_EFG}}-tag could read:\n\n QUAD_EFG = 146.6 33.27 0\n\n<sup>27</sup>Al is the stable isotope of Al with a natural abundance of 100% and ''Q''=146.6.\nThe stable isotopes <sup>12</sup>C and <sup>13</sup>C are not quadrupolar nuclei, however, the radioactive\n<sup>11</sup>C is. It has ''Q''=33.27. For Si it is pointless to calculate a ''C''<sub>q</sub>: again all stable isotopes have I&le;1/2. No moments are known for the other isotopes.\n\n'''Beware''': several definitions of <math> C_q</math> are used in the NMR community. \n\n'''Beware''': for heavy nuclei inaccuracies are to be expected because of an incomplete treatement of relativistic effects. \n\n== Related tags and articles ==\n{{TAG|LEFG}}\n\n{{sc|QUAD_EFG|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"pyykko:molphys:08\">[http://dx.doi.org/10.1080/00268970802018367 P. Pyykk\u00f6, Mol. Phys. 106, 1965 (2008).]</ref>\n<ref name=\"pyykko:molphys:17\">[https://doi.org/10.1080/00268976.2018.1426131 P. Pyykk\u00f6, Mol. Phys. 116, 1328 (2017).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Electric-field gradient]]", "last_revised": "2022-07-19T14:23:22Z"}, "LCHIMAG": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "calculate the chemical shifts by means of linear response.", "wikicode": "{{TAGDEF|LCHIMAG|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: calculate the chemical shifts by means of linear response.\n----\nFor {{TAG|LCHIMAG}}=.TRUE., VASP calculates the chemical shift tensors.\n\nThe chemical shielding tensor is defined as:\n:<math>\n\\sigma_{ij}(\\mathbf{R}) = - \\frac{ \\partial B^{\\mathrm{ind}}_i(\\mathbf{R})}{ \\partial B^{\\mathrm{ext}}_j}\n</math>\n\nHere <math>\\mathbf{R}</math> denotes the atomic nuclear site, <math>i</math> and <math>j</math> denote cartesian indices, <math>B^{\\mathrm{ext}}</math> an applied DC external magnetic field and <math>B^{\\mathrm{ind}}(\\mathbf{R})</math> the induced magnetic field at the nucleus.\nNMR experiments yield information on the symmetric part of the tensor. Typical NMR experiments yield information on the shielding relative to that of a reference compound:\n:<math>\n\\delta_{ij}(\\mathbf{R}) = \\sigma_{ij}^{\\mathrm{ref}} - \\sigma_{ij}(\\mathbf{R})\n</math>\nIn this (approximate) formula <math>\\sigma_{ij}^{\\mathrm{ref}}</math> is the isotropic shielding of the nucleous in the reference compound.  <math>\\delta_{ij}(\\mathbf{R})</math> is the chemical shift tensor.\n\nIn VASP the chemical \"shift\" tensor is calculated as:\n:<math>\n\\delta_{ij}(\\mathbf{R})\\mathrm{[VASP]} = \\frac{ \\partial B^{\\mathrm{ind}}_i(\\mathbf{R})}{ \\partial B^{\\mathrm{ext}}_j}\n</math>\nThis is minus the shielding tensor. It is not the true chemical shift tensor. To convert it to the real shift tensor one should add the\nreference shielding:\n:<math>\n\\delta_{ij}(\\mathbf{R}) = \\sigma_{ij}^{\\mathrm{ref}} + \\delta_{ij}(\\mathbf{R})\\mathrm{[VASP]}\n</math>\n\nVASP calculates chemical \"shifts\" for non-metallic crystalline systems using the linear response method of Yates, Pickard and Mauri.<ref name=\"pickard:prb:01\"/><ref name=\"yates:prb:07\"/>\n\n'''INPUT'''\n\nA typical {{FILE|INCAR}} could look like this:\n\n {{TAGBL|PREC}} = A               # nice\n {{TAGBL|ENCUT}} = 600.0          # typically higher cutoffs than usual are needed\n {{TAGBL|EDIFF}} = 1E-8           # you need much smaller EDIFFs than normal.\n {{TAGBL|ISMEAR}} = 0; {{TAGBL|SIGMA}} = 0.1 # no fancy smearings, SIGMA sufficiently small\n {{TAGBL|LREAL}} = A              # helps for speed for large systems, not necessary per se\n \n LCHIMAG = .TRUE.       # to switch on linear response for chemical shifts\n {{TAGBL|DQ}} = 0.001             # often the default is sufficient\n {{TAGBL|ICHIBARE}} = 1           # often the default is sufficient\n {{TAGBL|LNMR_SYM_RED}} = .TRUE.  # be on the safe side\n {{TAGBL|NLSPLINE}} = .TRUE.      # only needed if LREAL is NOT set.\n\nThe first block of tags in the {{FILE|INCAR}} above expresses the fact that the calculations of chemical shifts by means of linear response often require a high accuracy ({{TAG|PREC}}=A, {{TAG|EDIFF}}&le;1E-8, high {{TAG|ENCUT}}).\n\nThe chemical shifts are calculated from the orbital magnetic response under the assumption that the system is an insulator. It makes no sense to use smearing schemes intended for metals, indeed, doing so can generate nonsense. It is safe to use {{TAG|ISMEAR}}=0 and make {{TAG|SIGMA}} so small that states have no fractional occupancies.\n\nThe se\u00e7ond block of tags switches on the calculation of the chemical shifts ({{TAG|LCHIMAG}}=.TRUE.), and controls several aspects of the finite difference ''k''-space derivatives (Eqs. 38, 40, and 47 in the work of Yates ''et al.''<ref name=\"yates:prb:07\"/>):\n\n*{{TAG|DQ}} is the step size for the finite difference ''k''-space derivative. Typical values are in the range [0.001 - 0.003]. The default ({{TAG|DQ}}=0.001) is often sufficient.\n\n*{{TAG|ICHIBARE}} is the order of the finite difference stencil used to calculate the magnetic susceptibility (second order derivative in Eq. 47 of Yates ''et al.''<ref name=\"yates:prb:07\"/>). {{TAG|ICHIBARE}} may be set to 1, 2, or 3. Often the default ({{TAG|ICHIBARE}}=1) is sufficient. A higher {{TAG|ICHIBARE}} results in a substantial increase of the computational load.\n\n*For {{TAG|NLSPLINE}}=.TRUE., the PAW projectors in reciprocal space ({{TAG|LREAL}}=.FALSE.) are set up using a spline interpolation so that they are ''k''-differentiable. This improves the susceptibility contribution to the shifts (via the aforementioned Eq. 47). It only slightly affects the other contributions to the shifts (Eqs. 38 and 40). It is advised to set {{TAG|NLSPLINE}}=.TRUE. if PAW projectors are applied in reciprocal space, but only in case of calculation of chemical shifts. As this option also gives slightly different total energies, it is advised to use the default {{TAG|NLSPLINE}}=.FALSE. in all other calculations for reasons of compatibility. Real space projectors are ''k''-differentiable by construction, hence do not require to set {{TAG|NLSPLINE}}=.TRUE.\n\n*The star on which the ''k''-space derivative is calculated is oriented along the cartesian directions in ''k''-space. If the symmetry operations in ''k''-space do not map this star onto itself, erroneous results can be obtained. To have VASP check for such operations, set {{TAG|LNMR_SYM_RED}}=.TRUE., and such operations will be discarded, resulting in a larger IBZ. In case of any doubt set {{TAG|LNMR_SYM_RED}}=.TRUE. Beware: It matters how the real space lattice vectors are set up relative to the cartesian coordinates in {{FILE|POSCAR}}. It determines the orientation of the ''k''-space star and hence can affect the efficiency via the number of ''k''-points in the IBZ.\n\nThe chemical shift is calculated via the induced current.<ref name=\"pickard:prb:01\"/><ref name=\"yates:prb:07\"/>\nIt has contributions from the plane wave grid and one-center contributions (the induced field\nat the center of a PAW sphere due to the augmentation current inside that sphere). Two-center contributions (induced fields due to augmentation currents in\nother PAW spheres) are standard neglected. These contributions can be switched on using {{TAG|LLRAUG}}.\n\nFor very high accuracy calculations use {{TAG|LASPH}}.\n\nNo special {{FILE|POTCAR}} files are necessary. The GIPAW is applied using the projectors functions and partial waves that are stored in the regular {{FILE|POTCAR}} files. A few remarks, however, on accuracy in relation to the different {{FILE|POTCAR}} flavours:\n\n*Results sensitively depend on the quality, ''i.e.'', completeness of the partial wave/projector function set in the energy range needed for good chemical transferability. Result obtained with different {{FILE|POTCAR}} flavours can differ a few ppm for first and second row ''sp''-bonded elements (except for H).\n\n*Use {{FILE|POTCAR}} files generated with a consistent exchange-correlation functional. The PAW reconstruction with AE partial waves is crucial as the field on the nucleus needs to be calculated. So avoid, if possible, overriding <tt>LEXCH</tt> from {{FILE|POTCAR}} with an explicit {{TAG|GGA}}-tag in the {{FILE|INCAR}}.\n\n'''OUTPUT'''\n\nAt the end of the {{FILE|OUTCAR}} file, VASP prints the chemical shift tensors both before and after space group symmetrization. These are the absolute tensors for the infinite lattice, excluding core contributions. Next lines \"<tt>Q=0 CONTRIBUTION TO CHEMICAL SHIFT</tt>\" are printed.\nThis is a shift tensor arising solely from the <math>\\mathbf{G=0}</math> component of the induced field. This component is related to the shape of the sample and depends only on the induced macroscopic surface currents.\nIt is printed for a spherical sample (for which is it nucleus independent), and calculated from the orbital magnetic susceptibility (see below), that is also printed.\nTo obtain the full absolute tensors requires adding both the <math>\\mathbf{G=0}</math> contribution and the contributions due to the core electrons. The latter consist of contributions for each chemical species separately\n(depending on {{TAG|POTCAR}}) and a global <math>\\mathbf{G=0}</math> susceptibility contribution.\n\nFinally the tensor is processed and its (CSA) characteristics are printed on {{FILE|OUTCAR}}. The tensor is symmetrized (<math>\\sigma_{ij} = \\sigma_{ji}</math> is enforced) and diagonalized. From the three diagonal values the isotropic chemical \"shift\" <math>\\delta_{\\mathrm{iso}}\\mathrm{[VASP]}</math>, span <math>\\Omega</math> and skew <math>\\kappa</math> are calculated and printed.<ref name=\"mason:ssn:93\"/> Note that <math>\\kappa</math> is ill-defined if <math>\\Omega = 0</math>. Note that the isotropic chemical shift <math>\\delta_{\\mathrm{iso}}\\mathrm{[VASP]}</math> (ISO_SHIFT) as printed is actually minus the isotropic shielding. To make it a ''real shift'' one should add the reference shielding. Also note that <math>\\Omega</math> (SPAN) and <math>\\kappa</math> (SKEW) are unambiguously defined.<ref name=\"mason:ssn:93\"/> Units are ppm, except for the skew. This typically looks like:\n                                                                                                          \n   ---------------------------------------------------------------------------------\n    CSA tensor (J. Mason, Solid State Nucl. Magn. Reson. 2, 285 (1993))\n   ---------------------------------------------------------------------------------\n               EXCLUDING G=0 CONTRIBUTION             INCLUDING G=0 CONTRIBUTION\n           -----------------------------------   -----------------------------------\n    ATOM    ISO_SHIFT        SPAN        SKEW     ISO_SHIFT        SPAN        SKEW\n   ---------------------------------------------------------------------------------\n    (absolute, valence only)\n       1    4598.8125      0.0000      0.0000     4589.9696      0.0000      0.0000\n       2     291.5486      0.0000      0.0000      282.7058      0.0000      0.0000\n       3     736.5979    344.8803      1.0000      727.7550    344.8803      1.0000\n       4     736.5979    344.8803      1.0000      727.7550    344.8803      1.0000\n       5     736.5979    344.8803      1.0000      727.7550    344.8803      1.0000\n   ---------------------------------------------------------------------------------\n    (absolute, valence and core)\n       1   -6536.1417      0.0000      0.0000    -6547.9848      0.0000      0.0000\n       2   -5706.3864      0.0000      0.0000    -5718.2296      0.0000      0.0000\n       3   -2369.4015    344.8803      1.0000    -2381.2446    344.8803      1.0000\n       4   -2369.4015    344.8803      1.0000    -2381.2446    344.8803      1.0000\n       5   -2369.4015    344.8803      1.0000    -2381.2446    344.8803      1.0000\n   ---------------------------------------------------------------------------------\n    IF SPAN.EQ.0, THEN SKEW IS ILL-DEFINED\n   ---------------------------------------------------------------------------------\n  \nThe columns excluding the <math>\\mathbf{G=0}</math> contribution are useful for supercell calculations on molecules.\nThe columns including the <math>\\mathbf{G=0}</math> contribution are for crystals.\nThe upper block gives the shielding due to only the electrons included in the SCF calculation.\nThe lower block has the contributions due to the frozen PAW cores added. These core contributions are rigid.<ref name=\"gregor:jcp:99\"/> They depend on {{FILE|POTCAR}} and are isotropic, i.e. affect neither SPAN nor SKEW.\n\n<!--\nAs of VASP.? on OUTCAR also a summary of the tensors per ion is printed. This is done both excluding and including the '''G'''=0 contribution.\nThe summary starts with, for each ion, its number, the isotropic shielding, the shielding tensor and the symmetrized shielding tensor.\nNext the principal components and the principal axes are printed (from the symmetrized tensor).\nThey are ordered following Mason,<ref name=\"mason:ssn:93\"/> i.e. &sigma;<sub>11</sub> < &sigma;<sub>22</sub> < &sigma;<sub>33</sub>.\nFinally a line is printed with (again) the isotropic shielding &sigma;<sub>iso</sub>, the span &Omega; &amp; skew &kappa; (Herzfeld-Berger, Mason sections 2.2 and 2.3) and the shielding anistropy &Delta; &amp; asymmetry &eta; (Haeberlen, Mason section 2.6).\n-->\nBy default the orbital '''magnetic susceptibility''' is calculated using the so-called ''pGv''-approximation, i.e. Eqs. 46-48 of Yates '' et al.''<ref name=\"yates:prb:07\"/>\nAs of vasp.6.4.0 also the ''vGv''-approximation of the susceptibility is calculated. By default, the ''pGv'' result\nis applied for the <math>\\mathbf{G=0}</math> contribution to the shifts. With {{TAG|LVGVAPPL}} one can force VASP to use the ''vGv'' result for the <math>\\mathbf{G=0}</math> contribution instead. With {{TAG|LVGVCALC}} one can suppress calculation of the ''vGv'' susceptibility. For details see {{TAG|LVGVCALC}}.\n\n'''Beware''' the treatment of the orbital magnetism is non-relativistic. This is fine for light nuclei.\nThe standard POTCARs are scalar-relativistic and account partially for relativistic effects.\nThe accuracy can be improved using {{TAG|LBONE}}, that restores the small B-component of the wave function inside the PAW spheres.\nSpin-orbit coupling is not implemented for chemical shift calculations.\n\n'''What to do in case of insufficient memory?''' VASP trades off memory savings against speed, opting for the latter.\nThe response calculation is inherently parallel over ''k''-points. This can be used to economize on memory:\nFirst do a regular self-consistent calculation at high accuracy for the full ''k''-point mesh. Save the {{FILE|CHGCAR}} file.\nNext do a chemical shift calculation for each ''k''-point in the IBZ separately, starting from {{FILE|CHGCAR}}, ''i.e.'', using {{TAG|ICHARG}}=11.\nFinally calculate the shifts as a ''k''-point weighted average of the symmetrized shifts of the individual ''k''-points.\n\n== Related tags and articles ==\n{{TAG|DQ}},\n{{TAG|ICHIBARE}},\n{{TAG|LNMR_SYM_RED}},\n{{TAG|NLSPLINE}},\n{{TAG|LLRAUG}},\n{{TAG|LBONE}},\n{{TAG|LVGVCALC}},\n{{TAG|LVGVAPPL}}\n\n{{sc|LCHIMAG|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"pickard:prb:01\">[http://link.aps.org/doi/10.1103/PhysRevB.63.245101 C. J. Pickard, F. Mauri, Phys. Rev. B 63, 245101 (2001).]</ref>\n<ref name=\"yates:prb:07\">[http://link.aps.org/doi/10.1103/PhysRevB.76.024401 J. R. Yates, C. J. Pickard, F. Mauri, Phys. Rev. B 76, 024401 (2007).]</ref>\n<ref name=\"mason:ssn:93\">[http://dx.doi.org/10.1016/0926-2040(93)90010-K J. Mason, Solid State Nucl. Magn. Reson. 2, 285 (1993).]</ref>\n<ref name=\"gregor:jcp:99\">[http://dx.doi.org/10.1063/1.479451 T. Gregor, F. Mauri, R. Car, J. Chem. Phys. 111, 1815 (1999).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2023-02-16T14:45:54Z"}, "DQ": {"datatype": "real", "options": {}, "summary": "step size for the finite difference <i>k</i>-space derivative in the linear response calculation of chemical shifts.", "wikicode": "{{TAGDEF|DQ|[real]| 0.001}}\n\nDescription: step size for the finite difference ''k''-space derivative in the linear response calculation of chemical shifts.\n----\nTypical values for {{TAG|DQ}} are in the range [0.001 - 0.003]. The default is often sufficient.\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}},\n{{TAG|ICHIBARE}},\n{{TAG|LNMR_SYM_RED}},\n{{TAG|NLSPLINE}}\n\n{{sc|DQ|Examples|Examples that use this tag}}\n\n----\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2022-04-08T14:10:48Z"}, "ICHIBARE": {"datatype": "integer", "options": {"1": null, "2": null, "3": null}, "summary": "determines the order of the finite difference stencil used to calculate the magnetic susceptibility.", "wikicode": "{{TAGDEF|ICHIBARE| 1 {{!}} 2 {{!}} 3 | 1}}\n\nDescription: determines the order of the finite difference stencil used to calculate the magnetic susceptibility.\n----\n\n{{TAG|ICHIBARE}} specifies the order of the finite difference stencil used to calculate the magnetic susceptibility (second order derivative in Eq. 47 of Yates ''et al.''<ref name=\"yates:prb:07\"/>). {{TAG|ICHIBARE}} may be set to 1, 2, or 3. Often the default ({{TAG|ICHIBARE}}=1) is sufficient. A higher {{TAG|ICHIBARE}} results in a substantial increase of the computational load.\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}},\n{{TAG|DQ}},\n{{TAG|LNMR_SYM_RED}},\n{{TAG|NLSPLINE}}\n\n{{sc|ICHIBARE|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"yates:prb:07\">[http://link.aps.org/doi/10.1103/PhysRevB.76.024401 J. R. Yates, C. J. Pickard, F. Mauri, Phys. Rev. B 76, 024401 (2007).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2022-04-08T14:21:19Z"}, "LNMR_SYM_RED": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "discard symmetry operations that are not consistent with the way <i>k</i>-space derivatives are calculated in the linear-response calculations of chemical shifts.", "wikicode": "{{DISPLAYTITLE:LNMR_SYM_RED}}\n{{TAGDEF|LNMR_SYM_RED| .TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: discard symmetry operations that are not consistent with the way ''k''-space derivatives are calculated in the linear-response calculations of chemical shifts.\n----\n\nThe star on which the ''k''-space derivative is calculated is oriented along the cartesian directions in ''k'' space. If the symmetry operations in ''k'' space do not map this star onto itself, erroneous results can be obtained. To check for such operations, set {{TAG|LNMR_SYM_RED}}=.TRUE.. VASP then disregards such operations and the resulting first Brillouin zone (IBZ) is larger. In case of any doubt set {{TAG|LNMR_SYM_RED}}=.TRUE. \n{{NB|warning|It matters how the real-space-lattice vectors are set up relative to the cartesian coordinates in the {{FILE|POSCAR}} file.}} It determines the orientation of the ''k''-space star and, hence, can affect the efficiency via the number of ''k''-points in the IBZ.\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}},\n{{TAG|DQ}},\n{{TAG|ICHIBARE}},\n{{TAG|NLSPLINE}}\n\n{{sc|LNMR_SYM_RED|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-07T15:56:04Z"}, "NLSPLINE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "construct the PAW projectors in reciprocal space using spline interpolation so that they are <i>k</i>-differentiable.", "wikicode": "{{TAGDEF|NLSPLINE|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: construct the PAW projectors in reciprocal space using spline interpolation so that they are ''k''-differentiable.\n----\nFor {{TAG|NLSPLINE}}=.TRUE., the PAW projectors in reciprocal space ({{TAG|LREAL}}=.FALSE.) are set up using a spline interpolation so that they are ''k'' differentiable. This improves the susceptibility contribution to the chemical shifts. It only slightly affects the other contributions to the chemical shifts.\n\nIt is advised to set {{TAG|NLSPLINE}}=.TRUE. if and only if PAW projectors are applied in reciprocal space and chemical shifts are calculated, i.e., if and only if {{TAG|LREAL}}=.FALSE. and {{TAG|LCHIMAG}}=.TRUE. As this option also gives slightly different total energies, it is advised to use the default {{TAG|NLSPLINE}}=.FALSE. in all other calculations for reasons of compatibility.\n\nReal-space projectors are ''k'' differentiable by construction, hence do not require to set {{TAG|NLSPLINE}}=.TRUE.\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}},\n{{TAG|DQ}},\n{{TAG|ICHIBARE}},\n{{TAG|LNMR_SYM_RED}}\n\n{{sc|NLSPLINE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-04-08T14:49:36Z"}, "CMBJ": {"datatype": "real array", "options": {}, "summary": "defines the <math>c</math> parameter in the MBJ potential.", "wikicode": "{{TAGDEF|CMBJ|[real (array)]|calculated self-consistently}}\n\nDescription: defines the <math>c</math> parameter in the MBJ potential.\n----\n\nThe {{TAG|CMBJ}} tag can be set in the following ways:\n*Specify a constant that is used at every point of space <math>\\mathbf{r}</math><pre>CMBJ = c</pre>\n\n*Specify one entry per atomic type<pre>CMBJ = c_1 c_2 .. c_n</pre> where the order and number <math>n</math> is in accordance with atomic types in your {{FILE|POSCAR}} file. The MBJ exchange potential at a point <math>\\mathbf{r}</math> will then be calculated using the parameter <math>c_{i}</math> belonging to the atomic species of the atomic site nearest to <math>\\mathbf{r}</math>.\n\nIf {{TAG|CMBJ}} is not set, <math>c</math> is calculated at each electronic step as the average of <math>\\left\\vert\\nabla n\\right\\vert/n</math> in the unit cell, as explained in the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|CMBJE}},\n{{TAG|SMBJ}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|CMBJ|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-02-15T10:25:33Z"}, "CMBJA": {"datatype": "real", "options": {}, "summary": "sets the <math>\\alpha</math> parameter in the MBJ and LMBJ potentials.", "wikicode": "{{TAGDEF|CMBJA|[real]}}\n{{DEF|CMBJA|&minus;0.012 | if {{TAG|METAGGA}}{{=}}MBJ | 0.488 | if {{TAG|METAGGA}}{{=}}LMBJ}}\n\nDescription: sets the <math>\\alpha</math> parameter in the MBJ and LMBJ potentials.\n----\nSee the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJB}},\n{{TAG|CMBJE}},\n{{TAG|SMBJ}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|CMBJA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-02-16T12:22:17Z"}, "CMBJB": {"datatype": "real", "options": {}, "summary": "sets the <math>\\beta</math> parameter in the MBJ and LMBJ potentials.", "wikicode": "{{TAGDEF|CMBJB|[real]}}\n{{DEF|CMBJB|1.023 | if {{TAG|METAGGA}}{{=}}MBJ | 0.5 | if {{TAG|METAGGA}}{{=}}LMBJ}}\n\nDescription: sets the <math>\\beta</math> parameter in the MBJ and LMBJ potentials.\n----\nSee the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJE}},\n{{TAG|SMBJ}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|CMBJB|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-02-16T12:24:24Z"}, "LASPH": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "include non-spherical contributions related to the gradient of the density in the PAW spheres.", "wikicode": "{{TAGDEF|LASPH|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: include non-spherical contributions related to the gradient of the density in the PAW spheres.\n----\nUsually VASP calculates only the spherical contribution to the gradient corrections inside the PAW spheres (non-spherical contributions for the LDA part of the potential and the Hartree potential are always included).\n\nFor {{TAG|LASPH}} = .TRUE., non-spherical contributions from the gradient corrections inside the PAW spheres will be included as well. For VASP.4.6, these contributions are only included in the total energy, after self-consistency has been reached disregarding the aspherical contributions in the gradient corrections.\n\nFor VASP.5.X the aspherical contributions are properly accounted for in the Kohn-Sham potential as well, if\n{{TAG|LASPH}} = .TRUE. is set. This is essential for accurate total energies and band structure calculations for ''f''-elements (e.g. ceria), all 3''d''-elements (transition metal oxides), and magnetic atoms in the 2nd row (B-F atom), in particular if DFT+U or hybrid functionals, meta-GGAs, or vdW-DFT are used, since these functionals often result in aspherical charge densities.\n\n== Related tags and articles ==\n{{TAG|LMAXPAW}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|LASPH|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2022-04-08T14:26:27Z"}, "LMAXTAU": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMAXTAU\">LMAXTAU</a> is the maximum <i>l</i>-quantum number included in the PAW one-center expansion of the kinetic energy density.</span>", "wikicode": "{{TAGDEF|LMAXTAU|[integer]}}\n{{DEF|LMAXTAU|6|if {{TAG|LASPH}}{{=}}.TRUE.|0|else}}\n\nDescription: {{TAG|LMAXTAU}} is the maximum ''l''-quantum number included in the PAW one-center expansion of the kinetic energy density.\n----\nThe PAW one-center expansion of the density has component up to and including ''L''=2*''l''<sub>max</sub>, where ''l''<sub>max</sub> is the ''l''-quantum number of the partial waves on the {{FILE|POTCAR}} file, with the highest angular moment.\nIf the PAW one-center expansion of the density has component up to ''L'', then the one-center expansion of the kinetic energy density has components up to ''L''+2.\n\nThis means that as a rule of thumb, for ''s''-elements: {{TAG|LMAXTAU}}=2, for ''p'': {{TAG|LMAXTAU}}=4, and for ''d'': {{TAG|LMAXTAU}}=6.\nIf you are willing to live with the computational costs, the default for {{TAG|LMAXTAU}} should be safe in all cases, except those involving ''f''-elements.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|LASPH}},\n{{TAG|LMIXTAU}}\n\n{{sc|LMAXTAU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2022-04-08T14:38:08Z"}, "LMIXTAU": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "send the kinetic-energy density through the <a href=\"https://www.vasp.at/wiki/index.php/Density_mixing\">density mixer</a> as well.", "wikicode": "{{TAGDEF|LMIXTAU|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: send the kinetic-energy density through the [[Density mixing|density mixer]] as well.\n----\nIn many cases, the [[Density mixing|density-mixing scheme]] works well enough without passing the kinetic-energy density through the mixer. Therefore VASP uses {{TAG|LMIXTAU}}=.FALSE. per default. However, when the self-consistency cycle fails to converge for one of the algorithms exploiting [[Density mixing|density mixing]], e.g, {{TAG|IALGO}}=38 or 48, we recommend setting {{TAG|LMIXTAU}}=.TRUE..\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|LMAXTAU}}\n\n{{sc|LMIXTAU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]][[Category:Electronic minimization]][[Category:Density mixing]]", "last_revised": "2022-06-07T09:31:39Z"}, "EPSILON": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EPSILON\">EPSILON</a> sets the dielectric constant of the medium.</span>", "wikicode": "{{TAGDEF|EPSILON|[real]|1}}\n\nDescription: {{TAG|EPSILON}} sets the dielectric constant of the medium.\n----\nVASP uses this flag only to scale the calculated [[Monopole Dipole and Quadrupole corrections|monopole and dipole corrections]]. {{TAG|EPSILON}} defaults to 1, which is the proper value for isolated atoms and molcules. For solids, the screening properties can and should be determined using the linear response routines of VASP (see {{TAG|LEPSILON}} and/or {{TAG|LCALCEPS}}). Ionic contributions to the dielectric tensor should be included, if the ions are allowed to relax. Ionic contributions to the dielectric tensor can be calculated using {{TAG|IBRION}}=8.\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|NELECT}},\n{{TAG|DIPOL}},\n{{TAG|IDIPOL}},\n{{TAG|LDIPOL}},\n{{TAG|LMONO}},\n{{TAG|EFIELD}}\n\n{{sc|EPSILON|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Molecules]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2022-04-08T14:13:42Z"}, "IDIPOL": {"datatype": "integer", "options": {"1": null, "2": null, "3": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IDIPOL\">IDIPOL</a> switches on monopole/dipole and quadrupole corrections to the total energy.</span>", "wikicode": "{{TAGDEF|IDIPOL|1 {{!}} 2 {{!}} 3 {{!}} 4}}\n\nDescription: {{TAG|IDIPOL}} switches on monopole/dipole and quadrupole corrections to the total energy.\n----\nFor {{TAG|IDIPOL}}=1-3, the dipole moment will be calculated only parallel to the direction of the first, second or third lattice vector, respectively. The corrections for the total energy are calculated as the energy difference between a monopole/dipole and quadrupole in the current supercell and the same dipole placed in a super cell with the corresponding lattice vector approaching infinity. This flag should be used for slab calculations.\n\nFor {{TAG|IDIPOL}}=4 the full dipole moment in all directions will be calculated, and the corrections to the total energy are calculated as the energy difference between a monopole/dipole/quadrupole in the current supercell and the same monopole/dipole/quadrupole placed in a vacuum, use this flag for calculations for isolated molecules.\n\n'''Note''': strictly speaking quadrupole corrections is not the proper wording. The relevant quantity is\n:<math> \\int d^3{\\mathbf r} \\rho(\\mathbf r) \\Vert \\mathbf r\\Vert^2.</math>\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|NELECT}},\n{{TAG|EPSILON}},\n{{TAG|DIPOL}},\n{{TAG|LDIPOL}},\n{{TAG|LMONO}},\n{{TAG|EFIELD}}\n\n{{sc|IDIPOL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecules]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2022-04-08T14:21:34Z"}, "LDIPOL": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDIPOL\">LDIPOL</a> switches on corrections to the potential and forces in VASP. Can be applied for charged molecules and molecules and slabs with a net dipole moment.</span>", "wikicode": "{{TAGDEF|LDIPOL|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LDIPOL}} switches on corrections to the potential and forces in VASP. Can be applied for charged molecules and molecules and slabs with a net dipole moment.\n----\n\nDue to the periodic boundary conditions, not only the total energy converges slowly with respect to the size of the supercell, but also the potential and the forces are affected by finite-size errors. This effect can be counterbalanced by setting {{TAG|LDIPOL}}=.TRUE. in the {{FILE|INCAR}} file. \nFor {{TAG|LDIPOL}}=.TRUE., a linear correction, and for charged cells a quadratic electrostatic potential is added to the local potential in order to correct the errors introduced by the periodic boundary conditions.\nThis is in the spirit of Neugebauer ''et al.'' {{cite|neugebauer:prb:1992}}, though more general. Note that the total energy is correctly implemented, whereas Ref. {{cite|neugebauer:prb:1992}} contains an erroneous factor 2 in the total energy. \n\nThe biggest advantage of this mode is that leading errors in the forces are corrected and that the work function can be evaluated for asymmetric slabs. The disadvantage is that the convergence to the electronic ground state might slow down considerably, i.e., more electronic iterations might be required to obtain the required precision. It is recommended to use this mode only after pre-converging the orbitals without the {{TAG|LDIPOL}} tag, and the center of charge should be set in the {{FILE|INCAR}} file ({{TAG|DIPOL}}= center of mass. The user must also ensure that the cell is sufficiently large to determine the dipole moment with sufficient accuracy. If the cell is too small, the charge might slash through the vacuum, causing very slow convergence. Often convergence improves with the size of the supercell.\n\nRestrictions: For charged systems, the potential correction is currently only implemented for cubic supercells. VASP will stop if the supercell is not cubic and {{TAG|LDIPOL}}=.TRUE.\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|NELECT}},\n{{TAG|EPSILON}},\n{{TAG|IDIPOL}},\n{{TAG|DIPOL}},\n{{TAG|LMONO}},\n{{TAG|EFIELD}}\n\n{{sc|LDIPOL|Examples|Examples that use this tag}}\n\n== References ==\n\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Forces]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2022-04-07T08:26:36Z"}, "LMONO": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMONO\">LMONO</a> switches on monopole-monopole corrections for the total energy.</span>", "wikicode": "{{TAGDEF|LMONO|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LMONO}} switches on monopole-monopole corrections for the total energy.\n----\nThe flag switches on monopole corrections for charged systems. The correction is calculated only a posteriori for the total energy. No correction to the potential is calculated.  If corrections for the potential are desired as well, please use {{TAG|LDIPOL}} instead (for {{TAG|LDIPOL}}=.TRUE., VASP automatically determines whether the system is charged and activates the monopole corrections automatically). \n\nThe primary use of this flag is for defect calculations in charged supercells, as well\nas charged 0D systems (molecules and atoms). VASP also automatically calculates\ncorrections to the total energy related to repeated dipoles ({{TAG|IDIPOL}}=4). \nThe user then needs to decide whether\nthose are sensible or not. Specifically, for super cells using periodic boundary conditions, \nit is often not possible to determine the dipole at the defect site accurately,\nwhereas for 0D systems (i.e. atoms and molecules) the dipole can be determined \naccurately.\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|NELECT}},\n{{TAG|EPSILON}},\n{{TAG|IDIPOL}},\n{{TAG|DIPOL}},\n{{TAG|LDIPOL}},\n{{TAG|EFIELD}}\n\n{{sc|LMONO|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Molecules]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2022-04-08T14:36:16Z"}, "EFIELD": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EFIELD\">EFIELD</a> controls the magnitude of the applied electric force field.</span>", "wikicode": "{{TAGDEF|EFIELD|[real]}}\n\nDescription: {{TAG|EFIELD}} controls the magnitude of the applied electric force field.\n----\nIt is possible to apply an external electrostatic field in slab, or molecular calculations. Presently only a single value can be supplied and the field is applied in the direction selected by {{TAG|IDIPOL}}=1-4. The electric force field is supplied in units of eV/&Aring;. Dipole corrections to the potential ({{TAG|LDIPOL}}=.TRUE.) can and should be turned on to avoid interactions between the periodically repeated images.\n{{NB|mind|The electric field is defined opposite to the common definition. So electrons will move along the direction of the electric field.}}\n\n== Related tags and articles ==\n{{TAG|Monopole Dipole and Quadrupole corrections}},\n{{TAG|NELECT}},\n{{TAG|EPSILON}},\n{{TAG|IDIPOL}},\n{{TAG|DIPOL}},\n{{TAG|LMONO}},\n{{TAG|LDIPOL}}\n\n{{sc|EFIELD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecules]][[Category:Monopole Dipole and Quadrupole Corrections]]", "last_revised": "2023-01-23T13:49:15Z"}, "ISYM": {"datatype": "integer", "options": {"-1": null, "0": null, "1": null, "2": null, "3": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISYM\">ISYM</a> determines the way VASP treats symmetry.</span>", "wikicode": "{{TAGDEF|ISYM|-1 {{!}} 0 {{!}} 1 {{!}} 2 {{!}} 3}}\n{{DEF|ISYM|1|if VASP runs with USPPs|3|if {{TAG|LHFCALC}}{{=}}.TRUE.|2| else}}\n\nDescription: {{TAG|ISYM}} determines the way VASP treats symmetry.\n----\n{{TAG|ISYM}}=1 {{!}} 2 {{!}} 3, switches on the use of symmetry.\nFor {{TAG|ISYM}}=-1 {{!}} 0, the use of symmetry is switched off.\n\nFor {{TAG|ISYM}}=2 a more efficient, memory conserving symmetrization of the charge density is used (than for {{TAG|ISYM}}=1). This reduces memory requirements in particular for the parallel version.\n\nFor {{TAG|ISYM}}=3, VASP does not directly symmetrize the charge density. Instead, the charge density is constructed by applying the relevant symmetry operations to the orbitals at the '''k'''-points in the irreducible part of the Brillouin zone. This method of symmetrization is used when {{TAG|LHFCALC}}=.TRUE.\n\nFor {{TAG|ISYM}}=0, VASP does not use symmetry, but it will assume that &Psi;<sub>'''k'''</sub>=&Psi;<sup>*</sup><sub>'''-k'''</sub> and reduces the sampling of the Brillouin zone accordingly. This value should be set for molecular dynamics, i.e. {{TAG|IBRION}}=0. \n\nFor {{TAG|ISYM}}=-1 the use of symmetry is switched off completely.\n \nWhen the use of symmetry is switched on, VASP determines the point group symmetry and the space group consistent with the structure and initial velocities found on the {{FILE|POSCAR}} file (this is written out to the {{TAG|OUTCAR}} file for each {{TAG|NWRITE}} option), and the initial magnetic moments specified through the {{TAG|MAGMOM}} tag in the {{TAG|INCAR}} file. The {{TAG|SYMPREC}}-tag (VASP.4.4.4 and newer versions) determines by how much atomic positions may differ and still be judged to be equivalent by the symmetry detection algorithms. The default is 10<sup>-5</sup>, which is usually sufficiently large even if the {{FILE|POSCAR}} file has been generated with a single precision program. Increasing the {{TAG|SYMPREC}} tag means, that the positions in the {{FILE|POSCAR}} file can be less accurate. During the symmetry analysis, VASP determines\n\n*the Bravais lattice type of the supercell,\n*the point group symmetry and the space group of the supercell with basis (static and dynamic) - and prints the names of the group (space group: only 'family'),\n*the type of the generating elementary (primitive) cell if the supercell is a non-primitive cell,\n*all 'trivial non-trivial' translations (= trivial translations of the generating elementary cell within the supercell) -- needed for symmetrization of the charge,\n*the symmetry-irreducible set of k-points if automatic k-mesh generation was used and additionally the symmetry-irreducible set of tetrahedra if the tetrahedron method was chosen together with the automatic k-mesh generation and of course also the corresponding weights ('symmetry degeneracy'),\n*and tables marking and connecting symmetry equivalent ions.\n\nThe symmetry analysis is done in four steps:\n*First the point group symmetry of the lattice (as supplied by the user) is determined.\n*Then tests are performed, on whether the basis breaks the symmetry. Accordingly, these symmetry operations are removed.\n*The initial velocities are checked for symmetry breaking.\n*Finally, it is checked whether {{TAG|MAGMOM}} breaks the symmetry. Correspondingly the magnetic symmetry group is determined.\n\nThe program symmetrizes automatically:\n\n*The total charge density according to the determined space group\n*The forces on the ions according to the determined space group.\n*The stress tensor according to the determined space group\n\nWhy is symmetrization necessary: Within LDA the symmetry of the supercell and the charge density is always the same. This symmetry is broken because a symmetry-irreducible set of '''k''' points is used for the calculation. To restore the correct charge density and the correct forces it is necessary to symmetrize these quantities.\n\nIt must be stressed that VASP does not determine the symmetry elements of the primitive cell. If the supercell has a lower symmetry than the primitive cell only the lower symmetry of the supercell is used in the calculation. In this case, one should not expect that forces that should be zero according to symmetry will be precisely zero in actual calculations. The symmetry of the primitive cell is in fact broken in several places in VASP:\n\n*Local potential:\n:In reciprocal space, the potential ''V''('''G''') should be zero, if '''G''' is not a reciprocal lattice vector of the primitive cell. For {{TAG|PREC}}=Medium, this is not guaranteed due to \"aliasing\" or wrap around and the charge density (and therefore the Hartree potential) might violate this point. But even for {{TAG|PREC}}=High, small errors are introduced, because the exchange-correlation potential is calculated in real space.\n\n*'''k'''-points:\n:In most cases, the automatic '''k'''-point grid does not have the symmetry of the primitive cell.\n\n{{NB|tip|If symmetry is switched on then {{TAG|NWRITE}}{{=}}3 writes out the symmetry operations to the {{TAG|OUTCAR}} file.}}\n\n== Related tags and articles ==\n\n{{TAG|OUTCAR}}, {{TAG|IALGO}}, {{TAG|IBRION}}, {{TAG|MDALGO}}, {{TAG|ISIF}}, {{TAG|NWRITE}}\n\n{{sc|ISYM|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Symmetry]][[Category:Memory]]", "last_revised": "2022-05-25T09:04:15Z"}, "LELF": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LELF\">LELF</a> determines whether to create an</span>", "wikicode": "{{TAGDEF|LELF|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: {{TAG|LELF}} determines whether to create an\n{{FILE|ELFCAR}} file or not.\n----\nThis file contains the so-called ELF (electron localization\nfunction) <ref name=\"silvi:nature:371\"/>\n\nIf {{TAG|LELF}} is set, {{TAG|NPAR}}=1 has to be set explicitely in\nthe {{FILE|INCAR}} file in addition\n\n== Related tags and articles ==\n{{TAG|NPAR}}\n\n{{sc|LELF|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"silvi:nature:371\">[http://www.nature.com/nature/journal/v371/n6499/pdf/371683a0.pdf B. Silvi and A. Savin, Nature 371, 683-686 (1994).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:30:36Z"}, "SYMPREC": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SYMPREC\">SYMPREC</a> determines to which accuracy the positions in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/POSCAR\">POSCAR</a> file must be specified (as of VASP.4.4.4).</span>", "wikicode": "{{TAGDEF|SYMPREC|[real]|<math>10^{-5}</math>}}\n\nDescription: {{TAG|SYMPREC}} determines to which accuracy the positions in the {{FILE|POSCAR}} file must be specified (as of VASP.4.4.4).\n----\n{{TAG|SYMPREC}} determines how accurately the positions in the {{FILE|POSCAR}} file must be specified.\nThe default, {{TAG|SYMPREC}}=10<sup>-5</sup>, is usually large enough, even if the {{FILE|POSCAR}} file has been generated with single precision accuracy.\nIncreasing {{TAG|SYMPREC}} means that the positions in the {{FILE|POSCAR}} file can be specified with less accuracy (increasing fuzziness). Please also have a look at [[POSCAR#Precision_and_symmetry|this section]].\n\n== Related tags and articles ==\n{{TAG|ISYM}}\n\n{{sc|SYMPREC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Symmetry]]", "last_revised": "2022-08-11T08:07:01Z"}, "LPLANE": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPLANE\">LPLANE</a> switches on the plane-wise data distribution in real space. </span>", "wikicode": "{{TAGDEF|LPLANE|[logical]|.TRUE.}}\n\nDescription: {{TAG|LPLANE}} switches on the plane-wise data distribution in real space. \n\n----\n\nFor {{TAG|LPLANE}}=.TRUE., the data distribution in real space is done plane wise.\nAny combination of {{TAG|NPAR}} and {{TAG|LPLANE}} can be used.\n\nGenerally, {{TAG|LPLANE}}=.TRUE. reduces the communication band width during the FFT's, but at the same time it unfortunately worsens the load balancing on massively parallel machines.\n{{TAG|LPLANE}}=.TRUE. should only be used if {{TAG|NGZ}} is at least 3&times;(number of nodes)/{{TAG|NPAR}}, and optimal load balancing is achieved if {{TAG|NGZ}}=''n''&times;{{TAG|NPAR}}, where ''n'' is an arbitrary integer.\n\nIf {{TAG|LPLANE}}=.TRUE. and if the real space projector functions ({{TAG|LREAL}}=.TRUE. or ON or AUTO) are used, it might be necessary to check the lines following\n\n real space projector functions\n  total allocation   :\n  max/ min on nodes  :\n\nThe <tt>max/ min</tt> values should not differ too much, otherwise the load balancing might worsen as well.\n\nThe optimum settings for {{TAG|NPAR}} and {{TAG|LPLANE}} depend strongly on the type of machine you are using.\nSome recommended setups:\n\n*LINUX cluster linked by Infiniband, modern multicore machines: \n:On a LINUX cluster with multicore machines linked by a fast network we recommend to set\n<pre>\nLPLANE = .TRUE.\nNCORE  = number of cores per node (e.g. 4 or 8)\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:If very many nodes are used, it might be necessary to set {{TAG|LPLANE}}=.FALSE., but usually this offers very little advantage. For long runs (''e.g.'' molecular dynamics), we recommend to optimize {{TAG|NPAR}} by trying short runs for different settings.\n\n*LINUX cluster linked by 1 Gbit Ethernet, and LINUX clusters with single cores: \n:On a LINUX cluster linked by a relatively slow network, {{TAG|LPLANE}} must be set to .TRUE., and the {{TAG|NPAR}} flag should be equal to the number of cores:\n<pre>\nLPLANE = .TRUE.\nNCORE  = 1\nLSCALU = .FALSE.\nNSIM   = 4\n</pre>\n:Mind that you need at least a 100 Mbit full duplex network, with a fast switch offering at least 2 Gbit switch capacity to find usefull speedups. Multi-core machines should be always linked by an Infiniband, since Gbit is too slow for multi-core machines.\n\n*Massively parallel machines (Cray, Blue Gene):\n:On many massively parallel machines one is forced to use a huge number of cores. In this case load balancing problems and problems with the communication bandwidth are likely to be experienced. In addition the local memory is fairly small on some massively parallel machines; too small keep the real space projectors in the cache with any setting. Therefore, we recommend to set {{TAG|NPAR}} on these machines to &radic;''# of cores'' (explicit timing can be helpful to find the optimum value). The use of {{TAG|LPLANE}}=.TRUE. is only recommended if the number of nodes is significantly smaller than {{TAG|NGX}}, {{TAG|NGY}} and {{TAG|NGZ}}.\n\n:In summary, the following setting is recommended\n<pre>\nLPLANE = .FALSE.\nNPAR   = sqrt(number of cores)\nNSIM   = 1\n</pre>\n\n== Related tags and articles ==\n{{TAG|NPAR}},\n{{TAG|NCORE}},\n{{TAG|LSCALU}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}}\n\n{{sc|LPLANE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-04-08T14:39:35Z"}, "LSCALU": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCALU\">LSCALU</a> switches on the parallel LU decomposition (using scaLAPACK) in the orthonormalization of the wave functions. </span>", "wikicode": "{{TAGDEF|LSCALU|[logical]|.FALSE.}}\n\nDescription: {{TAG|LSCALU}} switches on the parallel LU decomposition (using scaLAPACK) in the orthonormalization of the wave functions. \n\n----\n\nFor {{TAG|LSCALU}}=.TRUE. the LU decomposition in the orthormalization of the wave functions is done in parallel, using scaLAPACK routines.\nProvided, of course, {{TAG|LSCALAPACK}}=.TRUE. and VASP was compiled with scaLAPACK support ([[Precompiler_flags|precompiler flag]]: -DscaLAPACK).\n\nIn many cases, the scaLAPACK LU decomposition based is ''slower'' than the serial LU decomposition (compare the timing <tt>ORTHCH</tt> in the respective {{FILE|OUTCAR}} files). Hence the default is {{TAG|LSCALU}}=.FALSE.\n(subspace rotations, however, are still done using scaLAPACK).\n\n== Related tags and articles ==\n{{TAG|NPAR}},\n{{TAG|NCORE}},\n{{TAG|LPLANE}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALAPACK}},\n{{TAG|LSCAAWARE}}\n\n{{sc|LSCALU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-04-08T14:40:45Z"}, "LSCALAPACK": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCALAPACK\">LSCALAPACK</a> controls the use of scaLAPACK. </span>", "wikicode": "{{TAGDEF|LSCALAPACK|[logical]}}\n{{DEF|LSCALAPACK|.TRUE.|if VASP is compiled with scaLAPACK support (precompiler flag -DscaLAPACK)|.FALSE.|otherwise}}\n\nDescription: {{TAG|LSCALAPACK}} controls the use of scaLAPACK. \n\n----\n\nFor {{TAG|LSCALAPACK}}=.TRUE., VASP uses scaLAPACK routines for the orthonormalization of the wave functions and subspace diagonalizations.\n\nThe use of scaLAPACK for the LU decomposition in the orthonormalization of the wave functions may be independently switched off ({{TAG|LSCALU}}=.FALSE.). \n\n== Related tags and articles ==\n{{TAG|NPAR}},\n{{TAG|NCORE}},\n{{TAG|LPLANE}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALU}},\n{{TAG|LSCAAWARE}}\n\n{{sc|LSCALAPACK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-04-08T14:40:13Z"}, "NPACO": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NPACO\">NPACO</a> sets the number of slots in the pair-correlation function written to <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PCDAT\">PCDAT</a>.</span>", "wikicode": "{{TAGDEF|NPACO|[integer]|256}}\n\nDescription: {{TAG|NPACO}} sets the number of slots in the pair-correlation function written to {{FILE|PCDAT}}.\n\n----\nVASP evaluates the pair-correlation function each {{TAG|NBLOCK}} steps and writes the PC-function after {{TAG|NBLOCK}}&times;{{TAG|KBLOCK}} steps to the {{FILE|PCDAT}} file.\n\n== Related tags and articles ==\n{{TAG|APACO}},\n{{TAG|NBLOCK}},\n{{TAG|KBLOCK}},\n{{FILE|PCDAT}}\n\n{{sc|NPACO|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-08T08:22:13Z"}, "APACO": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/APACO\">APACO</a> sets the maximum distance in the evaluation of the pair-correlation function (in \u00c5).</span>", "wikicode": "{{TAGDEF|APACO|[real]|10}}\n\nDescription: {{TAG|APACO}} sets the maximum distance in the evaluation of the pair-correlation function (in &Aring;).\n\n----\nVASP evaluates the pair-correlation function each {{TAG|NBLOCK}} steps and writes it after {{TAG|NBLOCK}}&times;{{TAG|KBLOCK}} steps to the {{FILE|PCDAT}} file.\n\n== Related tags and articles ==\n{{TAG|NPACO}},\n{{TAG|NBLOCK}},\n{{TAG|KBLOCK}},\n{{FILE|PCDAT}}\n\n{{sc|APACO|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-08T08:25:10Z"}, "ISIF": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null, "4": null, "5": null, "6": null, "7": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ISIF\">ISIF</a> determines whether the stress tensor is calculated and which principal degrees-of-freedom are allowed to change in relaxation and molecular dynamics runs.</span>", "wikicode": "{{TAGDEF|ISIF|0 {{!}} 1 {{!}} 2 {{!}} 3 {{!}} 4 {{!}} 5 {{!}} 6 {{!}} 7}}\n{{DEF|ISIF|0|for {{TAG|IBRION}}{{=}}0 (molecular dynamics) or {{TAG|LHFCALC}}{{=}}.TRUE.|2|else}}\n\nDescription: {{TAG|ISIF}} determines whether the stress tensor is calculated and which principal degrees-of-freedom are allowed to change in relaxation and molecular dynamics runs.\n----\n\n{{TAG|ISIF}} determines whether the stress tensor is calculated.\nThe calculation of the stress tensor is relatively time-consuming, and therefore by default switched off for ''ab initio'' molecular dynamics runs.\nThe forces are always calculated.\n\nIn addition {{TAG|ISIF}} determines which degrees-of-freedom (ionic positions, cell volume, and cell shape) are allowed to change.\n\nThe following table shows all combinations:\n\n:{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|ISIF}} ||colspan=\"2\" style=\"text-align: center;\"| calculate ||colspan=\"3\" style=\"text-align: center;\"| degrees-of-freedom \n|-\n| || forces || Stress tensor || positions || cell shape || cell volume\n|-\n| 0 || yes || no  || yes || no  || no  \n|-\n| 1 || yes || trace only  || yes || no  || no  \n|-\n| 2 || yes || yes || yes || no  || no  \n|-\n| 3 || yes || yes || yes || yes || yes  \n|-\n| 4 || yes || yes || yes || yes || no  \n|-\n| 5 || yes || yes || no  || yes || no  \n|-\n| 6 || yes || yes || no  || yes || yes  \n|-\n| 7 || yes || yes || no  || no  || yes\n|}\n\nFor {{TAG|ISIF}}=1, only the trace of the stress tensor is calculated. This means only the total pressure is correctly written to the {{FILE|OUTCAR}} file. See the line:\n\n external pressure =      ... kB\n\nThe individual components of the stress tensor are not reliable in that case.\n\n{{NB|mind|Before you perform relaxations in which the volume or the cell shape is allowed to change you must read and understand the section on [[Energy_vs_volume_Volume_relaxations_and Pulay_stress|energy vs. volume, volume relaxations, and Pulay stress]]. In general volume changes should be done only with an increased energy cutoff, ''i.e.'', {{TAG|ENCUT}}{{=}}1.3&times;max({{TAG|ENMAX}}) or {{TAG|PREC}}{{=}}High.}}\n{{NB|mind| When {{TAG|LHFCALC}}{{=}}.TRUE (for Hartree-Fock/hybrid calculations), by default {{TAG|ISIF}}{{=}}0 and the stress tensor is not calculated.}}\n\n== Related tags and articles ==\n{{TAG|IBRION}},\n{{TAG|LEPSILON}},\n{{TAG|LCALCEPS}}\n\n{{sc|ISIF|Examples|Examples that use this tag}}\n\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]][[Category:Symmetry]]", "last_revised": "2023-02-17T15:24:15Z"}, "MDALGO": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null, "11": null, "21": null, "13": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MDALGO\">MDALGO</a> specifies the molecular-dynamics-simulation protocol (in case <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MDALGO\">IBRION</a>=<span><span class=\"tag-value\">0</span> and VASP was compiled with </span><a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>). </span>", "wikicode": "{{TAGDEF|MDALGO|0 {{!}} 1 {{!}} 2 {{!}} 3 {{!}} 11 {{!}} 21 {{!}} 13 {{!}} 4 |0}}\n\nDescription: {{TAG|MDALGO}} specifies the molecular-dynamics-simulation protocol (in case {{TAG|IBRION}}=0 and VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]). \n----\n\n== {{TAG|MDALGO}}=0: Standard molecular dynamics ==\nShould provide the same results as {{TAG|MDALGO}}=2 ({{TAG|Nose-Hoover thermostat}}). The difference is that it is a different implementation and works also without the precompiler flag [[Precompiler_flags|-Dtbdyn]].\n\n=== NVE ensemble ===\n\n*To perform a calculation in the NVE ensemble:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=0 and set {{TAG|SMASS}}=-3.\n\n== {{TAG|MDALGO}}=1: Andersen thermostat ==\n\nFor the description of the Andersen thermostat see: {{TAG|Andersen thermostat}}.\n\nThe Andersen thermostat is only available for the NVT ensemble.\n\n=== Standard molecular dynamics in ===\n\n*For a standard molecular dynamics run with Anderson thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=1, and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}\n\n=== Constrained molecular dynamics ===\nFor a description of constrained molecular dynamics see {{TAG|Constrained molecular dynamics}}.\n\n* For a constrained molecular dynamics run with Andersen thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|MDALGO}}=1, and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the STATUS parameter for the constrained coordinates to 0\n#When the free-energy gradient is to be computed, set {{TAG|LBLUEOUT}}=.TRUE.\n\n=== Slow-growth approach ===\nFor a description of slow-growth approach see {{TAG|Slow-growth approach}}.\n* For a slow-growth simulation, one has to perform a calcualtion very similar to {{TAG|Constrained molecular dynamics}} but additionally the transformation velocity-related {{TAG|INCREM}}-tag for each geometric parameter with <tt>STATUS=0</tt> has to be specified:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|MDALGO}}=1, and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the STATUS parameter for the constrained coordinates to 0\n#When the free-energy gradient is to be computed, set {{TAG|LBLUEOUT}}=.TRUE.\n\n<ol start=\"5\">\n<li>Specify the transformation velocity-related {{TAG|INCREM}}-tag for each geometric parameter with <tt>STATUS=0</tt>.</li>\n</ol>\n\n=== Monitoring geometric parameters ===\nGeometric parameters with <tt>STATUS = 7</tt> in the {{FILE|ICONST}}-file are monitored during the MD simulation.\nThe corresponding values are written onto the {{FILE|REPORT}}-file, for each MD step, after the lines following the string <tt>Monit_coord</tt>.\n\nSometimes it is desirable to terminate the simulation if all values of monitored parameters get larger that some predefined upper and/or lower limits. These limits can be set by the user by means of the {{TAG|VALUE_MAX}} and {{TAG|VALUE_MIN}}-tags.\n\n*To monitor geometric parameters during an MD run:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=1, and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}.\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the constrained coordinates to 7.\n#Optionally, set the upper and/or lower limits for the coordinates, by means of the {{TAG|VALUE_MAX}} and {{TAG|VALUE_MIN}}-tags, respectively.\n\n=== Metadynamics ===\nFor a description of metadynamics see {{TAG|Metadynamics}}.\n\n* For a metadynamics run with Andersen thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=1 (or {{TAG|MDALGO}}=11 in VASP 5.x), and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}.\n#Set the parameters {{TAG|HILLS_H}}, {{TAG|HILLS_W}}, and {{TAG|HILLS_BIN}}.\n#Define collective variables in the {{FILE|ICONST}}-file, and set the {{TAG|STATUS}} parameter for the collective variables to 5.\n#If needed, define the bias potential in the {{FILE|PENALTYPOT}}-file.\n\nThe actual time-dependent bias potential is written to the {{FILE|HILLSPOT}}-file, which is updated after adding a new Gaussian. At the beginning of the simulation, VASP attempts to read the initial bias potential from the {{FILE|PENALTYPOT}}-file. For the continuation of a metadynamics run, copy {{FILE|HILLSPOT}} to {{FILE|PENALTYPOT}}. The values of all collective variables for each MD step are listed in {{FILE|REPORT}}-file, check the lines after the string <tt>Metadynamics</tt>.\n\n=== Biased molecular dynamics ===\n\nFor a description of biased molecular dynamics see {{TAG|Biased molecular dynamics}}.\n\n* For a biased molecular dynamics run with Andersen thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=1 (or {{TAG|MDALGO}}=11 in VASP 5.x), and choose an appropriate setting for {{TAG|ANDERSEN_PROB}}.\n#In order to avoid updating of the bias potential, set {{TAG|HILLS_BIN}}={{TAG|NSW}}.\n#Define collective variables in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the collective variables to 5.\n#Define the bias potential in the {{FILE|PENALTYPOT}}-file if necessary.\n\nThe values of all collective variables for each MD step are listed in the {{FILE|REPORT}}-file, check the lines after the string <tt>Metadynamics</tt>.\n\n=== Special case: NVE ensemble ===\n\nNVE ensemble calculations can be also run by selecting the Anderson thermostat and setting the update collision probability ({{TAG|ANDERSEN_PROB}}) to zero.\n*To run an NVE ensemble:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=1 and {{TAG|ANDERSEN_PROB}}=0.0.\n\n== {{TAG|MDALGO}}=2: Nose-Hoover thermostat==\n\nFor the description of the Nose-Hoover thermostat see: {{TAG|Nose-Hoover thermostat}}.\n\nThe Nose-Hoover thermostat is currently only available for the NVT ensemble. \n\n=== Standard molecular dynamics ===\n\n* For a standard molecular dynamics run with Nose-Hoover thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=2, and choose an appropriate setting for {{TAG|SMASS}}.\n\n=== Constrained molecular dynamics ===\nFor a description of constrained molecular dynamics see {{TAG|Constrained molecular dynamics}}.\n\n* For a constrained molecular dynamics run with Nose-Hoover thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=2, and choose an appropriate setting for {{TAG|SMASS}}.\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the STATUS parameter for the constrained coordinates to 0.\n#When the free-energy gradient is to be computed, set {{TAG|LBLUEOUT}}=.TRUE.\n\n=== Slow-growth approach ===\n\nFor a description of slow-growth approach see {{TAG|Slow-growth approach}}.\n\n* For a slow-growth approach run with Nose-Hoover thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|MDALGO}}=2, and choose an appropriate setting for {{TAG|SMASS}}\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the constrained coordinates to 0\n#When the free-energy gradient is to be computed, set {{TAG|LBLUEOUT}}=.TRUE.\n<ol start=\"5\">\n<li>Specify the transformation velocity-related {{TAG|INCREM}}-tag for each geometric parameter with <tt>STATUS=0</tt></li>\n</ol>\n\n=== Monitoring geometric parameters ===\nGeometric parameters with <tt>STATUS = 7</tt> in the {{FILE|ICONST}}-file are monitored during the MD simulation.\nThe corresponding values are written onto the {{FILE|REPORT}}-file, for each MD step, after the lines following the string <tt>Monit_coord</tt>.\n\nSometimes it is desirable to terminate the simulation if all values of monitored parameters get larger that some predefined upper and/or lower limits. These limits can be set by the user by means of the {{TAG|VALUE_MAX}} and {{TAG|VALUE_MIN}}-tags.\n\nTo monitor geometric parameters during an MD run:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|MDALGO}}=2, and choose an appropriate setting for {{TAG|SMASS}}\n#Define geometric constraints in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the constrained coordinates to 7\n#Optionally, set the upper and/or lower limits for the coordinates, by means of the {{TAG|VALUE_MAX}} and {{TAG|VALUE_MIN}}-tags, respectively.\n<div id=\"Langevin\"></div>\n\n=== Metadynamics ===\nFor a description of metadynamics see {{TAG|Metadynamics}}.\n\n* For a metadynamics run with Nose-Hoover thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=2 (or {{TAG|MDALGO}}=21 in VASP 5.x), and choose an appropriate setting for {{TAG|SMASS}}.\n#Set the parameters {{TAG|HILLS_H}}, {{TAG|HILLS_W}}, and {{TAG|HILLS_BIN}}.\n#Define collective variables in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the collective variables to 5.\n#If needed, define the bias potential in the {{FILE|PENALTYPOT}}-file.\n\nThe actual time-dependent bias potential is written to the {{FILE|HILLSPOT}}-file, which is updated after adding a new Gaussian. At the beginning of the simulation, VASP attempts to read the initial bias potential from the {{FILE|PENALTYPOT}}-file. For the continuation of a metadynamics run, copy {{FILE|HILLSPOT}} to {{FILE|PENALTYPOT}}. The values of all collective variables for each MD step are listed in {{FILE|REPORT}}-file, check the lines after the string <tt>Metadynamics</tt>.\n\n=== Biased molecular dynamics ===\n\nFor a description of biased molecular dynamics see {{TAG|Biased molecular dynamics}}.\n\n* For a biased molecular dynamics run with Nose-Hoover thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}.\n#Set {{TAG|MDALGO}}=2 (or {{TAG|MDALGO}}=21 in VASP 5.x), and choose an appropriate setting for {{TAG|SMASS}}.\n#In order to avoid updating of the bias potential, set {{TAG|HILLS_BIN}}={{TAG|NSW}}.\n#Define collective variables in the {{FILE|ICONST}}-file, and set the <tt>STATUS</tt> parameter for the collective variables to 5.\n#Define the bias potential in the {{FILE|PENALTYPOT}}-file.\n\nThe values of all collective variables for each MD step are listed in the {{FILE|REPORT}}-file, check the lines after the string <tt>Metadynamics</tt>.\n\n== {{TAG|MDALGO}}=3: Langevin thermostat ==\n\nFor the description of the Langevin thermostat see: {{TAG|Langevin thermostat}}.\n\nThe Langevin thermostat is available for [[NVT ensemble|NVT]] and [[NpT ensemble|NpT]] ensembles.\n\n=== ''NVT''-simulation with Langevin thermostat ===\n\n*To run an ''NVT''-simulation with a Langevin thermostat, one has to:\n{{Template:NVT_Langevin_thermostat_recipe}}\n\n=== ''NpT''-simulation with Langevin thermostat ===\nThe Langevin dynamics in the isobaric-isothermal ensemble is calculated by the method of Parrinello and Rahman{{cite|parrinello:prl:1980}}{{cite|parrinello:jap:1981}} (see {{TAG|NpT ensemble}} for more descriptions) combined with a {{TAG|Langevin thermostat}}.\n\n*To run an NpT-simulation (Parinello-Rahman dynamics) with a Langevin thermostat, one has to:\n{{Template:NpT_Langevin_thermostat_recipe}}\n\n\n=== Stochastic boundary conditions ===\nIn some cases it is desirable to study approach of initially non-equilibrium system to equilibrium. Examples of such simulations include the impact problems when a particle with large kinetic energy hits a surface or calculation of friction force between two surfaces sliding with respect to each other. As shown by Toton ''et al.''<ref name=\"Toton10\"/>, this type of problems can be studied using the stochastic boundary conditions (SBC) derived from the generalized Langevin equation by Kantorovich and Rompotis.<ref name=\"Kantorovich08\"/> In this approach, the system of interest is divided into three regions: (a) fixed atoms, (b) the internal (Newtonian) atoms moving according to Newtonian dynamics, and (c) a buffer region of Langevin atoms (''i.e.'', atoms governed by [[#LangevinEOM|Langevin equations of motion]]) located between (a) and (b).\n\nThe role of the Langevin atoms is to dissipate heat, while the fixed atoms are needed solely to create the correct potential well for the Langevin atoms to move in. The Newtonian region should include all atoms relevant to the process under study: in the case of the impact problem, for instance, the Newtonian region should contain atoms of the molecule hitting the surface and several uppermost layers of the material forming the surface. Performing molecular dynamics with such a setup guarantees that the system (possibly out of equilibrium initially) arrives at the appropriate canonical distribution.\n\n*To run a simulation with stochastic boundary conditions, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|ISIF}}=2\n#Set {{TAG|MDALGO}}=3 to invoke the Langevin thermostat\n#Prepare the {{FILE|POSCAR}} file in such a way that the Newtonian and Langevin atoms are treated as different species (even if they are chemically identical). In your {{FILE|POSCAR}}, use \"selective dynamics\" and the corresponding logical flags to define the frozen and moveable atoms.\n#Specify friction coefficients &gamma;, for all species in the {{FILE|POSCAR}} file, by means of the {{TAG|LANGEVIN_GAMMA}}-tag: set the friction coefficients to 0 for all fixed and Newtonian atoms, and choose a proper &gamma; for the Langevin atoms.\n\n==== Practical example ====\n\nConsider a system consisting of 16 hydrogen and 48 silicon atoms. Suppose that eight silicon atoms are considered to be Langevin atoms and the remaining 32 Si atoms are either fixed or Newtonian atoms. The Langevin and Newtonian (or fixed) atoms should be considered as different species, ''i.e.'', the {{FILE|POSCAR}}-file should contain the line like this:\n\n Si H Si\n 40 16 8\n\nAs only the final eight Si atoms are considered to be Langevin atoms, the {{FILE|INCAR}}-file should contain the following line defining the friction coefficients:\n\n LANGEVIN_GAMMA = 0.0   0.0   10.0\n\n''i.e.'', for all non-Langevin atoms, &gamma; should be set to zero.\n\n<div id=\"multiAnderson\"></div>\n\n== {{TAG|MDALGO}}=4: Nose Hoover chains thermostat ==\nFor a description of Nose Hoover chains theromastat, see {{TAG|NHC thermostat}}.\n*To run an ''NVT''-simulation with a Nose Hoover chains thermostat, one has to:\n#Set the standard MD-related tags: {{TAG|IBRION}}=0, {{TAG|TEBEG}}, {{TAG|POTIM}}, and {{TAG|NSW}}\n#Set {{TAG|ISIF}}=2\n#Set {{TAG|MDALGO}}=4 to invoke the thermostat, select the number of thermostats in chain via {{TAG|NHC_NCHAINS}} and choose an appropriate setting for the thermostat parameter {{TAG|NHC_PERIOD}}.\n\n\n== {{TAG|MDALGO}}=13: Multiple Andersen thermostats ==\nUp to three user-defined atomic subsystems may be coupled with independent Andersen thermostats<ref name=\"Andersen80\"/> (see remarks under {{TAG|MDALGO}}=1 as well).\nThe {{FILE|POSCAR}} file must be organized such that the positions of atoms of subsystem ''i+1'' are defined after those for the subsystem ''i'', and the following flags must be set by the user: \n*{{TAG|NSUBSYS}}=[int array] \n:Define the last atom for each subsystem (two or three values must be supplied). For instance, if total of 20 atoms is defined in the {{FILE|POSCAR}} file, and the initial 10 atoms belong to the subsystem 1, the next 7 atoms to the subsystem 2, and the last 3 atoms to the subsystem 3, {{TAG|NSUBSYS}} should be defined as follows:\n\n:{{TAG|NSUBSYS}}= 10 17 20\n\n:Note that the last number in the previous example is actually redundant (clearly the last three atoms belong to the last subsystem) and does not have to be user-supplied.\n\n*{{TAG|TSUBSYS}}=[real array]\n:Simulation temperature for each subsystem \n*{{TAG|PSUBSYS}}=[real array]\n:Collision probability for atoms in each subsystem. Only the values 0&le;{{TAG|PSUBSYS}}&le;1 are allowed.\n\n== Related Tags and Sections ==\n{{TAG|IBRION}},\n{{TAG|ISIF}},\n{{TAG|SMASS}},\n{{TAG|ANDERSEN_PROB}},\n{{TAG|RANDOM_SEED}},\n{{TAG|LBLUEOUT}},\n{{TAG|SHAKETOL}},\n{{TAG|SHAKEMAXITER}},\n{{TAG|HILLS_H}},\n{{TAG|HILLS_W}},\n{{TAG|HILLS_BIN}},\n{{TAG|INCREM}},\n{{TAG|VALUE_MIN}},\n{{TAG|VALUE_MAX}},\n{{TAG|LANGEVIN_GAMMA}},\n{{TAG|LANGEVIN_GAMMA_L}},\n{{TAG|PMASS}},\n{{TAG|NSUBSYS}},\n{{TAG|TSUBSYS}},\n{{TAG|PSUBSYS}},\n{{FILE|ICONST}},\n{{FILE|PENALTYPOT}},\n{{FILE|HILLSPOT}},\n{{FILE|REPORT}}\n\n{{sc|MDALGO|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Andersen80\">[http://dx.doi.org/10.1063/1.439486 H. C. Andersen, J. Chem. Phys. 72, 2384 (1980).]</ref>\n<ref name=\"Toton10\">[http://dx.doi.org/10.1088/0953-8984/22/7/074205 D. Toton, C. D. Lorenz, N. Rompotis, N. Martsinovich, and L. Kantorovich, J. Phys.: Condens. Matter 22, 074205 (2010).]</ref>\n<ref name=\"Kantorovich08\">[http://dx.doi.org/10.1103/PhysRevB.78.094305 L. Kantorovich and N. Rompotis, Phys. Rev. B 78, 094305 (2008).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Howto]]", "last_revised": "2023-05-17T12:24:49Z"}, "ANDERSEN_PROB": {"datatype": "0\u2264 real\u22641", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ANDERSEN_PROB\">ANDERSEN_PROB</a> sets the collision probability for the Anderson thermostat (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:ANDERSEN_PROB}}\n{{TAGDEF|ANDERSEN_PROB|0&le;[real]&le;1|0}}\n\nDescription: {{TAG|ANDERSEN_PROB}} sets the collision probability for the Anderson thermostat (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nIn the approach proposed by Andersen<ref name=\"Andersen80\"/> the system is thermally coupled to a fictitious heat bath with the desired temperature. The coupling is represented by stochastic impulsive forces that act occasionally on randomly selected particles. The collision probability is defined as an average number of collisions per atom and time-step. This quantity can be controlled by the flag {{TAG|ANDERSEN_PROB}}. The total number of collisions with the heat-bath is written in the file {{FILE|REPORT}} for each MD step.\n{{NB|tip|Setting {{TAG|ANDERSEN_PROB}}{{=}}0, ''i.e.'', no collisions with the heat-bath) generates the microcanonical (''NVE'') ensemble.}}\n\n== Related tags and articles ==\n{{TAG|MDALGO}}\n\n{{sc|ANDERSEN_PROB|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Andersen80\">[http://dx.doi.org/10.1063/1.439486 H. C. Andersen, J. Chem. Phys. 72, 2384 (1980).]</ref>\n</references>\n\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermostats]]", "last_revised": "2022-04-07T13:50:25Z"}, "RANDOM_SEED": {"datatype": "integer integer integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/RANDOM_SEED\">RANDOM_SEED</a> specifies the seed of the random-number generator (compile VASP with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>). </span>", "wikicode": "{{DISPLAYTITLE: RANDOM_SEED}}{{TAGDEF|RANDOM_SEED|[integer][integer][integer]|based on the system clock}}\n\nDescription: {{TAG|RANDOM_SEED}} specifies the seed of the random-number generator (compile VASP with [[Precompiler options#-Dtbdyn|-Dtbdyn]]). \n----\nThe random-number generator (RNG) generates a sequence of random numbers for molecular-dynamics simulations for example to initialize atomic velocities and for the Andersen thermostat ({{TAG|MDALGO}}=1 {{!}} 11).\nThe seed for the RNG determines the trajectory a molecular-dynamics simulation takes.\nSet the {{TAG|RANDOM_SEED}} tag to reproduce a previously performed calculation.\nThe three integers of {{TAG|RANDOM_SEED}} must fulfill these conditions:\n 0 <= RANDOM_SEED(1) < 900000000\n 0 <= RANDOM_SEED(2) < 1000000\n 0 <= RANDOM_SEED(3)\n\nA typical input for the {{TAG|RANDOM_SEED}} looks like this:\n {{TAGBL|RANDOM_SEED}} =         248489752                0                0\n\nThe initial value of {{TAG|RANDOM_SEED}} and the value after each MD step are written to the {{FILE|REPORT}} file.\n{{NB|tip|The random seed is used to improve reproducibility of exact numbers during every step. If the time-averaged results depend on the random seed, the ensemble is not big enough, i.e., the molecular-dynamics simulation time is too short.}}\n\n== Related tags and articles ==\n{{TAG|IBRION}}, {{TAG|MDALGO}}\n\n{{sc|RANDOM_SEED|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2023-03-23T12:56:16Z"}, "LBLUEOUT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LBLUEOUT\">LBLUEOUT</a>=<span><span class=\"tag-value\">.TRUE.</span>, VASP writes output for the free-energy gradient calculation to the </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/REPORT\">REPORT</a> file (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).", "wikicode": "{{TAGDEF|LBLUEOUT|.TRUE.{{!}}.FALSE.|.FALSE.}}\n\nDescription: for {{TAG|LBLUEOUT}}=.TRUE., VASP writes output for the free-energy gradient calculation to the {{FILE|REPORT}} file (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nIf LBLUEOUT=.TRUE., the information needed to compute the free-energy gradient is written in the {{FILE|REPORT}} file after each molecular-dynamics step ({{TAG|MDALGO}}=1 {{!}} 2), check the lines after the header:\n\n >Blue_moon\n        lambda         |z|^(-1/2)      GkT           |z|^(-1/2)*(lambda+GkT)\n\nFor the theory of the blue-moon ensemble we refer to [[Blue-moon ensemble|here]].\n\n== Related tags and articles ==\n{{TAG|IBRION}}, {{TAG|MDALGO}}, {{TAG|ICONST}}, [[Blue-moon ensemble]], [[Slow-growth approach]]\n\n{{sc|LBLUEOUT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Advanced molecular-dynamics sampling]]", "last_revised": "2022-07-19T08:18:25Z"}, "SHAKETOL": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SHAKETOL\">SHAKETOL</a> specifies the tolerance for the SHAKE algorithm (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|SHAKETOL|[Real]|<math>10^{-5}</math>}}\n\nDescription: {{TAG|SHAKETOL}} specifies the tolerance for the SHAKE algorithm (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nConstrained molecular dynamics ({{TAG|MDALGO}}=1 {{!}} 2) are performed using a [[MDALGO#SHAKE|SHAKE algorithm]].<ref name=\"Ryckaert77\"/>\n\n{{TAG|SHAKETOL}} specifies the tolerance for the SHAKE algorithm.\nIf the error for all geometric constraints does not decrease below this predefined tolerance within the allowed number of iterations ({{TAG|SHAKEMAXITER}}), VASP terminates with an error message. \n\n== Related tags and articles ==\n{{TAG|SHAKEMAXITER}},\n{{TAG|MDALGO}}\n\n{{sc|SHAKETOL|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Ryckaert77\">[http://dx.doi.org/10.1016/0021-9991(77)90098-5 J. P. Ryckaert, G. Ciccotti, and H. J. C. Berendsen, J. Comp. Phys. 23, 327 (1977).]</ref>\n</references>\n\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Constrained molecular dynamics]]", "last_revised": "2022-04-08T14:54:46Z"}, "SHAKEMAXITER": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SHAKEMAXITER\">SHAKEMAXITER</a> specifies the maximum number of iterations in the SHAKE algorithm (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|SHAKEMAXITER|[Integer]|1000}}\n\nDescription: {{TAG|SHAKEMAXITER}} specifies the maximum number of iterations in the SHAKE algorithm (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nConstrained molecular dynamics ({{TAG|MDALGO}}=1 {{!}} 2) are performed using a [[MDALGO#SHAKE|SHAKE algorithm]].<ref name=\"Ryckaert77\"/>\n\nIf the error for all geometric constraints does not decrease below a predefined tolerance ({{TAG|SHAKETOL}}) within the allowed number of iterations, VASP terminates with an error message. \nThe aforementioned maximum number of iterations is set by means of the {{TAG|SHAKEMAXITER}} tag.\n\n== Related tags and articles ==\n{{TAG|SHAKETOL}},\n{{TAG|MDALGO}}\n\n{{sc|SHAKEMAXITER|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Ryckaert77\">[http://dx.doi.org/10.1016/0021-9991(77)90098-5 J. P. Ryckaert, G. Ciccotti, and H. J. C. Berendsen, J. Comp. Phys. 23, 327 (1977).]</ref>\n</references>\n\n----\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Constrained molecular dynamics]]", "last_revised": "2022-04-07T14:28:19Z"}, "HILLS_H": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HILLS_H\">HILLS_H</a> specifies the height of the Gaussian hill (in eV) used in metadynamics (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:HILLS_H}}{{TAGDEF|HILLS_H|[Real]|<math>10^{-3}</math>}}\n\nDescription: {{TAG|HILLS_H}} specifies the height of the Gaussian hill (in eV) used in metadynamics (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nIn [[Metadynamics|metadynamics]] ({{TAG|MDALGO}}=11 {{!}} 21), the bias potential is given as \n:<math>\n\\tilde{V}(t,\\xi) = h \\sum_{i=1}^{\\lfloor t/t_G \\rfloor} \\exp{\\left\\{ -\\frac{|\\xi^{(t)}-\\xi^{(i \\cdot t_G)}|^2}{2\nw^2} \\right\\}}.\n</math>\nThre parameters ({{TAG|HILLS_H}}, {{TAG|HILLS_W}}, and {{TAG|HILLS_BIN}}) must be provided by the user.\n\n\nThe height of the Gaussian hills <math>h</math> (in eV) is set by {{TAG|HILLS_H}}.\n\n== Related tags and articles ==\n[[:Category:Metadynamics|Metadynamics]],\n{{TAG|HILLS_W}},\n{{TAG|HILLS_BIN}},\n{{TAG|MDALGO}}\n\n{{sc|HILLS_H|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Metadynamics]]", "last_revised": "2022-04-07T13:56:00Z"}, "HILLS_W": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HILLS_W\">HILLS_W</a> specifies the width of the Gaussian hill (in units of the corresponding collective variable) used in metadynamics (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:HILLS_W}}{{TAGDEF|HILLS_W|[Real]|<math>10^{-3}</math>}}\n\nDescription: {{TAG|HILLS_W}} specifies the width of the Gaussian hill (in units of the corresponding collective variable) used in metadynamics (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nIn [[Metadynamics|metadynamics]] ({{TAG|MDALGO}}=11 {{!}} 21), the bias potential is given as \n:<math>\n\\tilde{V}(t,\\xi) = h \\sum_{i=1}^{\\lfloor t/t_G \\rfloor} \\exp{\\left\\{ -\\frac{|\\xi^{(t)}-\\xi^{(i \\cdot t_G)}|^2}{2\nw^2} \\right\\}}.\n</math>\nThre parameters ({{TAG|HILLS_H}}, {{TAG|HILLS_W}}, and {{TAG|HILLS_BIN}}) must be provided by the user.\n\nThe width of the Gaussian hills  <math>w</math> (in units of the corresponding collective variable) is set by {{TAG|HILLS_W}}.\n\n== Related tags and articles ==\n[[:Category:Metadynamics|Metadynamics]],\n{{TAG|HILLS_H}},\n{{TAG|HILLS_BIN}},\n{{TAG|MDALGO}}\n\n{{sc|HILLS_W|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Metadynamics]]", "last_revised": "2022-04-07T13:56:22Z"}, "HILLS_BIN": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HILLS_BIN\">HILLS_BIN</a> sets the number of steps after which the bias potential is updated in a metadynamics run (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:HILLS_BIN}}\n{{TAGDEF|HILLS_BIN|[Integer]|{{TAG|NSW}}}}\n\nDescription: {{TAG|HILLS_BIN}} sets the number of steps after which the bias potential is updated in a metadynamics run (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nIn [[Metadynamics|metadynamics]] ({{TAG|MDALGO}}=11 {{!}} 21), the bias potential is given as \n:<math>\n\\tilde{V}(t,\\xi) = h \\sum_{i=1}^{\\lfloor t/t_G \\rfloor} \\exp{\\left\\{ -\\frac{|\\xi^{(t)}-\\xi^{(i \\cdot t_G)}|^2}{2\nw^2} \\right\\}}.\n</math>\nThre parameters ({{TAG|HILLS_H}}, {{TAG|HILLS_W}}, and {{TAG|HILLS_BIN}}) must be provided by the user.\n\n\nThe number of steps after which the bias potential is updated is set by {{TAG|HILLS_BIN}}.\n\n== Related tags and articles ==\n[[:Category:Metadynamics|Metadynamics]],\n{{TAG|HILLS_H}},\n{{TAG|HILLS_W}},\n{{TAG|MDALGO}}\n\n{{sc|HILLS_BIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Metadynamics]]", "last_revised": "2022-04-07T13:52:35Z"}, "INCREM": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/INCREM\">INCREM</a> controls the transformation velocity in the slow-growth approach (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|INCREM|[real array]|0}}\n\nDescription: {{TAG|INCREM}} controls the transformation velocity in the slow-growth approach (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nIn [[MDALGO#Slowgro|slow-growth simulations]] ({{TAG|MDALGO}}=1 {{!}} 2), the value of each controlled geometric parameter with <tt>STATUS=0</tt> is increased by {{TAG|INCREM}} in every simulation step.\n\nIt must be supplied for each controlled geometric parameter for which <tt>STATUS=0</tt> was specified in the {{FILE|ICONST}}-file.\n\n== Related tags and articles ==\n{{TAG|MDALGO}},\n{{TAG|ICONST}}\n\n{{sc|INCREM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-08T14:22:47Z"}, "LANGEVIN_GAMMA": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LANGEVIN_GAMMA\">LANGEVIN_GAMMA</a> specifies the friction coefficients (in ps<sup>-1</sup>) for atomic degrees-of-freedom when using a Langevin thermostat (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:LANGEVIN_GAMMA}}{{TAGDEF|LANGEVIN_GAMMA|[Real array]|NTYP&times;0}}\n\nDescription: {{TAG|LANGEVIN_GAMMA}} specifies the friction coefficients (in ps<sup>-1</sup>) for atomic degrees-of-freedom when using a Langevin thermostat (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nWhen using a [[MDALGO#LangevinEOM|Langevin thermostat]]<ref name=\"Allen91\"/> ({{TAG|MDALGO}}=3), the friction coefficients &gamma; for the atomic degrees-of-freedom are specified (in ps<sup>-1</sup>) using the {{TAG|LANGEVIN_GAMMA}}-tag.\n\nOne has to specify a separate friction coefficient for each of the NTYP atomic species found on the {{FILE|POTCAR}}-file. \n\n==== Practical example ====\n\nConsider a system consisting of 16 hydrogen and 48 silicon atoms. Suppose that eight silicon atoms are considered to be Langevin atoms and the remaining 32 Si atoms are either fixed or Newtonian atoms. The Langevin and Newtonian (or fixed) atoms should be considered as different species, ''i.e.'', the {{FILE|POSCAR}}-file should contain the line like this:\n\n Si H Si\n 40 16 8\n\nAs only the final eight Si atoms are considered to be Langevin atoms, the {{FILE|INCAR}}-file should contain the following line defining the friction coefficients:\n\n LANGEVIN_GAMMA = 0.0   0.0   10.0\n\n''i.e.'', for all non-Langevin atoms, &gamma; should be set to zero.\n\n== Related tags and articles ==\n{{TAG|LANGEVIN_GAMMA_L}},\n{{TAG|MDALGO}}\n\n{{sc|LANGEVIN_GAMMA|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Allen91\">M. P. Allen and D. J. Tildesley, ''Computer simulation of liquids'', Oxford university press: New York, 1991.</ref>\n</references>\n\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermostats]]", "last_revised": "2022-04-07T13:54:38Z"}, "LANGEVIN_GAMMA_L": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LANGEVIN_GAMMA_L\">LANGEVIN_GAMMA_L</a> specifies the friction coefficient (in ps<sup>-1</sup>) for lattice degrees-of-freedom in case of Parrinello-Rahman dynamics (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:LANGEVIN_GAMMA_L}}{{TAGDEF|LANGEVIN_GAMMA_L|[Real]|0}}\n\nDescription: {{TAG|LANGEVIN_GAMMA_L}} specifies the friction coefficient (in ps<sup>-1</sup>) for lattice degrees-of-freedom in case of Parrinello-Rahman dynamics (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nWhen running ''NpT'' simulations with a [[MDALGO#LangevinEOM|Langevin thermostat]]<ref name=\"Allen91\"/> ({{TAG|MDALGO}}=3), using the method of [[MDALGO#ParrinelloRahman|Parrinello and Rahman]],<ref name=\"Parrinello80\"/><ref name=\"Parrinello81\"/> the friction coefficient for lattice degrees-of-freedom have to be specified (in ps<sup>-1</sup>) by means of the {{TAG|LANGEVIN_GAMMA_L}}-tag.\nA fictitious mass for the lattice degrees-of-freedom has to be assigned using the {{TAG|PMASS}} tag.\n\nThe friction coefficients &gamma; for the atomic degrees-of-freedom are specified using the {{TAG|LANGEVIN_GAMMA}}-tag.\n\n== Related tags and articles ==\n{{TAG|LANGEVIN_GAMMA}},\n{{TAG|PMASS}},\n{{TAG|MDALGO}}\n\n{{sc|LANGEVIN_GAMMA_L|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Allen91\">M. P. Allen and D. J. Tildesley, ''Computer simulation of liquids'', Oxford university press: New York, 1991.</ref>\n<ref name=\"Parrinello80\">[http://dx.doi.org/10.1103/PhysRevLett.45.1196 M. Parrinello and A. Rahman, Phys. Rev. Lett. 45, 1196 (1980).]</ref>\n<ref name=\"Parrinello81\">[http://dx.doi.org/10.1063/1.328693 M. Parrinello and A. Rahman, J. Appl. Phys. 52, 7182 (1981).]</ref>\n</references>\n\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermostats]]", "last_revised": "2022-04-07T14:00:34Z"}, "PMASS": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PMASS\">PMASS</a> assigns a fictitious mass (in amu) to the lattice degrees-of-freedom in case of Parrinello-Rahman dynamics (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|PMASS|[Real]|1000}}\n\nDescription: {{TAG|PMASS}} assigns a fictitious mass (in amu) to the lattice degrees-of-freedom in case of Parrinello-Rahman dynamics (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nWhen running ''NpT'' simulations with a [[MDALGO#LangevinEOM|Langevin thermostat]]<ref name=\"Allen91\"/> ({{TAG|MDALGO}}=3), using the method of [[MDALGO#ParrinelloRahman|Parrinello and Rahman]],<ref name=\"Parrinello80\"/><ref name=\"Parrinello81\"/> a fictitious mass (in amu) for the lattice degrees-of-freedom has to be assigned using the {{TAG|PMASS}} tag.\nThe friction coefficient for lattice degrees-of-freedom have to be specified (in ps<sup>-1</sup>) by means of the {{TAG|LANGEVIN_GAMMA_L}} tag.\n\nThe friction coefficients &gamma; for the atomic degrees-of-freedom are specified using the {{TAG|LANGEVIN_GAMMA}} tag.\n\nThe optimal setting for {{TAG|PMASS}} depends very much on the particular system at hand and can be considered as a compromise between two opposing factors: too large values lead to very slow variation of lattice degrees of freedom (and hence the sampling becomes inefficient) while too small value can lead to too large geometric changes in an MD step and hence may cause numerical problems. We strongly recommend to make careful tests with various settings before performing the production run.\n\n== Related tags and articles ==\n{{TAG|LANGEVIN_GAMMA_L}},\n{{TAG|LANGEVIN_GAMMA}},\n{{TAG|MDALGO}}\n\n== References ==\n<references>\n<ref name=\"Allen91\">M. P. Allen and D. J. Tildesley, ''Computer simulation of liquids'', Oxford university press: New York, 1991.</ref>\n<ref name=\"Parrinello80\">[http://dx.doi.org/10.1103/PhysRevLett.45.1196 M. Parrinello and A. Rahman, Phys. Rev. Lett. 45, 1196 (1980).]</ref>\n<ref name=\"Parrinello81\">[http://dx.doi.org/10.1063/1.328693 M. Parrinello and A. Rahman, J. Appl. Phys. 52, 7182 (1981).]</ref>\n</references>\n\n{{sc|PMASS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2023-04-11T13:52:18Z"}, "VALUE_MAX": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VALUE_MAX\">VALUE_MAX</a> sets the upper limits for the monitoring of geometric parameters (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:VALUE_MAX}}{{TAGDEF|VALUE_MAX|[real array]}}\n\nDescription: {{TAG|VALUE_MAX}} sets the upper limits for the monitoring of geometric parameters (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nFor {{TAG|MDALGO}}=1 {{!}} 2, the geometric parameters defined in the {{FILE|ICONST}} file may be monitored without being subjected to a constraint or bias potential (<tt>STATUS=7</tt> in the {{FILE|ICONST}}-file).\n\nIf all values of monitored parameters defined in the {{FILE|ICONST}} file (<tt>STATUS=7</tt>) are smaller than {{TAG|VALUE_MIN}} or larger than {{TAG|VALUE_MAX}}, the simulation terminates.\n\nUpper limits for monitored coordinates, must be supplied for each geometric parameter in the {{FILE|ICONST}} file with <tt>STATUS=7</tt>.\n\n== Related tags and articles ==\n{{TAG|VALUE_MIN}},\n{{TAG|MDALGO}}\n\n{{sc|VALUE MAX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T14:36:54Z"}, "VALUE_MIN": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VALUE_MIN\">VALUE_MIN</a> sets the lower limits for the monitoring of geometric parameters (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-Dtbdyn\">-Dtbdyn</a>).</span>", "wikicode": "{{DISPLAYTITLE:VALUE_MIN}}{{TAGDEF|VALUE_MIN|[real array]}}\n\nDescription: {{TAG|VALUE_MIN}} sets the lower limits for the monitoring of geometric parameters (in case VASP was compiled with [[Precompiler options#-Dtbdyn|-Dtbdyn]]).\n----\nFor {{TAG|MDALGO}}=1 {{!}} 2, the geometric parameters defined in the {{FILE|ICONST}} file may be monitored without being subjected to a constraint or bias potential (<tt>STATUS=7</tt> in the {{FILE|ICONST}} file).\n\nIf all values of monitored parameters defined in the {{FILE|ICONST}} file (<tt>STATUS=7</tt>) are smaller than {{TAG|VALUE_MIN}} or larger than {{TAG|VALUE_MAX}}, the simulation terminates.\n\nUpper limits for monitored coordinates, must be supplied for each geometric parameter in the {{FILE|ICONST}} file with <tt>STATUS=7</tt>.\n\n== Related tags and articles ==\n{{TAG|VALUE_MAX}},\n{{TAG|MDALGO}}\n\n{{sc|VALUE_MIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T14:38:12Z"}, "NSUBSYS": {"datatype": "integer array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NSUBSYS\">NSUBSYS</a> defines the atomic subsystems in calculations with multiple Anderson thermostats (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|NSUBSYS|[integer array]}}\n\nDescription: {{TAG|NSUBSYS}} defines the atomic subsystems in calculations with multiple Anderson thermostats (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nUp to three user-defined atomic subsystems may be coupled with independent Andersen thermostats<ref name=\"Andersen80\"/> ({{TAG|MDALGO}}=13).\n\nThese subsystems are defined by specifying the last atom for each subsystem (two or three values must be supplied). For instance, if total of 20 atoms is defined in the {{FILE|POSCAR}}-file, and the initial 10 atoms belong to the subsystem 1, the next 7 atoms to the subsystem 2, and the last 3 atoms to the subsystem 3, {{TAG|NSUBSYS}} should be defined as follows:\n\n {{TAG|NSUBSYS}}= 10 17 20\n\nNote that the last number in the previous example is actually redundant (clearly the last three atoms belong to the last subsystem) and does not have to be user-supplied.\n\n== Related tags and articles ==\n{{TAG|TSUBSYS}},\n{{TAG|PSUBSYS}},\n{{TAG|MDALGO}}\n\n{{sc|NSUBSYS|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Andersen80\">[http://dx.doi.org/10.1063/1.439486 H. C. Andersen, J. Chem. Phys. 72, 2384 (1980).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T14:14:25Z"}, "TSUBSYS": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/TSUBSYS\">TSUBSYS</a> sets the temperatures for the atomic subsystems in calculations with multiple Anderson thermostats (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|TSUBSYS|[real array]}}\n\nDescription: {{TAG|TSUBSYS}} sets the temperatures for the atomic subsystems in calculations with multiple Anderson thermostats (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nUp to three user-defined atomic subsystems may be coupled with independent Andersen thermostats<ref name=\"Andersen80\"/> ({{TAG|MDALGO}}=13).\n\nThe simulation temperature for the atomic subsystems is set by means of the {{TAG|TSUBSYS}} tag (one has to specify one number for each subsystem).\n\n== Related tags and articles ==\n{{TAG|NSUBSYS}},\n{{TAG|PSUBSYS}},\n{{TAG|MDALGO}}\n\n{{sc|TSUBSYS|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Andersen80\">[http://dx.doi.org/10.1063/1.439486 H. C. Andersen, J. Chem. Phys. 72, 2384 (1980).]</ref>\n</references>\n\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T14:34:51Z"}, "PSUBSYS": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PSUBSYS\">PSUBSYS</a> sets the collision probabilities for the atoms in each atomic subsystem in calculations with multiple Anderson thermostats (in case VASP was compiled with <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_flags\">-Dtbdyn</a>).</span>", "wikicode": "{{TAGDEF|PSUBSYS|[real array]}}\n\nDescription: {{TAG|PSUBSYS}} sets the collision probabilities for the atoms in each atomic subsystem in calculations with multiple Anderson thermostats (in case VASP was compiled with [[Precompiler_flags|-Dtbdyn]]).\n----\nUp to three user-defined atomic subsystems may be coupled with independent Andersen thermostats<ref name=\"Andersen80\"/> ({{TAG|MDALGO}}=13).\n\nThe collision probabilities for the atoms in each atomic subsystem is set by means of the {{TAG|PSUBSYS}} tag (one has to specify one number for each subsystem).\n\nNote: 0 &le; {{TAG|PSUBSYS}} &le; 1\n\n== Related Tags and Sections ==\n{{TAG|NSUBSYS}},\n{{TAG|TSUBSYS}},\n{{TAG|MDALGO}}\n\n{{sc|PSUBSYS|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Andersen80\">[http://dx.doi.org/10.1063/1.439486 H. C. Andersen, J. Chem. Phys. 72, 2384 (1980).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T14:23:35Z"}, "LOCPROJ": {"datatype": "<b><sites></b> : <b><functions-ylm-specs></b> : <b><functions-radial-specs></b>", "options": {}, "summary": "The <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LOCPROJ\">LOCPROJ</a> tag specifies local functions on which the orbitals are projected. These projections are written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PROJCAR\">PROJCAR</a>, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PROJCAR\">LOCPROJ</a>, and {{FILE|vasprun.xml}} files.", "wikicode": "{{TAGDEF|LOCPROJ| '''<sites>''' : '''<functions-Ylm-specs>''' : '''<functions-radial-specs>''' | None }}\n\nDescription: The {{TAG|LOCPROJ}} tag specifies local functions on which the orbitals are projected. These projections are written to the {{FILE|PROJCAR}}, {{FILE|LOCPROJ}}, and {{FILE|vasprun.xml}} files.\n----\n{{NB|mind|{{TAG|LOCPROJ}} is an {{FILE|INCAR}} tag and a file. The file is described at the end of this page. }}\n\nWhen the {{TAG|LOCPROJ}} tag is set, VASP performs the projection of the Kohn-Sham orbitals <math>|\\psi_{n\\mathbf{k}}\\rangle</math> onto a localized orbitals basis <math>|\\beta^\\alpha_{lm}\\rangle</math> which can be written as\n\n<math>\nP^\\alpha_{lmn\\mathbf{k}} \n\\equiv \\langle \\beta_{lm}^{\\alpha}|S|\\psi_{n\\mathbf{k}}\\rangle\n= \\underbrace{\\langle \\beta_{lm}^{\\alpha}|\\psi_{n\\mathbf{k}}\\rangle}_{P^{\\text{SOFT},\\alpha}_{lmn\\mathbf{k}}} + \n\\underbrace{\\sum_{ij} \\langle \\beta^\\alpha_{lm}|\\tilde{p}_i\\rangle Q_{ij} \\langle \\tilde{p}_j | \\psi_{n\\mathbf{k}}\\rangle}_{P^{\\text{AUG},\\alpha}_{lmn\\mathbf{k}}}.\n</math>\n\nHere, the two terms on the right-hand side are called soft and augmentation part, respectively. <math>S</math> is the overlap matrix,\n\n<math>S = 1+\\sum_{ij} |\\tilde{p}_i\\rangle Q_{ij} \\langle \\tilde{p}_j|.</math>\n\nThe radial and the angular part of <math>\\beta^\\alpha_{lm}(\\mathbf{r})</math> are described by the {{TAG|LOCPROJ}} tag, which comprises three parts separated by colons that are denoted as '''<sites>''', '''<functions-Ylm-specs>''', and '''<functions-radial-specs>'''. For instance, to perform the projection onto a hydrogen-like ''1s'' function on the first ionic position specified in the {{FILE|POSCAR}} file, the tag reads\n\n LOCPROJ = 1 : s : Hy\n\n== Specifying the local basis ==\n\n* '''<sites>''': The sites on which the local functions are centered.\n:It is specified either using the index of the ionic positions as defined in the {{FILE|POSCAR}} file, or in terms of direct coordinates of the real space lattice. For instance, <code>1 2 6-8</code> will select sites 1, 2, 6, 7, and 8 as defined in the {{FILE|POSCAR}} file. On the other hand, <code>(0.5, 0, 0)</code> specifies the position in terms of direct coordinates of the real space lattice. The modes of the specification can be mixed as well, e.g., <code> 1 (0.5, 0, 0) 8</code>.\n\n* '''<functions-Ylm-specs>''': The angular character of the local functions on the specified sites.\n:Possible specifications are presented in the table below.\n\n:{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n| s\n|style=\"width: 80px;\"|            \n|style=\"width: 80px;\"|\n|style=\"width: 80px;\"|\n|style=\"width: 80px;\"|\n|style=\"width: 80px;\"|\n|style=\"width: 80px;\"|\n|style=\"width: 80px;\"|\n|-\n| p     || py         || pz      || px      ||         ||         ||           ||\n|-\n| d     || dxy        || dyz     || dz2     || dxz     || dx2-y2  ||           ||\n|-\n| f     || fy(3x2-y2) || fxyz    || fyz2    || fz3     || fxz2    || fz(x2-y2) || fx(x2-3y2)\n|-\n| sp    || sp-1       || sp-2    ||         ||         ||         ||           ||\n|-\n| sp2   || sp2-1      || sp2-2   || sp2-3   ||         ||         ||           ||\n|-\n| sp3   || sp3-1      || sp3-2   || sp3-3   || sp3-4   ||         ||           ||\n|-\n| sp3d  || sp3d-1     || sp3d-2  || sp3d-3  || sp3d-4  || sp3d-5  ||           ||\n|-\n| sp3d2 || sp3d2-1    || sp3d2-2 || sp3d2-3 || sp3d2-4 || sp3d2-5 || sp3d2-6   ||\n|}\n\n:For more details, have a look at the section on [[angular functions]]. These functions are consistent with the definition of the ''initial guesses'' used by [http://www.wannier.org WANNIER90] (see section 3.4 of the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual]).\n\n:It is possible to select multiple characters by creating a list separated by spaces, e.g., <code>p sp-1 dxy</code> performs a projection for all ''p'' functions (&equiv; ''p''<sub>x</sub>, ''p''<sub>y</sub>, and ''p''<sub>z</sub>), an ''sp''-1 function, and a ''d''<sub>xy</sub> function on all sites specified by '''<sites>'''.\n\n* '''<functions-radial-specs>''': The radial dependency of the local functions.\n:There are three options:\n::'''Pr''': use the PAW projectors\n::'''Ps''': use the PAW pseudo partial waves\n::'''Hy''': use hydrogen-like (Slater type) functions (see section 3.4 of the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual])\n\n:{{NB|mind| For '''Pr''' or '''Ps''', which are radial functions derived from the PAW datasets, one can only specify spherical harmonics with ''the same angular moment l'' in the '''<functions-Ylm-specs>''' part. This means, ''s'', ''p'', ''d'', ''f'', and/or their respective separate constituents.|:}}\n\n:The radial specifiers can optionally be modified using the following modification statements:\n::'''Pr''' [ ''n<sup>th</sup>-of-l''  [ ''species-number'' ] ]\n::: ''n<sup>th</sup>-of-l'': Uses the radial function of the ''n<sup>th</sup>'' projector with the angular moment specified in '''<functions-Ylm-specs>'''. The local basis of our PAW datasets typically contains 2 projectors per angular moment. By default, the projector that corresponds to the highest bound state of the relevant angular moment will be used.\n\n::: ''species-number'': Specifies from which PAW dataset in the current {{FILE|POTCAR}} file the radial functions should be derived. When the positions of the local functions are specified using the ionic site indices of the {{FILE|POSCAR}} file, the code will default to the corresponding atomic types.  \n\n\n::'''Ps''' [ ''n<sup>th</sup>-of-l''  [ ''species-number'' ] ]\n::: ''n<sup>th</sup>-of-l'': Uses the radial function of the ''n<sup>th</sup>'' pseudo partial wave with the angular moment specified in '''<functions-Ylm-specs>'''. The local basis of our PAW datasets typically contains 2 pseudo partial waves per angular moment. By default, the pseudo partial wave that corresponds to the highest bound state of the relevant angular moment is used.\n\n::: ''species-number'': Specifies from which PAW dataset in the current {{FILE|POTCAR}} file the radial functions should be derived. When the positions of the local functions are specified using the ionic site indices of the {{FILE|POSCAR}} file, the default is the corresponding atomic type.  \n\n\n::'''Hy''' [ ''n''  [ ''&alpha;'' ] ]\n::: ''n'': Main quantum number of the hydrogen-like radial functions. Default: ''n=1''.\n::: ''&alpha;'': controls the diffusivity of the [[hydrogenic radial function|radial functions]] ( ''&alpha;=Z/a<sub>0</sub>'' in &Aring;<sup>-1</sup>). Default:  ''&alpha;''=1.0 &Aring;<sup>-1</sup>.\n\n:::{| border=\"1\" cellspacing=\"0\" cellpadding=\"5\"\n|+''n''s type Hydrogen radial wave functions\n! <math>n</math>\n! <math>R(r)</math>\n|-\n| <math>1</math> || <math>2\\alpha^{3/2}\\exp(-\\alpha r)</math>\n|-\n| <math>2</math> || <math>\\frac{1}{2\\sqrt 2}\\alpha^{3/2}(2-\\alpha r)\\exp(-\\alpha r /2)</math>\n|-\n| <math>3</math> || <math>{\\sqrt \\frac{4}{27}}\\alpha^{3/2}(1-2\\alpha r/3+2\\alpha^2 r^2/27)\\exp(-\\alpha r /3)</math>\n|}\n::: This is consistent with the definition of the ''initial guesses'' used by [http://www.wannier.org WANNIER90] (section 3.4 of the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual]).\n\n{{NB|important| Different projections have to be specified in multiple lines, as the {{TAG|LOCPROJ}} tag can only be set once.}}  For instance,\n\n LOCPROJ = \"1 : s : Hy 2\n            1 3 : dxy : Ps 2 3\"\nperforms the projection onto a hydrogen-like ''2s'' function and a ''d''<sub>xy</sub> pseudo partial wave (2<sup>nd</sup> ''d'' channel of atomic species 3) on ionic site 1, and a ''d''<sub>xy</sub> pseudo partial wave (identical type) on site 3.\n{{NB|deprecated|For VASP versions <{{=}} 6.1.x, multiple occurrences of the {{TAG|LOCPROJ}} tag are allowed and taken into account.}} \nFor other tags, the second instance of a tag in the {{FILE|INCAR}} is normally ignored. However, here\n\n LOCPROJ = 1 : s : Hy 2\n LOCPROJ = 1 3 : dxy : Ps 2 3\n\nis possible.\n\n==Example for LOCPROJ tag==\n\nAs mentioned above, to put a hydrogen-like ''1s'' function on the first ionic position specified in the {{FILE|POSCAR}} file, the tag reads\n\n LOCPROJ = 1 : s : Hy\n\nin the {{FILE|INCAR}} file. To change this into a ''2s'' function, specify\n\n LOCPROJ = 1 : s : Hy 2\n\nTo project the orbitals onto the PAW projectors of the valence atomic ''d''<sub>xy</sub>-states of the atoms on sites 1 and 3, write\n\n LOCPROJ = 1 3 : dxy : Pr\n\nThis will only work if the atoms on these sites have valence atomic ''d''-states. Otherwise, the necessary projectors will not be available in the relevant PAW datasets, and the code will exit in error at startup.\n\nTo forcibly use the radial function of the second ''d'' channel, write\n\n LOCPROJ = 1 3 : dxy : Pr 2\n\nAgain, provided the PAW dataset(s) contain more than one ''d'' channel.\nSimilarly, one can project onto the pseudo partial waves of the second ''d'' channel in the PAW dataset(s) by writing \n\n LOCPROJ = 1 3 : dxy : Ps 2\n\nTo project onto the functions of the third PAW dataset in the {{FILE|POTCAR}} file, specify\n\n LOCPROJ = 1 3 : dxy : Ps 2 3\n\n== {{FILE|LOCPROJ}} file ==\n\nThe {{FILE|LOCPROJ}} file contains information about the projections of the Bloch states onto the localized orbitals specified with the {{TAG|LOCPROJ}} tag described above.\n\nThe file contains a header with the information about all projections:\n* ISITE: Index of the site in the {{FILE|POSCAR}} file.\n* R: Position in fractional coordinates.\n* Radial type: Is one of \"PAW projector\",\"PS partial wave\", \"Hydrogen-like\" depending on the choice of '''Pr''', '''Ps''' or '''Hy''', respectively.\n* Angular type: Angular character of the local functions, as presented in the table above in '''<functions-Ylm-specs>'''.\n\nEach Kohn-Sham orbital is identified by the spin, k point, band index, eigenvalue, and occupation.\nFor each of these Kohn-Sham orbitals, VASP writes the real and imaginary part of the projection onto localized orbitals <math>\\langle \\beta_{lm}^{\\alpha}|S|\\psi_{n\\mathbf{k}}\\rangle</math>. Note that for '''vasp_gam''' only the real part exists.\n\n== Related tags and articles ==\n{{TAG|LORBIT}}, {{FILE|PROJCAR}}\n\n{{sc|MYTAG|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]][[Category:Files]]", "last_revised": "2022-08-17T15:31:52Z"}, "ENINI": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENINI\">ENINI</a> controls the cutoff during the initial (steepest descent) phase for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENINI\">IALGO</a>=<span><span class=\"tag-value\">48</span>.</span></span>", "wikicode": "{{TAGDEF|ENINI|[real]|{{TAG|ENCUT}}}}\n\nDescription: {{TAG|ENINI}} controls the cutoff during the initial (steepest descent) phase for {{TAG|IALGO}}=48.\n\n----\n\n== Related tags and articles ==\n\n{{TAG|ENCUT}},\n{{TAG|IALGO}}\n\n{{sc|ENINI|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:13:32Z"}, "ANTIRES": {"datatype": "integer", "options": {"0": null, "1": null, "2": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ANTIRES\">ANTIRES</a> determines whether the Tamm-Dancoff approximation is used or not. </span>", "wikicode": "{{TAGDEF|ANTIRES|0 {{!}} 1 {{!}} 2|0}}\n\nDescription: {{TAG|ANTIRES}} determines whether the Tamm-Dancoff approximation is used or not. \n\n----\n*{{TAG|ANTIRES}}=0 Tamm-Dancoff approximation (TDA)\n*{{TAG|ANTIRES}}=1 yields exact results at &omega;{{=}}0 at roughly the same cost  as TDA\n*{{TAG|ANTIRES}}=2 beyond Tamm-Dancoff, coupling between positive and negative frequencies\n\nVASP uses the procedures outlined in reference <ref name=\"Sander\"/> to include contributions beyond TDA. Beyond-TDA calculations increase the computational time and memory requirements by typically a factor of 2.\n\n== Related tags and articles ==\n{{TAG|BSE calculations}}\n\n{{sc|ANTIRES|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"Sander\">[http://journals.aps.org/prb/abstract/10.1103/PhysRevB.92.045209 T. Sander, E. Maggio and G. Kresse, Phys. Rev. B 92, 045209 (2015).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-07T10:19:08Z"}, "ENCUTFOCK": {"datatype": "real", "options": {}, "summary": "The <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENCUTFOCK\">ENCUTFOCK</a> tag sets the energy cutoff that determines the FFT grids used by the Hartree-Fock routines.", "wikicode": "{{TAGDEF|ENCUTFOCK|[real]}}\n\nDefault: none\n\nDescription: The {{TAG|ENCUTFOCK}} tag sets the energy cutoff that determines the FFT grids used by the Hartree-Fock routines.\n----\n\nThe flag {{TAG|ENCUTFOCK}} is no longer supported in VASP.5.2.4 and newer versions.\nPlease use {{TAG|PRECFOCK}} instead.\n\n\nThe only sensible value for {{TAG|ENCUTFOCK}} is {{TAG|ENCUTFOCK}}=0.\nThis implies that the smallest possible FFT grid, which just encloses the cutoff sphere\ncorresponding to the plane wave cutoff, is used. \nThis accelerates the calculations by roughly a factor two to three,\nbut causes slight changes in the total energies and  some noise in the calculated forces.\nThe FFT grid used internally in the exact exchange (Hartree-Fock) routines\nis written to the {{TAG|OUTCAR}} file. Simply search for lines starting with\n\n FFT grid for exact exchange (Hartree Fock)\n\n\nIn many cases, a sensible approach is to determine the electronic and ionic groundstate \nusing {{TAG|ENCUTFOCK}}=0, and to make one final total energy calculation\nwithout the flag {{TAG|ENCUTFOCK}}.\n\n== Related tags and articles ==\n{{TAG|PRECFOCK}},\n{{TAG|PREC}},\n{{TAG|ENCUT}},\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n{{sc|ENCUTFOCK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-08T14:12:43Z"}, "ENCUTGW": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENCUTGW\">ENCUTGW</a> sets the energy cutoff for the response function. It controls the basis set for the response functions", "wikicode": "{{TAGDEF|ENCUTGW|[real]| 2/3 {{TAG|ENCUT}}}}\n\n\nDescription: The tag {{TAG|ENCUTGW}} sets the energy cutoff for the response function. It controls the basis set for the response functions\nin exactly the same manner as {{TAG|ENCUT}} does for the orbitals.\n\n\n__TOC__\n\n----\nIn GW and random-phase-approximation (RPA) calculations,  storing and manipulating the response function dominates the computational work load:\n\n<math>\\chi_{{\\mathbf{q}}}^0 ({\\mathbf{G}}, {\\mathbf{G}}', \\omega)=\\frac{1}{\\Omega} \\sum_{n,n',{\\mathbf{k}}}2 w_{{\\mathbf{k}}}\n (f_{n'{\\mathbf{k}}+{\\mathbf{q}}} - f_{n{\\mathbf{k}}})  \n\\times  \\frac{\\langle \\psi_{n{\\mathbf{k}}}| e^{-i ({\\mathbf{q}}+{\\mathbf{G}}){\\mathbf{r}}} | \\psi_{n'{\\mathbf{k}}+{\\mathbf{q}}}\\rangle\n\\langle \\psi_{n'{\\mathbf{k}}+{\\mathbf{q}}}| e^{i ({\\mathbf{q}}+{\\mathbf{G}}'){\\mathbf{r'}}} | \\psi_{n{\\mathbf{k}}}\\rangle}\n { \\epsilon_{n'{\\mathbf{k}}+{\\mathbf{q}}}-\\epsilon_{n{\\mathbf{k}}} -  \\omega - i \\eta }. </math>\n\n{{TAG|ENCUTGW}}  controls how many <math>\\mathbf{G}</math> vectors are included in the \nthe response function <math>\\chi_{{\\mathbf{q}}}^0 ({\\mathbf{G}}, {\\mathbf{G}}', \\omega)</math>.\n\nOur experience suggests that choosing {{TAG|ENCUTGW}}= 2/3 {{TAG|ENCUT}} yields reasonable results at fairly modest computational cost, although, the response function contains contributions up to twice the plane wave cutoff <math>G_{\\rm cut}</math>, see {{TAG|ALGO}} tag. Furthermore, RPA correlation energies are reported using an internal extrapolation of the correlation energy by varying the value of {{TAG|ENCUTGW}} inside VASP between the largest value given in the {{TAG|INCAR}} file and smaller values {{cite|harl:prb:08}}. Mind: The extrapolated value is only reliable, if {{TAG|ENCUTGW}} is smaller then {{TAG|ENCUT}}. The cutoff extrapolation with respect to {{TAG|ENCUTGW}} would be precise if the plane wave basis for the orbitals were infinite. Again, the VASP defaults yield very reasonable values for the extrapolated correlation energy. In fact, it is unwise to increase {{TAG|ENCUTGW}} only, without increasing {{TAG|ENCUT}}. To converge RPA correlation energies, simply increase {{TAG|ENCUT}} and the number of orbitals, and use the VASP default for {{TAG|ENCUTGW}}.\n{{NB|mind|More details on how the infinite basis set limit is extrapolated in RPA/ACFDT can be found [[ACFDT/RPA_calculations#Basis_set_convergence|here]].}}\nFor quasiparticle (QP) bandgaps, it is sometimes possible to set {{TAG|ENCUTGW}} to values between 150 to 200 eV, and even 100 eV can yield\ngaps that are accurate to within a few tens of an eV for main group elements. Be aware, however, that the absolute values of the QP energies depend inverse proportionally on the number of plane waves. Thus, the convergence of absolute QP energies is very slow, although QP gaps might seem converged.\n\nThe recommended procedure to obtain accurate QP energies is discussed in the reference below. Specifically,  for reference type calculations we recommend the following procedure: \n\n* Use the default for {{TAG|ENCUTGW}}, or even decrease {{TAG|ENCUTGW}} to half the value of {{TAG|ENCUT}}.\n* Calculate all orbitals that the plane-wave basis set allows to calculate. This number can be determined by searching for \"maximum number of plane-waves\" in the ground-state DFT {{TAG|OUTCAR}} file, and setting {{TAG|NBANDS}} to this value.\n* Increase {{TAG|ENCUT}} systematically and plot the QP energies versus the number of plane-wave coefficients, which equals the number of orbitals. This means {{TAG|ENCUTGW}} and {{TAG|NBANDS}} increase as {{TAG|ENCUT}} increases.\n\nThis procedure can be carried out using few k points. Other commonly applied methods can yield less accurate results and are not considered to be reliable.\n\n== FFT grid and {{TAG|PRECFOCK}} ==\nThe {{TAG|PRECFOCK}} tag determines the fast Fourier transformation (FFT) grid in all GW (and Hartree-Fock) related routines. For small systems, the computational time is often dominated by FFT operations. Therefore, the {{TAG|PRECFOCK}} tag can have a significant impact on the compute time for QP calculations. For large systems, the FFT's usually do not dominate the computational workload, and savings are expected to be small for {{TAG|PRECFOCK}} = ''fast''. \nQP shifts are usually not very sensitive to the setting of {{TAG|PRECFOCK}} and therefore there is no harm in setting {{TAG|PRECFOCK}} = ''fast''), whereas for RPA calculations we recommend to set {{TAG|PRECFOCK}} = ''normal'' to avoid numerical errors.\n\n== Related tags and articles ==\n{{TAG|PRECFOCK}},\n{{TAG|ENCUT}},\n{{TAG|ENCUTGWSOFT}},\n{{TAG|GW calculations}},\n[[ACFDT/RPA_calculations#Basis_set_convergence|Basis set convergence]]\n\n{{sc|ENCUTGW|Examples|Examples that use this tag}}\n\n== Further reading ==\n*Generally, QP energies converge like one over the number of orbitals and one over the number of plane waves in the response function. For basis set converged calculations, we recommend using the strategies outlined in Ref. {{cite|klimes:prb:14}}, which contains a comprehensive study of the performance of the convergence of GW calculations.\n\n== References ==\n\n\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2023-04-24T14:07:20Z"}, "ENCUTGWSOFT": {"datatype": "real", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ENCUTGWSOFT\">ENCUTGWSOFT</a> sets the energy cutoff for response function, such that it allows to truncate the Coulomb kernel slowly between the energy", "wikicode": "{{TAGDEF|ENCUTGWSOFT|[real]}}\n{{DEF|ENCUTGWSOFT|{{TAG|ENCUTGW}}<math>\\times 0.8</math>| for {{TAG|ALGO}}{{=}}''ACFDT''|{{TAG|ENCUTGW}}<math>\\times 0.8</math>| as of VASP.6.3 | {{TAG|ENCUTGW}}|else}}\n{{NB|important|For vasp.6.3 and later releases {{TAG|ENCUTGWSOFT}} always defaults to {{TAG|ENCUTGW}}<math>\\times 0.8</math>.}}\nDescprition: The flag {{TAG|ENCUTGWSOFT}} sets the energy cutoff for response function, such that it allows to truncate the Coulomb kernel slowly between the energy\nspecified by {{TAG|ENCUTGWSOFT}} and {{TAG|ENCUTGW}} using a cosine window function.\n----\nRPA/ACFDT correlation energies converge very slowly with respect to <math>\\mathbf{G}_{\\rm max }</math>. \nThus VASP automatically extrapolates to the infinite basis set limit using a linear regression to the equation: {{cite|harl:2008}}{{cite|harl:2010}}{{cite|klimes:2014}}\n\n<math>E_{\\mathrm{c}}({\\mathbf{G}})=E_{\\mathrm{c}}(\\infty)+\\frac{A}{{\\mathbf{G}}^3}</math>.\n\nThis  usually leads to much smoother energy-volume curves in {{TAG|ACFDT calculations}} and {{TAG|MP2 calculations}}.\nThe modified Coulomb kernel is in this case:\n<math>v_{G} = \\frac{4 \\pi e^2} {G^2} \\frac{1}{2} \\left( 1 + \\cos \\left( \\pi \\, \\frac{ \\frac{\\hbar^{2} G^2 }{2 m_e} - \\mathrm{ ENCUTGWSOFT} }{ \\mathrm{ENCUTGW} -  \\mathrm{ENCUTGWSOFT}} \\right) \\right) \n\\qquad \\mbox{for} \\quad  \\frac{\\hbar^2 G^2 }{2 m_e} >  \\mathrm{ENCUTGWSOFT}</math> \n\nIf {{TAG|LSCK}} is set to .TRUE., the squeezed Coulomb kernel is used instead of the cosine window:{{cite|riemelmoser:jcp:2020}}\n\n<math>v_{G} = 4 \\pi e^2 \\frac{\n(G_{max}-G_{min})(G_{max}-G)\n}{\n(G_{min}^2 - G(2G_{min}-G_{max}))^2\n}  \n\\qquad \\mbox{for} \\quad  \\mathrm{ENCUTGWSOFT}=\\frac{\\hbar^2G_{min}^2}{2m_e}<\\frac{\\hbar^2 G^2}{2m_e}<\\frac{\\hbar^2G_{max}^2}{2m_e}=\\mathrm{ENCUTGW}</math> \n\nThis kernel ''squeezes'' contributions from large wave vectors <math>G>G_{max}</math> into the window given by {{TAGBL|ENCUTGWSOFT}}.\n{{NB|mind|The infinite basis set limit extrapolation for RPA/ACFDT is described in more detail [[ACFDT/RPA_calculations#Basis_set_convergence|here]].}}\n== Related tags and articles ==\n{{TAG|PRECFOCK}},\n{{TAG|ENCUT}},\n{{TAG|ENCUTGW}},\n{{TAG|GW calculations}},\n{{TAG|LSCK}},\n[[ACFDT/RPA_calculations#Basis_set_convergence|RPA/ACFDT basis set convergence]],\n{{sc|ENCUTGWSOFT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2023-04-24T14:18:28Z"}, "GGA_COMPAT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "This flag restores the full lattice symmetry for gradient corrected functionals.", "wikicode": "{{DISPLAYTITLE:GGA_COMPAT}}\n{{TAGDEF|GGA_COMPAT|.TRUE. {{!}} .FALSE. |.TRUE.}}\n\nDescription: This flag restores the full lattice symmetry for gradient corrected functionals.\n----\n\nFor gradient corrected functionals the \nexchange correlation functional might break the symmetry of\nthe Bravais lattice slightly for non cubic cells (this\nincludes primitive fcc and bcc lattices).\nThe origin of this problem is subtle and relates to the fact that the gradient\nfield breaks the lattice  symmetry for non-cubic lattices.\nTo fix this, a spherical cutoff is applied to the gradient field\nfor {{TAG|GGA_COMPAT}} = .''FALSE''.,\ne.g. for all reciprocal lattice vectors <math>\\bold{G}</math> that exceed a certain cutoff length\n<math>\\bold{G}_{cut}</math> the gradient field as well as the charge density is set to\nzero before calculating the exchange correlation energy and potential. \nThe cutoff <math>\\bold{G}_{cut}</math> is determined automatically so that the cutoff sphere\nis fully inscribed in the parallelepiped defined by the FFT grid in\nthe reciprocal space.\n\nSince this flag restores the full lattice symmetry for gradient corrected functionals,\nand we therefore recommend to set \n GGA_COMPAT = .FALSE.\nfor all gradient corrected calculations. For compatibility reasons,\nthe default is {{TAG|GGA_COMPAT}} = ''.TRUE.'' until VASP.5.2.\nHowever, setting the flag usually changes the energy only in the sub meV energy range\n(0.1 meV), and for most results it does matter little how\n{{TAG|GGA_COMPAT}} is set. The most important exception are magnetic\nanisotropies, for which we strongly recommend to set  {{TAG|GGA_COMPAT}} = .''FALSE''.\n\n== Related tags and articles ==\n{{TAG|GGA}},\n{{TAG|METAGGA}}\n\n{{sc|GGA_COMPAT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]]", "last_revised": "2022-04-08T12:43:20Z"}, "HFLMAX": {"datatype": "integer", "options": {}, "summary": "To be compatible w.r.t. old releases, VASP also reads the flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFLMAX\">HFLMAX</a> to the same effect as <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFLMAX\">LMAXFOCK</a>.", "wikicode": "{{TAGDEF|HFLMAX|[integer]|4}}\n\nDescription: To be compatible w.r.t. old releases, VASP also reads the flag {{TAG|HFLMAX}} to the same effect as {{TAG|LMAXFOCK}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|LMAXFOCK}},\n{{TAG|LMAXFOCKAE}}\n\n{{sc|HFLMAX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-04-08T14:18:29Z"}, "IGPAR": {"datatype": "integer", "options": {"1": null, "2": null, "3": null}, "summary": "This tag specifies the socalled parallel or <math>\\bold{G}_{\\parallel}</math> direction in the integration over the reciprocal space unit cell needed for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LCALCPOL\">LCALCPOL</a>.", "wikicode": "{{TAGDEF|IGPAR|1 {{!}} 2 {{!}} 3}}\n\nDescription: This tag specifies the socalled parallel or <math>\\bold{G}_{\\parallel}</math> direction in the integration over the reciprocal space unit cell needed for {{TAG|LCALCPOL}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|LCALCPOL}},\n{{TAG|LCALCEPS}},\n{{TAG|EFIELD_PEAD}},\n{{TAG|LPEAD}},\n{{TAG|IPEAD}},\n{{TAG|LBERRY}},\n{{TAG|NPPSTR}},\n{{TAG|DIPOL}},\n[[Berry_phases_and_finite_electric_fields|Berry phases and finite electric fields]]\n\n{{sc|IGPAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-07-19T07:58:01Z"}, "IVDW": {"datatype": "integer", "options": {"0": null, "1": null, "10": null, "11": null, "12": null, "2": null, "20": null, "21": null, "202": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IVDW\">IVDW</a> specifies a vdW (dispersion) correction.</span>", "wikicode": "{{TAGDEF|IVDW|0 {{!}} 1 {{!}} 10 {{!}} 11 {{!}} 12 {{!}} 2 {{!}} 20 {{!}} 21 {{!}} 202 {{!}} 4|0 (no correction)}}\n\nDescription: {{TAG|IVDW}} specifies a vdW (dispersion) correction.\n----\nFor fundamental reasons, the semilocal and hybrid exchange-correlation functionals are unable to describe properly vdW interactions resulting from dynamical correlations between fluctuating charge distributions (called London dispersion forces). An approximate way to work around this problem and to get more reliable results for vdW systems is to add a dispersion correction term, <math>E_{\\mathrm{disp}}</math>, to the conventional KS-DFT energy <math>E_{\\rm tot}^{\\mathrm{KS-DFT}}</math>:\n\n:<math> E_{\\rm tot}^{\\mathrm{KS-DFT-disp}} = E_{\\rm tot}^{\\mathrm{KS-DFT}} + E_{\\mathrm{disp}}.</math>\n\n<math>E_{\\mathrm{disp}}</math> can be calculated using one of the available approximate methods listed below.\n\n*{{TAG|IVDW}}=0 : no dispersion correction (default)\n*{{TAG|IVDW}}=1|10 : {{TAG|DFT-D2}} method of Grimme (available as of VASP.5.2.11)\n*{{TAG|IVDW}}=11 : {{TAG|DFT-D3}} method of Grimme with zero-damping function (available as of VASP.5.3.4)\n*{{TAG|IVDW}}=12 : {{TAG|DFT-D3}} method with Becke-Johnson damping function (available as of VASP.5.3.4)\n*{{TAG|IVDW}}=13 : DFT-D4 method (available as of VASP.6.2 as [[Makefile.include#DFTD4_.28optional.29|external package]])\n*{{TAG|IVDW}}=2|20 : {{TAG|Tkatchenko-Scheffler method}} (available as of VASP.5.3.3)\n*{{TAG|IVDW}}=21 : {{TAG|Tkatchenko-Scheffler method with iterative Hirshfeld partitioning}} (available as of VASP.5.3.5)\n*{{TAG|IVDW}}=202 : {{TAG|Many-body dispersion energy}} method (MBD@rSC) (available as of VASP.5.4.1)\n*{{TAG|IVDW}}=263 : {{TAG|Many-body dispersion energy with fractionally ionic model for polarizability}} method (MBD@rSC/FI) (available as of VASP.6.1.0)\n*{{TAG|IVDW}}=4 : {{TAG|dDsC dispersion correction}} method (available as of VASP.5.4.1)\n*{{TAG|IVDW}}=3 : {{TAG|DFT-ulg}} method (available as of VASP.5.3.5)\n\nWith all methods listed above, a dispersion correction is added to the total energy, potential, interatomic forces and stress tensor, such that lattice relaxations, molecular dynamics, and vibrational analysis (via finite differences) can be performed. Note, however, that these correction schemes are currently not available for calculations based on density functional perturbation theory.\n\n'''N.B.''': The parameter {{TAG|LVDW}} used in previous versions of VASP (5.2.11 and later) to activate the {{TAG|DFT-D2}} method is now obsolete. If {{TAG|LVDW}}=''.TRUE.'' is defined, {{TAG|IVDW}} is automatically set to 1 (unless {{TAG|IVDW}} is specified in {{FILE|INCAR}}).\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}, {{TAG|DFT-D3}},\n{{TAG|Tkatchenko-Scheffler method}},\n{{TAG|Self-consistent screening in Tkatchenko-Scheffler method}},\n{{TAG|Tkatchenko-Scheffler method with iterative Hirshfeld partitioning}},\n{{TAG|Many-body dispersion energy}},\n{{TAG|Many-body dispersion energy with fractionally ionic model for polarizability}},\n{{TAG|dDsC dispersion correction}},\n{{TAG|DFT-ulg}}\n\nSee also the alternative vdW-DF functionals: {{TAG|LUSE_VDW}}, {{TAG|Nonlocal vdW-DF functionals}}.\n\n{{sc|IVDW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2023-06-07T13:21:29Z"}, "IWAVPR": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null, "10": null, "11": null, "12": null, "13": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IWAVPR\">IWAVPR</a> determines how orbitals and/or charge densities</span>", "wikicode": "{{TAGDEF|IWAVPR|0 {{!}} 1 {{!}} 2 {{!}} 3 {{!}} 10 {{!}} 11 {{!}} 12 {{!}} 13}}\n{{DEF|IWAVPR|2|if {{TAG|IBRION}}{{=}}0 (MD) and 1,2 (relaxation)|0|else (static calculation)}}\n\nDescription: {{TAG|IWAVPR}} determines how orbitals and/or charge densities\nare extrapolated from one ionic configuration to the next configuration.\n\n----\n\nUsually the file {{TAG|TMPCAR}} is used to store old orbitals, which\nare required for the prediction.If {{TAG|IWAVPR}} is larger than 10, the prediction is\ndone without an external file {{TAG|TMPCAR}} (i.e. all required arrays\nare stored in the main memory, this option works from version VASP.4.1).\nIf {{TAG|IWAVPR}} is set to 10, the reader will set it to the\nfollowing default values:\n\n*{{TAG|IWAVPR}}=12 if {{TAG|IBRION}}=0 (MD) \n*{{TAG|IWAVPR}}=11 if {{TAG|IBRION}}=1,2 (relaxation) \n\n\nThe following options are available for {{TAG|IWAVPR}}:\n*{{TAG|IWAVPR}}=0 no extrapolation, usually less preferable if you want to do an ab initio MD or a relaxation of the ions into the instantaneous groundstate.\n*{{TAG|IWAVPR}}=1|11 Simple extrapolation of the charge density using atomic charge densities is done (eq. (9.8) in thesis G. Kresse). This switch is convenient for all kind of geometry optimizations (ionic relaxation\nand volume/cell shape with conjugate gradient or Quasi-Newton methods, i.e. {{TAG|IBRION}}=1,2) \n*{{TAG|IWAVPR}}=2|12 A second order extrapolation for the orbitals and the charge density is done (eq. (9.9) in thesis G. Kresse). A must for ab-initio  MD-runs.\n*{{TAG|IWAVPR}}=3|13 In this case a second order extrapolation for the orbitals, and a  simple  extrapolation of the charge density using atomic charge densities is done.\nThis is obviously a mixture between {{TAG|IWAVPR}}=1 and 2, however, it is usually worse than {{TAG|IWAVPR}}=2.\n\nMind: We don't  encourage this  setting.\n\n== Related tags and articles ==\n{{TAG|IBRION}}\n\n{{sc|IWAVPR|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Molecular dynamics]]", "last_revised": "2022-04-07T08:05:36Z"}, "KGAMMA": {"datatype": "boolean", "options": {}, "summary": "Determines whether the k points (specified by the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KSPACING\">KSPACING</a> tag ) include (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KSPACING\">KGAMMA</a>=<span><span class=\"tag-value\">.TRUE.</span>) the </span><math>\\Gamma</math> point.", "wikicode": "{{TAGDEF|KGAMMA|[logical]|.TRUE.}}\n\nDescription: Determines whether the k points (specified by the {{TAG|KSPACING}} tag ) include ({{TAG|KGAMMA}}=.TRUE.) the <math>\\Gamma</math> point.\n----\n{{NB|important| If a {{TAG|KPOINTS}} file is present, VASP ignores the {{TAG|KGAMMA}} tag and the {{TAG|KSPACING}} tag.}}\n== Related tags and articles ==\n{{TAG|KSPACING}}\n\n{{sc|KGAMMA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:24:39Z"}, "KSPACING": {"datatype": "real", "options": {}, "summary": "The tag  <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KSPACING\">KSPACING</a> determines the number of k points if the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KSPACING\">KPOINTS</a> file", "wikicode": "{{TAGDEF|KSPACING|[real]|0.5}}\n\nDescription: The tag  {{TAG|KSPACING}} determines the number of k points if the {{TAG|KPOINTS}} file\nis not present.\n\n----\n\n{{TAG|KSPACING}} is the smallest allowed spacing between k points in units of <math>\\AA^{-1}</math>. The number of k points increases when the spacing is decreased.\nThe number of k points in the direction of the first, second and third reciprocal lattice vector is determined by <math> N_i= \\mathrm{max}(1, \\mathrm{ceiling}( | \\mathbf{b}_i| 2\\pi / \\mathrm{KSPACING} ))</math>\nwith <math>\\mathrm{ceiling}( x )</math> being the ceiling function which returns the least integer that is equal or larger than <math>x</math>. In this equation, <math> \\mathbf{b}_i  </math> are the reciprocal lattice vectors <math> \\mathbf{b}_i \\mathbf{a}_j = \\delta_{ij} </math>.\nThe generated grid is either centred at the <math>\\Gamma</math> point, i.e., includes the <math>\\Gamma</math> point when {{TAG|KGAMMA}}=.TRUE., or is shifted away from the <math>\\Gamma</math> point, as done for Monkhorst-Pack grids when {{TAG|KGAMMA}}=.FALSE. is set. The default is to include the <math>\\Gamma</math> point. \n{{NB|warning|This implementation is not entirely consistent with the automatic k-point generation (Mode{{=}}A) used in the {{FILE|KPOINTS}} file.}} \nIf the k points are generated using the [[KPOINTS#Automatic_k-point_mesh|automatic mode]] in the {{FILE|KPOINTS}} file, <math> N_i</math>  is calculated as\n<math> N_i= \\mathrm{int}(\\mathrm{max}(1, R_k| \\mathbf{b}_i| + 0.5)) </math> with <math>R_k=2\\pi/\\mathrm{KSPACING}</math>\nand rounding it to the nearest integer.  We recommend using the {{TAG|KSPACING}} tag in the {{FILE|INCAR}} file \nand avoiding the automatic mode via the {{FILE|KPOINTS}} file.  \n\n== Related tags and articles ==\n{{TAG|KGAMMA}}, {{FILE|KPOINTS}}\n\n{{sc|KSPACING|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-09-01T18:45:38Z"}, "KPOINT_BSE": {"datatype": "integer (optionally  integer, integer, integer)", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPOINT_BSE\">KPOINT_BSE</a>  specifies the k-point index at which VASP calculates the dielectric matrix.</span>", "wikicode": "{{DISPLAYTITLE:KPOINT_BSE}}\n{{TAGDEF|KPOINT_BSE|[integer] (optionally [integer],[integer],[integer])}}\n\nDescription: {{TAG|KPOINT_BSE}}  specifies the k-point index at which VASP calculates the dielectric matrix.\n----\nIn the simplest form, one can specify\n\n   KPOINT_BSE = index_of_k-point\n\nSelect the desired k point from the list of k points in the {{TAG|OUTCAR}} file. Additionally, a shift by an arbitrary reciprocal lattice vector can be supplied by specifying three additional integer numbers:\n\n  KPOINT_BSE = index_of_k-point  n1 n2 n3\n\nThis allows calculating the dielectric function at a k point outside of the first Brillouin zone corresponding to\n\n:<math> \\bold{k} + n_{1} \\bold{b}_{1}+ n_{2} \\bold{b}_{2} + n_{3} \\bold{b}_{3} </math>\n\nwhere <math>\\bold{b}_{i}</math> are the reciprocal-lattice vectors of the unit cell.\n\n== Related tags and articles ==\n{{TAG|BSE calculations}}\n\n{{sc|KPOINT_BSE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-07T12:09:22Z"}, "LADDER": {"datatype": "boolean", "options": {}, "summary": "Controls whether the ladder diagrams are included in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSE\">BSE</a> calculation. Note that the default for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSE\">LRPA</a> and therefore LADDER is somewhat convoluted; so better to always double-check the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSE\">OUTCAR</a> file whether VASP behaves as expected. Generally, VASP will select ladder diagrams whenever this seems reasonable. This is for instance the case for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSE\">ALGO</a>=<span><span class=\"tag-value\">\"BSE\"</span> or \"TDHF\" calculations.</span>", "wikicode": "{{TAGDEF|LADDER|[logical]| .NOT. {{TAG|LRPA}}}}\n\nDescription: Controls whether the ladder diagrams are included in the {{TAG|BSE}} calculation. Note that the default for {{TAG|LRPA}} and therefore LADDER is somewhat convoluted; so better to always double-check the {{TAG|OUTCAR}} file whether VASP behaves as expected. Generally, VASP will select ladder diagrams whenever this seems reasonable. This is for instance the case for {{TAG|ALGO}}=\"BSE\" or \"TDHF\" calculations.\n\n----\n\n{{TAG|LADDER}} is used together with {{TAG|LHARTREE}}. If {{TAG|LADDER}}=''.FALSE.'', the ladder diagrams (i.e. the exchange terms related to <math>W</math> or the screened exchange) are not included.\nIf {{TAG|LHARTREE}}=''.FALSE.'', the Hartree diagrams or bubble diagrams are not included. The following table summarizes all possible combinations:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|LHARTREE}} || {{TAG|LADDER}} ||\n|-\n| .TRUE. || .TRUE. || full BSE \n|-\n| .FALSE. || .TRUE. || only excitonic effects (ladders)\n|-\n| .TRUE. || .FALSE. || random phase approximation (rings = bubbles only)\n|-\n| .FALSE. || .FALSE. || independent particle picture\n|}\n\nThe last combination can be useful for sanity checks: the results must be identical to the results obtained using\n{{TAG|LOPTICS}}=''.TRUE.'' in the preceding calculations. If this is not the case, it usually implies that the one-electron\nenergies have been updated in the {{TAG|WAVECAR}} file, or that the  {{TAG|WAVEDER}} file is not properly set up. The end of {{TAG|BSE}} explains how to recalculate\nthe {{TAG|WAVEDER}} file from an existing {{TAG|WAVECAR}} file.\n\n== Related tags and articles ==\n{{TAG|LHARTREE}},\n{{TAG|LOPTICS}},\n{{TAG|BSE_calculations}}\n\n{{sc|LADDER|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-08T14:25:49Z"}, "LHARTREE": {"datatype": "boolean", "options": {}, "summary": "Controls whether the bubble diagrams are included in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSE\">BSE</a> calculation.", "wikicode": "{{TAGDEF|LHARTREE|[logical]|.TRUE.}}\n\nDescription: Controls whether the bubble diagrams are included in the {{TAG|BSE}} calculation.\n\n----\n\n{{TAG|LADDER}} is used together with {{TAG|LHARTREE}}. If {{TAG|LADDER}}=''.FALSE.'', the ladder diagrams, i.e., the exchange terms related to <math>W</math> or the screened exchange, are not included.\nIf {{TAG|LHARTREE}}=''.FALSE.'', the Hartree diagrams or bubble diagrams are not included. The following table summarizes all possible combinations:\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n|{{TAG|LHARTREE}} || {{TAG|LADDER}} ||\n|-\n| .TRUE. || .TRUE. || full BSE \n|-\n| .FALSE. || .TRUE. || only excitonic effects (ladders)\n|-\n| .TRUE. || .FALSE. || random phase approximation (rings = bubbles only)\n|-\n| .FALSE. || .FALSE. || independent particle picture\n|}\n\nThe last combination can be useful for sanity checks: the results must be identical to the results obtained using\n{{TAG|LOPTICS}}=''.TRUE.'' in the preceding calculations. If this is not the case, it usually implies that the one-electron\nenergies have been updated in the {{TAG|WAVECAR}} file, or that the  {{TAG|WAVEDER}} file is not properly set up. The end of [[BSE calculations|BSE]] explains how to recalculate the {{TAG|WAVEDER}} file from an existing {{TAG|WAVECAR}} file.\n\n== Related tags and articles ==\n{{TAG|LADDER}},\n{{TAG|LOPTICS}},\n{{TAG|BSE calculations}}\n\n{{sc|LHARTREE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-07-19T08:30:27Z"}, "LASYNC": {"datatype": "boolean", "options": {}, "summary": "Controls the overlap in communication.", "wikicode": "{{TAGDEF|LASYNC|[logical]|.FALSE.}}\n\nDescription: Controls the overlap in communication. \n----\nIf {{TAG|LASYNC}}=''.TRUE.'' is set in the INCAR file, VASP will try to overlap communication with calculations.\nThis might improve performance or degrade it depending on the MPI library and hardware you are running on.\nPlease do your own testing and compare the runtimes and results before using this tag in production runs.\nCompiling VASP using the [[Precompiler_options#-DPROFILING|-DPROFILING]] precompiler switch provides a detailed timing of the different VASP routines which helps in determining if there is a performance gain.\nPlease report any issues in the [https://www.vasp.at/forum/ VASP forum].\n\n{{sc|LASYNC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-07-19T08:12:41Z"}, "LBERRY": {"datatype": "boolean", "options": {}, "summary": "This tag is used in the the evaluation of the Berry phase expression for the electronic polarization of an insulating system.", "wikicode": "{{TAGDEF|LBERRY|[logical]|.FALSE.}}\n\nDescription: This tag is used in the the evaluation of the Berry phase expression for the electronic polarization of an insulating system.\n\n---- \n\nAs of VASP.5.2, calculating the macroscopic polarization and Born effective charges along the lines of the following example (using {{TAG|LBERRY}}=''.TRUE.'' etc) is unnecessary. The use of {{TAG|LCALCPOL}} or {{TAG|LCALCEPS}} is much more convenient.\n\nSetting {{TAG|LBERRY}}=''.TRUE.'' in the {{TAG|INCAR}} file switches on the evaluation of the Berry phase expression for the electronic polarization of an insulating system, as modified for the application of USPP's and PAW datasets <ref name=\"berryformalism1\"/><ref name=\"berryformalism2\"/><ref name=\"berryformalism3\"/><ref name=\"berryformalism4\"/><ref name=\"berryformalism5\"/><ref name=\"berryultrasoft\"/><ref name=\"berrymmars\"/>.\nIn addition, the following keywords must be specified in order to generate the mesh of k-points:\n\n IGPAR = 1|2|3\n{{TAG|IGPAR}} tag specifies the socalled parallel or <math>\\bold{G}_{\\parallel}</math> direction in the integration over the reciprocal space unit cell.\n\n NPPSTR = number of points on the strings in the IGPAR direction\n{{TAG|NPPSTR}} specifies the number of k-points on the strings <math>\\bold{k}_{j} = \\bold{k}_{\\perp} + j\\bold{G}_{\\parallel}/\\mathrm{NPPSTR} </math> (with <math> j=0,..,\\mathrm{NPPSTR}-1</math>).\n\n DIPOL = center of cell (fractional coordinates)\n{{TAG|DIPOL}} specifies the origin with respect to which the ionic contribution to the dipole moment in the cell is calculated. When comparing changes in this contribution due to the displacement of an ion, this center should be chosen in such a way that the ions in the distorted and the undistorted structure remain on the same side of {{TAG|DIPOL}} (in terms of a minimum image convention).\n\n\n== An example: The fluorine displacement dipole (Born effective charge) in NaF ==\n\nFirst one needs to determine the electronic polarization of the undistorted NaF.\n\nCaluclation1:\nIt is usually convenient to calculate the self-consistent Kohn-Sham potential of the undistorted structure, using a symmetry reduced <math>6\\times6\\times6</math> Monkhorst-Pack sampling of the Brillouin zone. Using for instance the following {{TAG|INCAR}} file:\n PREC   = Med\n ISMEAR = 0\n EDIFF  = 1E-6\n{{TAG|KPOINTS}} file:\n 6x6x6\n  0\n Gamma\n  6 6 6\n  0 0 0 \n{{TAG|POSCAR}} file:\n NaF\n  4.5102\n  0.0 0.5 0.5\n  0.5 0.0 0.5\n  0.5 0.5 0.0\n 1 1\n Direct\n   0.0000000000000000  0.0000000000000000  0.0000000000000000\n   0.5000000000000000  0.5000000000000000  0.5000000000000000\nand LDA Na_sv and F PAW datasets.\n\n\nCalculation 2:\nTo calculate the electronic contribution to the polarization, along the reciprocal lattice vector <math>\\bold{G}_{1}</math> (i.e. <math> \\bold{P} \\cdot \\bold{G}_{1} </math>), add the following lines to the {{TAG|INCAR}} file:\n LBERRY = .TRUE.\n IGPAR  = 1\n NPPSTR = 8\n DIPOL = 0.25 0.25 0.25\n\nSetting {{TAG|LBERRY}}=''.TRUE.'' automatically sets {{TAG|ICHARG}}=11, i.e., the charge density of the previous calculation is read and kept fixed, and only the orbitals and one-electron eigenenergies are recalculated for the new k-point set. This is advantageous, since the number of k-points used to evaluate the Berry phase expression can be quite large, and precalculating the charge density ({{TAG|ICHARG}}=11) saves significant CPU time.\n\nThe {{TAG|OUTCAR}} will now contain the following lines:\n                                 e<r>_ev=(     0.00000     0.00000     0.00000 ) e*Angst\n                                 e<r>_bp=(     0.00000     0.00000     0.00000 ) e*Angst\n\n  Total electronic dipole moment: p[elc]=(     0.00000     0.00000     0.00000 ) e*Angst \n\n             ionic dipole moment: p[ion]=(     2.25510     2.25510     2.25510 ) e*Angst\n\n\nCalculations 3 and 4:\nThe procedure mentioned under Calculation 2 now has to be repeated with {{TAG|IGPAR}}=2 and {{TAG|IGPAR}}=3 (again using the charge density obtained from Calculation 1), to obtain the contributions to the electronic polarization along <math>\\bold{G}_2</math> and <math>\\bold{G}_{3}</math>, respectively.\n\n\nCalculations 5 to 8:\nTo calculate the change in the electronic polarization of NaF due to the displacement of the fluorine sublattice, one should repeat Calculations 1 to 4, using the following {{TAG|POSCAR}} file: \n NaF\n  4.5102\n  0.0 0.5 0.5\n  0.5 0.0 0.5\n  0.5 0.5 0.0\n 1 1\n Direct\n   0.0000000000000000  0.0000000000000000  0.0000000000000000\n   0.5100000000000000  0.5100000000000000  0.4900000000000000\nThis corresponds to a displacement of the F ion by <math>0.01\\times 4.51\\AA</math> along the <math>\\hat{z}</math> direction. The output of the Berry phase calculation using {{TAG|IGPAR}}=1 should now look similar to:\n                                 e<r>_ev=(     0.00000     0.00000     0.00004 ) e*Angst\n                                 e<r>_bp=(     0.00000     0.18028     0.18028 ) e*Angst \n \n  Total electronic dipole moment: p[elc]=(     0.00000     0.18028     0.18031 ) e*Angst\n\n             ionic dipole moment: p[ion]=(     2.25510     2.25510     1.93939 ) e*Angst\n\n\nCollecting the results:\nThe change in the electronic contribution to the polarization due to the F-sublattice displacement should be calculated as follows:\n*Take the average of the <math>e<\\mathrm{r}>_\\mathrm{ev}</math> terms obtained in calculations 2 to 4. Lets call this <math>e<\\mathrm{r}>_{\\mathrm{ev,undist}}</math>\n\n*Add the <math>e<\\mathrm{r}>_{\\mathrm{bp}} </math> terms obtained in calculations 2 to 4. Lets call this <math>e<\\mathrm{r}>_{\\mathrm{bp,undist}}</math>\n\n*The electronic polarization of the undistorted structure is then given by:\n\n<math> e<\\mathrm{r}>_{\\mathrm{el,undist}}=e<\\mathrm{r}>_{\\mathrm{ev,undist}}+e<\\mathrm{r}>_{\\mathrm{bp,undist}} </math>\n\n*Repeat the above three steps for the results obtained using the distorted structure (Calculations 6 to 8), to evaluate <math>e<\\mathrm{r}>_{\\mathrm{ev,dist}}</math>, <math>e<\\mathrm{r}>_{\\mathrm{bp,dist}}</math>, and <math>e<\\mathrm{r}>_{\\mathrm{el,dist}}</math>\n\n*The change in the electronic contribution to the polarization due to the F-sublattice displacement, <math>e\\Delta<\\mathrm{r}>_\\mathrm{el}</math> is then given by <math>e<\\mathrm{r}>_{\\mathrm{el,dist}}-e<\\mathrm{r}>_{\\mathrm{el,undist}}</math>\n\n\nTo calculate the total change in polarization, <math>e\\Delta<\\mathrm{r}> </math>, one should account for the ionic contribution to this change. This contribution can be calculated from p[ion] as given above from\nCalculations 2 and 5:\n<math> \\Delta\\mathrm{p[ion]}=\\mathrm{p[ion]}_{\\mathrm{dist}}-\\mathrm{p[ion]}_{\\mathrm{undist}} </math>.\n\n<math> e\\Delta<\\mathrm{r}> </math> is then given by <math> \\Delta \\mathrm{p[ion]}+e\\Delta<\\mathrm{r}>_\\mathrm{el} </math>. In this example we find <math> e\\Delta<\\mathrm{r}>=0.04489</math> electrons <math>\\AA</math>. Considering that the moved F-sublattice was displaced by 0.045102 <math>\\AA </math>, this calculation yields a Born effective charge for fluorine in NaF of <math>Z^{*}=-0.995 </math>.\n\nN.B.(I) In the case of spinpolarized calculations ({{TAG|ISPIN}}=2),the Berry phase of the orbitals is evaluated separately for each spin direction. This means a ''grep'' on \"<math><\\mathrm{r}> </math>\" will yield two sets of <math> <\\mathrm{r}>_{\\mathrm{ev}} </math> and <math> <\\mathrm{r}>_{\\mathrm{bp}}</math> terms, which have to be added to oneanother to obtain the total electronic polarization of the system.\n\nN.B.(II) One should take care of the fact that the calculated \"Berry phase\" term <math> <\\mathrm{r}>_{\\mathrm{bp}}</math> along <math>\\mathbf{G}_{i}</math> is, in principle, obtained modulo a certain period, determined by the lattice vector <math> \\mathbf{R}_{i} </math> (<math>\\mathbf{R}_{i} \\cdot \\mathbf{G}_{i} = 2 \\pi </math>), the spin multiplicity of the orbitals, the volume of the unit cell, the number of k-point in the \"perpendicular\" grid, and some aspects of the symmetry of the system. More information on this particular aspect of the Berry phase calculations can be found in references <ref name=\"berryformalism1\"/><ref name=\"berryformalism2\"/><ref name=\"berryformalism3\"/><ref name=\"berryformalism4\"/><ref name=\"berryformalism5\"/><ref name=\"berrymmars\"/>.\n\n\n== Related tags and articles ==\n\n{{TAG|IGPAR}}, {{TAG|DIPOL}}, {{TAG|NPPSTR}}, {{TAG|LCALCPOL}}, {{TAG|LCALCEPS}}, {{TAG|LCALCEPS}}, {{TAG|ICHARG}}, {{TAG|ISPIN}}\n\n{{sc|LBERRY|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"berryformalism1\">[http://journals.aps.org/prb/abstract/10.1103/PhysRevB.47.1651 R. D. King-Smith and D. Vanderbilt, Phys. Rev. B 47, 1651 (1993).]</ref>\n<ref name=\"berryformalism2\">[http://journals.aps.org/prb/abstract/10.1103/PhysRevB.48.4442 D. Vanderbilt and R. D. King-Smith, Phys. Rev. B 48, 4442 (1993).]</ref>\n<ref name=\"berryformalism3\">[http://www.tandfonline.com/doi/abs/10.1080/00150199208016065 R. Resta, Ferroelectrtics 136, 51 (1992).]</ref>\n<ref name=\"berryformalism4\">[http://journals.aps.org/rmp/abstract/10.1103/RevModPhys.66.899 R. Resta, Rev. Mod. Phys. 66, 899 (1994).]</ref>\n<ref name=\"berryformalism5\">[R. Resta, in Berry Phase in Electronic Wavefunctions, Troisi\u00e8me Cycle de la Physique en Suisse Romande, Ann\u00e9e Academique 1995-96, (1996).]</ref>\n<ref name=\"berryultrasoft\">[D. Vanderbilt and R. D. King-Smith, in Electronic polarization in the ultrasoft pseudopotential formalism, Unpublished report, (1998).]</ref>\n<ref name=\"berrymmars\">[Available online at http://cms.mpi.univie.ac.at/vasp/Welcome.html.]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]][[Category:Howto]]", "last_revised": "2022-07-19T07:51:37Z"}, "LCORR": {"datatype": "boolean", "options": {}, "summary": "Controls whether Harris corrections are calculated or not.", "wikicode": "{{TAGDEF|LCORR|[logical]|.TRUE.}}\n\nDescription: Controls whether Harris corrections are calculated or not.\n----\n\nBased on the ideas of the [[Harris-Foulkes functional]] it is possible to derive a correction to the forces for non fully self-consistent calculations, we call these corrections Harris corrections. For {{TAG|LCORR}}=''.TRUE.'' these corrections are calculated and included in the stress-tensor and the forces. The contributions are explicitly written to the file {{TAG|OUTCAR}} and help to show how well forces and stress are converged. For surfaces, the correction term might be relatively large and testing has shown that the corrected forces converge much faster to the exact forces than uncorrected forces.\n\n{{sc|LCORR|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Ionic minimization]][[Category:Forces]]", "last_revised": "2022-04-07T08:25:28Z"}, "LDIAG": {"datatype": "boolean", "options": {}, "summary": "This tag determines whether a subspace diagonalization is performed or not within the main algorithm selected by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ALGO\">ALGO</a> or <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ALGO\">IALGO</a>.", "wikicode": "{{TAGDEF|LDIAG|[logical]|.TRUE.}}\n\nDescription: This tag determines whether a subspace diagonalization is performed or not within the main algorithm selected by {{TAG|ALGO}} or {{TAG|IALGO}}.\n----\nFor {{TAG|ALGO}} = <tt>Normal</tt>, <tt>Fast</tt>, and <tt>VeryFast</tt>, VASP performs a diagonalization in the subspace spanned by all orbitals. This is often referred to as the [https://en.wikipedia.org/wiki/Rayleigh%E2%80%93Ritz_method Rayleigh\u2013Ritz method]. \nThis step increases the convergence rate and thus is expedient in most cases.\nFurthermore, the subspace diagonalization sorts the orbital/eigenvalues in ascending order.\n\nFor the direct optimization algorithms (for instance {{TAG|ALGO}} = <tt>All</tt> or <tt>Damped</tt>),\na subspace diagonalization is usually not performed, but in order to improve the accuracy of the calculated forces,\nafter convergence has been reached one single diagonalization in the subspace spanned by all orbitals is performed.\n\nFor {{TAG|ALGO}} = <tt>VeryFast</tt> and <tt>Damped</tt> it is possible to switch off the subspace diagonalization by specifying {{TAG|LDIAG}} = <tt>.FALSE.</tt> in the {{FILE|INCAR}} file.\nSpecifically, for {{TAG|ALGO}} = <tt>VeryFast</tt>, {{TAG|LDIAG}} = <tt>.FALSE.</tt> changes from an exact Rayleigh\u2013Ritz diagonalization to Loewdin perturbation theory.\n\nNote, Loewdin perturbation theory strictly conserves the orbital order, ''i.e.'', the ''n''-th orbital will remain stored in the ''n''-th storage slot and only small rotations into that orbital can occur.\nFor {{TAG|ALGO}} = <tt>Damped</tt> and <tt>All</tt>, the final subspace diagonalization is simply skipped if {{TAG|LDIAG}} = <tt>.FALSE.</tt> is set.\nGenerally using {{TAG|LDIAG}} = <tt>.FALSE.</tt> is only advised, if one wants to maintain a certain orbital order, for instance, when reading the orbitals from an existing {{FILE|WAVECAR}} file.\n\nFor the algorithms {{TAG|ALGO}} = <tt>Normal</tt> or <tt>Fast</tt>, by construction it is not possible to switch off subspace diagonalization, as these algorithms require subspace diagonalizations during the iterative refinement of the orbitals.\nFurthermore, algorithms that minimize the total energy ({{TAG|ALGO}} = <tt>All</tt>) are often too \"greedy\" and tend to alternate the orbital order in the course of the SCF cycle and energy optimization.  \n\nIn summary, the following combinations are potentially useful: \n\n ALGO = VeryFast ; LDIAG = .FALSE.\n\n ALGO = Damped ; LDIAG = .FALSE.\n\nOther combinations using {{TAG|LDIAG}} = <tt>.FALSE.</tt> are likely to yield undesirable results.\n{{NB|warning| {{TAG|ALGO}} {{=}} <tt>VeryFast</tt> is not supported for hybrid functionals. }}\n\n== Related tags and articles ==\n{{TAG|IALGO}},\n{{TAG|ALGO}}\n\n{{sc|LDIAG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:30:07Z"}, "LSELFENERGY": {"datatype": "boolean", "options": {}, "summary": "Controls whether the frequency-dependent self-energy is calculated or not.", "wikicode": "{{TAGDEF|LSELFENERGY|[logical]|.FALSE.}}\n\nDescription: Controls whether the frequency-dependent self-energy is calculated or not.\n\n----\n\nIf {{TAG|LSELFENERGY}}=''.FALSE.'',  QP shifts are evaluated. This is the default behavior.\n\nIf {{TAG|LSELFENERGY}}=''.TRUE.'', the frequency dependent self-energy <math> \\langle \\psi_{n {\\mathbf{k}}} | \\Sigma(\\omega) |\\psi_{n {\\mathbf{k}}} \\rangle </math> is evaluated. Evaluation of QP shifts is bypassed in this case.\n\n== Related tags and articles ==\n{{TAG|GW calculations}}\n\n{{sc|LSELFENERGY|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:05:58Z"}, "LVHAR": {"datatype": "boolean", "options": {}, "summary": "(for VASP.5.2.12 and higher):", "wikicode": "{{TAGDEF|LVHAR|[logical]|.FALSE.}}\n\nDescription (for VASP.5.2.12 and higher): \nThe potential <math>V_{\\text{LOCPOT}}(\\mathbf{r})</math> (in eV) written to the [[LOCPOT]] file is\n\n<math>\nV_{\\text{LOCPOT}}(\\mathbf{r}) = \nV(\\mathbf{r}) + \n\\int \\frac{n(\\mathbf{r'})}{|\\mathbf{r}-\\mathbf{r'}|}d\\mathbf{r'}+\nV_{\\text{XC}}(\\mathbf{r})\n</math>\n\nwhere <math>V(\\mathbf{r})</math> is the ionic potential,\nthe second term is the Hartree potential and \n<math>V_{\\text{XC}}(\\mathbf{r})</math> is the exchange-correlation potential.\n\nIf {{TAG|LVHAR}}=.TRUE. is set in the INCAR file, the file [[LOCPOT]] is written without the <math>V_{\\text{XC}}(\\mathbf{r})</math> contribution being added up.\nUse {{TAG|LVTOT}}=.TRUE. to include <math>V_{\\text{XC}}(\\mathbf{r})</math> contribution.\n\n----\n<!--\nNote that in VASP.5.2.12, the default is to write the entire local potential, including the exchange-correlation potential.\n-->\nSee [[LOCPOT]] to find out how to not include the <math>V_{\\text{XC}}(\\mathbf{r})</math> in older versions of VASP.\n\n{{sc|LVHAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:44:19Z"}, "NBANDSGW": {"datatype": "integer", "options": {}, "summary": "The flag determines how many QP energies are calculated and updated in GW type calculations.", "wikicode": "{{TAGDEF|NBANDSGW|[integer]| twice the number of occupied states}}\n\nDescription: The flag determines how many QP energies are calculated and updated in GW type calculations. \n\n----\n\nThis value usually needs to be increased somewhat for partially or fully self-consistent calculations. Very accurate results\nare only obtained when {{TAG|NBANDSGW}} approaches {{TAG|NBANDS}}, although this  dramatically increases the computational requirements.\n\n== Related tags and articles ==\n{{TAG|NBANDS}}\n\n{{sc|NBANDSGW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:21:14Z"}, "NBANDSO": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDSO\">NBANDSO</a> determines how many occupied orbitals are included in the Casida/<a href=\"https://www.vasp.at/wiki/index.php/BSE_calculations\">BSE calculations</a> or time propagation (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDSO\">ALGO</a>=<span><span class=\"tag-value\">TIMEEV</span>.</span></span>", "wikicode": "{{TAGDEF|NBANDSO|[integer]}}\n{{DEF|NBANDSO|number of occupied orbitals|}}\nDescription: {{TAG|NBANDSO}} determines how many occupied orbitals are included in the Casida/[[BSE calculations]] or time propagation ({{TAG|ALGO}}=TIMEEV.\n\n----\nFor the time-propagation algorithm increasing {{TAG|NBANDSO}} only modestly increases the compute time.\nFor BSE and Casida-type calculations, the compute time  grows with the third power of the number of included occupied and unoccupied bands\n\n<math> (N_{\\mathrm{occ}} N_{\\mathrm{virtual}} N_{\\mathrm{k}})^{3} </math>\n\nand the memory requirements increase quadratically\n\n<math> (N_{\\mathrm{occ}}N_{\\mathrm{virtual}} N_{\\mathrm{k}})^{2} </math>\n\nPlease be aware that symmetry is not exploited in the BSE code, hence memory requirements can be excessive. To allow for calculations on large systems, the BSE code distributes the BSE matrix among all available cores and uses ScaLAPACK for the diagonalization.\n\nVASP always uses the orbitals closest to the Fermi-level, and {{TAG|NBANDSO}} (<math>N_{\\mathrm{occ}}</math>) and {{TAG|NBANDSV}} (<math>N_{\\mathrm{virtual}}</math>) determines how many occupied and unoccupied orbitals are included. The defaults are fairly \"conservative\" and equal the total number of electrons/2 (this usually implies that all occupied states are included). For highly accurate results, {{TAG|NBANDSV}} often needs to be increased, whereas for large systems one is often forced to reduce both values to much smaller numbers. Sometimes qualitative results for bandlike  Wannier-Mott excitons can be obtained even with a single conduction and valence band.\n\n== Related tags and articles ==\n{{TAG|NBANDSV}},\n[[BSE calculations]],\n[[Timepropagation]]\n\n{{sc|NBANDSO|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-06-24T09:17:58Z"}, "NBANDSV": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDSV\">NBANDSV</a> determines how many unoccupied orbitals are included in the Casida/<a href=\"https://www.vasp.at/wiki/index.php/BSE_calculations\">BSE calculations</a> or <a href=\"https://www.vasp.at/wiki/index.php/BSE_calculations\">timepropagation</a>.</span>", "wikicode": "{{TAGDEF|NBANDSV|[integer]}}\n\nDescription: {{TAG|NBANDSV}} determines how many unoccupied orbitals are included in the Casida/[[BSE calculations]] or [[timepropagation]].\n\n----\n\nFor the time-propagation algorithm increasing {{TAG|NBANDSV}} only modestly increases the compute time.\nFor BSE and Casida type calculations, the compute time  grows with the third power of the number of included occupied and unoccupied bands\n\n<math> (N_{\\mathrm{occ}} N_{\\mathrm{virtual}} N_{\\mathrm{k}})^{3} </math>\n\nand the memory requirements increase quadratically\n\n<math> (N_{\\mathrm{occ}}N_{\\mathrm{virtual}} N_{\\mathrm{k}})^{2} </math>\n\nPlease be aware that symmetry is not exploited in the BSE code, hence memory requirements can be excessive. To allow for calculations on large systems, the BSE code distributes the BSE matrix among all available cores and uses ScaLAPACK for the diagonalization.\n\nVASP always uses the orbitals closest to the Fermi-level, and {{TAG|NBANDSO}} (<math>N_{\\mathrm{occ}}</math>) and {{TAG|NBANDSV}} (<math>N_{\\mathrm{virtual}}</math>) determines how many occupied and unoccupied orbitals are included. The defaults are fairly \"conservative\" and equal the total number of electrons/2 (this usually implies that all occupied state are included). For highly accurate results, {{TAG|NBANDSV}} often needs to be increased, whereas for large systems one is often forced to reduce both values to much smaller numbers. Sometimes qualitative results for bandlike  Wannier-Mott excitons can be obtained even with a single conduction and valence band.\n\n== Related tag and articles ==\n{{TAG|NBANDSO}},\n[[BSE calculations]],\n[[timepropagation]]\n\n{{sc|NBANDSV|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]] [[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-06-24T11:24:47Z"}, "NBLK": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBLK\">NBLK</a> determines the blocking factor in many BLAS level 3 routines.</span>", "wikicode": "{{TAGDEF|NBLK|[integer]}}\n{{DEF|NBLK|-1|VASP.4.6|256|in VASP.5.2, if dfast}}\n\nDescription: {{TAG|NBLK}} determines the blocking factor in many BLAS level 3 routines.\n\n----\n\nIn some cases, VASP has to perform a unitary transformation of the current orbitals. This is done using a work array CBLOCK and the following FORTRAN code:\n       DO 100 IBLOCK=0,NPL-1,NBLK\n          ILEN=MIN(NBLK,NPL-IBLOCK)\n          DO 200 N1=1,N\n             DO 200 M=1,ILEN\n             CBLOCK(M,N1)=C(M+IBLOCK,N1)\n             C(M+IBLOCK,N1)=0\n   200    CONTINUE\n C        C(IBLOCK+I,N)=SUM_(J,K) CH(I,K) CBLOCK(K,N)\n          CALL ZGEMM ('N', 'N', ILEN, N, N, (1.,0.), CBLOCK, NBLK, CH, N,\n               &   (1.,0.), C(IBLOCK+1,1), NDIM)\n   100 CONTINUE\n\nZGEMM is the matrix <math>\\times</math> matrix  multiplication command of the BLAS package. The task performed by this call is indicated by the comment line written above the ZGEMM call. Generally {{TAG|NBLK}}=16 or 32 is large enough for super-scalar machines. A large value might be necessary on vector machines for optimal performance ({{TAG|NBLK}}=128).\n\n{{sc|NBLK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]]", "last_revised": "2022-04-08T14:47:05Z"}, "NPPSTR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NPPSTR\">NPPSTR</a> specifies the number of k-points on the strings in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NPPSTR\">IGPAR</a> direction.</span>", "wikicode": "{{TAGDEF|IGPAR|[integer]}}\n\nDescription: {{TAG|NPPSTR}} specifies the number of k-points on the strings in the {{TAG|IGPAR}} direction.\n\n----\n\n{{TAG|NPPSTR}} specifies the number of k-points on the strings <math>\\bold{k}_{j} = \\bold{k}_{\\perp} + j\\bold{G}_{\\parallel}/\\mathrm{NPPSTR} </math> (with <math> j=0,..,\\mathrm{NPPSTR}-1</math>). See also {{TAG|LBERRY}}.\n\n== Related tags and articles ==\n{{TAG|IGPAR}}, {{TAG|LBERRY}}\n\n{{sc|NPPSTR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:Berry phases]]", "last_revised": "2022-07-19T07:59:57Z"}, "NUPDOWN": {"datatype": "positive real", "options": {}, "summary": "Sets the difference between the number of electrons in the up and down spin components.", "wikicode": "{{TAGDEF|NUPDOWN|[positive real]|not set}}\n\nDescription: Sets the difference between the number of electrons in the up and down spin components.\n\n----\n\n\nAllows calculations for a specific spin multiplet, i.e. the difference of the number of electrons in the up and down spin component will be kept fixed to the specified value. There is a word of caution required: If {{TAG|NUPDOWN}} is set in the {{TAG|INCAR}} file the initial moment for the charge density should be the same. Otherwise convergence can slow down. When starting from atomic charge densities ({{TAG|ICHARG}}=2), VASP will try to do this automatically by setting {{TAG|MAGMOM}} to {{TAG|NUPDOWN}}/{{TAG|NIONS}}. The user can of course overwrite this default by specifying a different {{TAG|MAGMOM}} (which should still result in the correct total moment). If one initializes the charge density from the one-electron wavefunctions, the initial moment is always correct, because VASP \"pushes\" the required number of electrons from the down to the up component. Initializing the charge density from the {{TAG|CHGCAR}} file ({{TAG|ICHARG}}=1), however, the initial moment is usually incorrect!\n\nIf no value is set (or {{TAG|NUPDOWN}}=-1) a full relaxation will be performed. This is also the default.\n\n== Related tags and articles ==\n{{TAG|MAGMOM}},{{TAG|ICHARG}}\n\n{{sc|NUPDOWN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]]", "last_revised": "2022-06-22T07:35:34Z"}, "NWRITE": {"datatype": "integer", "options": {"0": null, "1": null, "2": null, "3": null, "4": null}, "summary": "This tag determines how much will be written to the file <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OUTCAR\">OUTCAR</a> ('verbosity tag').", "wikicode": "{{TAGDEF|NWRITE|0 {{!}} 1 {{!}} 2 {{!}} 3 {{!}} 4|2}}\n\nDescription: This tag determines how much will be written to the file {{TAG|OUTCAR}} ('verbosity tag').\n----\n\nThe options for {{TAG|NWRITE}} are given in detail as\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n| NWRITE || 0 || 1 || 2 ||3 \n|-\n| contributions to electronic energy at each electronic iteration || f || f || e || e\n|-\n| convergence information || f || f || e || e\n|-\n| eigenvalues || f+l || i || i || e\n|-\n| DOS + charge density || f+l || i || i || e\n|-\n| total energy and electronic contributions || i || i || i || i\n|-\n| stress || i || i || i || i\n|-\n| basis vectors || f+l || i || i || i\n|-\n| forces || f+l || i || i || i\n|-\n| lattice and space group information for {{TAG|ISYM}}>0 || f || f || f || f\n|-\n| symmetry operations for {{TAG|ISYM}}>0 ||  ||  ||  || f\n|-\n| timing information ||  ||  || X || X\n|}\n\nwhere the following abbreviations have been used\n\n::{| cellpadding=\"5\" cellspacing=\"0\" border=\"1\"\n| f+l|| first and last ionic step\n|-\n| f || first ionic step\n|-\n| i || each ionic step\n|-\n| e || each electronic step\n|-\n| X || when applicable\n|-\n|}\n{{NB|tip|For long molecular-dynamics runs, use {{TAG|NWRITE}}{{=}}0 or {{TAG|NWRITE}}{{=}}1. For short runs use {{TAG|NWRITE}}{{=}}2. {{TAG|NWRITE}}{{=}}3 might give information if something goes wrong.}}\n{{TAG|NWRITE}}=4 is for debugging only.\n== Related tags and articles ==\n\n{{TAG|OUTCAR}}, {{TAG|IALGO}}, {{TAG|IBRION}}, {{TAG|MDALGO}}, {{TAG|ISIF}}, {{TAG|ISYM}}\n\n{{sc|NWRITE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Symmetry]]", "last_revised": "2022-04-08T09:50:54Z"}, "POMASS": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/POMASS\">POMASS</a> describes the mass of each atomic sphere in atomic units.</span>", "wikicode": "{{TAGDEF|POMASS|[real array]|values read from {{TAG|POTCAR}}}}\n\nDescription: {{TAG|POMASS}} describes the mass of each atomic sphere in atomic units.\n\n----\n\n{{TAG|ZVAL}} and {{TAG|POMASS}}  determine the valency and the atomic mass of each atomic species. It should be omitted usually since the values are read from the {{TAG|POTCAR}} file. If incompatibilities exist, VASP will stop.\n\n== Related Tags and Sections ==\n{{TAG|ZVAL}}\n\n{{sc|POMASS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:POTCAR tag]][[Category:Electronic minimization]][[Category:Projector-augmented-wave method]]", "last_revised": "2022-05-06T11:42:24Z"}, "ZVAL": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ZVAL\">ZVAL</a> describes the valency of each atomic sphere.</span>", "wikicode": "{{TAGDEF|ZVAL|[real]|values read from {{TAG|POTCAR}}}}\n\nDescription: {{TAG|ZVAL}} describes the valency of each atomic sphere.\n\n----\n\n{{TAG|ZVAL}} and {{TAG|POMASS}}  determine the valency and the atomic mass of each atomic species and should be omitted usually since the values are read from the {{TAG|POTCAR}} file. If incompatibilities exist, VASP will stop.\n\n== Related tags and articles ==\n{{TAG|POMASS}}, {{FILE|POTCAR}}\n\n{{sc|ZVAL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:POTCAR tag]][[Category:Projector-augmented-wave method]]", "last_revised": "2022-04-06T15:04:59Z"}, "PSTRESS": {"datatype": "real", "options": {}, "summary": "Sets the external pressure in kB or adds corrections to the stress tensor.", "wikicode": "{{TAGDEF|PSTRESS|[real]}}\n\nDescription: Sets the external pressure in kB or adds corrections to the stress tensor.\n\n----\n\nThe unit of {{TAG|PSTRESS}} is kB.\n\nDuring [[Ionic minimization|ionic minimization]], an energy term <math> E= V \\times \\mathrm{PSTRESS} </math> is added to the total energy and the value of  {{TAG|PSTRESS}} is subtracted from  the diagonals of the stress tensor. This allows to perform structure optimization at a specific external pressure.\n\nIn [[Molecular dynamics|molecular-dynamics calculations]] within the {{TAG|NpT ensemble}}, {{TAG|PSTRESS}} controls the target pressure for the Parinello-Rahman{{cite|parrinello:prl:1980}}{{cite|parrinello:jap:1981}} barostat. \n\nGenerally, if a negative value is supplied, the system is under effective tensile strain and during relaxations (or molecular dynamics simulations) the volume \nwill increase. If a positive value is supplied, the system is under compressive strain; this will decrease the volume during relaxations and molecular dynamics simulations.\n\n{{TAG|PSTRESS}} can also be used to correct errors caused by the Pulay stress, i.e., errors in the calculated stress tensor caused by the incomplete plane wave basis set. To correct for Pulay-stress errors, set {{TAG|PSTRESS}} to the negative value of the Pulay stress. The Pulay stress is computed by taking the difference between the external pressure at the desired cutoff and a very large energy cutoff (check the  lines 'external pressure' in the {{TAG|OUTCAR}} file and calculate \npressure at cutoff you want to use <math> -  </math> pressure at large cutoff; this must be a negative value). Before using this tag in this manner, please read the following section carefully: {{TAG | Energy vs volume Volume relaxations and Pulay stress}}.\n\n{{sc|PSTRESS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category: Molecular dynamics]][[Category:Ensembles]][[Category:Ionic minimization]][[Category:Forces]]", "last_revised": "2023-03-22T06:48:50Z"}, "VOSKOWN": {"datatype": "integer", "options": {"1": null, "0": null}, "summary": "Determines whether Vosko-Wilk-Nusair interpolation is used or not.", "wikicode": "{{TAGDEF|VOSKOWN|0 {{!}} 1|0}}\n\nDescription: Determines whether Vosko-Wilk-Nusair interpolation is used or not.\n\n----\n\nThis flag is not relevant for most \"modern\" gradient corrected functionals, such as PBE or PBEsol.\n\nFor the LDA and some \"older\" gradient corrected functionals such as PW91, VASP interpolates the correlation energy from the non-spinpolarized to the fully spinpolarized case in the same way as the exchange energy (Barth-Hedin spin interpolation{{cite|barth:jpc:1972}}. If {{TAG|VOSKOWN}} is set to 1, the interpolation formula according to Vosko, Wilk and Nusair{{cite|vosko1980}} is used (this interpolation is based on the RPA correlation energy of partially spin polarized systems). The  Vosko, Wilk and Nusair interpolation usually enhances the magnetic moments and the magnetic energies. Because the Vosko-Wilk-Nusair interpolation is the interpolation usually applied in the context of gradient corrected functionals, it is desirable to use this interpolation whenever the PW91 functional is applied. Setting this tag is not required for most modern functions, such as the PBE or PBEsol functional, since these functional strictly follow the original publications and disregard the setting of this flag entirely (this implicitly implies that the correlation energy is interpolated according to Vosko, Wilk and Nusair).\n\n== References ==\n<references/>\n\n{{sc|VOSKOWN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]]", "last_revised": "2022-04-08T14:55:36Z"}, "EINT": {"datatype": "real real", "options": {}, "summary": "Specifies the energy range of the bands that are used for the evaluation of the partial charge density needed in {{TAG|Band decomposed charge densities}}. Check also <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBMOD\">NBMOD</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBMOD\">IBAND</a>.", "wikicode": "{{TAGDEF|EINT|[real][real]|not set}}\n\nDescription: Specifies the energy range of the bands that are used for the evaluation of the partial charge density needed in {{TAG|Band decomposed charge densities}}. Check also {{TAG|NBMOD}} and {{TAG|IBAND}}.\n\n----\n\nTwo real values should  be given, if  only one value is specified, the second one is set to <math>\\epsilon_f</math>. If {{TAG|EINT}} is given and {{TAG|NBMOD}} is not specified,\n{{TAG|NBMOD}} is set automatically to -2.\n\n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|NBMOD}},\n{{TAG|IBAND}},\n{{TAG|KPUSE}},\n{{TAG|LSEPB}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|EINT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:11:31Z"}, "NBMOD": {"datatype": "integer", "options": {}, "summary": "Controls which bands are used in the calculation of {{TAG|Band decomposed charge densities}}. Check also <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IBAND\">IBAND</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IBAND\">EINT</a>.", "wikicode": "{{TAGDEF|NBMOD|[integer]|-1}}\n\nDesription: Controls which bands are used in the calculation of {{TAG|Band decomposed charge densities}}. Check also {{TAG|IBAND}} and {{TAG|EINT}}.\n\n----\n\nThis integer variable can take the following values:\n\n* >0  Number of values in the array {{TAG|IBAND}}. If {{TAG|IBAND}} is specified, {{TAG|NBMOD}} is set automatically to the correct value (in that case {{TAG|NBMOD}} should not be set manually in the {{TAG|INCAR}} file).\n\n*0 Take all bands to calculate the charge density, even unoccupied bands are taken into account.\n\n*-1 Calculate the total charge density as usual. This is the default value if nothing else is given.\n\n*-2 Calculate the partial charge density for electrons with their eigenvalues in the range specified by {{TAG|EINT}}.\n\n*-3 The same as before, but the energy range is given vs. the Fermi energy.\n \n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|IBAND}},\n{{TAG|EINT}},\n{{TAG|KPUSE}},\n{{TAG|LSEPB}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|NBMOD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:47:11Z"}, "IBAND": {"datatype": "integer array", "options": {}, "summary": "Controls which bands are used in the calculation of {{TAG|Band decomposed charge densities}}. Check also <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBMOD\">NBMOD</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBMOD\">EINT</a>.", "wikicode": "{{TAGDEF|IBAND|[integer array]}}\n\nDescription: Controls which bands are used in the calculation of {{TAG|Band decomposed charge densities}}. Check also {{TAG|NBMOD}} and {{TAG|EINT}}.\n\n----\n\nCalculates the partial charge density for all bands specified in the array {{TAG|IBAND}}. If {{TAG|IBAND}} is specified in the {{TAG|INCAR}} file and if {{TAG|NBMOD}} is not given, {{TAG|NBMOD}} is set automatically to the size of the array. If {{TAG|IBAND}} is for instance\n IBAND = 20 21 22 23\nthe charge density will be calculated for bands 20 to 23.\n\n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|NBMOD}},\n{{TAG|EINT}},\n{{TAG|KPUSE}},\n{{TAG|LSEPB}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|IBAND|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:20:53Z"}, "LPARD": {"datatype": "boolean", "options": {}, "summary": "Determines whether partial (band or k-point decomposed) charge densities are evaluated. See also {{TAG|Band decomposed charge densities}}.", "wikicode": "{{TAGDEF|LPARD|[logical]|.FALSE.}}\n\nDescription: Determines whether partial (band or k-point decomposed) charge densities are evaluated. See also {{TAG|Band decomposed charge densities}}.\n\n----\n{{NB|warning| The orbitals read from the {{TAG|WAVECAR}} file must be converged in a prior VASP run.}} \nIf only {{TAG|LPARD}} is set and none of the tags discussed in {{TAG|Band decomposed charge densities}}, the total charge density is evaluated from the orbitals and written to the {{TAG|CHGCAR}} file.\n\n== Related tags and articles ==\n{{TAG|IBAND}},\n{{TAG|EINT}},\n{{TAG|NBMOD}},\n{{TAG|KPUSE}},\n{{TAG|LSEPB}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|LPARD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:39:15Z"}, "KPUSE": {"datatype": "integer array", "options": {}, "summary": "Specifies which k points are used in the evaluation of the partial DOS (<a href=\"https://www.vasp.at/wiki/index.php/Band_decomposed_charge_densities\">Band decomposed charge densities</a>).", "wikicode": "{{TAGDEF|KPUSE|[integer array]|not set}}\n\nDescription: Specifies which k points are used in the evaluation of the partial DOS ([[Band decomposed charge densities]]).\n\n----\n\n{{TAG|KPUSE}} is an array of integer values:\n KPUSE = 1 2 3 4\nmeans that the charge density is evaluated and summed for the first four k points. Be careful: VASP changes the k-point weights if {{TAG|KPUSE}} is specified.\n\n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|IBAND}},\n{{TAG|EINT}},\n{{TAG|NBMOD}},\n{{TAG|LSEPB}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|KPUSE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Density of states]]", "last_revised": "2022-04-08T14:25:03Z"}, "LSEPB": {"datatype": "boolean", "options": {}, "summary": "Specifies whether the charge density is calculated for every band separately and written to a file PARCHG.nb.* (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSEPB\">LSEPB</a>=<i>.TRUE.</i>) or whether charge density is merged for all selected bands and written to the files PARCHG.ALLB.* or <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSEPB\">PARCHG</a>.", "wikicode": "{{TAGDEF|LSEPB|[logical]|.FALSE.}}\n\nDescription: Specifies whether the charge density is calculated for every band separately and written to a file PARCHG.nb.* ({{TAG|LSEPB}}=''.TRUE.'') or whether charge density is merged for all selected bands and written to the files PARCHG.ALLB.* or {{TAG|PARCHG}}. \n\n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|IBAND}},\n{{TAG|EINT}},\n{{TAG|NBMOD}},\n{{TAG|KPUSE}},\n{{TAG|LSEPK}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|LSEPB|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:41:50Z"}, "LSEPK": {"datatype": "boolean", "options": {}, "summary": "Write the charge density of every k point to the files PARCHG.*.nk (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSEPK\">LSEPK</a>=<span><span class=\"tag-value\">.TRUE.</span>) or merge them to a single file (</span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSEPK\">LSEPK</a>=.False.).", "wikicode": "{{TAGDEF|LSEPK|[logical]|.FALSE.}}\n\nDescription:  Write the charge density of every k point to the files PARCHG.*.nk ({{TAG|LSEPK}}=.TRUE.) or merge them to a single file ({{TAG|LSEPK}}=.False.). \n\n----\n\nIf the merged file is written, then the weight of each k point is determined from the {{TAG|KPOINTS}} file. Otherwise, the values of the k-point weights are all set to 1.\n\n== Related tags and articles ==\n{{TAG|LPARD}},\n{{TAG|IBAND}},\n{{TAG|EINT}},\n{{TAG|NBMOD}},\n{{TAG|KPUSE}},\n{{TAG|LSEPB}},\n{{TAG|Band decomposed charge densities}}\n\n{{sc|LSEPK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-04-08T14:41:58Z"}, "ODDONLYGW": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ODDONLYGW\">ODDONLYGW</a> allows to avoid the inclusion of the <math>\\Gamma</math> point in the evaluation of response functions (in {{TAG|GW calculations}}).</span>", "wikicode": "{{TAGDEF|ODDONLYGW|[logical]|.FALSE.}}\n\nDescription: {{TAG|ODDONLYGW}} allows to avoid the inclusion of the <math>\\Gamma</math> point in the evaluation of response functions (in {{TAG|GW calculations}}).\n\n----\n\nThe independent particle polarizability  <math>\\chi_{{\\mathbf{q}}}^0 ({\\mathbf{G}}, {\\mathbf{G}}', \\omega)</math> is given by:\n\n<math>\\chi_{{\\mathbf{q}}}^0 ({\\mathbf{G}}, {\\mathbf{G}}', \\omega) =\n\\frac{1}{\\Omega} \\sum_{n,n',{\\mathbf{k}}}2 w_{{\\mathbf{k}}}  (f_{n'{\\mathbf{k}}+{\\mathbf{q}}} - f_{n{\\mathbf{k}}})  \n\\times  \\frac{\\langle \\psi_{n{\\mathbf{k}}}| e^{-i ({\\mathbf{q}}+{\\mathbf{G}}){\\mathbf{r}}} | \\psi_{n'{\\mathbf{k}}+{\\mathbf{q}}}\\rangle\n\\langle \\psi_{n'{\\mathbf{k}}+{\\mathbf{q}}}| e^{i ({\\mathbf{q}}+{\\mathbf{G}}'){\\mathbf{r'}}} | \\psi_{n{\\mathbf{k}}}\\rangle}\n { \\epsilon_{n'{\\mathbf{k}}+{\\mathbf{q}}}-\\epsilon_{n{\\mathbf{k}}} -  \\omega - i \\eta } </math>\n\nIf the <math>\\Gamma</math> point is included in the summation over <math>\\mathbf{k}</math>, convergence is very slow for some materials  (e.g. GaAs).\n\nTo deal with this problem the flag {{TAG|ODDONLYGW}} has been included.\nIn the automatic mode,  the <math>\\mathbf{k}</math>-grid is given by (see Sec. \\ref{sec:autok}): \n\n <math> \\vec{k} = \\vec{b}_{1} \\frac{n_{1}}{N_{1}} + \\vec{b}_{2} \\frac{n_{2}}{N_{2}}  + \\vec{b}_{3} \\frac{n_{3}}{N_{3}} ,\\qquad  n_1=0...,N_1-1 \\quad  n_2=0...,N_2-1 \\quad  n_3=0...,N_3-1. </math>\n\n== Related tags and articles ==\n{{TAG|EVENONLYGW}},\n{{TAG|GW calculations}}\n\n{{sc|ODDONLYGW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:25:01Z"}, "EVENONLYGW": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/EVENONLYGW\">EVENONLYGW</a> allows to restrict the k-points in the evaluation of response functions (in {{TAG|GW calculations}}) to even values.</span>", "wikicode": "{{TAGDEF|EVENONLYGW|[logical]|.FALSE.}}\n\nDescription: {{TAG|EVENONLYGW}} allows to restrict the k-points in the evaluation of response functions (in {{TAG|GW calculations}}) to even values.\n\n----\n\n{{TAG|EVENONLYGW}}=''.TRUE.'' is only of limited use and restricts the summation to k-points with <math>n_{1}+n_{2}+n_{3}</math> being even (<math>\\Gamma</math> point and from there on every second k-point included).\n\n\n== Related tags and articles ==\n{{TAG|ODDONLYGW}},\n{{TAG|GW calculations}}\n\n{{sc|EVENONLYGW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:02:32Z"}, "SMEARINGS": {"datatype": "integer array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SMEARINGS\">SMEARINGS</a> defines the smearing parameters for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SMEARINGS\">ISMEAR</a>=<i>-3</i> in the calculation of the partial occupancies.</span>", "wikicode": "{{TAGDEF|SMEARINGS|[integer array]|not set}}\n\nDescription: {{TAG|SMEARINGS}} defines the smearing parameters for {{TAG|ISMEAR}}=''-3'' in the calculation of the partial occupancies.\n\n----\n\n{{TAG|ISMEAR}}=''-3'' performs a loop over smearing-parameters supplied in the {{TAG|INCAR}} file. In this case a tag\n SMEARINGS = ismear1 sigma1  ismear2 sigma2  ...\nmust be present in the {{TAG|INCAR}} file, supplying different smearing parameters. {{TAG|IBRION}} has to be set to -1 and {{TAG|NSW}} to the number of supplied values ismear<math>i</math>) . The first loop is done using the tetrahedron method with Bl\u00f6chl corrections.\n\n== Related tags and articles ==\n\n{{TAG|IBRION}},\n{{TAG|NSW}},\n{{TAG|ISMEAR}},\n{{TAG|SIGMA}}\n\n{{sc|SMEARINGS|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Molecular dynamics]][[Category:Ionic minimization]]", "last_revised": "2022-04-06T16:01:40Z"}, "DIMER_DIST": {"datatype": "real", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/DIMER_DIST\">DIMER_DIST</a> defines the step size for the numerical differentiation (in <math>\\AA</math>) for the {{TAG|Improved Dimer Method}}.", "wikicode": "{{DISPLAYTITLE:DIMER_DIST}}\n{{TAGDEF|DIMER_DIST|[real]|0.01}}\n\nDescription: The flag {{TAG|DIMER_DIST}} defines the step size for the numerical differentiation (in <math>\\AA</math>) for the {{TAG|Improved Dimer Method}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|Improved Dimer Method}}\n\n{{sc|DIMER_DIST|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category: Transition States]][[Category:Improved dimer method]][[Category:Molecules]]", "last_revised": "2022-04-07T15:55:01Z"}, "FINDIFF": {"datatype": "integer", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/DIMER_DIST\">DIMER_DIST</a> defines whether a forward (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/DIMER_DIST\">FINDIFF</a>=<span><span class=\"tag-value\">1)</span> or a central (</span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/DIMER_DIST\">FINDIFF</a>=<span><span class=\"tag-value\">2)</span> difference formula for the numerical differentiation to compute the curvature along the dimer direction is used in the {{TAG|Improved Dimer Method}}.</span>", "wikicode": "{{TAGDEF|FINDIFF|[integer]|1}}\n\nDescription: The flag {{TAG|DIMER_DIST}} defines whether a forward ({{TAG|FINDIFF}}=1) or a central ({{TAG|FINDIFF}}=2) difference formula for the numerical differentiation to compute the curvature along the dimer direction is used in the {{TAG|Improved Dimer Method}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|Improved Dimer Method}}\n\n{{sc|FINDIFF|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category: Transition States]][[Category:Improved dimer method]][[Category:Molecules]]", "last_revised": "2022-04-08T14:20:07Z"}, "MINROT": {"datatype": "real", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MINROT\">MINROT</a> defines the value for which the dimer is rotated only if the predicted rotation angle is greater than <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MINROT\">MINROT</a> (rad.) in the {{TAG|Improved Dimer Method}}.", "wikicode": "{{TAGDEF|MINROT|[real]|0.01}}\n\nDescription: The flag {{TAG|MINROT}} defines the value for which the dimer is rotated only if the predicted rotation angle is greater than {{TAG|MINROT}} (rad.) in the {{TAG|Improved Dimer Method}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|Improved Dimer Method}}\n\n{{sc|MINROT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Transition States]][[Category:Molecules]][[Category:Improved dimer method]]", "last_revised": "2022-04-08T14:46:01Z"}, "STEP_SIZE": {"datatype": "real", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/STEP_SIZE\">STEP_SIZE</a> defines the trial step size for the optimization step (in <math>\\AA</math> ) in the {{TAG|Improved Dimer Method}}.", "wikicode": "{{DISPLAYTITLE:STEP_SIZE}}\n\n{{TAGDEF|STEP_SIZE|[real]|0.01}}\n\nDescription: The flag {{TAG|STEP_SIZE}} defines the trial step size for the optimization step (in <math>\\AA</math> ) in the {{TAG|Improved Dimer Method}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|Improved Dimer Method}}\n\n{{sc|STEP_SIZE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Transition States]][[Category:Molecules]][[Category:Improved dimer method]]", "last_revised": "2022-04-07T06:52:53Z"}, "STEP_MAX": {"datatype": "real", "options": {}, "summary": "The flag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/STEP_MAX\">STEP_MAX</a> defines the trust radius (upper limit) for the optimization step (in <math>\\AA</math> ) in the {{TAG|Improved Dimer Method}}.", "wikicode": "{{DISPLAYTITLE:STEP_MAX}}\n\n{{TAGDEF|STEP_MAX|[real]|0.1}}\n\nDescription: The flag {{TAG|STEP_MAX}} defines the trust radius (upper limit) for the optimization step (in <math>\\AA</math> ) in the {{TAG|Improved Dimer Method}}.\n\n----\n\n== Related tags and articles ==\n{{TAG|Improved Dimer Method}}\n\n{{sc|STEP_MAX|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Transition States]][[Category:Molecules]][[Category:Improved dimer method]]", "last_revised": "2022-04-07T06:52:46Z"}, "OFIELD_A": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OFIELD_A\">OFIELD_A</a> sets the desired order parameter <math>Q_6</math> in the <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AInterface_pinning\">Interface pinning</a> method.", "wikicode": "{{DISPLAYTITLE:OFIELD_A}}{{TAGDEF|OFIELD_A|[real]}}\n\nDescription: The tag {{TAG|OFIELD_A}} sets the desired order parameter <math>Q_6</math> in the [[:Category:Interface pinning|Interface pinning]] method. \n----\nThe bias potential in the [[:Category:Interface pinning|Interface pinning]] method is written as\n::<math>U_\\text{bias}(\\mathbf{R}) = \\frac\\kappa2 \\left(Q_6(\\mathbf{R}) - A\\right)^2 </math>.\nThe tag {{TAG|OFIELD_A}} sets the desired value of the order parameter <math>A</math>.\n\n== Related tags and articles ==\n[[:Category:Interface pinning|Interface pinning]], {{TAG|OFIELD_Q6_NEAR}}, {{TAG|OFIELD_Q6_FAR}}, {{TAG|OFIELD_KAPPA}}\n\n{{sc|OFIELD_A|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Interface pinning]]", "last_revised": "2022-04-07T14:15:42Z"}, "OFIELD_KAPPA": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OFIELD_KAPPA\">OFIELD_KAPPA</a> sets the strength of the bias potential in the <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AInterface_pinning\">Interface pinning</a> method.", "wikicode": "{{DISPLAYTITLE:OFIELD_KAPPA}}{{TAGDEF|OFIELD_KAPPA|[real]}}\n\nDescription: The tag {{TAG|OFIELD_KAPPA}} sets the strength of the bias potential in the [[:Category:Interface pinning|Interface pinning]] method. \n----\nThe bias potential in the [[:Category:Interface pinning|Interface pinning]] method is written as\n::<math>U_\\text{bias}(\\mathbf{R}) = \\frac\\kappa2 \\left(Q_6(\\mathbf{R}) - A\\right)^2 </math>.\nThe tag {{TAG|OFIELD_KAPPA}} method sets the strength of the bias potential <math>\\kappa</math>. The unit of <math>\\kappa</math> is <math>\\textrm{eV}/(\\textrm{unit} \\,\\, \\textrm{ of }\\,\\, Q)^2</math>.\n\n== Related tags and articles ==\n[[:Category:Interface pinning|Interface pinning]], {{TAG|OFIELD_Q6_NEAR}}, {{TAG|OFIELD_Q6_FAR}}, {{TAG|OFIELD_A}}\n\n{{sc|OFIELD_KAPPA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Interface pinning]]", "last_revised": "2022-04-07T14:16:42Z"}, "OFIELD_Q6_FAR": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OFIELD_Q6_FAR\">OFIELD_Q6_FAR</a> sets the far fading distance  for the computation of a continuous <math>Q_6</math> parameter in the <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AInterface_pinning\">interface-pinning</a> method. </span>", "wikicode": "{{DISPLAYTITLE:OFIELD_Q6_FAR}}{{TAGDEF|OFIELD_Q6_FAR|[real]}}\n\nDescription: {{TAG|OFIELD_Q6_FAR}} sets the far fading distance  for the computation of a continuous <math>Q_6</math> parameter in the [[:Category:Interface pinning|interface-pinning]] method. \n----\n\nThe unit of {{TAG|OFIELD_Q6_FAR}} is <math>\\AA</math>.\n== Related tags and articles ==\n[[:Category:Interface pinning|Interface pinning]], {{TAG|OFIELD_Q6_NEAR}}, {{TAG|OFIELD_A}}, {{TAG|OFIELD_KAPPA}}\n\n{{sc|OFIELD_Q6_FAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Interface pinning]]", "last_revised": "2022-04-07T14:18:56Z"}, "OFIELD_Q6_NEAR": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OFIELD_Q6_NEAR\">OFIELD_Q6_NEAR</a> sets the near-fading distance (in <math>\\AA</math>) for the computation of a continuous <math>Q_6</math> parameter in the <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AInterface_pinning\">interface-pinning</a> method. </span>", "wikicode": "{{DISPLAYTITLE:OFIELD_Q6_NEAR}}{{TAGDEF|OFIELD_Q6_NEAR|[real]}}\n\nDescription: {{TAG|OFIELD_Q6_NEAR}} sets the near-fading distance (in <math>\\AA</math>) for the computation of a continuous <math>Q_6</math> parameter in the [[:Category:Interface pinning|interface-pinning]] method. \n----\n\n== Related tags and articles ==\n[[:Category:Interface pinning|Interface pinning]]\n\n{{sc|OFIELD_Q6_NEAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Interface pinning]]", "last_revised": "2022-04-07T14:20:43Z"}, "LATTICE_CONSTRAINTS": {"datatype": "boolean boolean boolean", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LATTICE_CONSTRAINTS\">LATTICE_CONSTRAINTS</a> determines whether the lattice dynamics are released (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LATTICE_CONSTRAINTS\">LATTICE_CONSTRAINTS</a>=<i>.TRUE.</i>) in the given directions in molecular-dynamics calculations (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LATTICE_CONSTRAINTS\">IBRION</a>=<span><span class=\"tag-value\">0)</span>. </span>", "wikicode": "{{DISPLAYTITLE:LATTICE_CONSTRAINTS}}{{TAGDEF|LATTICE_CONSTRAINTS|[logical][logical][logical]}}\n\nDescription: The tag {{TAG|LATTICE_CONSTRAINTS}} determines whether the lattice dynamics are released ({{TAG|LATTICE_CONSTRAINTS}}=''.TRUE.'') in the given directions in molecular-dynamics calculations ({{TAG|IBRION}}=0). \n----\nThis tag requires three boolean values for the <math>a</math>, <math>b</math> and <math>c</math> direction of the lattice constants, respectively. By setting ''.TRUE.'' the lattice constant in the respective direction is allowed to change.\n\nWe recommend using {{TAG|LATTICE_CONSTRAINTS}} for (orthorombic) liquids in the isobaric-isothermal ([[NpT ensemble|NpT]]) ensemble in the following way:\n {{TAGBL|LATTICE_CONSTRAINTS}} = .FALSE. .FALSE. .TRUE.\n\nThis way the first two lattice constants are not allowed to change. The third lattice constant needs to be free to change to allow volume changes for the barostat (the system is then like a piston). The constraints are necessary for liquids in [[NpT ensemble|NpT]] simulations, because if all lattice degrees of freedom are allowed to relax, irreversible deformations of the cell are very likely to happen that can lead to undesirable results.\n{{NB|warning|{{TAG|LATTICE_CONSTRAINTS}} is only available for molecular-dynamics calculations.}}\n\n== Related tags and articles ==\n{{TAG|IBRION}}, {{TAG|MDALGO}}, [[:Category:Interface pinning|Interface pinning]]\n\n{{sc|LATTICE_CONSTRAINTS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Symmetry]]", "last_revised": "2022-04-08T09:18:57Z"}, "PARAM1": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM1\">PARAM1</a> determines the value corresponding to <math>\\mu</math> in the exchange GGA optB86b/B86R (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM1\">GGA</a>=<span><span class=\"tag-value\">MK)</span> or </span><math>\\beta</math> in the exchange GGA optB88 (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM1\">GGA</a>=<span><span class=\"tag-value\">BO)</span>.</span>", "wikicode": "{{TAGDEF|PARAM1|[real]|0.1234}}\n\nDescription: The tag {{TAG|PARAM1}} determines the value corresponding to <math>\\mu</math> in the exchange GGA optB86b{{cite|klimes:prb:2011}}/B86R{{cite|hamada:prb:2014}} ({{TAG|GGA}}=MK) or <math>\\beta</math> in the exchange GGA optB88{{cite|klimes:jpcm:2010}} ({{TAG|GGA}}=BO).\n----\nNote that {{TAG|PARAM1}} should be set to 0.1234 for the nonlocal optB86b-vdW functional or to 0.1833333333 for the nonlocal optB88-vdW functional.\n\n== Related tags and articles ==\n{{TAG|PARAM2}}, {{TAG|GGA}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|PARAM1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:02:45Z"}, "PARAM2": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM2\">PARAM2</a> determines the value corresponding to <math>\\kappa</math> in the exchange GGA optB86b/B86R (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM2\">GGA</a>=<span><span class=\"tag-value\">MK)</span> or </span><math>\\mu</math> in the exchange GGA optB88 (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PARAM2\">GGA</a>=<span><span class=\"tag-value\">BO)</span>.</span>", "wikicode": "{{TAGDEF|PARAM2|[real]|1.0}}\n\nDescription: The tag {{TAG|PARAM2}} determines the value corresponding to <math>\\kappa</math> in the exchange GGA optB86b{{cite|klimes:prb:2011}}/B86R{{cite|hamada:prb:2014}} ({{TAG|GGA}}=MK) or <math>\\mu</math> in the exchange GGA optB88{{cite|klimes:jpcm:2010}} ({{TAG|GGA}}=BO).\n----\nNote that {{TAG|PARAM2}} should be set to 1.0 for the nonlocal optB86b-vdW functional, to 0.711357 for the nonlocal rev-vdW-DF2 functional or to 0.22 for the nonlocal optB88-vdW functional.\n\n== Related tags and articles ==\n{{TAG|PARAM1}}, {{TAG|GGA}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|PARAM2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:02:31Z"}, "LUSE_VDW": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LUSE_VDW\">LUSE_VDW</a>=<span><span class=\"tag-value\">.TRUE.</span> switches on the use of a nonlocal vdW-DF functional. These functionals depend on the electron density at two points in space and model long-range van der Waals (dispersion) correlation effects.</span></span>", "wikicode": "{{DISPLAYTITLE:LUSE_VDW}}\n{{TAGDEF|LUSE_VDW|[logical]|.FALSE.}}\n\nDescription: {{TAG|LUSE_VDW}}=.TRUE. switches on the use of a nonlocal vdW-DF functional. These functionals depend on the electron density at two points in space and model long-range van der Waals (dispersion) correlation effects.\n----\n\n{{NB|mind|In versions of VASP prior to 6.4.0, a meta-GGA functional (e.g., SCAN) could be combined only with the rVV10 nonlocal functional. Conversely, a GGA functional could be combined only with the original nonlocal functional of Dion ''et al.''. This restriction is lifted since VASP.6.4.0 thanks to the introduction of the {{TAG|IVDW_NL}} tag.}}\n \n== Related tags and articles ==\n{{TAG|GGA}}, {{TAG|METAGGA}}, {{TAG|IVDW_NL}}, {{TAG|LSPIN_VDW}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|LUSE_VDW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2023-02-16T10:35:59Z"}, "OMEGAMIN": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OMEGAMIN\">OMEGAMIN</a> sets the minimum frequency in the frequency grid. </span>", "wikicode": "{{TAGDEF|OMEGAMIN|[real]|minimum transition energy (0.05 for metals)}}\n\nDescription: {{TAG|OMEGAMIN}} sets the minimum frequency in the frequency grid. \n----\n\n== Related tags and articles ==\n{{TAG|OMEGAMAX}},\n{{TAG|OMEGATL}},\n{{TAG|CSHIFT}},\n{{TAG|NOMEGA}}\n\n{{sc|OMEGAMIN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:ACFDT]]", "last_revised": "2022-07-19T10:26:19Z"}, "SYSTEM": {"datatype": "string", "options": {}, "summary": "The \"title string\" defined by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SYSTEM\">SYSTEM</a> is for the user only and should help the user to identify what he/she wants to do with this specific input file.", "wikicode": "{{TAGDEF|SYSTEM|[string]|unknown system}}\n\nDescription: The \"title string\" defined by {{TAG|SYSTEM}} is for the user only and should help the user to identify what he/she wants to do with this specific input file.\n----\nThe {{TAG|SYSTEM}} tag is followed by a string that possibly contains blanks. The string is read in and written to the main output file {{TAG|OUTCAR}}.\n\n{{sc|SYSTEM|Examples|Examples that use this tag}}                         \n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-06T16:05:11Z"}, "MAXMEM": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/MAXMEM\">MAXMEM</a> specifies the maximum memory one MPI rank will attempt to allocate (in MByte).</span>", "wikicode": "{{TAGDEF|MAXMEM|[integer]|2800 (VASP.5.4.4. and older), automatically set as of VASP.6 }}\n\nDescription: {{TAG|MAXMEM}} specifies the maximum memory one MPI rank will attempt to allocate (in MByte).\nSince, the default varies somewhat between VASP versions, it is safer to set this\nflag manually. Currently the flag is only inspected in few selected routines, such as\nthe GW or RPA routines that can use excessive amounts of memory. It is recommended to set\nMAXMEM to the available memory per core minus 200 Mbyte. For instance, if one node is equipped\nwith 12 Gbyte, and 6 MPI ranks share this memory, the recommended setting is 12*1024/6-200 = 1848.\n----\nAs of VASP.6 the default value of MAXMEM is set to 90 percent of the available memory per MPI rank. If more than one compute node is used, the minimum of all nodes is used. The available memory in RAM is estimated by searching the file \"/proc/meminfo\" for the entry \"MemAvailable:\". Note that \"/proc/meminfo\" is present on any Linux system and stored in RAM. In case that the file cannot be found, MAXMEM is set to 2800. \n\n----\n== Related tags and articles ==\n[[GW calculations]], [[ACFDT calculations]],\n[[NTAUPAR]]\n\n{{sc|MAXMEM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:Low-scaling GW and RPA]][[Category: VASP6]][[Category:Memory]]", "last_revised": "2022-07-19T10:13:43Z"}, "LSPECTRALGW": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSPECTRALGW\">LSPECTRALGW</a> specifies to use the spectral method for calculating the self-energy.</span>", "wikicode": "{{TAGDEF|LSPECTRALGW|.FALSE. {{!}} .TRUE.|.FALSE.}}\n\nDescription: {{TAG|LSPECTRALGW}} specifies to use the spectral method for calculating the self-energy.\n----\n\nIf {{TAG|LSPECTRALGW}} = .TRUE. is set, the imaginary part of the self-energy <math>\\Sigma(\\omega)= G W</math> is calculated from the imaginary part of screened potential <math>W(\\omega)</math> by shifting the poles of\n<math>W </math> by <math> \\pm \\epsilon </math>, where <math> \\epsilon </math> are the poles of the Green's function <math> G</math>.\nGenerally, {{TAG|LSPECTRALGW}} affects the compute time very little. QP energies also hardly\nchange when {{TAG|LSPECTRALGW}}  is modified.\nHowever, {{TAG|LSPECTRALGW}} = .TRUE. is usually slightly more robust,\nand should be selected for molecules and other systems with flat dispersion-less bands.  \nOne the other hand, {{TAG|LSPECTRALGW}} = .TRUE. seems to converge slightly slower, \nas the complex shift {{TAG|CSHIFT}} is decreased. Set this flag, if the QP energies\nshow erratic behavior, for instance, if QP energies or Z-factors are not in the expected\nrange of values (0.5<Z<0.9).\n\n\n== Related tags and articles ==\n{{TAG|LSPECTRAL}}\n\n{{sc|LSPECTRALGW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:12:06Z"}, "NMAXFOCKAE": {"datatype": "integer", "options": {"2": null, "1": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NMAXFOCKAE\">NMAXFOCKAE</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NMAXFOCKAE\">LMAXFOCKAE</a> determine whether </span>", "wikicode": "#REDIRECT [[NMAXFOCKAE and LMAXFOCKAE]]\n\n{{TAGDEF|NMAXFOCKAE|1{{!}}2|1}}\n\nDescription: {{TAG|NMAXFOCKAE}} and {{TAG|LMAXFOCKAE}} determine whether \nthe overlap densities in the Fock exchange and correlated wave function methods are accurately reconstructed on the plane wave grid. This flag generally only applies to the Fock-exchange part as well as many-body\npost DFT methods (GW, RPA, MP2, etc.).  Details can be found in the section {{TAG|LMAXFOCKAE}}.\n\n----\n\n\n== Related tags and articles ==\n{{TAG|LMAXFOCK}}, {{TAG|LMAXFOCKAE}}, {{TAG|LFOCKAEDFT}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Hybrids]][[Category:GW]]", "last_revised": "2022-04-08T14:49:51Z"}, "QMAXFOCKAE": {"datatype": "real array", "options": {}, "summary": "The parameter <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/QMAXFOCKAE\">QMAXFOCKAE</a> controls at which wave vectors the local augmentation", "wikicode": "{{TAGDEF|QMAXFOCKAE|[real array] }}\n\nDescription: The parameter {{TAG|QMAXFOCKAE}} controls at which wave vectors the local augmentation \ncharges are fitted to obtain an accurate charge augmentation on the plane wave grid. \n----\n\nWe do not recommend setting these tags manually, except after careful inspection\nof the VASP code (fast_aug.F). The default values are 6.0 \u00c5<sup>-1</sup> \nif {{TAG|NMAXFOCKAE}}=1 (corresponding to 140 eV), and 5.0 and 10 \u00c5<sup>-1</sup> (corresponding to 95 eV and 380 eV)\nfor {{TAG|NMAXFOCKAE}}=2.\n\n== Related tags and articles ==\n{{TAG|NMAXFOCKAE}},\n{{TAG|LMAXFOCKAE}}, {{TAG|LFOCKAEDFT}}\n\n{{sc|QMAXFOCKAE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Projector-augmented-wave method]]", "last_revised": "2022-04-06T15:45:54Z"}, "LFOCKAEDFT": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LFOCKAEDFT\">LFOCKAEDFT</a> forces VASP to use the same charge augmentation </span>", "wikicode": "{{TAGDEF|LFOCKAEDFT|[logical]|.FALSE.}}\n\nDescription: {{TAG|LFOCKAEDFT}} forces VASP to use the same charge augmentation \nfor the Hartree and DFT exchange correlation part as is used in the Fock exchange and\nthe many body beyond DFT methods, such as RPA, MP2 etc.\n----\nThis flag should be set only in exceptional cases. The Hartree as well\nas the DFT part are usually calculated very accurately using the one-centre\nPAW spheres. Restoring the all-electron charge accurately on the plane\nwave grid adds potentially noise, but should not change the results (relative energies,\nforces etc.).\nThe flag, however, needs to be set for optimized potential methods, which\nare supported by VASP but not documented yet.\n\n== Related tags and articles ==\n{{TAG|LMAXFOCKAE}},\n{{TAG|NMAXFOCKAE}},\n{{TAG|QMAXFOCKAE}}\n\n{{sc|LFOCKAEDFT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2022-07-19T10:04:40Z"}, "NMAXFOCKAE_and_LMAXFOCKAE": {"datatype": null, "options": {}, "summary": "<b>NMAXFOCKAE</b> and <b>LMAXFOCKAE</b> determine whether", "wikicode": "{{TAGDEFD|NMAXFOCKAE|1{{!}}2}}\n{{DEF|NMAXFOCKAE|1|}}\n\n\n{{TAGDEFD|LMAXFOCKAE|[integer]}}\n{{DEF|LMAXFOCKAE|-1|for Hartree-Fock and hybrid functionals |   4 | for post DFT methods}}\n\nDescription: '''NMAXFOCKAE''' and '''LMAXFOCKAE''' determine whether \nthe overlap densities in the Fock exchange and correlated wave function methods are accurately reconstructed on the plane wave grid (shape restoration). This flag generally only applies to the Fock-exchange part as well as many-body\npost DFT methods (GW, RPA, MP2, etc.).\n----\n== Detailed Discussion == \nIn the PAW method, the difference between the charge density of the all-electron partial waves <math>\\phi_\\beta</math> and\nthe pseudo partial waves <math>\\tilde \\phi_\\beta</math>\n\n<math>\nQ_{\\alpha\\beta}({\\mathbf r})= \\phi^*_\\alpha({\\mathbf r})\\phi_\\beta({\\mathbf r})  - \\tilde \\phi^*_\\alpha({\\mathbf r})\\tilde \\phi_\\beta({\\mathbf r})\n</math>\n\nis usually treated on spherical grids centered at each atom\n(one-center terms inside the PAW spheres, see [[Projector-augmented-wave_formalism|PAW method]] and more detailed description for {{TAG|LMAXFOCK}}).  To describe long range electrostatic effects, the ''moments'' of the differences of the all-electron and pseudo charge density \nalso need to be added on the plane wave grid (compensation density, see [[Projector-augmented-wave_formalism|PAW method]]).\nThese compensation charges exactly restore the moments of the all-electron density on the plane wave\ngrid. For the Fock exchange the maximum ''L'' quantum number up to which  \nthe augmentation is done is controlled by {{TAG|LMAXFOCK}}.\n\nFor the RPA, GW, and most post DFT methods, the one-center terms are, however, presently\nnot implemented. Depending on the material, this can cause sizable errors\nin particular for 3d and (to a lesser extent) 2p, 4d and 5d elements.\nTo correct for this error, an alternative treatment is implemented\non the plane wave grid for the exchange and correlation contributions. \nThis  allows to restore the all-electron densities accurately already on the plane wave grid\nby specifying the flags '''LMAXFOCKAE''' and '''NMAXFOCKAE'''. This improved\ntreatment\u2014 termed shape restoration \u2014is available for exchange as well as many body correlation contributions.\nFor exchange, the exact one-center terms are also implemented. This means shape restoration is not required and should not change the results.\n\nTo achieve the improved treatment on the plane wave grid, <math> Q_{\\alpha\\beta}({\\mathbf r}) </math> is Fourier transformed  to reciprocal space <math> Q_{\\alpha\\beta}(q) </math> and then expanded\nin a set of orthogonal functions localized at each atomic site. These augmentation charges\nare then added to the pseudo charge densities on the plane wave grid. Shape restoration is only accurate up to a certain plane wave cutoff, typically about 150 eV for '''NMAXFOCKAE''' =1, and 400 eV for '''NMAXFOCKAE''' = 2. Experience shows that '''NMAXFOCKAE''' =1 is sufficient to predict very accurate energy differences and quite accurate quasiparticle energies.  \n\n\n\nFor '''LMAXFOCKAE'''=-1 (the default for DFT and Hartree-Fock calculations), only the moments of the all-electron charge densities are restored on the plane wave grid. This is the default for Hartree-Fock calculations, and the setting is very precise since for Hartree-Fock the one-center terms are implemented in radial grids as for DFT. \n\nIf '''LMAXFOCKAE''' is set to values larger than -1 (and '''NMAXFOCKAE'''=1), not only the moments of the all-electron charge density are restored on the plane wave grid, but also the all-electron charge density is restored up to a typical plane wave energy of 150 eV (controlled by {{TAG|QMAXFOCKAE}}). This setting yields very accurate results for post DFT methods (MP2, RPA, GW, etc.) for most sp bonded materials.  '''LMAXFOCKAE''' is used to specify the maximum spherical (''L'') quantum number up \nto which this more accurate treatment is used. The default is '''LMAXFOCKAE'''=4 for post DFT methods.\nIf no accurate augmentation is desired by the user, simply set '''LMAXFOCKAE'''=-1 in the INCAR file.\n\nIf '''LMAXFOCKAE''' is set to values larger than -1 and '''NMAXFOCKAE'''=2, the charge density is restored accurately on the plane wave grid up to a typical plane wave energy of 400 eV. As before,  '''LMAXFOCKAE''' can be used to specify the maximum spherical (''L'') quantum number up \nto which this more accurate treatment is used.  '''NMAXFOCKAE'''=2 yields very accurate results for \npost DFT methods (MP2, RPA, GW) even for difficult 3d elements. For RPA and MP2 total energy calculations, differences between '''NMAXFOCKAE'''=1 and '''NMAXFOCKAE'''=2 are usually tiny for total energy differences. Since the absolute correlation energies might change, it is, however, vital to use the same setting for\n'''NMAXFOCKAE''' and '''LMAXFOCKAE''', if energy differences are calculated. \nFor GW calculations, increasing  '''NMAXFOCKAE''' from 1 to 2 might change QP energies by 100-200 meV for 3d and late 4d and 5d elements. Despite the improve precision, '''NMAXFOCKAE'''=2 should be used with great caution. Specifically, noise and egg-box effects are introduced as '''NMAXFOCKAE''' is increased. So use\nthis flag only after extensive tests.\n\nThe setting for '''LMAXFOCKAE''' should be also considered carefully. Generally, it suffices to set '''LMAXFOCKAE''' to twice the maximum ''l'' quantum number found in the {{FILE|POTCAR}} file.\nFor instance for sp elements, '''LMAXFOCKAE'''= 2 suffices. For d elements, '''LMAXFOCKAE'''= 4 suffices\n(a d electron can create charge densities with ''L''-quantum numbers up to 4), whereas for f elements, users\nshould test whether '''LMAXFOCKAE'''= 6 is required.\n\nMore details on shape restoration are explained in Ref.{{cite|shishkin:prb:2006}} and {{cite|unzog:prb:2022}}.\n\n== Usefull Settings ==\nIn summary, useful manual settings of '''NMAXFOCKAE'''  and '''LMAXFOCKAE''' are:\n* '''LMAXFOCKAE'''=-1, to switch off the accurate augmentation altogether (reduces noise in correlation energies).\n* '''LMAXFOCKAE'''=4 (or larger) to force an accurate treatment for the charge augmentation on the plane wave grid (can be selected even in Hartree-Fock type calculations, but causes some additional noise).\n* '''NMAXFOCKAE'''=2, to select the very accurate augmentation on the plane wave grid. Please check whether the VASP default setting for '''LMAXFOCKAE''' suffices (OUTCAR file). Use this setting only with care, as it can result in very noisy data for coarse FFT grids.\n\n== Related tags and articles ==\n{{TAG|LMAXFOCK}}, {{TAG|QMAXFOCKAE}}, {{TAG|LFOCKAEDFT}}\n\n{{sc|NMAXFOCKAE|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:Many-body perturbation theory]][[Category:GW]]", "last_revised": "2023-03-29T12:17:31Z"}, "CLNT": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLNT\">CLNT</a> selects for which species the core levels are calculated using the tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLNT\">ICORELEVEL</a>.</span>", "wikicode": "{{TAGDEF|CLNT|[integer]}}\n\nDescription: {{TAG|CLNT}} selects for which species the core levels are calculated using the tag {{TAG|ICORELEVEL}}.\n----\n\nThis option is only used if {{TAG|ICORELEVEL}}=2 is set.\n\n== Related tags and articles ==\n{{TAG|ICORELEVEL}}, {{TAG|CLN}}, {{TAG|CLL}}, {{TAG|CLZ}}\n\n{{sc|CLNT|Examples|Examples that use this tag}}\n----\n\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]]", "last_revised": "2022-07-19T07:56:31Z"}, "CLN": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLN\">CLN</a> selects the main quantum number of the excited electron when using <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLN\">ICORELEVEL</a>.</span>", "wikicode": "{{TAGDEF|CLN|[integer]}}\n\nDescription: {{TAG|CLN}} selects the main quantum number of the excited electron when using {{TAG|ICORELEVEL}}.\n----\n\nThis option is only used if {{TAG|ICORELEVEL}}=2 is set.\n\n== Related tags and articles ==\n{{TAG|ICORELEVEL}}, {{TAG|CLNT}}, {{TAG|CLL}}, {{TAG|CLZ}}\n\n{{sc|CLN|Examples|Examples that use this tag}}\n----\n\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]]", "last_revised": "2022-07-19T07:56:17Z"}, "CLL": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLL\">CLL</a> selects the angular (l) quantum number of the excited electron when using <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLL\">ICORELEVEL</a>.</span>", "wikicode": "{{TAGDEF|CLL|[integer]}}\n\nDescription: {{TAG|CLL}} selects the angular (l) quantum number of the excited electron when using {{TAG|ICORELEVEL}}.\n----\n\nThis option is only used if {{TAG|ICORELEVEL}}=2 is set.\n\n== Related tags and articles ==\n{{TAG|ICORELEVEL}}, {{TAG|CLNT}}, {{TAG|CLN}}, {{TAG|CLZ}}\n\n{{sc|CLL|Examples|Examples that use this tag}}\n----\n\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]]", "last_revised": "2022-07-19T07:56:02Z"}, "CLZ": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLZ\">CLZ</a> selects the electron count of the excited electron when using <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CLZ\">ICORELEVEL</a>.</span>", "wikicode": "{{TAGDEF|CLZ|[real]}}\n\nDescription: {{TAG|CLZ}} selects the electron count of the excited electron when using {{TAG|ICORELEVEL}}.\n----\n\nThis option is only used if {{TAG|ICORELEVEL}}=2 is set.\n\n== Related tags and articles ==\n{{TAG|ICORELEVEL}}, {{TAG|CLNT}}, {{TAG|CLN}}, {{TAG|CLL}}\n\n{{sc|CLZ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]]", "last_revised": "2022-07-19T07:56:45Z"}, "LLRAUG": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LLRAUG\">LLRAUG</a> calculates the two-center contributions to the chemical shift tensor.</span>", "wikicode": "{{TAGDEF|LLRAUG|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: {{TAG|LLRAUG}} calculates the two-center contributions to the chemical shift tensor.\n----\n{{TAG|LLRAUG}} switches on two-center contributions to the NMR chemical shift tensor.\nThese are contributions due to the augmentation\ncurrents in other PAW spheres than the sphere with the atom for which the shift tensor is calculated.\nTypically these contributions are safely neglected.\nIt makes sense to include them for accurate calculations with hard potentials (<tt>*_h</tt>)\non systems containing also (non-hydrogen) atoms from the top rows of the periodic\ntable (B, C, N, O, F), typically with short bonds, e.g. C<sub>2</sub>H<sub>2</sub>, where\neffects up to a few ppm are possible. Effects are most significant for the H shift. For such systems using standard potentials\ntypically introduces larger inaccuracies. The two-center contributions are calculated using\na multipole expansion of the current density that is represented on the plane wave grid.<ref name=\"dewijs:jcp:17\"/>\nThe relevance of {{TAG|LLRAUG}} to achieve basis-set completeness for shieldings is discussed in \nRef.<ref name=\"dewijs:jcp:18\"/> that compares to basis-set converged quantum chemical calculations.<ref name=\"jenssen:jcp:nmr\"/>\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}}\n\n== References ==\n<references>\n<ref name=\"dewijs:jcp:17\">As in Sec. III.A.3 of [http://aip.scitation.org/doi/10.1063/1.4810799 F. Vasconcelos, G.A. de Wijs, R. W. A. Havenith, M. Marsman, G. Kresse, J. Chem. Phys. 139, 014109 (2013).]</ref>\n<ref name=\"dewijs:jcp:18\">[http://aip.scitation.org/doi/10.1063/5.0069637 G.A. de Wijs, G. Kresse, R. W. A. Havenith, M. Marsman, J. Chem. Phys. 155, 234101 (2021).]</ref>\n<ref name=\"jenssen:jcp:nmr\">[https://doi.org/10.1039/C6CP01294A S.R. Jensen, T. Fl\u00e5, D. Jonsson, R.S. Monstad, K. Ruud, L. Frediani, Phys. Chem. Chem. Phys. 18, 21145 (2016).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2022-04-28T14:29:07Z"}, "LBONE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LBONE\">LBONE</a> adds the small <i>B</i>-component to the chemical shift tensor.</span>", "wikicode": "{{TAGDEF|LBONE|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: {{TAG|LBONE}} adds the small ''B''-component to the chemical shift tensor.\n----\n{{TAG|LBONE}} restores the small ''B''-component of the wave function inside\nthe PAW spheres in the linear-response calculation of the NMR chemical shift\ntensor. The POTCARs used in VASP are scalar-relativistic and the\nAE-partial waves are solutions of the scalar-relativistic Kohn-Sham\nequation for the spherical atom. These have a large (''A'') and a small (''B'') component.\nThe latter is not retained on the POTCAR, but approximately restored when {{TAG|LBONE}}=.TRUE.<ref name=\"dewijs:jcp:17\"/>\n{{TAG|LBONE}} only affects the one-center valence contributions to the chemical shift. The contribution of the core electrons includes the ''B''-component by default.\n\n== Related tags and articless ==\n{{TAG|LCHIMAG}}\n\n== References ==\n<references>\n<ref name=\"dewijs:jcp:17\">[http://aip.scitation.org/doi/10.1063/1.4975122 G. A. de Wijs, R. Laskowski, P. Blaha, R. W. A. Havenith, G. Kresse, M. Marsman, J. Chem. Phys. 146, 064115 (2017).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2022-12-12T15:04:46Z"}, "NTAUPAR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NTAUPAR\">NTAUPAR</a> available as of VASP.6, specifies the number of MPI groups sharing same imaginary time grid points. The default value of NTAUPAR is set to the largest possible value supported on the compute nodes to speed up the GW or RPA calculation.</span>", "wikicode": "{{TAGDEF|NTAUPAR|[integer]}}\n{{DEF|NTAUPAR|depends on {{TAG|MAXMEM}} |used in low scaling [[GW approximation of Hedin's equations#lowGW|GW]] and RPA/ACFDT calculations.}}\n\nDescription: {{TAG|NTAUPAR}} available as of VASP.6, specifies the number of MPI groups sharing same imaginary time grid points. The default value of NTAUPAR is set to the largest possible value supported on the compute nodes to speed up the GW or RPA calculation.\n----\nNTAUPAR has the biggest impact on memory usage as well as total runtime for low-scaling GW and RPA calculations. If not found in the {{FILE|INCAR}}, NTAUPAR is set automatically based on the value of {{TAG|MAXMEM}} (the available memory for each rank on each compute node), such that the GW and RPA job fits in the RAM on each compute node. \n\nIf {{TAG|MAXMEM}} is not set, VASP looks in \"/proc/meminfo\" for \"MemAvailable\" to set {{TAG|MAXMEM}} internally, otherwise the code uses the value provided in the {{FILE|INCAR}}. \n\nNTAUPAR={{TAG|NOMEGA}} is the maximum value possible, while NTAUPAR=1 is the smallest possible value. \n== Related tags and articles ==\n{{TAG|NOMEGAPAR}}, \n{{TAG|NOMEGA}}\n\n{{sc|NTAUPAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]] [[Category:ACFDT]][[Category:Performance]][[Category:Parallelization]][[Category:Low-scaling GW and RPA]][[Category:VASP6]][[Category:Memory]]", "last_revised": "2022-07-19T10:24:37Z"}, "NOMEGAPAR": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NOMEGAPAR\">NOMEGAPAR</a> available as of VASP.6, specifies the number of processor groups sharing the same imaginary frequency grid points.</span>", "wikicode": "{{TAGDEF|NOMEGAPAR|[integer]}}\n{{DEF|NOMEGAPAR|NOMEGA|used in low scaling [[GW approximation of Hedin's equations#lowGW|GW]] and RPA/ACFDT calculations.}}\nDescription: {{TAG|NOMEGAPAR}} available as of VASP.6, specifies the number of processor groups sharing the same imaginary frequency grid points.\n----\n== Related tags and articles ==\n{{TAG|NTAUPAR}}, \n{{TAG|NOMEGA}}\n\n{{sc|NOMEGAPAR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]] [[Category:ACFDT]][[Category:Performance]][[Category:Parallelization]][[Category:Low-scaling GW and RPA]][[Category:VASP6]]", "last_revised": "2022-07-19T10:23:11Z"}, "NBSEEIG": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBSEEIG\">NBSEEIG</a> sets the number of BSE eigenvectors written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BSEFATBAND\">BSEFATBAND</a> output file.</span>", "wikicode": "{{TAGDEF|NBSEEIG|[integer]|1}}\n\nDescription: {{TAG|NBSEEIG}} sets the number of BSE eigenvectors written to the {{FILE|BSEFATBAND}} output file.\n== Related tags and sections ==\n{{TAG|BSE}}, {{TAG|BSEFATBAND}}, [[BSE calculations]]\n\n{{sc|NBSEEIG|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-07-20T07:53:04Z"}, "HITOLER": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HITOLER\">HITOLER</a> specifies the convergence parameter for the iterative Hirschfeld partitioning in the Tkatchenko-Scheffler method.</span>", "wikicode": "{{TAGDEF|HITOLER|[real]|<math>5\\times10^{-5}</math>}}\n\nDescription: {{TAG|HITOLER}} specifies the convergence parameter for the iterative Hirschfeld partitioning in the Tkatchenko-Scheffler method.\n----\n\n== Related tags and articles ==\n{{TAG|LVDW}},\n{{TAG|DFT-D2}},\n{{TAG|DFT-D3}},\n{{TAG|Tkatchenko-Scheffler method}},\n{{TAG|Tkatchenko-Scheffler method with iterative Hirshfeld partitioning}},\n{{TAG|Many-body dispersion energy}},\n{{TAG|dDsC dispersion correction}}\n\n\n{{sc|HITOLER|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2022-07-20T08:46:31Z"}, "LORBMOM": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LORBMOM\">LORBMOM</a> specifies whether the orbital moments are written out or not (in a calculation using <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LORBMOM\">LSORBIT</a>=<span><span class=\"tag-value\">.TRUE.</span>).</span></span>", "wikicode": "{{TAGDEF|LORBMOM|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: {{TAG|LORBMOM}} specifies whether the orbital moments are written out or not (in a calculation using {{TAG|LSORBIT}}=.TRUE.).\n----\nIf {{TAG|LORBMOM}}=.TRUE. is set VASP will  use the projectors of the PAW potentials to calculate the\norbital moment within the PAW spheres, and write them to the {{FILE|OUTCAR}} file.\n\n== Related tags and articles ==\n{{TAG|LSORBIT}},\n{{TAG|LORBIT}}\n\n{{sc|LORBMOM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]]", "last_revised": "2022-04-08T14:39:03Z"}, "LVDWEXPANSION": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVDWEXPANSION\">LVDWEXPANSION</a> decides whether to write the two- to six- body contributions to MBD dispersion energy in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OUTCAR\">OUTCAR</a> file.</span>", "wikicode": "{{TAGDEF|LVDWEXPANSION|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAGDEF|LVDWEXPANSION}} decides whether to write the two- to six- body contributions to MBD dispersion energy in the {{TAG|OUTCAR}} file.\n----\n\n== Related tags and articles ==\n{{TAG|IVDW}},\n{{TAG|Many-body dispersion energy}},\n{{TAG|LSCSGRAD}}\n\n{{sc|LVDWEXPANSION|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2022-04-08T20:41:43Z"}, "LSCSGRAD": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCSGRAD\">LSCSGRAD</a> decides whether to compute gradients in the calculation of the MBD dispersion energy or the SCS contribution.</span>", "wikicode": "{{TAGDEF|LSCSGRAD|.TRUE. {{!}} .FALSE.|.TRUE.}}\n\nDescription: {{TAGDEF|LSCSGRAD}} decides whether to compute gradients in the calculation of the MBD dispersion energy or the SCS contribution.\n----\n\n== Related tags and articles ==\n{{TAG|IVDW}},\n{{TAG|Many-body dispersion energy}},\n{{TAG|Self-consistent screening in Tkatchenko-Scheffler method}},\n{{TAG|LVDWEXPANSION}}\n\n{{sc|LVDWEXPANSION|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:38:46Z"}, "SCSRAD": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/SCSRAD\">SCSRAD</a> defines the cutoff radius (in <math>\\AA</math>) used in the calculation of <math>$\\tau_{ij}$</math> within the Tkatchenko-Scheffler method {{TAG|Self-consistent screening in Tkatchenko-Scheffler method}}.</span>", "wikicode": "{{TAGDEF|SCSRAD|[real]|120}}\n\nDescription: {{TAG|SCSRAD}} defines the cutoff radius (in <math>\\AA</math>) used in the calculation of <math>$\\tau_{ij}$</math> within the Tkatchenko-Scheffler method {{TAG|Self-consistent screening in Tkatchenko-Scheffler method}}.\n----\n\n== Related tags and articles ==\n{{TAG|Self-consistent screening in Tkatchenko-Scheffler method}}\n\n{{sc|SCSRAD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:54:39Z"}, "VDW_RADIUS": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_RADIUS\">VDW_RADIUS</a> defines the cutoff radius (in <math>\\AA</math>) for the pair interactions used in the {{TAG|DFT-D2}} and {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_RADIUS}}\n{{TAGDEF|VDW_RADIUS|[real]}}\n\nDescription: {{TAG|VDW_RADIUS}} defines the cutoff radius (in <math>\\AA</math>) for the pair interactions used in the {{TAG|DFT-D2}} and {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}},\n{{TAG|DFT-D3}}\n\n{{sc|VDW_RADIUS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:29Z"}, "VDW_S6": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_S6\">VDW_S6</a> defines the global scaling factor <math>s_{6}</math> in the {{TAG|DFT-D2}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_S6}}\n{{TAGDEF|VDW_S6|[real]|0.75}}\n\nDescription: {{TAG|VDW_S6}} defines the global scaling factor <math>s_{6}</math> in the {{TAG|DFT-D2}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}\n\n{{sc|VDW_S6|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:36Z"}, "VDW_S8": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_S8\">VDW_S8</a> defines the damping function parameter <math>s_{8}</math> in the {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_S8}}\n{{TAGDEF|VDW_S8|[real]|1.0}}\n\nDescription: {{TAG|VDW_S8}} defines the damping function parameter <math>s_{8}</math> in the {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D3}}\n\n{{sc|VDW_S8|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:43Z"}, "VDW_CNRADIUS": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_CNRADIUS\">VDW_CNRADIUS</a> defines the cutoff radius (in <math>\\AA</math>) for the calculation of the coordination numbers used in the {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_CNRADIUS}}\n{{TAGDEF|VDW_CNRADIUS|[real]}}\n\nDescription: {{TAG|VDW_CNRADIUS}} defines the cutoff radius (in <math>\\AA</math>) for the calculation of the coordination numbers used in the {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D3}}\n\n{{sc|VDW_CNRADIUS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:46:52Z"}, "VDW_A1": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_A1\">VDW_A1</a> defines the damping function parameter <math>a_{1}</math> in the {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_A1}}\n{{TAGDEF|VDW_A1|[real]|1.0}}\n\nDescription: {{TAG|VDW_A1}} defines the damping function parameter <math>a_{1}</math> in the {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D3}}\n\n{{sc|VDW_A1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:45:59Z"}, "VDW_A2": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_A2\">VDW_A2</a> defines the damping function parameter <math>a_{2}</math> in the {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_A2}}\n{{TAGDEF|VDW_A2|[real]}}\n\nDescription: {{TAG|VDW_A2}} defines the damping function parameter <math>a_{2}</math> in the {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D3}}\n\n{{sc|VDW_A2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:46:07Z"}, "VDW_SR": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_SR\">VDW_SR</a> defines the damping function parameter <math>s_{R}</math> (or scaling factor) in the {{TAG|DFT-D2}} and {{TAG|DFT-D3}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_SR}}\n{{TAGDEF|VDW_SR|[real]|1.0}}\n\nDescription: {{TAG|VDW_SR}} defines the damping function parameter <math>s_{R}</math> (or scaling factor) in the {{TAG|DFT-D2}} and {{TAG|DFT-D3}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}},\n{{TAG|DFT-D3}}\n\n{{sc|VDW_SR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:50Z"}, "VDW_D": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_D\">VDW_D</a> defines the damping parameter <math>d</math> in the {{TAG|DFT-D2}} method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_D}}\n{{TAGDEF|VDW_D|[real]|20}}\n\nDescription: {{TAG|VDW_D}} defines the damping parameter <math>d</math> in the {{TAG|DFT-D2}} method.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}\n\n{{sc|VDW_D|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:28:00Z"}, "VDW_C6": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_C6\">VDW_C6</a> defines the <math>C_6</math> parameters (<math>\\mathrm{Jnm}^{6}\\mathrm{mol}^{-1}</math>) for each species defined in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_C6\">POSCAR</a> file within the {{TAG|DFT-D2}} and <a href=\"https://www.vasp.at/wiki/index.php/Tkatchenko-Scheffler_method\">Tkatchenko-Scheffler</a> methods.</span>", "wikicode": "{{DISPLAYTITLE:VDW_C6}}\n{{TAGDEF|VDW_C6|[real (array)]}}\n\nDescription: {{TAG|VDW_C6}} defines the <math>C_6</math> parameters (<math>\\mathrm{Jnm}^{6}\\mathrm{mol}^{-1}</math>) for each species defined in the {{TAG|POSCAR}} file within the {{TAG|DFT-D2}} and [[Tkatchenko-Scheffler_method|Tkatchenko-Scheffler]] methods.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}\n{{TAG|Tkatchenko-Scheffler_method}}\n\n{{sc|VDW_C6|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:46:36Z"}, "VDW_R0": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_R0\">VDW_R0</a> defines the <math>R_0</math> parameters (<math>\\AA</math>) for each species defined in the {{TAG|DFT-D2}} and <a href=\"https://www.vasp.at/wiki/index.php/Tkatchenko-Scheffler_method\">Tkatchenko-Scheffler</a> methods.</span>", "wikicode": "{{DISPLAYTITLE:VDW_R0}}\n{{TAGDEF|VDW_R0|[real (array)]}}\n\nDescription: {{TAG|VDW_R0}} defines the <math>R_0</math> parameters (<math>\\AA</math>) for each species defined in the {{TAG|DFT-D2}} and [[Tkatchenko-Scheffler_method|Tkatchenko-Scheffler]] methods.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}\n{{TAG|Tkatchenko-Scheffler_method}}\n\n{{sc|VDW_R0|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:11Z"}, "LVDW_EWALD": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVDW_EWALD\">LVDW_EWALD</a> decides whether lattice summation in <math>E_{disp}</math> expression by means of Ewald's summation is computed in the pairwise van der Waals corrections schemes, including   </span>", "wikicode": "{{DISPLAYTITLE:LVDW_EWALD}}\n{{TAGDEF|LVDW_EWALD|logical|.FALSE.}}\n\nDescription: {{TAG|LVDW_EWALD}} decides whether lattice summation in <math>E_{disp}</math> expression by means of Ewald's summation is computed in the pairwise van der Waals corrections schemes, including   \n{{TAG|DFT-D2}}, {{TAG|Tkatchenko-Scheffler method}}, or {{TAG|Tkatchenko-Scheffler method with iterative Hirshfeld partitioning}}. Available in VASP.5.3.4 and later.\n----\n\n== Related tags and articles ==\n{{TAG|DFT-D2}}\n\n{{sc|LVDW_EWALD|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2022-10-04T13:27:23Z"}, "IEPSILON": {"datatype": "integer", "options": {"1": null, "2": null, "3": null, "4": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IEPSILON\">IEPSILON</a> determines along which Cartesian direction the E field is applied.</span>", "wikicode": "{{TAGDEF|IEPSILON|1 {{!}} 2 {{!}} 3 {{!}} 4}}\n\nDescription: {{TAG|IEPSILON}} determines along which Cartesian direction the E field is applied.\n\n----\n*{{TAG|IEPSILON}}=1 x direction\n*{{TAG|IEPSILON}}=2 y direction\n*{{TAG|IEPSILON}}=3 z direction\n*{{TAG|IEPSILON}}=4 x, y and z direction; three indpendent calculations are performed\n{{NB|important|{{TAG|IEPSILON}} only applies to the time-propagation algorithm.}}\n\n== Related tags and articles ==\n{{TAG|BSE calculations}}\n\n{{sc|IEPSILON|Examples|Examples that use this tag}}\n\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-07T12:02:07Z"}, "CH_LSPEC": {"datatype": "boolean", "options": {}, "summary": "This flag controls whether the imaginary part of the dielectric function for a selected core electron is calculated and written to the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/OUTCAR\">OUTCAR</a> file or not.", "wikicode": "{{DISPLAYTITLE:CH_LSPEC}}\n{{TAGDEF|CH_LSPEC|[logical]|.FALSE.}}\n\nDescription: This flag controls whether the imaginary part of the dielectric function for a selected core electron is calculated and written to the {{TAG|OUTCAR}} file or not. \n----\nHow to calculate XAS spectra from core-hole calculations is explained here:  [[SCH calculations|SCH calculations]].\n\nThis feature is only available from VASP version 6.0 or higher.\n\nThe broadening type of the spectrum is controlled by {{TAG|ISMEAR}} and the broadening in eV is set by {{TAG|CH_SIGMA}}. We recommend to use a very small Gaussian broadening {{TAG|ISMEAR}}=0 and {{TAG|CH_SIGMA}}<math>\\le</math>0.001 in the calculations and broaden the spectrum in post processing. If another type of {{TAG|ISMEAR}} is required for the electronic calculation, one can run that in a first step and use the converged {{TAG|WAVECAR}} from that step together with {{TAG|ALGO}}=''None'' and {{TAG|ISMEAR}}=0 in a second step to obtain the spectrum.\n\n{{NB|warning|For XAS calculations it is strongly recommended to use the available GW PAW potentials for the {{TAG|POTCAR}} files, since many standard potentials don't have projectors with quantum numbers 2 or larger and the GW potentials are more exact for excited states than the standard potentials.}}\n\n== Related tags and articles ==\n{{TAG|CH_SIGMA}}, {{TAG|CH_NEDOS}}, {{TAG|ICORELEVEL}}, {{TAG|CLNT}}, {{TAG|CLN}}, {{TAG|CLL}}, {{TAG|CLZ}}, {{TAG|ISMEAR}}\n\n{{sc|CH_LSPEC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]][[Category:VASP6]]", "last_revised": "2022-07-19T07:54:25Z"}, "CH_SIGMA": {"datatype": "real", "options": {}, "summary": "This tag specifies the width of the Gaussian broadening in eV of the imaginary dielectric function for a core electron.", "wikicode": "{{DISPLAYTITLE:CH_SIGMA}}\n{{TAGDEF|CH_SIGMA|[real]|0.3}}\n\nDescription: This tag specifies the width of the Gaussian broadening in eV of the imaginary dielectric function for a core electron.\n----\nThis feature is only available from VASP version 6.0 or higher.\n\n== Related tags and articles ==\n{{TAG|CH_LSPEC}},{{TAG|CH_NEDOS}},{{TAG|ICORELEVEL}},{{TAG|CLNT}},{{TAG|CLN}},{{TAG|CLL}},{{TAG|CLZ}}\n\n{{sc|CH_SIGMA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]][[Category:VASP6]]", "last_revised": "2022-10-13T14:34:09Z"}, "LSPIRAL": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "set <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSPIRAL\">LSPIRAL</a>=<span><span class=\"tag-value\">.TRUE.</span> to represent spin spirals by means of a generalized Bloch condition.</span>", "wikicode": "{{TAGDEF|LSPIRAL|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: set {{TAG|LSPIRAL}}=.TRUE. to represent spin spirals by means of a generalized Bloch condition.\n----\nSee the [[Spin spirals|description of spin spiral calculations]] for more details.\n\n== Related tags and articles ==\n[[Spin spirals]],\n{{TAG|QSPIRAL}},\n{{TAG|LZEROZ}}\n\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Spin spirals]]", "last_revised": "2022-04-08T14:42:54Z"}, "QSPIRAL": {"datatype": "real array", "options": {}, "summary": "the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/QSPIRAL\">QSPIRAL</a>-tag specifies the spin spiral propagation vector.", "wikicode": "{{TAGDEF|QSPIRAL|[real array]|3*0.0}}\n\nDescription: the {{TAG|QSPIRAL}}-tag specifies the spin spiral propagation vector.\n----\n{{TAG|QSPIRAL}} specifies the spin spiral propagation vector in direct coordinates of the reciprocal lattice.\n\nSee the [[Spin spirals|description of spin spiral calculations]] for more details.\n\n== Related tags and articles ==\n[[Spin spirals]],\n{{TAG|LSPIRAL}},\n{{TAG|LZEROZ}}\n\n{{sc|QSPIRAL|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Spin spirals]]", "last_revised": "2022-04-08T14:54:05Z"}, "LZEROZ": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LZEROZ\">LZEROZ</a>=<span><span class=\"tag-value\">.TRUE.</span> the </span><i>z</i>-component of the spin-spiral magnetisation density will be forced to be and to remain zero.", "wikicode": "{{TAGDEF|LZEROZ|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: for {{TAG|LZEROZ}}=.TRUE. the ''z''-component of the spin-spiral magnetisation density will be forced to be and to remain zero.\n----\nSee the [[Spin spirals|description of spin spiral calculations]] for more details.\n\n== Related tags and articles ==\n[[Spin spirals]],\n{{TAG|LSPIRAL}},\n{{TAG|QSPIRAL}}\n\n----\n\n[[Category:INCAR tag]][[Category:Magnetism]][[Category:Spin spirals]]", "last_revised": "2022-04-08T14:45:02Z"}, "NTARGET_STATES": {"datatype": "integer array", "options": {}, "summary": "Controls which Wannier states are excluded in constrained random phase approximation. Check also <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NCRPA_BANDS\">NCRPA_BANDS</a>.", "wikicode": "{{DISPLAYTITLE:NTARGET_STATES}}\n{{TAGDEF|NTARGET_STATES|[integer array]}}\n\nDescription: Controls which Wannier states are excluded in constrained random phase approximation. Check also {{TAG|NCRPA_BANDS}}.\n\n----\nThis tag is effective for {{TAG|ALGO}}=CRPA and ignored otherwise.\nFor instance \n NTARGET_STATES = 1 2 4 \nselects the Wannier state 1, 2 and 4, where the ordering of the Wannier states depends on the chosen basis set.\n\n=== Related tags and articles === \n{{TAG|ALGO}},\n{{TAG|NCRPA_BANDS}},\n{{TAG|DMFT_BASIS}}\n\n{{sc|NTARGET_STATES|Examples|Examples that use this tag}}\n----\n\n\n[[Category:INCAR tag]][[Category:Wannier functions]][[Category:Many-body perturbation theory]][[Category:Constrained-random-phase approximation]][[Category:VASP6]]", "last_revised": "2022-07-19T12:44:23Z"}, "LWRITE_WANPROJ": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWRITE_WANPROJ\">LWRITE_WANPROJ</a> determines whether the Wannier projection file <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWRITE_WANPROJ\">WANPROJ</a> is written.</span>", "wikicode": "{{DISPLAYTITLE:LWRITE_WANPROJ}}\n{{TAGDEF|LWRITE_WANPROJ|[logical]|.FALSE.}}\n\nDescription: {{TAG|LWRITE_WANPROJ}} determines whether the Wannier projection file {{TAG|WANPROJ}} is written.\n----\nIf {{TAG|WANPROJ}} is present, VASP skips the Wannier projection and reads the effective projectors U<sub>nk</sub> from the {{TAG|WANPROJ}} file for each k point. \n\n== Related tags and articles ==\n{{TAG|LWANNIER90}},\n{{TAG|LWANNIER90_RUN}},\n{{TAG|LDOWNSAMPLE}}\n\n{{sc|LWRITE_WANPROJ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:57:22Z"}, "NCRPA_BANDS": {"datatype": "integer array", "options": {}, "summary": "Controls which bands are excluded in the constrained random phase approximation. Check also <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NTARGET_STATES\">NTARGET_STATES</a>.", "wikicode": "{{DISPLAYTITLE:NCRPA_BANDS}}\n{{TAGDEF|NCRPA_BANDS|[integer array]}}\n\nDescription: Controls which bands are excluded in the constrained random phase approximation. Check also {{TAG|NTARGET_STATES}}.\n\n----\nThis tag is effective for {{TAG|ALGO}}=CRPA and ignored otherwise.\n\nFor instance \n NCRPA_BANDS = 21 22 23 \nremoves all screening effects between bands 21, 22 and 23 in the random phase approximation of the screened Coulomb interaction. \n\n=== Related tags and articles === \n{{TAG|ALGO}},\n{{TAG|NTARGET_STATES}}\n\n{{sc|NCRPA_BANDS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Constrained-random-phase approximation]][[Category:VASP6]]", "last_revised": "2022-07-19T12:44:13Z"}, "VCUTOFF": {"datatype": "real", "options": {}, "summary": "The parameter <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VCUTOFF\">VCUTOFF</a> sets the energy cutoff for bare Coulomb matrix elements and controls the basis set for the bare Coulomb interaction.", "wikicode": "{{TAGDEF|VCUTOFF|[real] | 1.1 {{TAG|ENCUTGW}}}}\n\n\nDescription: The parameter {{TAG|VCUTOFF}} sets the energy cutoff for bare Coulomb matrix elements and controls the basis set for the bare Coulomb interaction.\n\n== Related tags and articles ==\n{{TAG|ENCUTGW}},\n{{TAG|CRPA calculations}}\n\n{{sc|VCUTOFF|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Constrained-random-phase approximation]]", "last_revised": "2022-07-19T12:44:30Z"}, "LAECHG": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "when <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LAECHG\">LAECHG</a>=<span><span class=\"tag-value\">.TRUE.</span> the </span><i>all-electron</i> charge density will be reconstructed explicitly and written to files.", "wikicode": "{{TAGDEF|LAECHG|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: when {{TAG|LAECHG}}=.TRUE. the ''all-electron'' charge density will be reconstructed explicitly and written to files.\n----\nIf {{TAG|LAECHG}}=.TRUE. is set VASP will reconstruct the ''all-electron'' charge density on the so-called \"fine\" FFT-grid.\nThis \"fine\" FFT-grid consists of {{TAG|NGXF}}&times;{{TAG|NGYF}}&times;{{TAG|NGZF}} points in real space (''i.e.'', the grid that is used to represent the augmented pseudo charge densities of the USPP and PAW methods).\n\nIn fact, for {{TAG|LAECHG}}=.TRUE., VASP will reconstruct three distinct ''all-electron'' densities:\n\n# the core density.\n# the proto-atomic valence density (overlapping atomic charge densities).\n# the self-consistent valence density.\n\nThese are written to the files {{FILE|AECCAR0}}, {{FILE|AECCAR1}}, and {{FILE|AECCAR2}}, respectively.\nThe first two of these files are written at the start of the run, whereas the last is written at the end after self-consistency has been reached.\n\n'''N.B.:''' In the language of the [[Projector-augmented-wave_formalism|PAW method]] an \"all-electron\" density does '''not''' refer to the ''density of all electrons'', instead it denotes a density that includes all the nodal features near the nucleus associated with the ''true'' (as opposed to the ''pseudized'') one-electron orbitals.\nWithin the PAW method, the ''all-electron'' density arising from the one-electron pseudo orbitals <math>\\{ \\widetilde{\\psi}_{n\\mathbf{k}} \\}</math> is given by:\n:<math>\nn(\\mathbf{r})=\n\\sum_{n{\\mathbf{k}}} f_{n{\\mathbf{k}}}\n\\langle \\widetilde{\\psi}_{n\\mathbf{k}}| \\mathbf{r}\\rangle\\langle  \\mathbf{r}| \\widetilde{\\psi}_{n\\mathbf{k}} \\rangle +\n\\sum_{\\alpha, \\beta} \n(\n  \\phi^\\ast_\\alpha(\\mathbf{r})\n  \\phi_\\beta (\\mathbf{r})\n -\n  \\widetilde{\\phi}^\\ast_\\alpha(\\mathbf{r})\n  \\widetilde{\\phi}_\\beta (\\mathbf{r})\n)\n\\sum_{n{\\mathbf{k}}} f_{n{\\mathbf{k}}}\n\\langle\\widetilde{\\psi}_{n\\mathbf{k}}|\\widetilde{p}_\\alpha\\rangle\n\\langle\\widetilde{p}_\\beta| \\widetilde{\\psi}_{n\\mathbf{k}}\\rangle\n</math>\n\nNormally one does not attempt to reconstruct ''all-electron'' densities explicitly since the second term on the right-hand side varies rapidly near the nuclei and is too costly to expand in-plane waves (see the bit about [[Projector-augmented-wave_formalism|augmentation and compensation charges]]). For {{TAG|LAECHG}}=.TRUE., however, this reconstruction is exactly the thing that is done.\n\n== Related tags and articles ==\n{{FILE|AECCAR0}}, {{FILE|AECCAR1}}, {{FILE|AECCAR2}}\n\n{{sc|LAECHG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category: Charge density]]", "last_revised": "2022-05-18T12:47:35Z"}, "HFRCUT": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFRCUT\">HFRCUT</a> specifies how the <a href=\"https://www.vasp.at/wiki/index.php/Coulomb_singularity\">Coulomb kernel is approximated at G=0</a> when the Fock energy and the exchange potential are evaluated.</span>", "wikicode": "{{TAGDEF|HFRCUT|[real]|0}}\n\nDescription: {{TAG|HFRCUT}} specifies how the [[Coulomb singularity|Coulomb kernel is approximated at G=0]] when the Fock energy and the exchange potential are evaluated.\n----\n\nIn systems with periodic boundary conditions, the Coulomb energy and the Coulomb potential are usually evaluated under the assumption of a compensating background by introducing a compensation charge density. This is well-justified for the Hartree energy, where the compensation charge density stems from the ions. Yet, this assumption is not valid for the Fock exchange, which causes an error. For the Fock exchange potential and energy, one can correct the resulting error by assuming that the density matrix is local. The leading order correction is given by the difference between the electrostatic energy of a localized model charge density in a homogeneous background periodically repeated and the same model charge density in isolation. For details we refer to J. Paier ''et al.,''{{cite|paier:jcp:05}} Section II. D. 4.  \n\n*{{TAG|HFRCUT}} = 0: Ewald summation ''or'' method of Massida, Posternak, and Baldereschi depending on k-mesh{{cite|gygi:prb:86}}{{cite|massidda:prb:93}}\n:If a regular automatic k-mesh and the standard 1/r Coulomb kernel are used, the correction is computed using Ewald summations. If the k-mesh is ''not'' regular (e.g., if the k-points are explicitly listed in the {{FILE|KPOINTS}} file) or if kernels different from the bare Coulomb kernel are used (e.g., HSE functional), the method of Massida, Posternak, and Baldereschi{{cite|gygi:prb:86}}{{cite|massidda:prb:93}} is used. This approach assumes that the model charge density is an error-function-like charge distribution in real space in order to handle the long-range nature of the potential in reciprocal space. It requires setting a decay constant for the error function, see {{TAG|HFALPHA}}. Both methods, the Ewald summation and the method of Massida, Posternak, and Baldereschi, are strictly equivalent for regular k-mesh. \n\n*{{TAG|HFRCUT}} = -1: Automated cutoff radius{{cite|spenceralavi:prb:08}} \n:An alternative recipe is to replace the 1/r Coulomb kernel with a truncated Coulomb kernel that is strictly zero beyond a certain cutoff radius. If {{TAG|HFRCUT}} is set to -1, the radial cutoff is chosen to be equivalent to the radius of the sphere with a volume of the unit cell times the total number of k-points in the full Brillouin zone. For instance, for a  4x4x4 k-point grid, that yields 64 times the volume of the unit cell. \n\n*{{TAG| HFRCUT}} = [cutoff radius]: Manually set cutoff radius in \u00c5ngstr\u00f6m. \n\nIn the limit of many k-points, both methods ({{TAG|HFRCUT}}=-1 and {{TAG|HFRCUT}}=0) should yield identical results. In our experience, the {{TAG|HFRCUT}}=-1 converges more rapidly for systems with a gap, as well as molecules and atoms, whereas {{TAG|HFRCUT}}=0 converges faster for metallic systems. It is expedient to first converge the energies with respect to the number of k-points for both methods and then select for subsequent calculations the method that converges more rapidly. A detailed comparison of the convergence of the different methods for metallic and gapped materials was made by Sundararaman and Arias{{cite|sundararamanarias:prb:13}}.\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|ALDAC}},\n{{TAG|HFALPHA}},\n{{TAG|LTHOMAS}},\n[[List of hybrid functionals]],\n[[Coulomb singularity]]\n\n{{sc|HFRCUT|Examples|Examples that use this tag}}\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2022-07-19T20:59:04Z"}, "LWRITE_UNK": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWRITE_UNK\">LWRITE_UNK</a> decides whether the cell-periodic part of the relevant Bloch functions is written.</span>", "wikicode": "{{DISPLAYTITLE:LWRITE_UNK}}\n{{TAGDEF|LWRITE_UNK|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LWRITE_UNK}} decides whether the cell-periodic part of the relevant Bloch functions is written.\n----\nFor {{TAG|LWRITE_UNK}}=True, VASP writes the cell-periodic part of the Kohn\u2013Sham orbitals in spin channel s at k point p to the file '''wannier90.UNKp.s'''. This file can be used to plot Wannier orbitals with WANNIER90.\n\nFor details on the execution of <tt>wannier_setup</tt> in VASP, see the description of the {{TAG|LWANNIER90}} tag.\nFor information on the '''wannier90.win''' file and the execution of WANNIER90, we refer to the [http://www.wannier.org/doc/user_guide.pdf WANNIER90 manual].\n\n== Related tags and articles ==\n{{TAG|LWANNIER90}},\n{{TAG|LWRITE_MMN_AMN}}\n\n{{sc|LWANNIER90_RUN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:55:55Z"}, "CH_NEDOS": {"datatype": "integer", "options": {}, "summary": "This tag specifies the number of frequency (energy) grid points on the x-axis in the calculation of the dielectric function for XAS spectra.", "wikicode": "{{DISPLAYTITLE:CH_NEDOS}}\n{{TAGDEF|CH_NEDOS|[integer]|1000}}\n\nDescription: This tag specifies the number of frequency (energy) grid points on the x-axis in the calculation of the dielectric function for XAS spectra.\n----\nThis feature is only available from VASP version 6.0 or higher.\n\n== Related tags and articles ==\n{{TAG|CH_LSPEC}},{{TAG|CH_SIGMA}},{{TAG|ICORELEVEL}},{{TAG|CLNT}},{{TAG|CLN}},{{TAG|CLL}},{{TAG|CLZ}}\n\n{{sc|CH_SIGMA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]][[Category:VASP6]]", "last_revised": "2022-07-19T07:54:52Z"}, "PHON_LMC": {"datatype": "boolean", "options": {}, "summary": "This flag controls whether electron-phonon interactions from Monte-Carlo sampling are calculated or not.", "wikicode": "{{DISPLAYTITLE:PHON_LMC}}\n{{TAGDEF|PHON_LMC|[logical]|.FALSE.}}\n\nDescription: This flag controls whether electron-phonon interactions from Monte-Carlo sampling are calculated or not. \n----\nThis feature is only available from VASP version 6.0 or higher.\n\nFor further usage of this tag see: Electron-phonon interactions from Monte-Carlo sampling. \n\n== Related tags and articles ==\n{{TAG|PHON_NSTRUCT}}, {{TAG|PHON_LBOSE}}, {{TAG|PHON_NTLIST}}, {{TAG|PHON_TLIST}}\n\n{{sc|PHON_LMC|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electron-phonon interactions]][[Category:Phonons]][[Category:VASP6]]", "last_revised": "2022-09-08T07:20:39Z"}, "PHON_NSTRUCT": {"datatype": "integer", "options": {}, "summary": "This flag sets the number of structures for electron-phonon interactions from Monte-Carlo (MC) sampling.", "wikicode": "{{DISPLAYTITLE:PHON_NSTRUCT}}\n{{TAGDEF|PHON_NSTRUCT|[integer]|none}}\n\nDescription: This flag sets the number of structures for electron-phonon interactions from Monte-Carlo (MC) sampling. \n----\nThis feature is only available from VASP version 6.0 or higher.\n\nFor {{TAG|PHON_NSTRUCT}}=-1 the eigenvalues and eigenvectors of the dynamic matrix are written to the file {{TAG|DYNMATFULL}}.\n\nFor {{TAG|PHON_NSTRUCT}}=0 the ZG configuration{{cite|zacharias:prb:2016}} (one-shot) method is executed.\n\nFor {{TAG|PHON_NSTRUCT}}>0 that many MC structures are prepared.\n\nFor further usage of this tag see: {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}.\n \n\n== Related tags and articles ==\n{{TAG|PHON_LMC}}, {{TAG|PHON_LBOSE}}, {{TAG|PHON_NTLIST}}, {{TAG|PHON_TLIST}}, {{TAG|TEBEG}}\n\n{{sc|PHON_NSTRUCT|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Electron-phonon interactions]][[Category:Phonons]][[Category:VASP6]]", "last_revised": "2022-09-08T07:21:18Z"}, "PHON_LBOSE": {"datatype": "boolean", "options": {}, "summary": "This flag determines whether random structures in the Monte-Carlo (MC) sampling are created according to Bose-Einstein or Maxwell-Boltzmann statistics.", "wikicode": "{{DISPLAYTITLE:PHON_LBOSE}}\n{{TAGDEF|PHON_LBOSE|[logical]|.TRUE.}}\n\nDescription: This flag determines whether random structures in the Monte-Carlo (MC) sampling are created according to Bose-Einstein or Maxwell-Boltzmann statistics. \n----\nThis feature is only available from VASP version 6.0 or higher.\n\nFor {{TAG|PHON_LBOSE}}=''.TRUE.'' Bose-Einstein statistics is used.\n\nFor {{TAG|PHON_LBOSE}}=''.FALSE.'' Maxwell-Boltzmann statistics is used.\n\nFor further usage of this tag see: {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}.\n\n'''Important''': This tag does not work together with {{TAG|PHON_NSTRUCT}}=0.\n\n== Related tags and articles ==\n{{TAG|PHON_LMC}}, {{TAG|PHON_NSTRUCT}}, {{TAG|TEBEG}}\n\n{{sc|PHON_LBOES|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Electron-phonon interactions]][[Category:Phonons]][[Category:VASP6]]", "last_revised": "2022-09-08T07:20:25Z"}, "PHON_NTLIST": {"datatype": "integer", "options": {}, "summary": "This flag sets the number of temperatures for that the electron-phonon interactions using the ZG configuration is evaluated.", "wikicode": "{{DISPLAYTITLE:PHON_NTLIST}}\n{{TAGDEF|PHON_NTLIST|[integer]|none}}\n\nDescription: This flag sets the number of temperatures for that the electron-phonon interactions using the ZG configuration{{cite|zacharias:prb:2016}} is evaluated. \n----\nThis feature is only available from VASP version 6.0 or higher.\n\nAlso, a list of temperatures defined in {{TAG|PHON_TLIST}} has to be defined together with this tag\n\nFor further usage of this tag see: {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}.\n \n\n== Related tags and articles ==\n{{TAG|PHON_LMC}}, {{TAG|PHON_NSTRUCT}}, {{TAG|PHON_TLIST}}\n\n{{sc|PHON_NTLIST|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Electron-phonon interactions]][[Category:Phonons]][[Category:VASP6]]", "last_revised": "2022-09-08T07:21:36Z"}, "PHON_TLIST": {"datatype": "real array", "options": {}, "summary": "This flag provides the list of temperatures for that the electron-phonon interaction using the ZG configuration is evaluated.", "wikicode": "{{DISPLAYTITLE:PHON_TLIST}}\n{{TAGDEF|PHON_TLIST|[real array]|none}}\n\nDescription: This flag provides the list of temperatures for that the electron-phonon interaction using the ZG configuration{{cite|zacharias:prb:2016}} is evaluated. \n----\nThis feature is only available from VASP version 6.0 or higher.\n\nAlso, the number of temperatures defined in {{TAG|PHON_NTLIST}} has to be defined together with this tag.\n\nFor further usage of this tag see: {{TAG|Electron-phonon interactions from Monte-Carlo sampling}}.\n \n\n== Related tags and articles ==\n{{TAG|PHON_LMC}}, {{TAG|PHON_NSTRUCT}}, {{TAG|PHON_NTLIST}}\n\n{{sc|PHON_TLIST|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Electron-phonon interactions]][[Category:Phonons]][[Category:VASP6]]", "last_revised": "2022-09-08T07:21:51Z"}, "ML_LMLFF": {"datatype": "boolean", "options": {}, "summary": "Main control tag which enables/disables the use of machine learning force fields.", "wikicode": "{{DISPLAYTITLE:ML_LMLFF}}\n{{TAGDEF|ML_LMLFF|[logical]|.FALSE.}}\n\nDescription: Main control tag which enables/disables the use of machine learning force fields.\n{{NB|mind|Machine learning force fields is available in {{VASP}} as of version 6.3.}}\n----\nIf {{TAG|ML_LMLFF}} = .FALSE. machine learning force fields are disabled and all related {{FILE|INCAR}} tags, i.e. all tags starting with \"ML_\", are ignored. If machine learning force fields are used by setting {{TAG|ML_LMLFF}} = .TRUE., the {{VASP}} mode of operation depends on the choice of {{TAG|ML_ISTART}}. If {{TAG|ML_ISTART}} is not supplied in the {{FILE|INCAR}} file then the default mode of operation is to run an MD simulation with on-the-fly machine learning starting \"from scratch\", i.e. {{TAG|ML_ISTART}} = 0.\n\n== Related tags and articles ==\n{{TAG|ML_ISTART}}, {{TAG|ML_IALGO_LINREG}}, {{TAG|ML_IWEIGHT}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_IREG}}, {{TAG|ML_LSPARSDES}}, {{TAG|ML_ISCALE_TOTEN}}, {{TAG|ML_LCOUPLE}}, {{TAG|ML_LHEAT}}, {{TAG|ML_LEATOM}}, {{TAG|ML_MB}}, {{TAG|ML_MCONF}}\n\n{{sc|ML_LMLFF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:26:13Z"}, "ML_CDOUB": {"datatype": "real", "options": {}, "summary": "This tag controls the criterion for \"enforced\" DFT calculations within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_CDOUB}}\n{{TAGDEF|ML_CDOUB|[real]}}\n{{DEF|ML_CDOUB|4.0|for {{TAG|ML_MODE}} {{=}} SELECT|2.0|else}}\n\nDescription: This tag controls the criterion for \"enforced\" DFT calculations within the machine learning force field method.\n----\nThe usage of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Sampling of training data and local reference configurations|here]].\n\nIf at any time, the estimated force errors are {{TAG|ML_CDOUB}} times larger than the Bayesian threshold (i.e. \"critically\" high), a first principles calculation is performed and a new force field is immediately generated (even if the counter for sampling is below the minimum amount of sampled structures {{TAG|ML_NMDINT}}).\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MCONF_NEW}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_NMDINT}}\n\n{{sc|ML_CDOUB|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-24T14:05:21Z"}, "ML_EATOM_REF": {"datatype": "real array", "options": {}, "summary": "Reference total energies of isolated atoms used in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_EATOM_REF}}\n{{TAGDEF|ML_EATOM_REF|[real array]|0.0}}\n\nDescription: Reference total energies of isolated atoms used in the machine learning force field method.\n----\nThis tag is only used if {{TAG|ML_ISCALE_TOTEN}}=1.\n\nIf {{TAG|ML_EATOM_REF}} is not provided in the {{TAG|INCAR}} file then 0.0 is assumed for all species in the system.\n\nBy default this tag is not used since all energies are scaled to the average of the training data ({{TAG|ML_ISCALE_TOTEN}}=2).\n\nIf this tag is used, each reference energy should be obtained from a VASP calculation of an isolated atoms in a sufficiently large simulation box. The reference is then simply taken from the Helmholtz free energy from the {{TAG|OSZICAR}} file (value following \"1 F=\" in that file). \n\nThe reference energies are simply set in one line as a list for each species, i.e. like the following\n\n ML_EATOM_REF = E_1 E_2 E_3 ...\n\nwhere E_1, E_2, E_2 etc. are the energies for species 1, 2, 3 etc. (corresponding to the order they occur in the {{TAG|POTCAR}} file).\n\nThe unit of the energies is eV/atom.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ISTART}}, {{TAG|ML_ISCALE_TOTEN}}\n\n{{sc|ML_EATOM_REF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:22:00Z"}, "ML_ISTART": {"datatype": "integer", "options": {}, "summary": "This tag selects the mode of operation (e.g. start from scratch, prediction-only,...) of the machine learning force fields method.", "wikicode": "{{DISPLAYTITLE:ML_ISTART}}\n{{TAGDEF|ML_ISTART|[integer]|0}}\n\n{{NB|mind|This tag is deprecated and we advise to use {{TAG|ML_MODE}} instead.}}\nDescription: This tag selects the mode of operation (e.g. start from scratch, prediction-only,...) of the machine learning force fields method.\n----\nIf the machine learning force fields method is enabled via {{TAG|ML_LMLFF}} = .TRUE., this tag further specifies the mode of operation when {{VASP}} is run. The following cases can be selected:\n\n*{{TAG|ML_ISTART}} = 0: On-the-fly learning is enabled, starting from scratch. Force predictions from the machine learning force field are used to drive the MD simulation. However, if the error estimation performed in each time step indicates a high force error an ab initio calculation is performed instead and the collected energy, forces and stress are used to improve the machine learning force field. Setting {{TAG|ML_ISTART}} = 0 starts the machine learning force field from scratch. Hence, in the beginning of the MD run there is no force field available and ab initio calculations will happen frequently.\n*{{TAG|ML_ISTART}} = 1: Same as {{TAG|ML_ISTART}} = 0 but taking into account pre-existing ab initio data. This is the usual choice for continuing a previous MD simulation with activated machine learning. Before the MD run starts the {{FILE|ML_AB}} file, copied from {{FILE|ML_ABN}} from a previous run, is read and the contained ab initio energies, forces and stresses are used to generate an initial force field. Note that this preparative learning step adopts the previous choice of local reference configurations, i.e. the reference atomic environments entering the kernel are taken from a list in the {{FILE|ML_AB}} file. Then, the MD simulation is started with on-the-fly learning enabled. The {{FILE|ML_AB}} file does not necessarily need to contain structures matching the current starting configuration in the {{FILE|POSCAR}} file in terms of simulation box, present elements or number of atoms. However, if the same elements appear the initial force field is of course used for predictions. In any case the provided training data is included in the finally generated machine learning force field, i.e. the {{FILE|ML_FFN}} file will define a force field applicable to both, the structures in the {{FILE|ML_AB}} file '''and''' the current MD simulation. By restarting repeatedly with {{TAG|ML_ISTART}} = 1 while providing an {{FILE|ML_AB}} file from the last run it is possible to iteratively extend the applicability of the resulting machine learning force field, e.g. by exploring different temperature ranges or element compositions.\n{{NB|tip|Setting {{TAG|ML_ISTART}} {{=}} 1 together with {{TAG|NSW}} {{=}} 0 allows to repeat learning on the given training data and create a new force field in {{FILE|ML_FFN}} without actually performing additional MD steps. In this way force field parameters (e.g. cutoff radii, number of radial basis functions, etc.) can be varied without recalculating the entire trajectory. Moreover, because Bayesian error estimation is not required when no MD is run it is possible to switch the regression algorithm via the tag {{TAG|ML_IALGO_LINREG}} and check whether in this way better fitting results can be achieved. In order to avoid that the starting structure in the {{FILE|POSCAR}} file is processed and eventually added to the training data just set {{TAG|ML_CTIFOR}} to a large value (e.g. 1000).|:}}\n*{{TAG|ML_ISTART}} = 2: Prediction only. In this mode the previously trained machine learning force field is read from the {{FILE|ML_FF}} file. The MD simulation is driven with predictions from the force field only, no ab initio calculations are performed and no learning is executed. However, in order to monitor the quality of predictions the Bayesian error estimate of forces is still computed and logged in the {{FILE|ML_LOGFILE}}. This setting is typically used when the machine learning force field is considered mature and ready for production runs.\n*{{TAG|ML_ISTART}} = 3: Learning from given ab initio data only, no MD time steps. In this operation mode a new machine learning force field is generated from ab initio data provided in the {{FILE|ML_AB}} file. The structures are read in and processed one by one as if harvested via an MD simulation. In other words, the same steps are performed as in on-the-fly training but the source of data is not an MD run but the series of structures available in {{FILE|ML_AB}}. This operation mode can be used to generate {{VASP}} machine learning force fields from pre-computed or external ab initio data sets. At first glance {{TAG|ML_ISTART}} = 3 looks very similar to the combination of {{TAG|ML_ISTART}} = 1 and {{TAG|NSW}} = 0 described above. However, there is an important difference: Setting {{TAG|ML_ISTART}} = 3 will ignore the list of local reference configurations in the {{FILE|ML_AB}} file and instead will determine a new collection which is written to the resulting {{FILE|ML_ABN}} file. {{NB|tip|If calculations for {{TAG|ML_ISTART}} {{=}} 3 are too time-consuming using the default settings, it is useful to increase {{TAG|ML_MCONF_NEW}} to values around 10-16 and set  {{TAG|ML_CDOUB}} {{=}} 4. This often accelerates the calculations by a factor of 2-4.|:}} The {{TAG|ML_AB}} file may contain values for ''CTIFOR'' for each training structure. These are the thresholds used to sample that structure from the previous training. If a value for {{TAG|ML_CTIFOR}} is specified in the {{TAG|INCAR}} file, that value is then used and the thresholds from the {{TAG|ML_AB}} are ignored. Otherwise: 1) If thresholds exist in the {{TAG|ML_AB}} they are used. 2) If no thresholds are specified the default value for {{TAG|ML_CTIFOR}} is used. \n*{{TAG|ML_ISTART}} = 4: Refitting of the force field is done based on an existing {{TAG|ML_AB}} file, but the number of local reference configurations is taken from the {{TAG|ML_AB}} file. {{TAG|NSW}} on the input is ignored and only a single step is executed. No ab-initio calculation is carried out. \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IALGO_LINREG}}, {{TAG|ML_IWEIGHT}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_IREG}}, {{TAG|ML_LSPARSDES}}, {{TAG|ML_ISCALE_TOTEN}}, {{TAG|ML_LCOUPLE}}, {{TAG|ML_LHEAT}}, {{TAG|ML_LEATOM}}, {{TAG|ML_MB}}, {{TAG|ML_MCONF}}\n\n{{sc|ML_ISTART|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-29T08:09:21Z"}, "ML_ICRITERIA": {"datatype": "integer", "options": {}, "summary": "Decides whether (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_ICRITERIA</a>><span><span class=\"tag-value\">0)</span> or how the Bayesian error threshold (</span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_CTIFOR</a>) is updated within the machine learning force field method. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_CTIFOR</a> determines whether a first-principles calculation is performed.", "wikicode": "{{DISPLAYTITLE:ML_ICRITERIA}}\n{{TAGDEF|ML_ICRITERIA|[integer]}}\n{{DEF|ML_ICRITERIA|3|for {{TAG|ML_MODE}} {{=}} SELECT|1|else}}\n\n\nDescription: Decides whether ({{TAG|ML_ICRITERIA}}>0) or how the Bayesian error threshold ({{TAG|ML_CTIFOR}}) is updated within the machine learning force field method. {{TAG|ML_CTIFOR}} determines whether a first-principles calculation is performed.\n----\nThe use of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Threshold for error of forces|here]].\n\nThe following options are possible for {{TAG|ML_ICRITERIA}}:\n* {{TAG|ML_ICRITERIA}} = 0: The threshold {{TAG|ML_CTIFOR}} is not updated. This method is only recommended for refining an existing force field. For example, if you know that {{TAG|ML_CTIFOR}} has taken a value of 0.03 in previous runs, you can continue to collect training data by now setting the threshold to {{TAG|ML_CTIFOR}}=0.03 to capture all contours and areas of the potential energy surface where first-principles data are still missing. To achieve extremely robust force fields, it is recommended to run {{TAG|NSW}}=100000 steps in this mode to slightly above the highest temperature to be considered.  \n* {{TAG|ML_ICRITERIA}} = 1: Set {{TAG|ML_CTIFOR}} to a value proportional to the average Bayesian errors of the {{TAG|ML_MHIS}} steps. {{TAG|ML_ICRITERIA}} = 1, the average is calculated only for errors after updating the force field. Such updates are quite rare, so updates of {{TAG|ML_CTIFOR}} are also quite rare in this mode. Furthermore, since the first principle calculations are only performed for configurations with large Bayesian errors (\"outliers\"), the force field is updated only after the outliers are taken into account. Therefore, the Bayes errors included in the averaging are typically larger than the average Bayes error in this mode.  It is therefore recommended to set {{TAG|ML_CX}} to 0 (default) in this mode.\n* {{TAG|ML_ICRITERIA}} = 2: Update the criteria using the moving average of all previous Bayesian errors. This method gives the average of the errors of all previous predictions (i.e. all previously considered MD steps), while {{TAG|ML_ICRITERIA}} = 1 gives only the average of the predictions immediately following the retraining. The length of the history in this mode is currently hard-coded and set to 400 steps (or {{TAG|ML_MHIS}} x 50 in the newer version). This mode tends to continue sampling, and is therefore somewhat prone to oversampling: as Bayesian errors decrease, the threshold is steadily lowered and additional first-principles computations are initiated. The recommended values for {{TAG|ML_CX}} in this mode are approximately 0.1 to 0.3. = 0,2, a first-principles calculation is typically performed every 50 steps. This means that if the number of ionic steps is, say, {{TAG|NSW}}=50,000, then about 1,000 first-principles calculations should be performed. For many materials, this results in a reasonably good and robust ML database.\n*{{TAG|ML_ICRITERIA}}=3: This mode is the default for reselecting local reference configurations from an existing {{TAG|ML_AB}} file ({{TAG|ML_MODE}} = ''SELECT''). The {{FILE|ML_AB}} file shall contain a {{TAG|ML_CTIFOR}} for each structure stored in the {{FILE|ML_AB}} file. These values are used by {{VASP}} as Bayesian error thresholds for structure selection. This also means that the tags {{TAG|ML_CTIFOR}}, {{TAG|ML_CX}}, {{TAG|ML_CSLOPE}}, {{TAG|ML_CSIG}} and {{TAG|ML_MHIS}} set in {{FILE|INCAR}} are ignored. This mode is only available when {{TAG|ML_MODE}}=''SELECT'' is activated. It is important that the {{FILE|ML_AB}} file contains a {{TAG|ML_CTIFOR}} value for each structure included. Otherwise, {{VASP}} will throw an error and will also indicate to the user that some {{TAG|ML_CTIFOR}} values are missing from the {{FILE|ML_AB}} file.\n\nAs mentioned above, the {{TAG|ML_CX}} tag can be used to fine-tune the update of {{TAG|ML_CTIFOR}}. \nThe fact that the {{TAG|ML_ICRITERIA}} = 1 or {{TAG|ML_ICRITERIA}} = 2 is a matter of taste. Just remember that {{TAG|ML_CX}} must be set differently in both modes.  While {{TAG|ML_ICRITERIA}} = 1, the {{TAG|ML_CX}} = 0.0, {{TAG|ML_ICRITERIA}} = 2, {{TAG|ML_CX}} = 0.2 is a good default.  \nMost of our force fields use {{TAG|ML_ICRITERIA}} = 1, but this mode sometimes stagnates and stops the first principle calculations.\nOn the other hand, and as already mentioned, using {{TAG|ML_ICRITERIA}} = 2 is prone to oversampling, i.e. it may perform too many first principle calculations. \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_CSLOPE}}, {{TAG|ML_CSIG}}, {{TAG|ML_MHIS}}, {{TAG|ML_CX}}\n\n{{sc|ML_ICRITERIA|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-14T09:09:48Z"}, "ML_IWEIGHT": {"datatype": "integer", "options": {}, "summary": "This tag controls which procedure is used for normalizing and weighting the energies, forces, and stresses in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_IWEIGHT}}\n{{TAGDEF|ML_IWEIGHT|[integer]|3}}\n\nDescription: This tag controls which procedure is used for normalizing and weighting the energies, forces, and stresses in the machine learning force field method.\n----\nTo achieve optimal training it is important to normalize the available data. Furthermore, sometimes it may be desired to emphasize some training quantities over others, e.g. one might want excellent force predictions, even at the cost of sacrificing some energy and stress accuracy. How normalizing and weighting are performed can be controlled with the {{TAG|ML_IWEIGHT}} together with weighting parameters {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}} and {{TAG|ML_WTSIF}} for energies, forces, and stresses, respectively. The following procedures can be selected via {{TAG|ML_IWEIGHT}}:\n\n*{{TAG|ML_IWEIGHT}} = 1: Manual control over normalization/weighting: the unnormalized energies, forces, and stress tensor training data are divided by the weights determined by the flags {{TAG|ML_WTOTEN}} (eV/atom), {{TAG|ML_WTIFOR}} (eV/<math>\\AA</math>) and {{TAG|ML_WTSIF}} (kBar), respectively.\n\n*{{TAG|ML_IWEIGHT}} = 2: Normalization via global standard deviations: The energies, forces, and stresses are normalized by their respective standard deviation over the entire training data. Then, the normalized quantities are weighted by {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}} and {{TAG|ML_WTSIF}} when they are processed for learning in the design matrix <math>\\mathbf{\\Phi}</math> (see [[Machine learning force field: Theory#Matrix_vector_form_of_linear_equations|this section]]). In this case the values of {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}} and {{TAG|ML_WTSIF}} are unitless quantities. \n\n*{{TAG|ML_IWEIGHT}} = 3: Normalization via averages over subset standard deviations: Same as {{TAG|ML_IWEIGHT}} = 2 but the training data is divided into individual subsets. For each subset, the standard deviations are calculated separately. Then, the energies, forces, and stresses are normalized using the average of the standard deviations of all subsets. Finally, as for {{TAG|ML_IWEIGHT}} = 2 the normalized quantities are multiplied by {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}} and {{TAG|ML_WTSIF}} for learning purposes.\n{{NB|mind|The division into subsets is based on the name tag provided in the first line of the {{TAG|POSCAR}} file. If training is performed for widely different materials, for instance, different phases that have widely different energies, it is important to choose different system names in the first line of the  {{TAG|POSCAR}} file. Without correct subset assignment, the overall energy standard deviation might become large, hence reducing the weight of the energies in training.|:}}\n\nFor {{TAG|ML_IWEIGHT}} = 2, 3 the weights are unitless quantities used to multiply the data, whereas for {{TAG|ML_IWEIGHT}} = 1 they have a unit. All three methods provide unitless energies, forces, and stress tensors, which are then passed to the learning algorithm. Although the defaults are usually rather sensible, it can be useful to explore different weights. For instance, if vibrational frequencies are supposed to be reproduced accurately, we found it helpful to increase {{TAG|ML_WTIFOR}} to 10-100. On the other hand, if the energy difference between different phases needs to be described accurately by the force field, it might be useful to increase {{TAG|ML_WTOTEN}} to around 10-100.\n{{NB|tip|On-the-fly learning implies that training structures accumulate along the running MD trajectory. Hence, also the standard deviations of energies, forces, and stresses change over time and will be recalculated whenever a learning step is triggered. We highly recommend using {{TAG|ML_IWEIGHT}} {{=}} 3 because this ensures that at any time learning is performed on an adequately normalized set.}}\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}}\n\n{{sc|ML_IWEIGHT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-19T09:48:16Z"}, "ML_MCONF": {"datatype": "integer", "options": {}, "summary": "This tag sets the maximum number of structures stored in memory that are used for training in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_MCONF}}\n{{TAGDEF|ML_MCONF|[integer]|see below}}\n\nDescription: This tag sets the maximum number of structures stored in memory that are used for training in the machine learning force field method.\n----\nThe defaults for {{TAG|ML_MCONF}} are different for each different {{TAG|ML_MODE}} setting. Here are the defaults for each mode:\n*{{TAG|ML_MODE}}='TRAIN': \n**No {{TAG|ML_AB}} present (learning from scratch): min(1500, max(1,{{TAG|NSW}}))\n**{{TAG|ML_AB}} present (continuation of learning): MCONF_AB + min(1500, max(1,{{TAG|NSW}}))\n*{{TAG|ML_MODE}}='SELECT': MCONF_AB + 1\n*{{TAG|ML_MODE}}='REFIT': MCONF_AB + 1\n*{{TAG|ML_MODE}}='REFITBAYESIAN': MCONF_AB + 1\n*{{TAG|ML_MODE}}='RUN': 1\nusing the following definition:\n*MCONF_AB = Number of training structures read from the {{TAG|ML_AB}} file.\n\n\nThe default value for {{TAG|ML_MODE}}=''TRAIN'' is usually a safe value for solids and easy-to-learn liquids but should be set to a higher value as soon as it is reached. When this happens the code stops and gives an error instructing to increase {{TAG|ML_MCONF}}. \n\nThis flag sets also the maximum number of rows for the design matrix, which is usually a huge matrix. The design matrix is to be allocated statically at the beginning of the program since several parts of the code use MPI shared memory and dynamic reallocation of these arrays can cause severe problems on some systems. So most of the main arrays are statically allocated in the code. \n\nAn estimate of the design matrix and all other large arrays are printed out to the {{TAG|ML_LOGFILE}} before allocation. The design matrix is fully distributed in a block cyclic fashion for scaLAPACK and should almost perfectly linearly scale with the number of used processors.\n\n== Related tags and articles ==\n\n{{sc|ML_FF_MCONF|Examples|Examples that use this tag}}\n----\n{{TAG|ML_LMLFF}}, {{TAG|ML_MCONF_NEW}}, {{TAG|ML_MB}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]][[Category:Memory]]", "last_revised": "2023-04-28T09:22:34Z"}, "ML_MCONF_NEW": {"datatype": "integer", "options": {}, "summary": "This tag sets the number of configurations that are stored temporarily as candidates for the training data in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_MCONF_NEW}}\n{{TAGDEF|ML_MCONF_NEW|[integer]|5}}\n\nDescription: This tag sets the number of configurations that are stored temporarily as candidates for the training data in the machine learning force field method.\n----\n{{NB|warning|This value is close to optimal for on-the-fly learning,  and should usually not be changed. }}\n\nThe use of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Sampling of training data and local reference configurations|here]].\nIf force fields are reparameterized ({{TAG|ML_ISTART}}=3), calculations are usually more efficient if this parameter is increased to values around 10-16 and setting {{TAG|ML_CDOUB}}=4. This is particularly relevant if the ML_AB file is large.\n\n== Related tags and articles ==\n\n{{sc|ML_MCONF_NEW|Examples|Examples that use this tag}}\n----\n{{TAG|ML_LMLFF}}, {{TAG|ML_MCONF}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_CDOUB}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-08-26T08:54:00Z"}, "ML_MHIS": {"datatype": "integer", "options": {}, "summary": "This tag sets the number of estimated errors stored in memory to determine the threshold for the Bayesian error in the machine learning force field method for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_ICRITERIA</a>=<span><span class=\"tag-value\">1</span>. For </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_ICRITERIA</a>=<span><span class=\"tag-value\">2</span>, the history length is 50 x </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_ICRITERIA\">ML_MHIS</a> (or hard coded to 400).", "wikicode": "{{DISPLAYTITLE:ML_MHIS}}\n{{TAGDEF|ML_MHIS|[integer]|10}}\n\nDescription: This tag sets the number of estimated errors stored in memory to determine the threshold for the Bayesian error in the machine learning force field method for {{TAG|ML_ICRITERIA}}=1. For {{TAG|ML_ICRITERIA}}=2, the history length is 50 x {{TAG| ML_MHIS}} (or hard coded to 400).\n----\nThe use of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Threshold for error of forces|here]].\n\n{{TAG|ML_ICRITERIA}}=1: The ML code stores {{TAG|ML_MHIS}} Bayesian errors from previous training steps: immediately after a re-training of the ML-FF, the Bayesian errors of the forces are reevaluated for the current structure (that was also just added as training structure). The average  and the maximum error of the forces is stored in the history. After  {{TAG | ML_MHIS}} updates of the force field, the threshold   {{TAG|ML_CTIFOR}} is updated the first time and is then updated after every further update of the ML-FF. We recommend to read the section {{TAG|ML_ICRITERIA}} for further details.\n\n{{TAG|ML_ICRITERIA}}=2: Averaging is performed over 50 x {{TAG| ML_MHIS}} Bayesian error predictions. Every MD step is considered in the averaging (as opposed to above, where only structures after re-training are considered). \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_CX}}, {{TAG|ML_CSLOPE}}, {{TAG|ML_CSIG}}\n\n{{sc|ML_MHIS|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-09-17T10:22:05Z"}, "ML_NMDINT": {"datatype": "integer", "options": {}, "summary": "Tag to control the minimum interval to get training samples in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_NMDINT}}\n{{TAGDEF|ML_NMDINT|[integer]}}\n{{DEF|ML_NMDINT|1|for {{TAG|ML_MODE}} {{=}} SELECT|10|else}}\n\nDescription: Tag to control the minimum interval to get training samples in the machine learning force field method.\n----\nThe usage of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Sampling of training data and local reference configurations|here]]\n\nThis tag defines a lower threshold for taking new configurations from the MD, so that as long as the upper threshold for the Bayesian error (e.g. {{TAG|ML_CDOUB}} times {{TAG|ML_CTIFOR}}) is not exceeded,  at least {{TAG|ML_NMDINT}} MD steps are preformed using the MLFF (i.e. no first principles calculation is performed). This avoids that many nearly identical structures are added.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MCONF_NEW}}, {{TAG|ML_CDOUB}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_MHIS}}\n\n{{sc|ML_NMDINT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-26T20:40:39Z"}, "ML_WTIFOR": {"datatype": "real", "options": {}, "summary": "This tag sets the weight for the scaling of the forces in the training data within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_WTIFOR}}\n{{TAGDEF|ML_WTIFOR|[real]}}\n{{DEF|ML_WTIFOR|0.05|if {{TAG|ML_IWEIGHT}}{{=}}1|1.0|otherwise}}\n\nDescription: This tag sets the weight for the scaling of the forces in the training data within the machine learning force field method.\n----\n\n{{TAG|ML_IWEIGHT}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}} form a group of tags which set the normalization and weighting of ab initio training data, i.e.  energies, forces and stresses of the training structures. The main control tag is {{TAG|ML_IWEIGHT}}, please also have a look at its detailed description. If {{TAG|ML_IWEIGHT}}=1 the weight has unit eV/Angstrom and is used to divide the data by it. For {{TAG|ML_IWEIGHT}}=2 and 3 the weights are unitless and multiplicative.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IWEIGHT}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTSIF}}, {{TAG|ML_IALGO_LINREG}}\n\n{{sc|ML_WTIFOR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:31:53Z"}, "ML_WTOTEN": {"datatype": "real", "options": {}, "summary": "This tag sets the weight for the scaling of the total energy in the training data within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_WTOTEN}}\n{{TAGDEF|ML_WTOTEN|[real]}}\n{{DEF|ML_WTOTEN|0.005|if {{TAG|ML_IWEIGHT}}{{=}}1|1.0|otherwise}}\n\nDescription: This tag sets the weight for the scaling of the total energy in the training data within the machine learning force field method.\n----\n\n{{TAG|ML_IWEIGHT}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}} form a group of tags which set the normalization and weighting of ab initio training data, i.e.  energies, forces and stresses of the training structures. The main control tag is {{TAG|ML_IWEIGHT}}, please also have a look at its detailed description. If {{TAG|ML_IWEIGHT}}=1 the weight has a unit of eV/atom and is used to divide the data by it. For {{TAG|ML_IWEIGHT}}=2 and 3 the weights are unitless and the data is multiplied by the weight.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IWEIGHT}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}}, {{TAG|ML_IALGO_LINREG}}\n\n{{sc|ML_WTOTEN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:32:01Z"}, "ML_WTSIF": {"datatype": "real", "options": {}, "summary": "This tag sets the weight for the scaling of the stress in the training data within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_WTSIF}}\n{{TAGDEF|ML_WTSIF|[real]}}\n{{DEF|ML_WTSIF|5.0|if {{TAG|ML_IWEIGHT}}{{=}}1|1.0|otherwise}}\n\nDescription: This tag sets the weight for the scaling of the stress in the training data within the machine learning force field method.\n----\n\n{{TAG|ML_IWEIGHT}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}} form a group of tags which set the normalization and weighting of ab initio training data, i.e.  energies, forces and stresses of the training structures. The main control tag is {{TAG|ML_IWEIGHT}}, please also have a look at its detailed description. If {{TAG|ML_IWEIGHT}}=1 the weight has unit kBar and is used to divide the data by it. For {{TAG|ML_IWEIGHT}}=2 and 3 the weights are unitless and multiplicative.\n\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IWEIGHT}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_IALGO_LINREG}}\n\n{{sc|ML_WTSIF|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:32:08Z"}, "ML_CSLOPE": {"datatype": "real", "options": {}, "summary": "Parameter used in the automatic determination of threshold for Bayesian error estimation in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_CSLOPE}}\n{{TAGDEF|ML_CSLOPE|[real]|<math>0.2</math>}}\n\nDescription: Parameter used in the automatic determination of threshold for Bayesian error estimation in the machine learning force field method.\n----\nThe usage of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Threshold for error of forces|here]].\n\nThe standard error of the history of maximum Bayesian errors of the forces ({{TAG|ML_MHIS}}) and it's slope must be below {{TAG|ML_CSIG}} and {{TAG|ML_CSLOPE}} so that an update of the threshold for the maximum Bayesian error of forces {{TAG|ML_CTIFOR}} can take place. \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_CSIG}}, {{TAG|ML_MHIS}}, {{TAG|ML_CX}}\n\n{{sc|ML_CSLOPE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:21:16Z"}, "ML_CTIFOR": {"datatype": "real", "options": {}, "summary": "This flag sets the threshold for the Bayesian error estimation on the force within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_CTIFOR}}\n{{TAGDEF|ML_CTIFOR|[real]|<math> 0.002</math>}}\n\nDescription: This flag sets the threshold for the Bayesian error estimation on the force within the machine learning force field method.\n----\nThe use of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Sampling of training data and local reference configurations|here]]. Generally, first principles calculations are only performed if the Bayesian error estimate of one force exceeds the threshold. \n\nThe initial threshold is set to the value provided by the tag {{TAG|ML_CTIFOR}} (the unit is eV/Angstrom). This threshold can be updated dynamically during ML. The details of the update are controlled by {{TAG|ML_ICRITERIA}}. Typically, after extensive training, attainable values for ML_CTIFOR are 0.02 around 300-500 K, and 0.06 around 1000-2000 K, so temperature but also system dependent. The initial default 0.002 is only sensible, if {{TAG|ML_CTIFOR}}  is automatically updated ({{TAG|ML_ICRITERIA}} = 1 or 2). If  {{TAG|ML_ICRITERIA}} = 0, use significantly larger values around 0.02-0.06.  \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_MHIS}}, {{TAG|ML_CSIG}}, {{TAG|ML_CSLOPE}}, {{TAG|ML_CDOUB}}, {{TAG|ML_CX}}, {{TAG|ML_NMDINT}}, {{TAG|ML_MCONF_NEW}}\n\n{{sc|ML_CTIFOR|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-02T08:55:59Z"}, "ML_CSIG": {"datatype": "real", "options": {}, "summary": "Parameter used in the automatic determination of threshold <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_CTIFOR\">ML_CTIFOR</a> for Bayesian error estimation in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_CSIG}}\n{{TAGDEF|ML_CSIG|[real]|<math>0.4</math>}}\n\nDescription: Parameter used in the automatic determination of threshold {{TAG|ML_CTIFOR}} for Bayesian error estimation in the machine learning force field method.\n----\nThe usage of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Threshold for error of forces|here]].\n\nThe standard error of the history of maximum Bayesian errors of the forces ({{TAG|ML_MHIS}}) and it's slope must be below {{TAG|ML_CSIG}} and {{TAG|ML_CSLOPE}} so that an update of the threshold for the maximum Bayesian error of forces {{TAG|ML_CTIFOR}} can take place. \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_CSLOPE}}, {{TAG|ML_MHIS}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_CX}}\n\n{{sc|ML_CSIG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:21:07Z"}, "ML_LEATOM": {"datatype": "boolean", "options": {}, "summary": "This term specifies whether the total atomic energy is written out or not.", "wikicode": "{{DISPLAYTITLE:ML_LEATOM}}\n{{TAGDEF|ML_LEATOM|[logical]|.FALSE.}}\n\nDescription: This term specifies whether the total atomic energy is written out or not. \n----\n\nThis tag specifies whether the total atomic energy (potential energy plus kinetic energy) for each MD step is written out to the  {{TAG|ML_EATOM}} file. It also writes the atomic positions and lattice parameters at every MD step to this file.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_WTOTEN}}\n\n{{sc|ML_LEATOM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:25:36Z"}, "ML_LHEAT": {"datatype": "boolean", "options": {}, "summary": "This tag specifies whether the heat flux is calculated or not in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_LHEAT}}\n{{TAGDEF|ML_LHEAT|[logical]|.FALSE.}}\n\nDescription: This tag specifies whether the heat flux is calculated or not in the machine learning force field method.\n----\nThe heat flux within machine learning force fields is decomposed into atomic contributions written as\n\n<math>\n\\mathbf{q}(t) = \\sum\\limits_{i=1}^{N_{a}} \\frac{d}{dt} \\left( \\mathbf{r}_{i} E_{i} \\right),\n</math>\n\n<math>\nE_{i}=\\frac{m_{i} \\left|\\mathbf{v}_{i} \\right|^{2}}{2} + U_{i}\n</math>\n\nwhere <math>\\mathbf{r}_{i}</math>, <math>\\mathbf{v}_{i}</math> and <math>E_{i}</math> denote the position vector, velocity and energy of atom <math>i</math>, respectively. The number of atoms in the system is denoted by <math>N_{a}</math>. The heat flux can be further rewritten as\n\n<math>\n\\mathbf{q}(t) = \\sum\\limits_{i=1}^{N_{a}} \\mathbf{v}_{i} E_{i} + \\sum\\limits_{i=1}^{N_{a}} \\mathbf{r}_{i} \\left( m_{i} \\mathbf{v}_{i} \\cdot \\frac{d\\mathbf{v}_{i}}{dt} + \\sum\\limits_{j=1}^{N_{a}} \\mathbf{v}_{j} \\cdot \\nabla_{j} U_{i} \\right). \n</math>\n\nUsing the equation of motions\n\n<math>\nm_{i} \\frac{d \\mathbf{v}_{i}}{dt} = - \\sum\\limits_{j=1}^{N_{a}} \\nabla_{i} U_{j}\n</math>\n\nthe heat flux can be simplified to\n\n<math>\n\\mathbf{q}(t) = \\sum\\limits_{i=1}^{N_{a}} \\mathbf{v}_{i} E_{i} - \\sum\\limits_{i=1}^{N_{a}} \\sum\\limits_{j=1}^{N_{a}} \\mathbf{r}_{i} \\left( \\mathbf{v}_{i} \\cdot \\nabla_{i} U_{j} \\right) + \\sum\\limits_{i=1}^{N_{a}} \\sum\\limits_{j=1}^{N_{a}} \\mathbf{r}_{i} \\left( \\mathbf{v}_{j} \\cdot \\nabla_{j} U_{i} \\right) = \\sum\\limits_{i=1}^{N_{a}} \\mathbf{v}_{i} E_{i} + \\sum\\limits_{i=1}^{N_{a}} \\sum\\limits_{j=1}^{N_{a}} \\left( \\mathbf{r}_{i} - \\mathbf{r}_{j} \\right) \\left( \\mathbf{v}_{j} \\cdot \\nabla_{j} U_{i} \\right). \n</math>\n\nFinally (in a post-processing step), the thermal conductivity at temperature <math>T</math> in the Green-Kubo formalism can be calculated from the correlation of the heat flux <math>\\mathbf{q}</math> as\n\n<math>\n\\kappa = \\frac{1}{3Vk_{b}T^{2}} \\int\\limits_{0}^{\\infty} \\langle \\mathbf{q}(t) \\cdot \\mathbf{q}(0) \\rangle dt,\n</math>\n\n\nwhere <math>V</math> and <math>k_{b}</math> denotes the volume of the system and the Boltzmann constant, respectively.\n\n \n\nThe heat flux is written to the file {{TAG|ML_HEAT}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LEATOM}}\n\n{{sc|ML_LHEAT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-05-10T07:24:12Z"}, "ML_ISCALE_TOTEN": {"datatype": "integer", "options": {}, "summary": "This tag specifies how to scale the energy data in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_ISCALE_TOTEN}}\n{{TAGDEF|ML_ISCALE_TOTEN|[integer]|2}}\n\nDescription: This tag specifies how to scale the energy data in the machine learning force field method.\n----\nThe following cases are possible:\n*{{TAG|ML_ISCALE_TOTEN}}=1: The total energy is scaled to the total energy of the isolated atoms given by {{TAG|ML_EATOM_REF}}.\n*{{TAG|ML_ISCALE_TOTEN}}=2: The total energy is scaled to the average of the training data. This is the default setting.\n\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_EATOM_REF}}\n\n{{sc|ML_ISCALE_TOTEN|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:24:22Z"}, "ML_MB": {"datatype": "integer", "options": {}, "summary": "This tag sets the maximum number of local reference configurations (i.e. basis functions in the kernel) in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_MB}}\n{{TAGDEF|ML_MB|[integer]|see below}}\n\nDescription: This tag sets the maximum number of local reference configurations (i.e. basis functions in the kernel) in the machine learning force field method.\n----\nThe defaults for {{TAG|ML_MB}} are different for each different {{TAG|ML_MODE}} setting. Here are the defaults for each mode:\n*{{TAG|ML_MODE}}='TRAIN': \n**No {{TAG|ML_AB}} present (learning from scratch): min(1500 , max({{TAG|NSW}} , 2*{{TAG|ML_MCONF_NEW}} * MAXAT_SP)\n**{{TAG|ML_AB}} present (continuation of learning): MB_AB + min(1500, max({{TAG|NSW}} , 2*{{TAG|ML_MCONF_NEW}} * MAXAT_SP)\n*{{TAG|ML_MODE}}='SELECT': MB_AB + {{TAG|ML_MCONF_NEW}} * MAXAT_SP\n*{{TAG|ML_MODE}}='REFIT': MB_AB + MAXAT_SP\n*{{TAG|ML_MODE}}='REFITBAYESIAN': MB_AB + MAXAT_SP\n*{{TAG|ML_MODE}}='RUN': MB_AB\nusing the following definitions:|\n*MAXAT_SP = greatest number of atoms within all species among the current structures and the structures in the {{TAG|ML_AB}} file (if present).\n*MB_AB = greatest number of local reference configurations within all species in the {{TAG|ML_AB}} file.\n\nThe default value for {{TAG|ML_MODE}} = ''TRAIN'' and {{TAG|ML_MODE}} = ''SELECT'' is a relatively safe value for most materials. However one might need to increase it to a greater value for liquids, polymers and amorphous systems, or when a MLFF for many different polytypes is trained. By default ({{TAG|ML_LBASIS_DISCARD}}=''.TRUE.''), if the number of local reference configurations would exceed {{TAG|ML_MB}}, VASP would continue the calculation and disposes of these, but one should make extensive tests whether the generated MLFF is sufficiently accurate.\n\nIf VASP stops, subsequent training can be restarted from the existing ML_AB file. This avoids loss of already acquired training data.\n\nDepending on the calculation mode VASP adds a little overhead in the allocation of {{TAG|ML_MB}} arrays to buffer for new candidate structures. Here are the buffer sizes for each mode:\n*{{TAG|ML_MODE}}='TRAIN': \n**No {{TAG|ML_AB}} present (learning from scratch): min({{TAG|NSW}} , {{TAG|ML_MCONF_NEW}}) * MAXAT_SP\n**{{TAG|ML_AB}} present (continuation of learning): min({{TAG|NSW}} , {{TAG|ML_MCONF_NEW}}) * MAXAT_SP\n*{{TAG|ML_MODE}}='SELECT': {{TAG|ML_MCONF_NEW}} * MAXAT_SP\n*{{TAG|ML_MODE}}='REFIT': MAXAT_SP\n*{{TAG|ML_MODE}}='REFITBAYESIAN': MAXAT_SP\n*{{TAG|ML_MODE}}='RUN': 0\n\nThe flag {{TAG|ML_MB}} also determines the maximum number of rows of the design matrix.   This is usually a huge matrix. The design matrix is allocated statically at the beginning of the run, since several parts of the code use MPI shared memory and dynamic reallocation of these arrays can cause issues on many operating systems. An estimate of the size of the design matrix and all other large arrays is printed out to the {{TAG|ML_LOGFILE}} before allocation. The design matrix is fully distributed in a block-cyclic fashion for scaLAPACK, and thus the memory requirement for each core scales inversely proportional to the number of used cores. \n\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_MCONF_NEW}}, {{TAG|ML_MCONF}}, {{TAG| ML_LBASIS_DISCARD}}\n\n{{sc|ML_MB|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-14T09:11:22Z"}, "ML_W1": {"datatype": "real", "options": {}, "summary": "This tag defines the weight <math>\\beta</math> for the radial (and angular) descriptor within the machine learning force field method (see <a href=\"https://www.vasp.at/wiki/index.php/Machine_learning_force_field%3A_Theory%23Potential_energy_fitting\">this section</a>).", "wikicode": "{{DISPLAYTITLE:ML_W1}}\n{{TAGDEF|ML_W1|[real]|0.1}}\n\nDescription: This tag defines the weight <math>\\beta</math> for the radial (and angular) descriptor within the machine learning force field method (see [[Machine learning force field: Theory#Potential energy fitting|this section]]).\n----\nThe weight for the angular descriptor <math>W_{2}</math> is internally computed from the weight of the radial descriptor <math>W_{1}</math> as:\n\n<math>W_{2}=1.0-W_{1}.</math>\n\nThe value for {{TAG|ML_W1}} must be chosen in the interval <math>[0, 1]</math>.\n\nBy default, the angular and radial descriptors are both used although the latter is weighed less. In principle a weight of 0 for one of them is selectable which allows the code to internally skip the respective computation. However, it is generally recommended to use both descriptors to achieve satisfying training results.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_RCUT1}}, {{TAG|ML_RCUT2}}, {{TAG|ML_SION1}}, {{TAG|ML_SION2}}\n\n{{sc|ML_W1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:31:44Z"}, "ML_IREG": {"datatype": "integer", "options": {}, "summary": "This tag specifies whether the regularization parameters are kept constant or not in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_IREG}}\n{{TAGDEF|ML_IREG|[integer]|2}}\n\nDescription: This tag specifies whether the regularization parameters are kept constant or not in the machine learning force field method.\n----\nThe following cases are possible for this tag:\n*{{TAG|ML_IREG}}=1: The (initial) precision ({{TAG|ML_SIGV0}}) and noise ({{TAG|ML_SIGW0}}) parameters are kept constant.\n*{{TAG|ML_IREG}}=2: The parameters are optimized (default).\n\nFor the optimization of the noise parameter <math>\\sigma_{\\mathrm{v}}^{2}</math> see [[Machine learning force fields: Theory#Bayesian error estimation|this section]].\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_SIGV0}}, {{TAG|ML_SIGW0}}\n\n{{sc|ML_IREG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:24:11Z"}, "ML_SIGV0": {"datatype": "real", "options": {}, "summary": "This flag sets the initial reversed and squared noise parameter <math>\\frac{1}{\\sigma_{\\mathrm{v}}^{2}}</math> in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_SIGV0}}\n{{TAGDEF|ML_SIGV0|[real]|1.0}}\n\nDescription: This flag sets the initial reversed and squared noise parameter <math>\\frac{1}{\\sigma_{\\mathrm{v}}^{2}}</math> in the machine learning force field method.\n----\nFor details about the optimization of this regularization parameter see [[Machine learning force field: Theory#Bayesian error estimation|this section]].\n\n== Related tags and sections ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IREG}}, {{TAG|ML_SIGW0}}\n\n{{sc|ML_SIGV0|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:30:59Z"}, "ML_SIGW0": {"datatype": null, "options": {}, "summary": "This flag sets the initial reversed and squared precision parameter <math>\\frac{1}{\\sigma_{\\mathrm{w}}^{2}}</math> in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_SIGW0}}\n{{TAGDEF|ML_SIGW0|[real]|}\n{{DEF|ML_SIGW0|1E-7|for {{TAG|ML_MODE}} {{=}} REFIT|1.0|else}}\n\nDescription: This flag sets the initial reversed and squared precision parameter <math>\\frac{1}{\\sigma_{\\mathrm{w}}^{2}}</math> in the machine learning force field method. \n----\n\nFor details about the optimization of this regularization parameter see [[Machine learning force field: Theory#Bayesian error estimation|this section]].\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_IREG}}, {{TAG|ML_SIGV0}}\n\n{{sc|ML_SIGW0|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-26T20:47:09Z"}, "ML_MRB1": {"datatype": "integer", "options": {}, "summary": "This tag sets the number <math>N_\\text{R}^0</math> of radial basis functions used to expand the radial descriptor <math>\\rho^{(2)}_i(r)</math> within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_MRB1}}\n{{TAGDEF|ML_MRB1|[integer]|12}}\n\nDescription: This tag sets the number <math>N_\\text{R}^0</math> of radial basis functions used to expand the radial descriptor <math>\\rho^{(2)}_i(r)</math> within the machine learning force field method.\n----\nThe radial descriptor is constructed from\n\n<math>\n\\rho_{i}^{(2)}\\left(r\\right) = \\frac{1}{4\\pi} \\int \\rho_{i}\\left(r\\hat{\\mathbf{r}}\\right) d\\hat{\\mathbf{r}}, \\quad \\text{where} \\quad\n\\rho_{i}\\left(\\mathbf{r}\\right) = \\sum\\limits_{j=1}^{N_{\\mathrm{a}}} f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n\nand <math>g\\left(\\mathbf{r}\\right)</math> is an approximation of the delta function. In practice, the continuous function above is transformed into a discrete set of numbers by expanding it into a set of radial basis functions <math>\\chi_{n0}(r)</math> (see [[Machine learning force field: Theory#Basis set expansion|this section]] for more details):\n\n<math>\n\\rho_{i}^{(2)}\\left(r\\right) = \\frac{1}{\\sqrt{4\\pi}} \\sum\\limits_{n=1}^{N^{0}_{\\mathrm{R}}} c_{n00}^{i} \\chi_{n0}\\left(r\\right).\n</math>\n\nThe tag {{TAG|ML_MRB1}} sets the number <math>N_\\text{R}^0</math> of radial basis functions to use in this expansion.\n \n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MRB2}}, {{TAG|ML_W1}}, {{TAG|ML_RCUT1}}, {{TAG|ML_SION1}}\n\n{{sc|ML_MRB1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-05-09T08:06:26Z"}, "ML_MRB2": {"datatype": "integer", "options": {}, "summary": "This tag sets the number <math>N_\\text{R}^l</math> (for all <math>l</math>) of radial basis functions used to expand the angular descriptor within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_MRB2}}\n{{TAGDEF|ML_MRB2|[integer]|8}}\n\nDescription: This tag sets the number <math>N_\\text{R}^l</math> (for all <math>l</math>) of radial basis functions used to expand the angular descriptor within the machine learning force field method. \n----\nThe angular descriptor is constructed from\n\n<math>\n\\rho_{i}^{(3)}\\left(r,s,\\theta\\right) = \\iint d\\hat{\\mathbf{r}} d\\hat{\\mathbf{s}}  \\delta\\left(\\hat{\\mathbf{r}}\\cdot\\hat{\\mathbf{s}} - \\mathrm{cos}\\theta\\right) \\sum\\limits_{j=1}^{N_{a}} \\sum\\limits_{k \\ne j}^{N_{a}} \\rho_{ik} \\left(r\\hat{\\mathbf{r}}\\right) \\rho_{ij} \\left(s\\hat{\\mathbf{s}}\\right), \\quad \\text{where} \\quad\n\\rho_{ij}\\left(\\mathbf{r}\\right) = f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n\nand <math>g\\left(\\mathbf{r}\\right)</math> is an approximation of the delta function. In practice, the continuous function above is transformed into a discrete set of numbers <math>p_{n\\nu l}^{i}</math> by expanding it into a set of radial basis functions <math>\\chi_{nl}(r)</math> and Legendre polynomials <math>P_{l}\\left(\\mathrm{cos}\\theta\\right)</math> (see [[Machine learning force field: Theory#Basis set expansion|this section]] for more details):\n\n<math>\n\\rho_{i}^{(3)}\\left(r,s,\\theta\\right) = \\sum\\limits_{l=1}^{L_{\\mathrm{max}}} \\sum\\limits_{n=1}^{N^{l}_{\\mathrm{R}}}\\sum\\limits_{\\nu=1}^{N^{l}_{\\mathrm{R}}} \\sqrt{\\frac{2l+1}{2}} p_{n\\nu l}^{i}\\chi_{nl}\\left(r\\right)\\chi_{\\nu l}\\left(s\\right)P_{l}\\left(\\mathrm{cos}\\theta\\right).\n</math>\n\nThe tag {{TAG|ML_MRB2}} sets the number <math>N_\\text{R}^l</math> of radial basis functions to use in this expansion. The same number is used for all <math>l</math>.\n{{NB|mind|The number of angular descriptor expansion coefficients <math>p_{n\\nu l}^{i}</math> scales '''quadratically''' with <math>N_\\text{R}^l</math> set by this tag. It also depends on {{TAG|ML_LMAX2}} and the number of elements.}}\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LMAX2}}, {{TAG|ML_MRB1}}, {{TAG|ML_W1}}, {{TAG|ML_RCUT2}}, {{TAG|ML_SION2}}\n\n{{sc|ML_MRB2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T11:56:16Z"}, "ML_RCUT1": {"datatype": "real", "options": {}, "summary": "Sets the cutoff radius <math>R_\\text{cut}</math> for the radial descriptor <math>\\rho^{(2)}_i(r)</math> in <math>\\AA</math>.", "wikicode": "{{DISPLAYTITLE:ML_RCUT1}}\n{{TAGDEF|ML_RCUT1|[real]|8.0}}\n\nDescription: Sets the cutoff radius <math>R_\\text{cut}</math> for the radial descriptor <math>\\rho^{(2)}_i(r)</math> in <math>\\AA</math>.\n----\nThe radial descriptor for machine-learned force fields is constructed from\n\n<math>\n\\rho_{i}^{(2)}\\left(r\\right) = \\frac{1}{4\\pi} \\int \\rho_{i}\\left(r\\hat{\\mathbf{r}}\\right) d\\hat{\\mathbf{r}}, \\quad \\text{where} \\quad\n\\rho_{i}\\left(\\mathbf{r}\\right) = \\sum\\limits_{j=1}^{N_{\\mathrm{a}}} f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n\nand <math>g\\left(\\mathbf{r}\\right)</math> is an approximation of the delta function. A basis set expansion of <math>\\rho^{(2)}_i(r)</math> yields the expansion coefficients <math>c_{n00}^{i}</math>, which are used in practice to describe the atomic environment; refer to the [[Machine learning force field: Theory#Descriptors|theory of machine-learned force fields]] for details. The tag {{TAG|ML_RCUT1}} sets the cutoff radius <math>R_\\text{cut}</math> at which the cutoff function <math>f_{\\mathrm{cut}}\\left(r_{ij}\\right)</math> decays to zero.\n{{NB|mind|The cutoff radius determines how many neighbor atoms <math>N_\\mathrm{a}</math> are considered to describe each central atom's environment. Hence, important features may be missed if the cutoff radius is too small. On the other hand, a large cutoff radius increases the computational cost of the descriptor as the cutoff sphere contains more neighbor atoms. A good compromise is always system-dependent. Therefore, different values should be tested to achieve satisfying accuracy '''and''' speed.}}\n\nThe unit of the cut-off radius is <math>\\AA</math>.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_RCUT2}}, {{TAG|ML_W1}}, {{TAG|ML_SION1}}, {{TAG|ML_SION2}}, {{TAG|ML_MRB1}}, {{TAG|ML_MRB2}} \n\n{{sc|ML_RCUT1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-05-11T06:34:47Z"}, "ML_RCUT2": {"datatype": "real", "options": {}, "summary": "This flag sets the cutoff radius <math>R_\\text{cut}</math> for the angular descriptor <math>\\rho^{(3)}_i(r)</math> in the machine learning force field method. The unit of the cut-off radius is <math>\\AA</math>.", "wikicode": "{{DISPLAYTITLE:ML_RCUT2}}\n{{TAGDEF|ML_RCUT2|[real]|5.0}}\n\nDescription: This flag sets the cutoff radius <math>R_\\text{cut}</math> for the angular descriptor <math>\\rho^{(3)}_i(r)</math> in the machine learning force field method. The unit of the cut-off radius is <math>\\AA</math>.\n----\nThe angular descriptor is constructed from\n\n<math>\n\\rho_{i}^{(3)}\\left(r,s,\\theta\\right) = \\iint d\\hat{\\mathbf{r}} d\\hat{\\mathbf{s}}  \\delta\\left(\\hat{\\mathbf{r}}\\cdot\\hat{\\mathbf{s}} - \\mathrm{cos}\\theta\\right) \\sum\\limits_{j=1}^{N_{a}} \\sum\\limits_{k \\ne j}^{N_{a}} \\rho_{ik} \\left(r\\hat{\\mathbf{r}}\\right) \\rho_{ij} \\left(s\\hat{\\mathbf{s}}\\right), \\quad \\text{where} \\quad\n\\rho_{ij}\\left(\\mathbf{r}\\right) = f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n \nand <math>g\\left(\\mathbf{r}\\right)</math> is an approximation of the delta function. A basis set expansion of <math>\\rho^{(3)}_i(r)</math> yields the expansion coefficients <math>p_{n\\nu l}^{i}</math> which are used in practice to describe the atomic environment (see [[Machine learning force field: Theory#Descriptors|this section]] for details). The tag {{TAG|ML_RCUT2}} sets the cutoff radius <math>R_\\text{cut}</math> at which the cutoff function <math>f_{\\mathrm{cut}}\\left(r_{ij}\\right)</math> decays to zero.\n{{NB|mind|The cutoff radius determines how many neighbor atoms <math>N_\\mathrm{a}</math> are taken into account to describe each central atom's environment. Hence, important features may be missed if the cutoff radius is set to a too small value. On the other hand, a large cutoff radius increases the computational cost as the cutoff sphere contains more neighbor atoms. A larger cutoff can also significantly degrade the learning efficiency. A good compromise is system-dependent, therefore different values should be tested to achieve satisfactory accuracy '''and''' speed.}}\n\nFor materials containing only H, B, C, O, N, and F (i.e. organic molecules, polymers), the learning efficiency might increase when ML_RCUT2 is set to values around 4  <math>\\AA</math> (that is, less training data are required to achieve a specific accuracy), wheres for materials with very long bonds, a larger value around 6  <math>\\AA</math> can improve the accuracy,\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_RCUT1}}, {{TAG|ML_W1}}, {{TAG|ML_SION1}}, {{TAG|ML_SION2}}, {{TAG|ML_MRB1}}, {{TAG|ML_MRB2}} \n\n\n{{sc|ML_RCUT1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-05-09T13:35:23Z"}, "ML_SION1": {"datatype": "real", "options": {}, "summary": "This tag specifies the width <math>\\sigma_\\text{atom}</math> of the Gaussian functions used for broadening the atomic distributions of the radial descriptor <math>\\rho^{(2)}_i(r)</math> within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_SION1}}\n{{TAGDEF|ML_SION1|[real]|0.5}}\n\nDescription: This tag specifies the width <math>\\sigma_\\text{atom}</math> of the Gaussian functions used for broadening the atomic distributions of the radial descriptor <math>\\rho^{(2)}_i(r)</math> within the machine learning force field method.\n----\nThe radial descriptor is constructed from\n\n<math>\n\\rho_{i}^{(2)}\\left(r\\right) = \\frac{1}{4\\pi} \\int \\rho_{i}\\left(r\\hat{\\mathbf{r}}\\right) d\\hat{\\mathbf{r}}, \\quad \\text{where} \\quad\n\\rho_{i}\\left(\\mathbf{r}\\right) = \\sum\\limits_{j=1}^{N_{\\mathrm{a}}} f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n\nand <math>g\\left(\\mathbf{r}\\right)</math> is the following approximation of the delta function:\n\n<math> \ng\\left(\\mathbf{r}\\right)=\\frac{1}{\\sqrt{2\\sigma_{\\mathrm{atom}}\\pi}}\\mathrm{exp}\\left(-\\frac{|\\mathbf{r}|^{2}}{2\\sigma_{\\mathrm{atom}}^{2}}\\right).\n</math>\n\nThe tag {{TAG|ML_SION1}} sets the width <math>\\sigma_\\text{atom}</math> of the above Gaussian function (see [[Machine learning force field: Theory#Descriptors|this section]] for more details).\n{{BOX|tip|Our test calculations indicate that {{TAG|ML_SION1}} {{=}} {{TAG|ML_SION2}} results in an optimal training performance. Furthermore, a value of 0.5 was found to be a good default value for both. However, the best choice is somewhat system-dependent. For instance, a smaller value for {{TAG|ML_SION1}} can increase the number of local reference configurations, and hence ultimately the quality of the MLFF. See also [[Machine learning force field calculations: Basics#Accurate force fields|here]].\n}}\nThe unit of {{TAG|ML_SION1}} is <math>\\AA</math>.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_SION2}}, {{TAG|ML_RCUT1}}, {{TAG|ML_RCUT2}}, {{TAG|ML_MRB1}}, {{TAG|ML_MRB2}}\n\n{{sc|ML_SION1|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:31:27Z"}, "ML_SION2": {"datatype": "real", "options": {}, "summary": "This tag specifies the width <math>\\sigma_\\text{atom}</math> of the Gaussian functions used for broadening the atomic distributions of the angular descriptor <math>\\rho^{(3)}_i(r)</math> within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_SION2}}\n{{TAGDEF|ML_SION2|[real]|{{TAG|ML_SION1}}}}\n\nDescription: This tag specifies the width <math>\\sigma_\\text{atom}</math> of the Gaussian functions used for broadening the atomic distributions of the angular descriptor <math>\\rho^{(3)}_i(r)</math> within the machine learning force field method.\n----\nThe angular descriptor is constructed from\n\n<math>\n\\rho_{i}^{(3)}\\left(r,s,\\theta\\right) = \\iint d\\hat{\\mathbf{r}} d\\hat{\\mathbf{s}}  \\delta\\left(\\hat{\\mathbf{r}}\\cdot\\hat{\\mathbf{s}} - \\mathrm{cos}\\theta\\right) \\sum\\limits_{j=1}^{N_{a}} \\sum\\limits_{k \\ne j}^{N_{a}} \\rho_{ik} \\left(r\\hat{\\mathbf{r}}\\right) \\rho_{ij} \\left(s\\hat{\\mathbf{s}}\\right), \\quad \\text{where} \\quad\n\\rho_{ij}\\left(\\mathbf{r}\\right) = f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right)\n</math>\n\nand <math>g\\left(\\mathbf{r}\\right)</math> is the following approximation of the delta function:\n\n<math> \ng\\left(\\mathbf{r}\\right)=\\frac{1}{\\sqrt{2\\sigma_{\\mathrm{atom}}\\pi}}\\mathrm{exp}\\left(-\\frac{|\\mathbf{r}|^{2}}{2\\sigma_{\\mathrm{atom}}^{2}}\\right).\n</math>\n\nThe tag {{TAG|ML_SION2}} sets the width <math>\\sigma_\\text{atom}</math> of the above Gaussian function (see [[Machine learning force field: Theory#Descriptors|this section]] for more details).\n{{BOX|tip|Our test calculations indicate that {{TAG|ML_SION1}} {{=}} {{TAG|ML_SION2}} results in an optimal training performance. Furthermore, a value of 0.5 was found to be a good default value for both. However, the best choice is system-dependent, careful testing may improve machine learning results.}}\nThe unit of {{TAG|ML_SION2}} is <math>\\AA</math>.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_SION1}}, {{TAG|ML_RCUT1}}, {{TAG|ML_RCUT2}}, {{TAG|ML_MRB1}}, {{TAG|ML_MRB2}}\n\n{{sc|ML_SION2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:31:37Z"}, "ML_NHYP": {"datatype": "integer", "options": {}, "summary": "This tag specifies the polynomial power <math> \\zeta</math> of the kernel within the machine learning force field method (see <a href=\"https://www.vasp.at/wiki/index.php/Machine_learning_force_field%3A_Theory%23Potential_energy_fitting\">this section</a>).", "wikicode": "{{DISPLAYTITLE:ML_NHYP}}\n{{TAGDEF|ML_NHYP|[integer]|4}}\n\nDescription: This tag specifies the polynomial power <math> \\zeta</math> of the kernel within the machine learning force field method (see [[Machine learning force field: Theory#Potential energy fitting|this section]]).\n----\nThe value of {{TAG|ML_NHYP}} must be an integer number <math>\\ge</math> 1.\n\n== Related tags and articles ==\n{{TAG|ML_RCUT1}}, {{TAG|ML_SION1}}, {{TAG|ML_RCUT2}}, {{TAG|ML_SION2}}\n\n{{sc|ML_NHYP|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:29:38Z"}, "ML_LMAX2": {"datatype": "integer", "options": {}, "summary": "This tag specifies the maximum angular momentum quantum number <math>L_\\max</math> of spherical harmonics used to expand atomic distributions within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_LMAX2}}\n{{TAGDEF|ML_LMAX2|[integer]}}\n{{DEF|ML_LMAX2|3|for {{TAG|ML_LAFILT2}} {{=}} .TRUE.|6|else}}\n\nDescription: This tag specifies the maximum angular momentum quantum number <math>L_\\max</math> of spherical harmonics used to expand atomic distributions within the machine learning force field method.\n----\nTo construct an atomic environment descriptor the atomic probability density\n\n<math>\n\\rho_{i}\\left(\\mathbf{r}\\right) = \\sum\\limits_{j=1}^{N_{\\mathrm{a}}} f_{\\mathrm{cut}}\\left(r_{ij}\\right) g\\left(\\mathbf{r}-\\mathbf{r}_{ij}\\right),\n</math>\n\nwhere <math>g\\left(\\mathbf{r}\\right)</math> is an approximation of the delta function, is expanded in terms of radial basis functions <math>\\chi_{nl}(r)</math> and spherical harmonics <math>Y_{lm}\\left(\\hat{\\mathbf{r}}\\right)</math> (see [[Machine learning force field: Theory#Basis set expansion|this section]] for more details):\n\n<math>\n\\rho_{i} \\left( \\mathbf{r} \\right) = \\sum\\limits_{l=1}^{L_{\\mathrm{max}}} \\sum\\limits_{m=-l}^{l} \\sum\\limits_{n=1}^{N^{l}_{ \\mathrm{R}}} c_{nlm}^{i}\\chi_{nl} \\left( r \\right) Y_{lm} \\left( \\hat{\\mathbf{r}} \\right),\n</math>\n\nThe tag {{TAG|ML_LMAX2}} specifies the maximum angular momentum quantum number <math>L_\\max</math> of spherical harmonics used in this expansion.\n{{NB|mind|This tag is only relevant for the angular descriptor <math>\\rho^{(3)}_i(r)</math>. The corresponding number of expansion coefficients <math>p_{n\\nu l}^{i}</math> scales '''linearly''' with <math>L_\\max</math> (however the calculation of the spherical harmonics scales quadratically) and is also depending on {{TAG|ML_MRB2}} and the number of elements present.}}\n\nBy default an angular filtering (see {{TAG|ML_LAFILT2}} and {{TAG|ML_IAFILT2}}) with a filtering parameter of {{TAG|ML_AFILT2}}=0.002 is used where a value of {{TAG|ML_LMAX2}}=3 is perfectly safe for most applications. If you need to improve the accuracy, you might also try to increase it to {{TAG|ML_LMAX2}}=4. If the angular filter is switched off, we recommend to use a value of {{TAG|ML_LMAX2}}=6 (this is then the default value).\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MRB1}}, {{TAG|ML_MRB2}}, {{TAG|ML_LAFILT2}}, {{TAG|ML_IAFILT2}}, {{TAG|ML_AFILT2}}\n\n{{sc|ML_LMAX2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-05-09T08:11:02Z"}, "ML_LAFILT2": {"datatype": "boolean", "options": {}, "summary": "This tag specifies whether angular filtering is applied or not within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_LAFILT2}}\n{{TAGDEF|ML_LAFILT2|[logical]|.TRUE.}}\n\nDescription: This tag specifies whether angular filtering is applied or not within the machine learning force field method.\n----\nFor the desciption of the filters please see: {{TAG|ML_IAFILT2}} and {{TAG|ML_AFILT2}}.\n\nThe applied angular filter is also briefly described [[Machine learning force field: Theory#Basis set expansion|here]].\n\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IAFILT2}}, {{TAG|ML_AFILT2}}\n\n{{sc|ML_LAFILT2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:24:53Z"}, "ML_IAFILT2": {"datatype": "integer", "options": {}, "summary": "This tag specifies the type of angular filtering used in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_IAFILT2}}\n{{TAGDEF|ML_IAFILT2|[integer]|2}}\n\nDescription: This tag specifies the type of angular filtering used in the machine learning force field method.\n----\n[[File:Angular filtering MLFF cropped.png|400px|thumb|Fig. 1: Square of filtering function.]]\n\nThis tag is only used if {{TAG|ML_LAFILT2}}=''.TRUE.'' is set.\n\nFollowing cases are possible for the angular filtering function <math>\\eta</math> (see also [[On-the-fly machine learning force field generation using Bayesian linear regression#Basis set expansion|here]]):\n*{{TAG|ML_IAFILT2}}=1: The angular filtering function is described as <math>\\eta_{l}=\\frac{1}{(2l+1)^{1/4}}</math>.\n*{{TAG|ML_IAFILT2}}=2: The angular filtering function{{cite|boyd:book:2000}} is described as <math>\\eta_{l,a_{\\mathrm{FILT}}}=\\frac{1}{1+a_{\\mathrm{FILT}} [l (l+1)]^{2}} </math>. Using this function the parameter <math>a_{\\mathrm{FILT}}</math> has to be defined too. It is set in the {{TAG|INCAR}} file by setting {{TAG|ML_AFILT2}}. This option is the default.\n\nIn the case of the angular descriptor two radial basis functions are multiplied by each other (see [[On-the-fly machine learning force field generation using Bayesian linear regression#Basis set expansion|here]]). Both basis functions use the same filtering function and hence the filtering is done by the square of the filtering function. This is plotted in Fig. 1 for the two different functions used for {{TAG|ML_IAFILT2}}=1 and 2 (labeled as TYPE1 and TYPE2, respectively). In the case of {{TAG|ML_IAFILT2}}=2 it can be seen that for the filtering parameter {{TAG|ML_AFILT2}}=0.002 and <math>l</math>=5 the function has only a contribution of 0.15. Using this filtering parameter the maximum cut-off for the angular quantum number can be reduced to {{TAG|ML_LMAX2}}=4. \n\n\n\n\n\n== References ==\n<references/>\n<noinclude>\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LAFILT2}}, {{TAG|ML_AFILT2}}\n\n{{sc|ML_IAFILT2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-08-01T08:41:56Z"}, "ML_AFILT2": {"datatype": "real", "options": {}, "summary": "This tag sets the filtering parameter for the angular filtering for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_IAFILT2\">ML_IAFILT2</a> in the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_AFILT2}}\n{{TAGDEF|ML_AFILT2|[real]|0.002}}\n\nDescription: This tag sets the filtering parameter for the angular filtering for {{TAG|ML_IAFILT2}} in the machine learning force field method.\n----\nThis tag is only used if {{TAG|ML_LAFILT2}}=''.TRUE.'' and {{TAG|ML_IAFILT2}}=2 are used.\n\nThe angular filtering function{{cite|boyd:book:2000}} for {{TAG|ML_IAFILT2}}=2 is described as <math>\\eta_{l,a_{\\mathrm{FILT}}}=\\frac{1}{1+a_{\\mathrm{FILT}} [l (l+1)]^{2}} </math>. The tag {{TAG|ML_AFILT2}} sets the parameter <math>a_{\\mathrm{FILT}}</math>.\n\n== References ==\n<references/>\n<noinclude>\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LAFILT2}}, {{TAG|ML_IAFILT2}}\n\n{{sc|ML_AFILT2|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:19:52Z"}, "ML_LCOUPLE": {"datatype": "boolean", "options": {}, "summary": "This tag specifies whether thermodynamic integration is activated in order to calculate the chemical potentials within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_LCOUPLE}}\n{{TAGDEF|ML_LCOUPLE|[logical]|.FALSE.}}\n\nDescription: This tag specifies whether thermodynamic integration is activated in order to calculate the chemical potentials within the machine learning force field method.\n----\n\nIn thermodynamic integration a coupling parameter <math>\\lambda</math> is introduced to the Hamiltonian to smoothly switch between a \"non-interacting\" reference state and a \"fully-interacting\" state. The change of the free energy along this path is written as\n\n<math>\n\\Delta \\mu = \\int\\limits_{0}^{1} \\langle \\frac{dH(\\lambda)}{d\\lambda} \\rangle_{\\lambda} d\\lambda.\n</math>\n\nUsing machine learning force fields the Hamiltonian can be written as\n\n<math>\nH (\\lambda) = \\sum\\limits_{i=1}^{N_{a}} \\frac{|\\mathbf{p}_{i}|^2}{2m_{i}} + \\sum\\limits_{i \\notin M} U_{i}(\\lambda) + \\lambda \\sum\\limits_{i \\in M} U_{i}(\\lambda) + \\sum\\limits_{i}^{N_{a}} U_{i,\\mathbf{atom}}. \n</math>\n\nwhere <math>N_{a}</math> denotes the number of atoms and <math> U_{i,\\mathbf{atom}}</math> is an atomic reference energy for a single non interacting atom. The first term in the equation describes the potential energy and the second and third term describe the potential energy of an atom <math>i</math>. The index <math>M</math> denotes the atoms whose interaction is controlled by a coupling parameter. The interaction of the atoms are controlled by scaling the contributions to the atom density via the coupling parameter\n\n<math>\n\\rho (\\mathbf{r},\\lambda) = \\sum\\limits_{j\\notin M} f_{\\mathrm{cut}} \\left( \\left| \\mathbf{r}_{j} - \\mathbf{r}_{i} \\right| \\right) g \\left[ \\mathbf{r} - \\left( \\mathbf{r}_{j} - \\mathbf{r}_{i} \\right) \\right] + \\lambda \\sum\\limits_{j\\in M} f_{\\mathrm{cut}} \\left( \\left| \\mathbf{r}_{j} - \\mathbf{r}_{i} \\right| \\right) g \\left[ \\mathbf{r} - \\left( \\mathbf{r}_{j} - \\mathbf{r}_{i} \\right) \\right].\n</math>  \n\n\nFurther details on the implementation can be found in reference {{cite|jinnouchiti:prb:2020}}.\n\nFor thermodynamic integration the following parameters have to be set:\n*{{TAG|ML_ISTART}}=2.\n*{{TAG|ML_LCOUPLE}}=''.TRUE.''.\n*The number of atoms for which a coupling parameter is introduced (<math>i \\in M </math>): {{TAG|ML_NATOM_COUPLED}}.\n*The list of atom indices that for that the coupling parameter is applied in the interaction: {{TAG|ML_ICOUPLE}}.\n*The strength of the coupling parameter <math>\\lambda</math> between 0 and 1: {{TAG|ML_RCOUPLE}}.\n\nThe derivative of the hamiltonian with respect to the coupling constant <math>dH/d\\lambda</math> is written out at every MD step to the {{TAG|ML_LOGFILE}}. A sample output should look like this:\n\n # DCOUPLE ################################\n # DCOUPLE This line shows the derivative of the Hamiltonian with respect to coupling constant (dH/dlambda).\n # DCOUPLE \n # DCOUPLE nstep .......... MD time step or input structure counter\n # DCOUPLE der_H_lambda ... dH/dlambda\n # DCOUPLE ################################\n # DCOUPLE           nstep     der_H_lambda\n # DCOUPLE               2                3\n # DCOUPLE ################################\n DCOUPLE                 1  -1.08332135E+01\n DCOUPLE                 2  -1.08132321E+01\n DCOUPLE                 3  -1.07631992E+01\n DCOUPLE                 4  -1.06786675E+01\n DCOUPLE                 5  -1.05493088E+01\n DCOUPLE                 6  -1.03561161E+01\n DCOUPLE                 7  -1.00762443E+01\n DCOUPLE                 8  -9.69961878E+00\n DCOUPLE                 9  -9.25531640E+00\n DCOUPLE                10  -8.82525354E+00\n ...\n\n== References ==\n<references/>\n\n<noinclude>\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_NATOM_COUPLED}}, {{TAG|ML_ICOUPLE}}, {{TAG|ML_RCOUPLE}}\n\n{{sc|ML_LCOUPLE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-11-04T14:20:09Z"}, "ML_NATOM_COUPLED": {"datatype": "integer", "options": {}, "summary": "This tag specifies the number of atoms for which a coupling parameter is introduced to calculate the chemical potential within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_NATOM_COUPLED}}\n{{TAGDEF|ML_NATOM_COUPLED|[integer]|0}}\n\nDescription: This tag specifies the number of atoms for which a coupling parameter is introduced to calculate the chemical potential within the machine learning force field method. \n----\n\nFor thermodynamic integration calculations please have a look at the tag {{TAG|ML_LCOUPLE}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LCOUPLE}}, {{TAG|ML_ICOUPLE}}, {{TAG|ML_RCOUPLE}}\n\n{{sc|ML_NATOM_COUPLED|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:29:29Z"}, "ML_ICOUPLE": {"datatype": "integer array", "options": {}, "summary": "This tag specifies the atoms where the coupling parameter is introduced to calculate the chemical potential within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_ICOUPLE}}\n{{TAGDEF|ML_ICOUPLE|[integer array]}}\n\nDescription: This tag specifies the atoms where the coupling parameter is introduced to calculate the chemical potential within the machine learning force field method.\n----\n\nAtom are ordered according to the {{FILE|POSCAR}} file and indices start with index 1. For thermodynamic integration calculations please have a look at the tag {{TAG|ML_LCOUPLE}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LCOUPLE}}, {{TAG|ML_NATOM_COUPLED}}, {{TAG|ML_RCOUPLE}}\n\n{{sc|ML_ICOUPLE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:23:52Z"}, "ML_RCOUPLE": {"datatype": "real", "options": {}, "summary": "This tag specifies the value of the coupling parameter for the calculation of the chemical potential within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_RCOUPLE}}\n{{TAGDEF|ML_RCOUPLE|[real]|1.0}}\n\nDescription: This tag specifies the value of the coupling parameter for the calculation of the chemical potential within the machine learning force field method.\n----\n\nFor thermodynamic integration calculations please have a look at the tag {{TAG|ML_LCOUPLE}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LCOUPLE}}, {{TAG|ML_NATOM_COUPLED}}, {{TAG|ML_ICOUPLE}}\n\n{{sc|ML_RCOUPLE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:30:16Z"}, "LSUBROT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "This flag can be set for <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3AHybrid_functionals\">hybrid functionals</a> (HF-type calculations). <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSUBROT\">LSUBROT</a> determines whether an optimal rotation matrix between the occupied and unoccupied block is sought, when a direct optimization of the energy functional is performed (i.e. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSUBROT\">ALGO</a>=<span><span class=\"tag-value\">All</span> {{!}} Damped). The corresponding algorithm is unpublished.  </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSUBROT\">LSUBROT</a>=<span><span class=\"tag-value\">.FALSE.</span> is the standard algorithm, in which the rotation matrix between occupied and unoccupied orbitals is determined essentially using Loewdin perturbation theory, as for instance explained in Ref. </span><ref name=\"kresse:prb:96\"></ref>. For <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSUBROT\">LSUBROT</a>=<span><span class=\"tag-value\">.TRUE.</span> the rotation matrix is instead optimized by performing a few standard SCF steps, in which the orbitals are kept fixed, but rotations between the occupied and unoccupied manifold are allowed. Once satisfactory convergence has been reached, the optimized density matrix (rotation matrix between occupied and unoccupied block) is passed back to the direct optimization routine and a rotation along the suggested direction is performed alongside an update of the orbitals. This generally speeds up calculations for small gap systems as well as metals. However, in rare cases, we have observed instabilities, so be careful when selecting </span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSUBROT\">LSUBROT</a>=<span class=\"tag-value\">.TRUE.</span>", "wikicode": "{{TAGDEF|LSUBROT|.FALSE. {{!}} .TRUE. }}\n\n{{DEF|SUBROT|.FALSE.|}}\n\nDescription: This flag can be set for [[:Category:Hybrid_functionals|hybrid functionals]] (HF-type calculations). {{TAG|LSUBROT}} determines whether an optimal rotation matrix between the occupied and unoccupied block is sought, when a direct optimization of the energy functional is performed (i.e. {{TAG| ALGO}}=All {{!}} Damped). The corresponding algorithm is unpublished.  {{TAG|LSUBROT}} =.FALSE. is the standard algorithm, in which the rotation matrix between occupied and unoccupied orbitals is determined essentially using Loewdin perturbation theory, as for instance explained in Ref. <ref name=\"kresse:prb:96\"/>. For {{TAG|LSUBROT}} =.TRUE. the rotation matrix is instead optimized by performing a few standard SCF steps, in which the orbitals are kept fixed, but rotations between the occupied and unoccupied manifold are allowed. Once satisfactory convergence has been reached, the optimized density matrix (rotation matrix between occupied and unoccupied block) is passed back to the direct optimization routine and a rotation along the suggested direction is performed alongside an update of the orbitals. This generally speeds up calculations for small gap systems as well as metals. However, in rare cases, we have observed instabilities, so be careful when selecting {{TAG|LSUBROT}} =.TRUE. \n\nAlthough the flag can be set for standard functionals, it is only efficient for hybrid functionals (HF-type calculations).\n\n== References ==\n<references>\n<ref name=\"kresse:prb:96\">[http://link.aps.org/doi/10.1103/PhysRevB.54.11169 G. Kresse and J. Furthm\u00fcller, Phys. Rev. B 54, 11169 (1996).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:43:04Z"}, "LSCAAWARE": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCAAWARE\">LSCAAWARE</a> controls the distribution of the Hamilton matrix. </span>", "wikicode": "{{TAGDEF|LSCAAWARE|[logical]}}\n{{DEF|LSCAAWARE|.TRUE.|if VASP is compiled with scaLAPACK support (precompiler flag -DscaLAPACK)|.FALSE.|otherwise}}\n\nDescription: {{TAG|LSCAAWARE}} controls the distribution of the Hamilton matrix. \n\n----\n\nFor {{TAG|LSCAAWARE}}=.TRUE., VASP distributes the Hamilton matrix among the MPI ranks.  \nFor {{TAG|LSCAAWARE}}=.FALSE., each MPI ranks allocates the complete Hamiltonain. In both cases {{TAG|LSCALAPACK}} decides if ScaLAPACK routines are used for diagonalization. \n\n== Related tags and articles ==\n{{TAG|NPAR}},\n{{TAG|NCORE}},\n{{TAG|LPLANE}},\n{{TAG|NSIM}},\n{{TAG|KPAR}},\n{{TAG|LSCALU}},\n{{TAG|LSCALAPACK}}\n\n{{sc|LSCAAWARE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Performance]][[Category:parallelization]]", "last_revised": "2022-04-08T14:40:04Z"}, "LVDW_ONECELL": {"datatype": "boolean boolean boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVDW_ONECELL\">LVDW_ONECELL</a> can be used to disable vdW interaction with mirror image in X Y Z direction. This is advisable for molecular calculations in the gas phase. In all other cases, use the default.</span>", "wikicode": "{{DISPLAYTITLE:LVDW_ONECELL}}\n{{TAGDEF|LVDW_ONECELL|[logical][logical][logical]| .FALSE. .FALSE. .FALSE. }} \n\nDescription: {{TAGDEF|LVDW_ONECELL}} can be used to disable vdW interaction with mirror image in X Y Z direction. This is advisable for molecular calculations in the gas phase. In all other cases, use the default.\n\nNote: There is some confusing documentation on the ASE pages, which states that \".TRUE. .TRUE. .TRUE.\" enables the interaction with neighboring cells. However, the opposite is the case and ''.TRUE.'' disables the interaction (\".FALSE. .FALSE. .FALSE.\" = interactions switched on, \".TRUE. .TRUE. .TRUE.\" = interactions switched off).\n----\n\n== Related tags and articles ==\n{{TAG|IVDW}},\n{{TAG|Many-body dispersion energy}},\n\n{{sc|LVD_ONECELL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:44:45Z"}, "STOP_ON": {"datatype": "string", "options": {"a": null, "e": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/STOP_ON\">STOP_ON</a> defines if the code should stop on errors only or also on alerts.</span>", "wikicode": "{{DISPLAYTITLE:STOP_ON}}\n\n{{TAGDEF|STOP_ON|Error{{!}}Alert|Error}}\n\nDescription: {{TAG|STOP_ON}} defines if the code should stop on errors only or also on alerts.\n\n----\n\nThere are two instances, why one might want a more conservative choice when running calculations.\n\nFirst, VASP will overwrite user provided input, if the input does not make sense. You may want to\nmake sure that VASP does not continue in this case by setting the stricter {{TAG|STOP_ON}} = Alert\n\nSecondly, VASP will continue if it encounters issues during the calculation if there is a chance\nthat these disappear during the self consistency. However, if you are at a stage where you still\nexplore what parameters to use, being more conservative makes the calculation fail faster so\nthat you can try different parameters.\n\n[[Category:INCAR tag]]", "last_revised": "2022-04-07T06:53:03Z"}, "LFOCKACE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LFOCKACE\">LFOCKACE</a> determines whether the Adaptively Compressed Exchange Operator is used. </span>", "wikicode": "{{TAGDEF|LFOCKACE|.TRUE. {{!}} .FALSE. | .TRUE.}}\n{{DEF|LFOCKACE|.TRUE.|for VASP.6|N/A|for VASP.5.X and older}}\n\nDescription: {{TAG|LFOCKACE}} determines whether the Adaptively Compressed Exchange Operator is used.{{cite|linlin:jctc:2016}} \n\n*N.B.:Available for CPU and OpenACC version of VASP.6 when compiled with [[Precompiler flags|-Dfock_dblbuf]].\n----\nFor {{TAG|LFOCKACE}}=.TRUE. the Cholesky decomposition <math>X=LL^\\dagger</math> of the Fock exchange matrix <math>X_{ij} = \\langle \\tilde\\psi_i \\mid \\tilde V_X \\mid \\tilde\\psi_j \\rangle </math> is calculated and the adaptively compressed exchange operator <math>\\tilde V_{ACE} = -\\sum_i \\mid \\tilde X_i \\rangle \\langle \\tilde X_i \\mid </math> is used for the action of the Fock exchange on the pseudo orbitals. This method can be used for [[:Category:Hybrid functionals|hybrid functionals]] in combination with the Davidson algorithm ({{TAGBL|ALGO}}=Normal) to save a factor of <math>\\approx 3</math> in computation time.  \n\nFor {{TAG|LFOCKACE}}=.FALSE. the conventional orbital representation is used. \n\nNote: it is good scientific practice to cite the original publication (Ref. {{cite|linlin:jctc:2016}}) if you use this feature. The feature is used by default, if the Davidson algorithm ({{TAG|ALGO}} = Normal) is used; ACE is not used for {{TAG|ALGO}} = Damped or {{TAG|ALGO}} = All.  \n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|AEXX}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n{{sc|LHFCALC|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:VASP6]]", "last_revised": "2023-03-30T17:57:23Z"}, "LMP2LT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMP2LT\">LMP2LT</a> selects a Laplace transformed MP2 algorithm.</span>", "wikicode": "{{TAGDEF|LMP2LT|.FALSE. {{!}} .TRUE.}}\n{{DEF|LMP2LT|.FALSE.|}}\n\nDescription: {{TAG|LMP2LT}} selects a Laplace transformed MP2 algorithm.\n----\n\nIf {{TAG|LMP2LT}}=.TRUE. and {{TAG|ALGO}}=ACFTDRK is set, a quartic scaling Laplace transformed MP2 algorithm is selected.{{cite|schaefer:JCP2017}} \n\nThis tag should be used in combination with {{TAG|KPAR}} to tweak parallelization as described in this [[LTMP2_-_Tutorial#Parallelization|tutorial]].\n\n== Related tags and articles ==\n{{TAG|NOMEGA}},\n{{TAG|ALGO}},\n{{TAG|LSMP2LT}},\n{{TAG|KPAR}}\n\n{{sc|LMP2LT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:MP2]][[Category:VASP6]]", "last_revised": "2022-07-19T10:04:51Z"}, "LSMP2LT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSMP2LT\">LSMP2LT</a> selects a stochastic Laplace transformed MP2 algorithm.</span>", "wikicode": "{{TAGDEF|LSMP2LT|.FALSE. {{!}} .TRUE.}}\n{{DEF|LSMP2LT|.FALSE.|}}\n\nDescription: {{TAG|LSMP2LT}} selects a stochastic Laplace transformed MP2 algorithm.\n----\n\nIf {{TAG|LSMP2LT}}=.TRUE. and {{TAG|ALGO}}=ACFTDRK is set, a quartic scaling stochastic Laplace transformed MP2 algorithm is selected.{{cite|schaefer:JCP2017}} \n\nThis tag should be used in combination with {{TAG|KPAR}} to tweak parallelization as described in this [[Stochastic_LTMP2#Parallelization|tutorial]].\n\n== Related tags and articles ==\n{{TAG|NOMEGA}},\n{{TAG|ESTOP}},\n{{TAG|NSTORB}},\n{{TAG|KPAR}},\n{{TAG|ALGO}}\n\n{{sc|LMP2LT|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:MP2]][[Category:VASP6]]", "last_revised": "2022-07-19T10:11:35Z"}, "ESTOP": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ESTOP\">ESTOP</a> specifies the stop condition for stochastic MP2.</span>", "wikicode": "{{TAGDEF|ESTOP|[real]}}\n{{DEF|ESTOP|0.05| }}\n\nDescription: {{TAG|ESTOP}} specifies the stop condition for stochastic MP2.{{cite|Schaefer:JCP2017}}\n\n----\n{{TAGBL|ESTOP}} defines the energy accuracy in units of eV for each individual tau-point of the two individual MP2 energy contributions (direct MP2 term + exchange MP2 term). Since the statistical errors of each contribution is independent, the standard deviation of the MP2 energy can be estimated as \n\n<math>\n\\sigma = \\texttt{ESTOP} * \\sqrt{2 \\cdot \\texttt{NOMEGA}} \\;.\n</math>\n\nAccording to our experience, the error of the resulting MP2 energy can then be safely estimated by <math>\\pm 2 \\sigma</math>.\n\nThus, if you require an MP2 energy with a maximum error of <math>\\Delta</math>, you should set \n\n<math>\n\\texttt{ESTOP} = \\frac{\\Delta}{2 \\cdot \\sqrt{2 \\cdot  \\texttt{NOMEGA}}} \\;.\n</math>\n\nSee [[Stochastic_LTMP2|this tutorial]] for more Information about Laplace transformed MP2.\n\n== Related tags and articles ==\n{{TAG|ALGO}},\n{{TAG|LMP2LT}},\n{{TAG|LSMP2LT}},\n{{TAG|NOMEGA}},\n{{TAG|NSTORB}}\n\n----\n\n[[Category:INCAR tag]][[Category:MP2]][[Category:VASP6]]", "last_revised": "2022-04-08T14:13:55Z"}, "NSTORB": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NSTORB\">NSTORB</a> specifies the number of stochastic orbitals per cycle in the stochastic MP2 algorithm.</span>", "wikicode": "{{TAGDEF|NSTORB|[integer]}}\n{{DEF|NSTORB|-1|}}\n\nDescription: {{TAG|NSTORB}} specifies the number of stochastic orbitals per cycle in the stochastic MP2 algorithm.{{cite|Schaefer:JCP2017}}\n----\n\n{{TAGBL|NSTORB}} defines the number of stochastic orbitals per cycle, i.e., the number of stochastic orbitals that define one stochastic sample. If the sample is not large enough, the calculations are repeated until the accuracy, defined by ESTOP, is reached.\n\nAs a rule of thumb, we recommend setting\n\n<math>\n\\texttt{NSTORB} = \\sqrt{\\texttt{NBANDS}} \\;.\n</math>\n\nSee [[Stochastic_LTMP2|here]] for a small tutorial on stochastic Laplace transformed MP2 calculations.\n\n== Related tags and articles ==\n{{TAG|NOMEGA}},\n{{TAG|ESTOP}},\n{{TAG|LSMP2LT}},\n{{TAG|LMP2LT}},\n{{TAG|NBANDS}},\n{{TAG|KPAR}},\n{{TAG|ALGO}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:MP2]][[Category:VASP6]]", "last_revised": "2022-07-19T10:23:45Z"}, "VCAIMAGES": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VCAIMAGES\">VCAIMAGES</a> allows to perform thermodynamic coupling constant integrations. To achieve this, two molecular dynamics simulations are performed with e.g. different <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VCAIMAGES\">POTCAR</a> or <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VCAIMAGES\">KPOINTS</a> files or different exchange-correlation functionals, and force averaging between the two calculations is done.", "wikicode": "{{TAGDEF|VCAIMAGES|[real]|-1}}\n\nDescription: The tag {{TAG|VCAIMAGES}} allows to perform thermodynamic coupling constant integrations. To achieve this, two molecular dynamics simulations are performed with e.g. different {{TAG|POTCAR}} or {{TAG|KPOINTS}} files or different exchange-correlation functionals, and force averaging between the two calculations is done{{cite|dorner:PRL:2018}}.\n----\nThe tag {{TAG|VCAIMAGES}} internally splits the available nodes into two groups, and each group\nthen performs an independent VASP calculation (this implies {{TAG|VCAIMAGES}} only works in the MPI version). \nThis behavior is implemented in the same way as\nthe nudged elastic band method described under the tag {{TAG|IMAGES}}. As opposed to the nudged\nelastic band method, VASP creates always two images by setting the tag {{TAG|IMAGES}}=2 internally.\nThe two calculations are performed in subdirectories 01 and 02 (as opposed to the nudged elastic\nband method, subdirectories 00 and 03  are not required). A precise description of the file\nreading and writing is given below.\n\nThe two VASP calculations are essentially performed independently in subdirectories 01 and 02.\nOnly the forces and energies of the two calculations are averaged according to the tag {{TAG|VCAIMAGES}}. \nSpecifically, the value supplied in the tag {{TAG|VCAIMAGES}} determines the weight of the calculations\nperformed in subdirectory 01. The weight of the second image is 1-{{TAG|VCAIMAGES}}. The averaging\nis performed after self-consistency has been reached and affects the final total energy as well as\nthe forces. Since the energies and forces are averaged, the trajectories generated by the two simulations \nwill be exactly identical. Make sure though, that the initial {{TAG|POSCAR}} files in the two subdirectories\nare exactly identical. The averaged energies can be found in the {{TAG|OUTCAR}} file after the lines\n\"ENERGY OF THE ELECTRON-ION-THERMOSTAT SYSTEM (eV)\", as well as in the file {{TAG|OSZICAR}}\n(in the lines writing the free energy  \"F=\"). This makes scanning the {{TAG|OSZICAR}} file for the\nrequired energies of the individual calculations somewhat awkward.\n\nSpecial handling: In some cases it might be desirable to use a different number of cores for\nthe first image and the second image. For instance, this might be expedient for calculations\nwhere thermodynamic integration is performed from a coarse to a dense k-point grid, or from a cheap\nto an expensive exchange-correlation functional. \nTo set the number of cores in the first image the tag {{TAG|NCORE_IN_IMAGE1}} has to be set. The second image then \ncontains the remaining cores.\n\nThe usage of this tag is also explained in the supplementary information of reference {{cite|dorner:PRL:2018}}.\n\n== Related tags and articles ==\n{{TAG| NCORE_IN_IMAGE1}}, {{TAG|SCALEE}}, {{TAG| IMAGES}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermodynamic integration]]", "last_revised": "2022-07-19T15:05:41Z"}, "NCORE_IN_IMAGE1": {"datatype": "integer", "options": {}, "summary": "This tag specifies the number of cores in the first image.", "wikicode": "{{DISPLAYTITLE:NCORE_IN_IMAGE1}}{{TAGDEF|NCORE_IN_IMAGE1|[integer]|0}}\n\nDescription: This tag specifies the number of cores in the first image.\n\n----\n\nThis tag works for two images, specifically, if {{TAG|VCAIMAGES}} is set (this also sets {{TAG|IMAGES}}=2).\n{{TAG|VCAIMAGES}} splits the available cores into two groups both working independently in the subdirectories\n01 and 02.\nThe tag {{TAG|NCORE_IN_IMAGE1}} defines how many of cores are used for the first image (01). The remainder of the cores is used for the second image (working in the subdirectory 02).\n\n== Related tags and articles ==\n{{TAG|VCAIMAGES}}, {{TAG|IMAGES}}\n\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermodynamic integration]][[Category:Parallelization]]", "last_revised": "2022-04-07T14:08:38Z"}, "SCALEE": {"datatype": "real", "options": {}, "summary": "This tag specifies the coupling parameter of the energies and forces between a fully interacting system and a reference system.", "wikicode": "{{TAGDEF|SCALEE|[real]|1}}\n\nDescription: This tag specifies the coupling parameter of the energies and forces between a fully interacting system and a reference system.\n\n----\nA detailed description of calculations using thermodynamic integration within VASP is given in the supplemental information of reference {{cite|dorner:PRL:2018}} ('''caution''': the tag ''ISPECIAL''=0 used in that reference is not valid anymore, instead the tag {{TAG|PHON_NSTRUCT}}=-1 is used).\n\nThe free energy of a fully interacting system can be written as the sum of the free energy a non-interacting reference system and the difference in the free energy of the fully interacting system and the non-interacting system \n\n::<math> F_{1} = F_{0} + \\Delta F_{0\\rightarrow 1} </math>.\n\nUsing thermodynamic integration the free energy difference between the two systems is written as\n\n<math> \\Delta F_{0\\rightarrow 1} = \\int\\limits_{0}^{1} d\\lambda \\langle U_{1}(\\lambda) - U_{0}(\\lambda) \\rangle_{\\lambda} </math>.\n\nHere <math>U_{1}(\\lambda)</math> and <math>U_{0}(\\lambda)</math> describe the potential energies of a fully-interacting and a non-interacting reference system, respectively. The coupling strength of the systems is controlled via the coupling parameter <math>\\lambda</math>. It is neccessary that the connection of the two systems via the coupling constant is reversible. The notation <math>\\langle \\ldots \\rangle_{\\lambda}</math> denotes an ensemble average of a system driven by the following classical Hamiltonian\n\n::<math> H_{\\lambda}= \\lambda H_{1} + (1-\\lambda) H_{0} </math>.\n\nThe tag {{TAG|SCALEE}} sets the coupling parameter <math>\\lambda</math> and hence controls the Hamiltonian of the calculation. \nBy default {{TAG|SCALEE}}=1 and the scaling of the energies and forces via the coupling constant is internally skipped in the code. To enable the scaling {{TAG|SCALEE}}<math>\\ne</math>1 has to be specified. A VASP calculation outputs the integrand for a given coupling constant at every molecular dynamics step. How to choose the ensemble size and carry out the integration is described in the main text and especially in the supplementary information of reference {{cite|dorner:PRL:2018}}. \n\nTwo possible options are available for the reference system:\n\n*Ideal gas:\nBy default the thermodynamic integration is carried out from the ideal gas to the fully interacting case  (in the case when no {{TAG|DYNMATFULL}} is present in the calculation folder). Usually the Stirling approximation is used for the free energy of the ideal gas written as\n\n::<math> F = -\\frac{1}{\\beta} \\mathrm{ln} \\left[ \\frac{V^{N}}{\\Alpha^{3N} N!} \\right] </math>\n\nwhre <math>V</math> is the volume of the system, <math>N</math> is the number of particles in the system and <math>\\Alpha</math> is the de Broglie wavelength. The Stirling approximation applies in principle only in the limes of infinitely many particles. In reference {{cite|dorner:PRL:2018}} the exact ideal gas equation was used since it helped to speed up the convergence of the final free energy of liquid Si with respect to the system size.\n\n*Harmonic solid:\nIf the file {{TAG|DYNMATFULL}} exists  in the calculation directory and {{TAG|SCALEE}}<math>\\ne</math>1, the second order Hessian matrix is added to the force and thermodynamic integration from a harmonic model to a fully interacting system is carried out. The {{TAG|DYNMATFULL}} file stores the eigenmodes and eigenvalues from diagonalizing the dynamic matrix. This file is written by a previous calculation using the {{TAG|INCAR}} tags {{TAG|IBRION}}=6 and {{TAG|PHON_NSTRUCT}}=-1.  \n\n== Related tags and articles ==\n{{TAG|VCAIMAGES}}, {{TAG|IMAGES}}, {{TAG|NCORE IN IMAGE1}}, {{TAG|PHON_NSTRUCT}}, {{TAG|IBRION}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Molecular dynamics]][[Category:Thermodynamic integration]]", "last_revised": "2022-04-07T14:25:55Z"}, "VCA": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VCA\">VCA</a> is short for the virtual crystal approximation; the tag allows to \"weight\" each species found in the POTCAR file.</span>", "wikicode": "{{TAGDEF|VCA|[real array]|read from the {{TAG|POTCAR}} file}}\n\nDescription: {{TAG|VCA}} is short for the virtual crystal approximation; the tag allows to \"weight\" each species found in the POTCAR file.\n----\nThe tag {{TAG|VCA}} must be supplied for each atom type or species found in the {{TAG|POTCAR}} and {{TAG|POSCAR}} file, respectively. \nIt weights the corresponding {{TAG|POTCAR}} files according to the values given in the {{TAG|INCAR}} file, with the default\nbeing 1. For instance, the formal valency found in the {{TAG|POTCAR}} files is multiplied by the supplied values. Likewise, the local potential,\nthe augmentation charges, and the non-local pseudopotential strength parameters are scaled by the supplied values. \n\nIt is possible to use this flag to perform calculations in the framework of the virtual crystal approximation.\nSay you want to simulate Sn doping in a Ge lattice. This can be achieved using a {{TAG|POTCAR}} file with a Ge and Sn data set and the following\n{{TAG|POSCAR}} file:\n\n cd:\n   1.00000000000000\n     2.82173    2.82173    0.00000\n     0.00000    2.82173    2.82173\n     2.82173    0.00000    2.82173\n   Ge   Sn\n     2     2\n Direct\n  0.00  0.00  0.00\n  0.25  0.25  0.25\n  0.00  0.00  0.00\n  0.25  0.25  0.25\n \nIf {{TAG|VCA}} is set to \n  VCA = 0.99 0.01\nthe Ge atoms are weighted with a weight of 0.99, whereas the Sn atoms are weighted by 0.01 (see {{cite|eckhardt:prb:2014}} for an example application).\nThe implementation in VASP closely follows the methodology suggested by Bellaiche and Vanderbilt {{cite|bellaiche:prb:2000}}.\n\nCaveats: Unfortunately, results of this kind of VCA calculations are often not very reliable. The problems are even apparent in the original publications {{cite|bellaiche:prb:2000}}. The\nkey point is that the used PAW potentials need to be constructed so that the pseudo atomic waves are very similar for the potentials that are \"mixed\" (in the example above, this would be the Ge and Sn potentials). This can be achieved by carefully optimizing the radial cutoffs. Furthermore, the local potentials of the two {{TAG|POTCAR}} files need to be very similar. This means that results for many standard potentials are not accurate. For instance, Vegard's law is often not even approximately observed (instead, the volume is too large at 50 % mixing). The problem is particularly severe if semi-core states are treated as valence states. For instance, for the Ge and Sn alloy, the d electrons had to be treated as core electrons to obtain reasonable results. Any attempts to treat the d electrons as valence states lead to grossly incorrect results.\n\n'''Mind:''' This tag is currently not supported in combination with {{TAG|IBRION}} = 5-8 for computing second derivatives, Hessian matrices, and phonon frequencies.\n\n== Related tags and articles ==\n{{TAG|LVCADER}}\n\n== References ==\n\n\n[[Category:INCAR tag]][[Category:PAW]]", "last_revised": "2022-04-08T14:55:21Z"}, "LMODELHF": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMODELHF\">LMODELHF</a> selects dielectric-dependent hybrid functionals  with full exchange in the short-range, and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LMODELHF\">AEXX</a> in the long-range.</span>", "wikicode": "{{TAGDEF|LMODELHF|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LMODELHF}} selects dielectric-dependent hybrid functionals  with full exchange in the short-range, and {{TAG|AEXX}} in the long-range.\n----\n{{TAG|LMODELHF}}=.TRUE. selects the range separated hybrid functional suggested in Ref. {{cite|chen2018nonempirical}}\nand Ref. {{cite|cui2018doubly}} under the name dielectric-dependent hybrid functionals (DDH) and  doubly screened hybrid (DSH) functionals, respectively. These two hybrid functionals are both based on a common model for the dielectric function, but differ in the way how the range-separation parameters are obtained from first principles calculations. Their connection and performance have been discussed for instance in Ref. {{cite|liu2019assessing}}. In principle,\nthey can be considered to be a smartly constructed approximation to COH-SEX (local Coulomb hole plus screened exchange),\nalbeit fulfilling many important constraints that the exact exchange correlation functional must observe.\n\nThe corresponding functional has been available in VASP since VASP.5.2 released in 2009 (before the two publications), although the gradient contribution had been erroneously implemented in all VASP.5 releases and is only correct in VASP.6. The related bug fix has been made available by the authors of Ref. {{cite|cui2018doubly}}. The nonlocal exchange part of the functional has also been used and documented in Ref. {{cite|bokdam:scr:2016}} and is covered in [[Improving the dielectric function]].\n\nTypically the user will need to set the following tags in the INCAR file:\n\n {{TAGBL|LHFCALC}} = .TRUE.\n {{TAGBL|LMODELHF}} = .TRUE.\n {{TAGBL|HFSCREEN}} = 1.26\n {{TAGBL|AEXX}} = 0.1\n\nIn this case, {{TAG|AEXX}} specifies the amount of exact exchange in the long range, that is for short wave vectors (<math> \\mathbf{G} \\to 0 </math>). In the short range, that is for large wave vectors, always the full nonlocal exchange is used. The {{TAG|HFSCREEN}} determines how quickly the nonlocal exchange changes from {{TAG|AEXX}} to 1. \n\nSpecifically, in VASP, the  Coulomb kernel <math> 4 \\pi e^2 / (\\mathbf{q}+\\mathbf{G})^2</math> in the exact exchange is multiplied by a model for the dielectric function <math> \\epsilon^{-1} (\\mathbf{q}+\\mathbf{G})</math>:\n\n:<math> \\epsilon^{-1} (\\mathbf{q}+\\mathbf{G})=1-(1-{{\\varepsilon}_{\\infty}^{-1}})\\text{exp}(-\\frac{|\\mathbf{q+G}|^2}{4{\\mu}^2})</math>.\n\nwhere <math> \\mu  </math> corresponds to {{TAG|HFSCREEN}}, and  <math> {{\\varepsilon}_{\\infty}^{-1}} </math> is specified by {{TAG|AEXX}}. In real space this correspond to a Coulomb kernel \n:<math> V(r) =(1-(1-{{\\varepsilon}_{\\infty}^{-1}})\\text{erf}( {\\mu} r)) \\frac{e^2}{r} </math>.\n\n\nThe remaining part of the exchange is handled by an appropriate semi-local exchange correlation functional. For further detail we refer to the literature listed below.\n\nTypical values for {{TAG|HFSCREEN}} are listed in the table below\n AlP  1.24\n AlAs 1.18\n AlSb 1.13\n BN   1.7\n CdO  1.34\n CdS  1.19\n CdSe 1.18\n CdTe 1.07\n C    1.70\n GaN  1.39\n GaP  1.24\n GaAs 1.18\n GaSb 1.12\n Ge   1.18\n InP  1.14\n InAs 1.09\n InSb 1.05\n LiF  1.47\n MgO  1.39\n SiC  1.47\n Si   1.26\n ZnO  1.34\n ZnS  1.27\n ZnSe 1.20\n ZnTe 1.12\nThese values have been obtained from fits of the dielectric function using the Nanoquanta kernel and partially self-consistent GW calculations as used in Ref. {{cite|grueneis2014ionization}}. The values can be also estimated from simple dimensional scaling relations of the valence electron density. Furthermore band gap predictions are not very sensitive to the choice of {{TAG|HFSCREEN}}.\n== Related tags and articles ==\n{{TAG|LHFCALC}},\n{{TAG|HFSCREEN}},\n{{TAG|AEXX}},\n[[Hybrid functionals: formalism#Thomas_Fermi|Thomas-Fermi screening]],\n[[list_of_hybrid_functionals|settings for specific hybrid functionals]]\n\n== References ==\n<references/>\n----\n{{sc|LMODELHF|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]][[Category:VASP6]]", "last_revised": "2022-04-10T19:37:40Z"}, "LFINITE_TEMPERATURE": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LFINITE_TEMPERATURE\">LFINITE_TEMPERATURE</a> switches on the finite-temperature formalism of many-body perturbation theory for adiabatic-connection-fluctuation-dissipation-theorem (ACFDT)/GW calculations.</span>", "wikicode": "{{DISPLAYTITLE:LFINITE_TEMPERATURE}}\n{{TAGDEF|LFINITE_TEMPERATURE|[logical]|.FALSE.}}\n\nDescription: {{TAG|LFINITE_TEMPERATURE}} switches on the finite-temperature formalism of many-body perturbation theory for adiabatic-connection-fluctuation-dissipation-theorem (ACFDT)/GW calculations.\n----\nThis feature is available as of VASP.6.1.0 for ACFDT/random-phase-approximation (RPA), i.e., {{TAG|ALGO}}=ACFDT, ACFDTR, ACFDTRK, and low-scaling [[GW calculations]], i.e., {{TAG|ALGO}}=EVGW0R, GWR[K]. For {{TAG|LFINITE_TEMPERATURE}}=.TRUE., a compressed Matsubara-frequency grid is used (instead of the zero-temperature formalism of many-body perturbation theory). This allows for GW and RPA calculations for metallic systems {{cite|Kaltak:PRB:2020}}. \n{{NB|warning|Can only be used in combination with Fermi smearing {{TAG|ISMEAR}} {{=}} -1.}} \n\n== Related tags and articles ==\n{{TAG|NOMEGA}},\n{{TAG|NOMEGAPAR}}, \n{{TAG|NTAUPAR}},\n{{TAG|ISMEAR}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]] [[Category:ACFDT]][[Category:Low-scaling GW and RPA]][[Category:VASP6]]", "last_revised": "2023-05-30T09:56:06Z"}, "ML_EPS_LOW": {"datatype": "real", "options": {}, "summary": "Threshold for the CUR algorithm used in the sparsification of local reference configurations within the machine learning force fields.", "wikicode": "{{DISPLAYTITLE:ML_EPS_LOW}}\n{{TAGDEF|ML_EPS_LOW|[real]}}\n{{DEF|ML_EPS_LOW|1E-11|for {{TAG|ML_MODE}} {{=}} SELECT, REFIT|1E-9|else (vasp.6.3.0 default was 1E-10, see comments below)}}\n\nDescription: Threshold for the CUR algorithm used in the sparsification of local reference configurations within the machine learning force fields. \n----\nThis value sets the threshold for the eigenvalues that contribute to the leverage scoring used in the CUR algorithm for the rank compression (\"sparsification\") of the local configurations (for details see appendix E of reference {{cite|jinnouchi2:arx:2019}}). Small eigenvalues and those columns (local configurations) that are strongly connected\nwith these small eigenvalues are removed by the sparsification routines. The default value is fairly well balanced, and we do not  recommend to increase the threshold to values \nlarger than 1E-7. Also using smaller values than 1E-9 does not improve the MLFF if Bayesian regression is used\n(but it can be benficial for SVD). \n\nThe description how to choose {{TAG|ML_EPS_LOW}} for accurate force fields is given [[Best practices for machine-learned force fields#Accurate force fields|here]].\n\nOn the theory of the sparsification of local reference configurations see\n[[Machine learning force field: Theory#Sparsification of local reference configurations|here]].\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MB}}, {{TAG|ML_EPS_REG}}, {{TAG|ML_IALGO_LINREG}}\n\n{{sc|ML_EPS_LOW|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-05-15T11:42:12Z"}, "NATURALO": {"datatype": "integer", "options": {}, "summary": "calculate RPA natural orbitals.", "wikicode": "{{TAGDEF|NATURALO|[integer]|0; for low scaling GW type calculations the default is 2}}\n\nDescription: calculate RPA natural orbitals.\n----\n\nThis flag should be used in combination with {{TAG|ALGO}} = G0W0R or {{TAG|ALGO}} = scGW0R.  The VASP code diagonalizes the RPA density\nmatrix and writes the final natural orbitals to the {{TAG|WAVECAR}} file.\nThe one-electron occupancies on the {{TAG|WAVECAR}} file can also be updated to the eigenvalues of the RPA density matrix. For {{TAG|ALGO}} = G0W0R, the interacting Green's function is approximated as\n\n<math>\nG = G_0 + G_0 \\Sigma G_0\n</math>\n\nwhereas for  {{TAG|ALGO}} = scGW0R the Dyson equation is solved\n\n<math>\nG = G_0 + G \\Sigma G_0.\n</math>\n\nIn both cases, the RPA density matrix is determined as <math> \\gamma= \\lim_{\\tau \\to 0^-} G(\\tau) </math>. More details on the use of RPA natural orbitals can be found in Ref. <ref name=\"ramberger2019rpa\"/>.\n\nThe following settings are currently supported\n\n* {{TAG|NATURALO}}=0 calculate the density matrix, diagonalize the matrix and write the natural orbitals and eigenvalues of the density matrix to the file {{TAG|WAVECAR}}. This setting is usually not particularly useful for practical calculations.\n\n* {{TAG|NATURALO}}=1 calculate the density matrix, diagonalize the matrix only in the sub-block of unoccupied states, and write the occupied Kohn Sham orbitals, as well as the natural orbitals corresponding to unoccupied states to the file {{TAG|WAVECAR}}. The unoccupied orbitals are ordered according to their occupancies in the RPA density matrix.  The one-electron occupancies are not updated from their KS values (they will remain 1 for occupied Kohn-Sham orbitals and 0 for natural orbitals representing the virtual manifold). This setting has been used in Ref. <ref name=\"ramberger2019rpa\"/>. See also Ref. <ref name=\"GruneisNO\"/> for further information. Note that all orbitals- even those with a tiny fractional occupancy -are treated as occupied orbitals and not updated: the algorithm should hence even work for metallic systems.\n\n* {{TAG|NATURALO}}<0. Similar to  {{TAG|NATURALO}}=1 but additionally conserves ABS|{{TAG|NATURALO}}| unoccupied Kohn-Sham states. This is expedient, for subsequent GW and BSE calculations to conserve  few unoccupied orbitals to their Kohn-Sham states.\n\n* If 10 is added (e.g. {{TAG|NATURALO}}=10, {{TAG|NATURALO}}=11) the density matrix is diagonalizes using a perturbative Loewdin algorithm that attempts to keep the orbital order strictly conserved: E.g. the natural orbital matching closest to each Kohn-Sham orbital will be determined and stored. Use this tag for metals.\n\n* {{TAG|NATURALO}}=2 (or 12) is similar to 0, but the one-electron occupancies are not updated. In rare cases this might lead to inconsistencies, if the orbital order changes between DFT and the RPA density matrix (i.e. a previously occupied DFT orbitals posses a smaller occupation in the RPA density matrix than some unoccupied Kohn-Sham orbitals and are moved into the unoccupied block). This problem can be reduced using {{TAG|NATURALO}}=12, as described above. This flag, in combination with {{TAG|ALGO}} = scGW0R, can be used to evaluate the GW-singles contribution to the correlation energy.<ref name=\"Klimessingles\"/> One can deduct the HF singles and the GW singles energies from the energies after \n\n     Energies after diagonalization of HF Hamiltonian (single shot)\n     Hartree-Fock free energy of the ion-electron system (eV)\n\n     Energies after update of density matrix\n     Hartree-Fock free energy of the ion-electron system (eV)\n\nExperience has shown that there is very little difference between the natural orbitals obtained using {{TAG|ALGO}} = G0W0R and {{TAG|ALGO}} = scGW0R. We strongly recommend to use the more efficient and better tested algorithm {{TAG|ALGO}} = G0W0R (with the exception of GW-singles) to determine natural orbitals. Furthermore, perform careful tests for {{TAG|NOMEGA}}: the RPA total energy converges much faster then the natural orbitals. Using a too small {{TAG|NOMEGA}} can yield natural orbitals that are non-optimal, leading to very slow convergence of correlated calculations with respect to the number of natural orbitals.\nA crucial test is that the following line\n \n correlated contrib. to density matrix         0.0000004037        0.0000000000\n \nin the stdout and OUTCAR file shows values close to zero (for {{TAG|ALGO}} = G0W0R). The above value is perfectly acceptable and the value decreases as {{TAG|NOMEGA}} increases. \n\n* {{TAG|NATURALO}}=4 preserves original (DFT) orbitals. This mode is useful if only quasi-particle energies are corrected with the GW method, for instance when selecting {{TAG|ALGO}}=[[GW calculations#gw0|EVGW0R]].\n{{NB|mind|available as of VASP.6.4:}}\n\n== Related tags and articles ==\n\n* {{TAG|ALGO}} for response functions and ''RPA'' calculations\n* for an overview on total energies using the [[ACFDT/RPA calculations|ACFDT/RPA formalism]]\n* for a practical guide to [[GW calculations]]\n\n== References ==\n<references>\n<ref  name=\"ramberger2019rpa\">[https://doi.org/10.1063/1.5128415   B. Ramberger, Z. Sukurma, T. Sch\u00e4fer, G. Kresse,  J. Chem. Phys. 151, 214106 (2019).]</ref>\n<ref name=\"Klimessingles\">[https://doi.org/10.1063/1.4929346 Ji\u0159\u00ed Klime\u0161 et al., J. Chem. Phys.  143, 102816 (2015).]</ref>\n<ref name=\"GruneisNO\"> [https://doi.org/10.1021/ct200263g A. Gr\u00fcneis et al. J. Chem. Theory Comput. 7, 2780 (2011).] </ref>\n\n</references>\n\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]] [[Category:ACFDT]][[Category:Low-scaling GW and RPA]][[Category:VASP6]]", "last_revised": "2023-04-12T07:38:08Z"}, "NUM_WANN": {"datatype": "integer", "options": {}, "summary": "Since vasp 6.2.0 <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NUM_WANN\">NUM_WANN</a> determines the number of Wannier orbitals to be used with wannier90. Note that the <code>num_wann</code> value written to the <code>wannier90.win</code> file is always the value of <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NUM_WANN\">NUM_WANN</a> known by vasp.", "wikicode": "{{DISPLAYTITLE:NUM_WANN}}\n{{TAGDEF|NUM_WANN|[integer]|{{TAG|NBANDS}}}}\n\nDescription: Since vasp 6.2.0 {{TAG|NUM_WANN}} determines the number of Wannier orbitals to be used with wannier90. Note that the <code>num_wann</code> value written to the <code>wannier90.win</code> file is always the value of {{TAG|NUM_WANN}} known by vasp.\n\n== Related tags and articles ==\n{{TAG|LWANNIER90}},\n{{TAG|LWRITE_UNK}},\n{{TAG|LWRITE_MMN_AMN}},\n{{TAG|LWANNIER90_RUN}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-19T11:59:00Z"}, "ML_CX": {"datatype": "real", "options": {}, "summary": "The parameter determines to which value the threshold  (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_CTIFOR\">ML_CTIFOR</a>) is updated within the machine learning force field methods.", "wikicode": "{{DISPLAYTITLE:ML_CX}}\n{{TAGDEF|ML_CX|[real]|0.0}}\n\nDescription: The parameter determines to which value the threshold  ({{TAG|ML_CTIFOR}}) is updated within the machine learning force field methods.\n----\nThe use of this tag in combination with the learning algorithms is described here: [[Machine learning force field calculations: Basics#Threshold for error of forces|here]].\n\nIf {{TAG|ML_ICRITERIA}}>0, {{TAG|ML_CTIFOR}} is set to the average of the Bayesian errors of the forces stored in a history. Note that {{TAG|ML_ICRITERIA}}=1 and {{TAG|ML_ICRITERIA}}=2, average over different data. In the first case the average is performed over Bayesian errors after updates of the force fields, and in the second case over all recent Bayesian error estimates (see {{TAG|ML_ICRITERIA}}). In both cases, if {{TAG|ML_CTIFOR}} is updated, it is set to \n\n{{TAG|ML_CTIFOR}} = (average of the stored Bayesian errors in the history) *(1.0 + {{TAG|ML_CX}}).\n\nObviously setting  {{TAG|ML_CX}} to a positive value will result in fewer first principles calculations and fewer updates of the MLFF, whereas negative values result in more frequent first principles calculations (as well as updates of the MLFF). Typical values of  {{TAG|ML_CX}} are between -0.2 and 0.0 for {{TAG|ML_ICRITERIA}}=1, and 0.0 and 0.3 for {{TAG|ML_ICRITERIA}}=2 (a good starting value is 0.2 for {{TAG|ML_ICRITERIA}}=2). For training runs using heating, the default usually results in very well balanced machine learned force fields. When the training is performed at a fixed temperature, it is often desirable to decrease to {{TAG|ML_CX}}=-0.1, in order to increase the number of first principle calculations and thus the size of the training set (the default can result in too few training data).\n\nThe number of entries in the history are controlled by  {{TAG|ML_MHIS}} for {{TAG|ML_ICRITERIA}}=1, and it is currently fixed to 400 for {{TAG|ML_ICRITERIA}}=2 (in future releases 50 x {{TAG|ML_MHIS}}).\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ICRITERIA}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_MHIS}}, {{TAG|ML_CSIG}}, {{TAG|ML_CSLOPE}}\n\n{{sc|ML_LCRITERIA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-09-17T15:24:23Z"}, "HFALPHA": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFALPHA\">HFALPHA</a> sets the decay constant used in the method of Massida, Posternak, and Baldereschi, which is activated by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/HFALPHA\">HFRCUT</a>=<span><span class=\"tag-value\">0</span>.</span></span>", "wikicode": "{{TAGDEF|HFALPHA|[real]}}\n{{DEF|HFALPHA|6/sqrt({{TAG|ENMAX}})/(2\u03c0)|if {{TAG|HFRCUT}} is 0}}\n\nDescription: {{TAG|HFALPHA}} sets the decay constant used in the method of Massida, Posternak, and Baldereschi, which is activated by {{TAG|HFRCUT}}=0.\n----\n\n{{TAG|HFALPHA}} sets the decay constant in the error-function-like charge distribution for the method of Massida, Posternak, and Baldereschi{{cite|massidda:prb:93}}. The error-function-like charge distribution is used to calculate the difference between the isolated probe charge and the periodically repeated probe charge in a homogenous background. The default for {{TAG|HFALPHA}} is 6/sqrt({{TAG|ENMAX}})/(2\u03c0) in atomic units. This usually yields robust and accurate results in the range of meV compared to the Ewald summation used for a regular k-mesh. This is the default approach used to implement the convergence corrections of the [[Coulomb singularity]] in Hartree-Fock calculations. This does not work correctly for bandstructure calculations using the [[Si_HSE_bandstructure|0-weight scheme]] or {{TAG|KPOINTS_OPT}} because the correction is only applied for points in the regular grid. To overcome this problem we recommend using the Coulomb truncation methods using {{TAG|HFRCUT}}.\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n{{TAG|HFRCUT}},\n{{TAG|LTHOMAS}},\n[[List of hybrid functionals]],\n[[Coulomb singularity]]\n\n{{sc|HFALPHA|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T10:29:37Z"}, "ML_LSPARSDES": {"datatype": "boolean", "options": {}, "summary": "This tag specifies whether angular descriptor sparsification is enabled within the machine learning force field method.", "wikicode": "{{DISPLAYTITLE:ML_LSPARSDES}}\n{{TAGDEF|ML_LSPARSDES|[logical]|.FALSE.}}\n\nDescription: This tag specifies whether angular descriptor sparsification is enabled within the machine learning force field method.\n----\n\nFor details on the theory how angular descriptor are sparsified see [[Machine learning force field: Theory#Sparsification of angular descriptors|here]].\n\nTo use the sparsification of angular descriptors set the following tags:\n*{{TAG|ML_LSPARSDES}}=''.TRUE.''.\n*The number of the highest eigenvalues <math>k</math> to which the correlation is measured via the leverage scoring: {{TAG|ML_NRANK_SPARSDES}}.\n*The ratio of the selected descriptors to the total number of descriptors: {{TAG|ML_RDES_SPARSDES}}. This tag controls the extent of the sparsification.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_NRANK_SPARSDES}}, {{TAG|ML_RDES_SPARSDES}}\n\n{{sc|ML_EPS_LOW|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:26:50Z"}, "ML_NRANK_SPARSDES": {"datatype": "integer", "options": {}, "summary": "This tag sets the number of highest eigenvalues to which the correlation is measured within the angular descriptor sparsification (within the machine learning force field method).", "wikicode": "{{DISPLAYTITLE:ML_NRANK_SPARSDES}}\n{{TAGDEF|ML_NRANK_SPARSDES|[integer]|5}}\n\nDescription: This tag sets the number of highest eigenvalues to which the correlation is measured within the angular descriptor sparsification (within the machine learning force field method).\n----\nFor details on the theory of angular descriptor sparsification see [[Machine learning force field: Theory#Sparsification of angular descriptors|here]].\n\nFor details on how to use the sparsification see the tag {{TAG|ML_LSPARSDES}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LSPARSDES}}, {{TAG|ML_RDES_SPARSDES}}\n\n{{sc|ML_EPS_LOW|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:29:59Z"}, "ML_RDES_SPARSDES": {"datatype": "real", "options": {}, "summary": "This tag sets the ratio of the selected to the total number of descriptors within the angular descriptor sparsification (within the machine learning force field method).", "wikicode": "{{DISPLAYTITLE:ML_RDES_SPARSDES}}\n{{TAGDEF|ML_RDES_SPARSDES|[real]|0.5}}\n\nDescription: This tag sets the ratio of the selected to the total number of descriptors within the angular descriptor sparsification (within the machine learning force field method).\n----\nFor details on the theory of angular descriptor sparsification see [[Machine learning force field: Theory#Sparsification of angular descriptors|here]].\n\nFor details on how to use the sparsification see the tag {{TAG|ML_LSPARSDES}}.\n\nThe values for {{TAG|ML_RDES_SPARSDES}} must be chosen between <math>0 < r \\leq 1</math>.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_LSPARSDES}}, {{TAG|ML_NRANK_SPARSDES}}\n\n{{sc|ML_EPS_LOW|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-04-08T13:30:42Z"}, "NRMM": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NRMM\">NRMM</a> sets the maximum number of iterative steps for RMM-DIIS (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NRMM\">IALGO</a>=<span><span class=\"tag-value\">4X)</span> or Davidson algorithms (</span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NRMM\">IALGO</a>=<span><span class=\"tag-value\">3X)</span>.</span></span>", "wikicode": "{{TAGDEF|NRMM|[integer]|4}}\n\nDescription: {{TAG|NRMM}} sets the maximum number of iterative steps for RMM-DIIS ({{TAG|IALGO}}=4X) or Davidson algorithms ({{TAG|IALGO}}=3X).\n\nNote: This tag was formerly known as NDAV which is the name of the variable in the VASP source code.\n----\n== Related tags and articles ==\n{{TAG|IALGO}}\n\n{{sc|NRMM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]]", "last_revised": "2022-04-08T14:51:12Z"}, "ML_IALGO_LINREG": {"datatype": "integer", "options": {}, "summary": "This tag determines the algorithm that is employed to solve the system of linear equations in the ridge regression method for machine learning.", "wikicode": "{{DISPLAYTITLE:ML_IALGO_LINREG}}\n{{TAGDEF|ML_IALGO_LINREG|[integer]|1}}\n\nDescription: This tag determines the algorithm that is employed to solve the system of linear equations in the ridge regression method for machine learning.\n----\n\nIn the ridge regression method for machine learning one needs to solve for the unknown weights <math>\\mathbf{w}</math> minimizing\n\n<math>\n || \\mathbf{Y} - \\mathbf{\\Phi} \\mathbf{w} || \\rightarrow \\mbox{min}\n</math>\n\nFor more details please see [[Machine learning force field: Theory#Matrix vector form of linear equations|here]].\n\nThe following options are available to solve for <math>\\mathbf{w}</math>:\n*{{TAG|ML_IALGO_LINREG}}=1: Bayesian linear regression (see [[Machine learning force field: Theory#Bayesian error estimation|here]]). Recommended for {{TAG|NSW}}<math>\\ge</math>1. Usable with {{TAG|ML_MODE}} = ''TRAIN'', ''SELECT'', and ''REFITBAYESIAN''.\n*{{TAG|ML_IALGO_LINREG}}=2: QR factorization. Usable with {{TAG|ML_MODE}} = ''REFIT'' and ''REFITBAYESIAN''.\n*{{TAG|ML_IALGO_LINREG}}=3: Singular value decomposition. Usable with {{TAG|ML_MODE}} = ''REFIT'' and ''REFITBAYESIAN''.\n*{{TAG|ML_IALGO_LINREG}}=4: Singular value decomposition with Tikhonov regularization. Usable with {{TAG|ML_MODE}} = ''REFIT'' and ''REFITBAYESIAN''.\n\nFor on the fly learning {{TAG|ML_MODE}} = ''TRAIN'' and reselection of local reference configurations {{TAG|ML_MODE}} = ''SELECT'', it is strictly necessary to use Bayesian regression ({{TAG|ML_IALGO_LINREG}}=1), since uncertainty estimates are only available for Bayesian regression. \n\n'''Refitting''':\nAlthough the above modes result in an {{TAG|ML_FFN}} file that could be used for production runs, we strongly advise to refit the {{TAG|ML_ABN}} files. For that copy the {{TAG|ML_ABN}} file to the {{TAG|ML_AB}} file and use {{TAG|ML_MODE}}= ''REFIT'' (if Bayesian error estimation is required during production runs {{TAG|ML_MODE}}= ''REFITBAYESIAN'' is an option, but at the cost of significatnly slower calculation time). {{TAG|ML_MODE}}= ''REFIT'' employs {{TAG|ML_IALGO_LINREG}}=4 by default.\n\nFor {{TAG|ML_IALGO_LINREG}}>1, {{TAG|ML_IALGO_LINREG}}=3 and 4 are the most tested approaches and we use {{TAG|ML_IALGO_LINREG}}=4 routinely before employing a machine learned force field. {{TAG|ML_IALGO_LINREG}}=4 gives more stable force fields and better fitting accuracy than {{TAG|ML_IALGO_LINREG}}=3, due to the regularization term employed. \n\n{{TAG|ML_IALGO_LINREG}}=4 dramatically improves the condition number of the fitting compared to {{TAG|ML_IALGO_LINREG}}=1 since it directly uses the design matrix. In contrast {{TAG|ML_IALGO_LINREG}}=1 requires to use the covariance matrix (square of the design matrix), which effectively doubles the condition number.\nHowever, {{TAG|ML_IALGO_LINREG}}=4 needs significantly more memory than {{TAG|ML_IALGO_LINREG}}=1 (at least twice that much). Please always monitor the memory estimates in the {{TAG|ML_LOGFILE}}! It should be also noted that {{TAG|ML_IALGO_LINREG}}=4 is computationally somewhat more demanding than {{TAG|ML_IALGO_LINREG}}=1, but it typically requires between a few minutes and an hour. So usually the extra cost is negligible compared to the original training.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_W1}}, {{TAG|ML_WTOTEN}}, {{TAG|ML_WTIFOR}}, {{TAG|ML_WTSIF}}\n\n{{sc|ML_IALGO_LINREG|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T14:15:14Z"}, "NELMGW": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NELMGW\">NELMGW</a> sets the number of self-consistent GW steps.</span>", "wikicode": "{{TAGDEF|NELMGW|[integer]|1}}\n\nDescription: {{TAG|NELMGW}} sets the number of self-consistent GW steps.\nAvailable as of 6.3.0.\n\n----\nThis tag is effective for {{TAG|ALGO}}=EVGW[0] | QPGW[0] | GW[0][R][K] and ignored otherwise.\nFor instance\n {{TAG|ALGO}} = EVGW0\n {{TAG|NELMGW}} = 4\nperforms a [[GW calculations#gw0| partially self-consistent GW calculations]], where <math>G</math> is updated four times. \n\nOmit {{TAG|NBANDS}} and {{TAG|NELM}} to select the [[GW calculations#GW_in_one_go|single-step GW procedure]].\n\n== Related tags and articles==\n{{TAG|ALGO}}, [[GW calculations]]\n\n{{sc|NELMGW|Examples|Examples that use this tag}}\n----\n\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-07-19T10:21:34Z"}, "LRPAFORCE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LRPAFORCE\">LRPAFORCE</a>=<span><span class=\"tag-value\">.TRUE.</span> calculates forces in the random-phase approximation (RPA).</span></span>", "wikicode": "{{TAGDEF|LRPAFORCE|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAG|LRPAFORCE}}=.TRUE. calculates forces in the random-phase approximation (RPA).\n----\nAvailable as of VASP.6.1.\n\nThis tag can be optionally set in low-scaling [[ACFDT/RPA_calculations#RPAFORCES|RPA calculations]] or [[GW_calculations#RPAFORCES| GW calculations]]. It allows computing the RPA forces on each ion. \nFor instance, \n {{TAGBL|ALGO}} = RPAR ;  LRPAFORCE = .TRUE. \ncomputes the RPA total energy with corresponding forces, while\n {{TAGBL|ALGO}} = G0W0R ; LRPAFORCE = .TRUE. \ndetermines in addition the quasiparticle energies within the GW approximation. \n\nThe {{TAG|LRPAFORCE}} tag can be used in combination with the standard relaxation options {{TAG|IBRION}} and {{TAG|NSW}}. \n{{NB|mind|The RPA stress tensor is not available.}}  \n{{NB|warning|Only {{TAG|ISIF}}{{=}}0 is supported.}}\n{{NB|warning|RPA forces for metals are currently not supported.}}\n\n== Related tags and articles ==\n{{TAG|NBANDS}},\n{{TAG|ALGO}},\n{{TAG|IBRION}},\n{{TAG|NSW}},\n{{TAG|POTIM}},\n[[ACFDT/RPA_calculations#RPAFORCES|RPA calculations]], \n[[GW_calculations#RPAFORCES| GW calculations]]\n\n{{sc|LRPAFORCE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:GW method]][[Category:Molecular dynamics]][[Category:Ionic minimization]][[Category:Forces]][[Category:Low-scaling GW and RPA]][[Category:VASP6]]", "last_revised": "2022-07-11T10:16:18Z"}, "LSCK": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCK\">LSCK</a>=<span><span class=\"tag-value\">True</span> switches on the use of the squeezed Coulomb kernel.</span></span>", "wikicode": "{{TAGDEF|LSCK|[logical]| .FALSE.}}\n\nDescription: {{TAG|LSCK}}=True switches on the use of the squeezed Coulomb kernel.\n----\nIf {{TAG|LSCK}} is set to .TRUE., the squeezed Coulomb kernel is used instead of the [[ENCUTGWSOFT|cosine window]] {{cite|riemelmoser:jcp:2020}}:\n\n<math>v_{G} = 4 \\pi e^2 \\frac{\n(G_{max}-G_{min})(G_{max}-G)\n}{\n(G_{min}^2 - G(2G_{min}-G_{max}))^2\n}  \n\\qquad \\mbox{for} \\quad  \\mathrm{ENCUTGWSOFT}=\\frac{\\hbar^2G_{min}^2}{2m_e}<\\frac{\\hbar^2 G^2}{2m_e}<\\frac{\\hbar^2G_{max}^2}{2m_e}=\\mathrm{ENCUTGW}</math> \n\nThis kernel 'squeezes' the contributions from large wave vectors <math>G>G_{max}</math> into the window given by {{TAG|ENCUTGWSOFT}}. Effectively, this extrapolates the random-phase-approximation&ndash;correlation energy to the {{TAG|ENCUTGW}} <math>\\to \\infty</math> limit, assuming that the basis-set-incompleteness error falls off as <math>1/</math>{{TAG|ENCUTGW}}<math>^{3/2}</math>.\n== Related tags and articles ==\n{{TAG|ENCUTGW}},\n{{TAG|GW calculations}}\n{{TAG|ACFDT/RPA calculations}}\n\n{{sc|LSCK|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:ACFDT]]", "last_revised": "2022-07-19T10:05:27Z"}, "LSCDM": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCDM\">LSCDM</a> switches on the selected columns of the density matrix (SCDM) method. </span>", "wikicode": "{{TAGDEF|LSCDM|.TRUE. {{!}} .FALSE. }}\n{{DEF|LSCDM|.FALSE.|}}\n\nDescription: {{TAG|LSCDM}} switches on the selected columns of the density matrix (SCDM) method. \n\n----\n\nThe selected columns of the density matrix (SCDM) method works by fitting a unitary matrix <math>U_{mn\\mathbf{k}}</math> that transforms \nthe basis from Bloch states <math>|\\psi_{n\\mathbf{k}}\\rangle</math> obtained by VASP to a [[Wannier functions| Wannier basis]] <math>|w_{m\\mathbf{R}}\\rangle</math>.\n\n::<math>\n|w_{m\\mathbf{R}}\\rangle =\n\\sum_{n\\mathbf{k}}\ne^{-i\\mathbf{k}\\cdot\\mathbf{R}}\nU_{mn\\mathbf{k}}\n|\\psi_{n\\mathbf{k}}\\rangle.\n</math>\n\nThis is done using a [[Wannier_Functions#One-shot_single_value_decomposition (SVD) | one-shot method ]] through a singular-value decomposition as proposed by A. Dale and L. Lin {{cite|dale:mms:2018}}.\n\nIn order to obtain a good Wannierization, a certain level of freedom should be given to the localized orbitals to adequately accommodate the Bloch states. This is controlled by the cutoff function specified by the {{TAG|CUTOFF_TYPE}} tag and related parameters \n<math>\\mu</math> ({{TAG|CUTOFF_MU}}) and\n<math>\\sigma</math> ({{TAG|CUTOFF_SIGMA}}).\n\n== Related tags and articles==\n{{TAG|CUTOFF_TYPE}},\n{{TAG|CUTOFF_MU}},\n{{TAG|CUTOFF_SIGMA}}\n\n{{sc|LSCDM|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-20T10:31:37Z"}, "LIBXC1": {"datatype": "string or  integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC1\">LIBXC1</a> specifies the exchange or exchange-correlation functional from the library of exchange-correlation functionals Libxc that one wants to use. If <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC1\">LIBXC1</a> corresponds to an exchange functional, then it can be used in combination with <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC1\">LIBXC2</a>  for the correlation functional.</span>", "wikicode": "{{TAGDEF|LIBXC1|[string] or [integer]}}\n\nDescription: {{TAG|LIBXC1}} specifies the exchange or exchange-correlation functional from the library of exchange-correlation functionals Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}} that one wants to use. If {{TAG|LIBXC1}} corresponds to an exchange functional, then it can be used in combination with {{TAG|LIBXC2}}  for the correlation functional.\n\n'''N.B.''': This feature is available from VASP.6.3.0 onwards that needs to be compiled with [[Precompiler_options#-DUSELIBXC|-DUSELIBXC]].\n----\n{{TAG|LIBXC1}} and {{TAG|LIBXC2}} can be either strings or integers. The available functionals are listed on the Libxc website{{cite|libxc_list}} along with their associated tag and number (e.g., GGA_X_PBE and 101 for PBE exchange). The tag indicates if this is an exchange (X), correlation (C) or exchange-correlation (XC) functional, and to which family it belongs to, namely LDA (LDA or HYB_LDA), GGA (GGA or HYB_GGA) or meta-GGA (MGGA or HYB_MGGA).\n\nNote that calculations with Laplacian-dependent meta-GGA functionals and meta-GGA-based hybrid functionals are possible since VASP.6.4.0.\n{{NB|warning|Do not use the Libxc functionals that are hybrid-MGGA-exchange-only, i.e., those whose tag starts with HYB_MGGA_X, since the results will be wrong.}}\n\nLibxc is a separate program that has to be downloaded{{cite|libxc}} and compiled before VASP is compiled with the corresponding [[Precompiler_options#-DUSELIBXC|precompiler options]] and [[Makefile.include#Libxc_.28optional.29|links to the libraries]].\n{{NB|important|To get correct results with meta-GGA functionals (see discussion at {{TAG|LTBOUNDLIBXC}}), it is necessary to use Libxc from version 5.2.0 onwards (or the master version for the latest implemented functionals) and to compile it with the option <code>--disable-fhc</code> as explained [[Makefile.include#Libxc_.28optional.29|here]].}}\n\nThe allowed possibilities for {{TAG|LIBXC1}} and {{TAG|LIBXC2}} are the following:\n*Both {{TAGDEF|LIBXC1}} and {{TAG|LIBXC2}} are specified and correspond to exchange and correlation functionals, respectively.\n*Only {{TAGDEF|LIBXC1}} is specified and corresponds to an exchange or exchange-correlation functional. Note also that if {{TAGDEF|LIBXC1}} is an exchange-correlation functional, then {{TAGDEF|LIBXC2}} can not be used.\n*{{TAGDEF|LIBXC1}} and {{TAG|LIBXC2}} can correspond to functionals of different families, e.g., a meta-GGA and a GGA, respectively.\n\nRegarding other tags in {{FILE|INCAR}} related to Libxc:\n*One also has to specify {{TAG|GGA}} = LIBXC for LDA, GGA and GGA-based hybrid functionals or {{TAG|METAGGA}} = LIBXC for meta-GGA functionals and meta-GGA-based hybrid functionals. Note that if one of the tags ({{TAGDEF|LIBXC1}} or {{TAGDEF|LIBXC2}}) corresponds to a meta-GGA, while the other corresponds to a GGA or LDA, then {{TAG|METAGGA}} = LIBXC (and not {{TAG|GGA}} = LIBXC) has to be specified.\n*Many of the functionals implemented in Libxc have parameters that can be modified. This can be done via the tags {{TAG|LIBXC1_Pn}} and {{TAG|LIBXC2_Pn}}, where <math>n=1, 2, \\ldots</math>.\n*The tag {{TAG|LTBOUNDLIBXC}}, which is .FALSE. by default, allows to enforce the lower bound on the kinetic-energy density (<math>\\tau_{\\sigma}^{\\mathrm{W}}<\\tau_{\\sigma}</math>) with <math>\\tau_{\\sigma}=\\max(\\tau_{\\sigma},\\tau_{\\sigma}^{\\mathrm{W}})</math> before <math>\\tau_{\\sigma}</math> is used in a meta-GGA functional from Libxc.\n\nFor calculations with hybrid functionals (i.e., when {{TAG|LHFCALC}} = .TRUE.), the following provides some explanations:\n*The Libxc functionals whose tag starts with HYB already include the mixing parameter, therefore for them the {{TAG|ALDAX}}, {{TAG|ALDAC}}, {{TAG|AGGAX}}, {{TAG|AGGAC}}, {{TAG|AMGGAX}}, and {{TAG|AMGGAC}} tags can not be used (more information on how to modify the mixing and screening parameters can be found at {{TAG|LIBXC1_Pn}}).\n*If the semilocal component of the hybrid functional is constructed using Libxc functionals that do not contain HYB in the tag, then {{TAG|ALDAX}}, {{TAG|AGGAX}}, {{TAG|ALDAC}}, and {{TAG|AGGAC}} will be used and multiply\n:<math>E_{\\mathrm{x}}^{\\mathrm{LDA}}=\\int\\epsilon_{\\mathrm{x}}^{\\mathrm{LDA}}(n)d^{3}r</math>\n:<math>\\Delta E_{\\mathrm{x}}^{\\mathrm{GGA}}=\\int\\left(\\epsilon_{\\mathrm{x}}^{\\mathrm{GGA}}(n,\\nabla n) - \\epsilon_{\\mathrm{x}}^{\\mathrm{LDA}}(n)\\right)d^{3}r</math>\n:<math>E_{\\mathrm{c}}^{\\mathrm{LDA}}=\\int\\epsilon_{\\mathrm{c}}^{\\mathrm{LDA}}(n)d^{3}r</math>\n:<math>\\Delta E_{\\mathrm{c}}^{\\mathrm{GGA}}=\\int\\left(\\epsilon_{\\mathrm{c}}^{\\mathrm{GGA}}(n,\\nabla n) - \\epsilon_{\\mathrm{c}}^{\\mathrm{LDA}}(n)\\right)d^{3}r</math>\n:respectively, where <math>\\epsilon_{\\mathrm{x}}^{\\mathrm{LDA}}(n)=-\\left(3/4\\right)\\left(3/\\pi\\right)^{1/3}n^{4/3}</math> and <math>\\epsilon_{\\mathrm{c}}^{\\mathrm{LDA}}(n)=\\epsilon_{\\mathrm{c}}^{\\mathrm{GGA}}(n,\\nabla n=0)</math>.\nExamples of how to specify a Libxc functional in {{FILE|INCAR}} are given below.\n\n*PBE{{cite|perdew:prl:1996}}\n {{TAG|GGA}} = LIBXC\n {{TAG|LIBXC1}} = GGA_X_PBE # or 101\n {{TAG|LIBXC2}} = GGA_C_PBE # or 130\n\n*SCAN{{cite|sun:prl:15}}\n {{TAG|METAGGA}} = LIBXC\n {{TAG|LIBXC1}} = MGGA_X_SCAN # or 263\n {{TAG|LIBXC2}} = MGGA_C_SCAN # or 267\n\n*PBEh (PBE0){{cite|adamo:jcp:1999}}\n {{TAG|LHFCALC}} = .TRUE.\n {{TAG|AEXX}} = 0.25\n {{TAG|GGA}} = LIBXC\n {{TAG|LIBXC1}} = HYB_GGA_XC_PBEH # or 406\n\n*SCAN0\n {{TAG|LHFCALC}} = .TRUE.\n {{TAG|AEXX}} = 0.25\n {{TAG|METAGGA}} = LIBXC\n {{TAG|LIBXC1}} = MGGA_X_SCAN # or 263\n {{TAG|LIBXC1}} = MGGA_C_SCAN # or 267\n\n== Related tags and articles ==\n{{TAG|LIBXC2}},\n{{TAG|LIBXC1_Pn}},\n{{TAG|LIBXC2_Pn}},\n{{TAG|LTBOUNDLIBXC}},\n{{TAG|GGA}},\n{{TAG|METAGGA}},\n{{TAG|LHFCALC}},\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n\n{{sc|LIBXC1|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]][[Category:meta-GGA]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-18T14:17:57Z"}, "WANNIER90_WIN": {"datatype": "string", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WANNIER90_WIN\">WANNIER90_WIN</a> sets the content of the <b>wannier90.win</b> file.</span>", "wikicode": "{{DISPLAYTITLE:WANNIER90_WIN}}\n\n{{TAGDEF|WANNIER90_WIN|[string]}}\n{{DEF|WANNIER90_WIN|None|}}\n\nDescription: {{TAG|WANNIER90_WIN}} sets the content of the '''wannier90.win''' file.\n----\n\nThe {{TAG|WANNIER90_WIN}} tag is a multiline string, where the content of the '''wannier90.win''' file can be specified. For instance,\n WANNIER90_WIN = \"\n exclude_bands 17-64\n \n Begin Projections\n Si:sp3\n End Projections\n \n # Disentanglement\n dis_win_min = -7\n dis_win_max = 16\n dis_num_iter = 100\n \n guiding_centres = true\n \"\n\nAdditionally, the value of some [https://github.com/wannier-developers/wannier90/raw/v3.1.0/doc/compiled_docs/user_guide.pdf Wannier90 tags]  is set automatically based on the VASP calculation, e.g., ''kpoints'', ''atoms'', ''unit_cell'', ''mp_grid'', ''spinors'', ''num_bands'', ''num_wann''. \n\nAvailable as of VASP 6.2.0.\n\n== Related tags and articles==\n{{TAG|NUM_WANN}},\n{{TAG|LWANNIER90}},\n{{TAG|LWANNIER90_RUN}}\n\n{{sc|WANNIER90_WIN|Examples|Examples that use this tag}}\n\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2023-02-06T10:49:41Z"}, "LIBXC2": {"datatype": "string or  integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC2\">LIBXC2</a> specifies the correlation functional from the library of exchange-correlation functionals Libxc that one wants to use. <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC2\">LIBXC2</a> can be used only if the functional specified with <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC2\">LIBXC1</a> corresponds to only exchange and not to exchange and correlation.</span>", "wikicode": "{{TAGDEF|LIBXC2|[string] or [integer]}}\n\nDescription: {{TAG|LIBXC2}} specifies the correlation functional from the library of exchange-correlation functionals Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}} that one wants to use. {{TAG|LIBXC2}} can be used only if the functional specified with {{TAG|LIBXC1}} corresponds to only exchange and not to exchange and correlation.\n\n----\nA detailed explanation on how to use {{TAG|LIBXC1}} and {{TAG|LIBXC2}} and examples can be found at the {{TAG|LIBXC1}} page.\n\n== Related Tags and Sections ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC1_Pn}},\n{{TAG|LIBXC2_Pn}},\n{{TAG|LTBOUNDLIBXC}},\n{{TAG|GGA}},\n{{TAG|METAGGA}},\n{{TAG|LHFCALC}},\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n\n{{sc|LIBXC2|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]][[Category:meta-GGA]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-17T14:39:01Z"}, "ML_EPS_REG": {"datatype": "real", "options": {}, "summary": "Initial value for the threshold of the eigenvalues of the covariance matrix in the evidence approximation.", "wikicode": "{{DISPLAYTITLE:ML_EPS_REG}}\n{{TAGDEF|ML_EPS_REG|[real]|1E-15}}\n\nDescription: Initial value for the threshold of the eigenvalues of the covariance matrix in the evidence approximation.\n----\nThis threshold is used to determine which eigenvalues <math>\\lambda_{k}</math> of the covariance matrix <math>\\mathbf{\\Phi}^{\\mathrm{T}}\\mathbf{\\Phi}/\\sigma^{2}_{\\mathrm{v}}</math> are used in the optimization of the regularization parameters <math>\\sigma^{2}_{\\mathrm{w}}</math> and <math>\\sigma^{2}_{\\mathrm{v}}</math> determined by the following equations\n\n<math>\n\\sigma^{2}_{\\mathrm{w}}=\\frac{|\\mathbf{\\bar{w}}|^{2}}{\\gamma},\n</math>\n\n<math>\n\\sigma^{2}_{\\mathrm{v}}=\\frac{|\\mathbf{T}-\\mathbf{\\phi}\\mathbf{\\bar{w}}|^{2}}{M-\\gamma},\n</math>\n\n<math>\n\\gamma=\\sum\\limits_{k=1}^{N_{\\mathrm{B}}} \\frac{\\lambda_{k}}{\\lambda_{k}+1/\\sigma^{2}_{\\mathrm{w}}} \n</math>.\n\nAll eigenvalues satisfying <math>\\lambda_{i} / \\lambda_{\\mathrm{max}} </math> > {{TAG|ML_EPS_REG}} are included in the above equations, whereas smaller eigenvalues are disregarded (they are anyway potentially inaccurate because of loss of significance).\n\nIf at any point during iterating the above equations, the quadratic norm of errors (eight column of <code>REGR/REGRF</code> in [[ML_LOGFILE]]) becomes too large (more than 1.2 times larger than in previous iterations), the code assumes that numerical issues\n(loss of significance) have occurred, and  then {{TAG|ML_EPS_REG}} is automatically doubled. Furthermore, if the regression does not converge within 10 steps, {{TAG|ML_EPS_REG}} is also increased by a factor of 4. The maximum allowed iteration depths is 50 (the iteration number is the second entry of <code>REGR/REGRF</code> in [[ML_LOGFILE]]). When 50 iterations are reached, no force field is created and there is most likely something seriously wrong in the calculation.\n\nThe seventh entry of <code>REGR/REGRF</code> in the [[ML_LOGFILE]] shows the ratio of the regularization (<math>\\sigma_{v}^{2}/ \\sigma_{w}^{2}</math>) and the largest eigenvalue. Usually this number is a number with many varying digits. If this number becomes a \"well rounded\" number (e.g. 1.00000000E-14), this is an indication that the cap for the current {{TAG|ML_EPS_REG}} is reached. That means that regularization becomes crucial. \n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IALGO_LINREG}}, {{TAG|ML_IREG}}, {{TAG|ML_SIGV0}}, {{TAG|ML_SIGW0}}\n\n{{sc|ML_EPS_LOW|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2022-05-16T08:48:15Z"}, "LIBXC1_Pn": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC1_Pn\">LIBXC1_Pn</a>, where <math>n=1, 2, \\ldots</math> allows to specify the values of the parameters of the functional implemented in Libxc that is called with <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC1_Pn\">LIBXC1</a>.</span>", "wikicode": "{{DISPLAYTITLE:LIBXC1_Pn}}\n{{TAGDEF|LIBXC1_Pn|[real]}}\n\nDescription: {{TAG|LIBXC1_Pn}}, where <math>n=1, 2, \\ldots</math> allows to specify the values of the parameters of the functional implemented in Libxc that is called with {{TAG|LIBXC1}}.\n----\n\nFor many of the functionals implemented in the library of exchange-correlation functionals Libxc{{cite|marques:cpc:2012}}{{cite|lehtola:sx:2018}}{{cite|libxc}} it is possible to modify the parameters if one does not want to use the default values. If a functional from Libxc has parameters that can be modified, then they are listed in {{FILE|OUTCAR}} below \"Parameters of Libxc functionals:\" as P<math>n</math> (<math>n=1, 2, \\ldots</math>). {{TAG|LIBXC1_Pn}} and {{TAG|LIBXC2_Pn}} are for the functionals called with {{TAG|LIBXC1}} and {{TAG|LIBXC2}}, respectively.\n\nAn example is given below for the GGA PBE functional{{cite|perdew:prl:1996}} where the default parameters <math>\\mu=0.21951</math> in exchange and <math>\\beta=0.066725</math> in correlation are changed to <math>\\mu=10/81\\approx0.12345679</math> and <math>\\beta=0.046</math> to get the PBEsol functional{{cite|perdew:prl:2008}} (of course, the simpler way to use PBEsol from Libxc would be to call it directly with {{TAG|LIBXC1}}=GGA_X_PBE_SOL and {{TAG|LIBXC2}}=GGA_C_PBE_SOL).\n {{TAG|GGA}} = LIBXC\n {{TAG|LIBXC1}} = GGA_X_PBE # or 101\n {{TAG|LIBXC2}} = GGA_C_PBE # or 130\n [[LIBXC1_Pn|LIBXC1_P2]] = 0.12345679\n [[LIBXC2_Pn|LIBXC2_P1]] = 0.046\n{{NB|mind|The {{TAG|ALDAX}}, {{TAG|ALDAC}}, {{TAG|AGGAX}}, {{TAG|AGGAC}}, {{TAG|AMGGAX}}, and {{TAG|AMGGAC}} tags are ignored if the Libxc functional is an exchange-correlation functional (those with a tag that contains XC)}}\n\nFor Libxc functionals that are the semilocal component of a hybrid functional, i.e. those with a tag that starts with HYB ({{TAG|LHFCALC}}=.TRUE. will be set automatically if such a functional is selected), the following explains how it works for the mixing and screening parameters:\n*Mixing parameter:\n**It is usually one of the parameters {{TAG|LIBXC1_Pn}}, and can therefore be modified.\n**For HYB_GGA_XC_PBEH, HYB_GGA_XC_B1WC, HYB_GGA_XC_HSE03, HYB_GGA_XC_HSE06, HYB_GGA_XC_HSE12, and HYB_GGA_XC_HSE12S, the value of {{TAG|AEXX}} (even if not specified explicitly in {{FILE|INCAR}}) will be used and automatically passed to the corresponding parameter in Libxc. On the other hand, if this corresponding parameter ({{TAG|LIBXC1_Pn}}) is specified in {{FILE|INCAR}}, then it will be used (instead of {{TAG|AEXX}}), however note that it will be only for the semilocal component of the hybrid functional and not for the exact exchange that will still use {{TAG|AEXX}}.\n**For all hybrid functionals except those listed just above, {{TAG|AEXX}} will not be considered for the semilocal component of the hybrid functional, but only for the exact exchange component. Therefore, a particular choice for the mixing parameter has to be done by specifying both {{TAG|AEXX}} (for the exact exchange) and the appropriate {{TAG|LIBXC1_Pn}} (for the semilocal component).\n**The {{TAG|ALDAX}}, {{TAG|ALDAC}}, {{TAG|AGGAX}}, {{TAG|AGGAC}}, {{TAG|AMGGAX}}, and {{TAG|AMGGAC}} tags are ignored if the Libxc functional is an hybrid functional (those with a tag that starts with HYB).\n*Screening parameter:\n**It is usually one of the parameters {{TAG|LIBXC1_Pn}} if it is a screened functional, and can therefore be modified.\n**For HYB_GGA_XC_HSE03, HYB_GGA_XC_HSE06, HYB_GGA_XC_HSE12, and HYB_GGA_XC_HSE12S, the value of {{TAG|HFSCREEN}} (even if not specified explicitly in {{FILE|INCAR}}) will be used and automatically passed to the corresponding parameter in Libxc. On the other hand, if this corresponding parameter ({{TAG|LIBXC1_Pn}}) is specified in {{FILE|INCAR}}, then it will be used (instead of {{TAG|HFSCREEN}}), however note that it will be only for the semilocal component of the hybrid functional and not for the exact exchange that will still use {{TAG|HFSCREEN}}.\n**For all hybrid functionals except those listed just above, {{TAG|HFSCREEN}} will not be considered for the semilocal component of the hybrid functional, but only for the exact exchange component. Therefore, a particular choice for the screening parameter has to be done by specifying both {{TAG|HFSCREEN}} (for the exact exchange) and the appropriate {{TAG|LIBXC1_Pn}} (for the semilocal component).\n\n== Related tags and articles ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC2}},\n{{TAG|LIBXC2_Pn}},\n{{TAG|LTBOUNDLIBXC}},\n{{TAG|GGA}},\n{{TAG|METAGGA}},\n{{TAG|LHFCALC}},\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n\n{{sc|LIBXC1_Pn|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]][[Category:meta-GGA]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-18T14:12:47Z"}, "LKPOINTS_OPT": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LKPOINTS_OPT\">LKPOINTS_OPT</a> controlls whether VASP reads the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPOINTS_OPT\">KPOINTS_OPT</a> file.</span>", "wikicode": "{{DISPLAYTITLE:LKPOINTS_OPT}}\n{{TAGDEF|LKPOINTS_OPT|.TRUE.{{!}} .FALSE.}}\n{{DEF|LKPOINTS_OPT|.TRUE.|if {{FILE|KPOINTS_OPT}} file is present.}}\n\nDescription: {{TAG| LKPOINTS_OPT}} controlls whether VASP reads the {{FILE|KPOINTS_OPT}} file.\n----\n\nTo avoid reading the {{FILE|KPOINTS_OPT}} file without removing it from the working directory, the {{TAG|LKPOINTS_OPT}} tag can be set to <code>.FALSE.</code> in the {{FILE|INCAR}} file.\n\n== Related tags and articles==\n{{FILE|KPOINTS_OPT}}, {{FILE|PROCAR_OPT}}\n\n{{sc|LKPOINTS_OPT|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:VASP]][[Category:INCAR tag]]", "last_revised": "2022-04-07T06:49:19Z"}, "LTRIPLET": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTRIPLET\">LTRIPLET</a> selects a triplet ansatz for <a href=\"https://www.vasp.at/wiki/index.php/%3ACategory%3ABethe-Salpeter_equations\">Bethe-Salpeter-equations</a> (BSE) calculations. This is synonymous to  <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTRIPLET\">LHARTREE</a>=<span class=\"tag-value\">.FALSE.</span></span>", "wikicode": "{{TAGDEF|LTRIPLET|.TRUE. {{!}} .FALSE.}}\n{{DEF|LTRIPLET|.FALSE.|}}\n\nDescription: {{TAG|LTRIPLET}} selects a triplet ansatz for [[:Category:Bethe-Salpeter equations|Bethe-Salpeter-equations]] (BSE) calculations. This is synonymous to  {{TAG|LHARTREE}} = .FALSE.\n----\n\nFor a usual BSE calculation ({{TAG|LHARTREE}}=.TRUE.; {{TAG|LTRIPLET}} = .FALSE.), the excited state corresponds to a singlet if the ground state is not spin-polarized ({{TAG|ISPIN}}=1) or anti-ferromagnetic ({{TAG|ISPIN}}=2, total magnetic moment 0). This is so because the ansatz for the BSE calculation involves a hole and an electron pair prepared within each spin channel. For instance, an electron with up spin is removed from the ground-state determinant and placed with the same spin into a previously unoccupied orbital. If there are no separate spin channels this ansatz results in a net spin-zero, which corresponds to a singlet state.\n\nIf {{TAG|LTRIPLET}}=.TRUE., VASP assumes that an ''up'' electron is removed from the ground-state determinant and placed as a ''down'' electron into a previously unoccupied orbital (spin flip). This ansatz corresponds to a triplet state as it has a net spin of one. Without spin-orbit coupling ({{TAG|LSORBIT}} = .FALSE.), the transition probability from the singlet ground state to the triplet solutions will be exactly zero. These excitations correspond to dark, potentially long-lived triplet excitons. However, VASP calculates the transition probabilities incorrectly, by assuming that a spin-flip excitation has the same transition probabilities as a usual singlet excitation.\nThe reported transition probabilities (\"optical transitions\" in {{TAG|vasprun.xml}}) are hence incorrect; they should be all zero. Likewise, the contributions to the dielectric function are zero for triplet excitations,\nand incorrectly reported in the {{TAG|vasprun.xml}} file.\n\nIf a non-magnetic material is calculated using {{TAG|ISPIN}}=2 for both the groundstate and BSE calculation, and a usual BSE calculation is performed ({{TAG|LHARTREE}}=.TRUE.; {{TAG|LTRIPLET}} = .FALSE.), all\nsinglet transitions as well as one set of the triplet excitations (those with <math> m_S=0</math> ) are calculated. All triplet transitions will have zero transition probabilities. If {{TAG|LTRIPLET}} = .TRUE. is set for the BSE calculation, the other two sets of triplet excitations (those with <math> m_S=1</math> and <math> m_S=-1</math>) are determined. Note that as for {{TAG|ISPIN}}=1 for {{TAG|ISPIN}}=2 and  {{TAG|LTRIPLET}} = .FALSE., incorrect non-zero transition probabilities are reported in the {{TAG|vasprun.xml}} file (they should be all exactly zero, since the underlying pair states fed into the BSE can not be excited by light).\n\nTo obtain meaningful transition probabilities for the singlet and triplet excitations, include spin-orbit coupling by setting {{TAG|LSORBIT}} = .TRUE. in the {{FILE|INCAR}} file throughout the calculation, i.e., for the ground-state and BSE calculation.  In this case, the singlet and all three sets of triplet excitations are calculated simultaneously, and proper transition probabilities are assigned to each transition. Small transition probabilities might be observed even for triplet excitations as a result of spin-orbit coupling. {{TAG|LTRIPLET}} = .TRUE. should not be used for calculations including spin-orbit coupling.\n{{NB|warning| {{TAG|LTRIPLET}}{{=}}.TRUE. has not been extensively tested in combination with spin-polarized ground states ({{TAG|ISPIN}}{{=}}2).}} \n{{NB|warning| We are not sure whether the [[BSEFATBAND]] approach can be combined with the {{TAG|LTRIPLET}} tag.}} \n\n== Related tags and articles==\n{{TAG|LHARTREE}},\n{{TAG|ISPIN}},\n{{TAG|LSORBIT}},\n[[BSE calculations]]\n\n{{sc|LTRIPLET|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-07T12:21:12Z"}, "LTBOUNDLIBXC": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTBOUNDLIBXC\">LTBOUNDLIBXC</a> specifies whether or not the lower bound for the Kohn-Sham kinetic-energy density <math>\\tau_{\\sigma}</math> (<math>\\tau_{\\sigma}^{\\textrm{W}}) is enforced before <math>\\tau_{\\sigma}</math> is used in a meta-GGA functional from Libxc.</math></span>", "wikicode": "{{TAGDEF|LTBOUNDLIBXC|.TRUE. {{!}} .FALSE. |.FALSE.}}\n\nDescription: {{TAG|LTBOUNDLIBXC}} specifies whether or not the lower bound for the Kohn-Sham kinetic-energy density <math>\\tau_{\\sigma}</math> (<math>\\tau_{\\sigma}^{\\textrm{W}}<\\tau_{\\sigma}</math>) is enforced before <math>\\tau_{\\sigma}</math> is used in a meta-GGA functional from Libxc.\n----\n\nThe KS kinetic-energy density <math>\\tau_{\\sigma}</math> should in principle be larger than the von Weizs\u00e4cker kinetic-energy density <math>\\tau_{\\sigma}^{\\textrm{W}}=\\left\\vert\\nabla\\rho_{\\sigma}\\right\\vert^{2}/\\left(8\\rho_{\\sigma}\\right)</math>. However, for numerical reasons this may not always be the case and can potentially lead to problems depending on the meta-GGA. If {{TAG|LTBOUNDLIBXC}}=.TRUE. in {{FILE|INCAR}}, then <math>\\tau_{\\sigma}=\\max(\\tau_{\\sigma},\\tau_{\\sigma}^{\\mathrm{W}})</math> is applied before <math>\\tau_{\\sigma}</math> is used in a meta-GGA functional from Libxc.\n\nHowever, according to tests, for some of the most common meta-GGA functionals like SCAN{{cite|sun:prl:15}}, a violation of the lower bound is technically not a problem and, furthermore, applying <math>\\tau_{\\sigma}=\\max(\\tau_{\\sigma},\\tau_{\\sigma}^{\\mathrm{W}})</math> leads to very inaccurate forces and stress tensor. Therefore, by default {{TAG|LTBOUNDLIBXC}}=.FALSE. and Libxc should be compiled  with the option <code>--disable-fhc</code> has explained [[Makefile.include#Libxc_.28optional.29|here]].\n\n== Related tags and articles ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC2}},\n{{TAG|METAGGA}}\n\n\n{{sc|LTBOUNDLIBXC|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2022-04-08T14:43:20Z"}, "LIBXC2_Pn": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC2_Pn\">LIBXC2_Pn</a>, where <math>n=1, 2, \\ldots</math> allows to specify the values of the parameters of the functional implemented in Libxc that is called with <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LIBXC2_Pn\">LIBXC2</a>.</span>", "wikicode": "{{DISPLAYTITLE:LIBXC2_Pn}}\n{{TAGDEF|LIBXC2_Pn|[real]}}\n\nDescription: {{TAG|LIBXC2_Pn}}, where <math>n=1, 2, \\ldots</math> allows to specify the values of the parameters of the functional implemented in Libxc that is called with {{TAG|LIBXC2}}.\n----\n\nA detailed explanation on how to use {{TAG|LIBXC1_Pn}} and {{TAG|LIBXC2_Pn}} and an example can be found at the {{TAG|LIBXC1_Pn}} page.\n\n== Related tags and articles ==\n{{TAG|LIBXC1}},\n{{TAG|LIBXC2}},\n{{TAG|LIBXC1_Pn}},\n{{TAG|LTBOUNDLIBXC}},\n{{TAG|GGA}},\n{{TAG|METAGGA}},\n{{TAG|LHFCALC}},\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n\n{{sc|LIBXC2_Pn|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:GGA]][[Category:meta-GGA]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-17T14:37:47Z"}, "ZAB_VDW": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ZAB_VDW\">ZAB_VDW</a> specifies the value of the parameter <math>Z_{ab}</math> in the kernel of the <a href=\"https://www.vasp.at/wiki/index.php/Nonlocal_vdW-DF_functionals\">nonlocal vdW-DF functional of Dion <i>et al</i>.</a>", "wikicode": "{{DISPLAYTITLE:ZAB_VDW}}\n{{TAGDEF|ZAB_VDW|[real]|-0.8491}}\n\nDescription: The tag {{TAG|ZAB_VDW}} specifies the value of the parameter <math>Z_{ab}</math> in the kernel of the [[Nonlocal vdW-DF functionals|nonlocal vdW-DF functional of Dion ''et al''.]]{{cite|dion:prl:2004}}\n----\nIn a revised version of the vdW correlation functional from Lee ''et al''.{{cite|lee:prb:2010}}, <math>Z_{ab}=-1.8867</math>.\n\n== Related tags and articles ==\n{{TAG|Nonlocal vdW-DF functionals}}, {{TAG|PARAM1}}, {{TAG|PARAM2}}\n\n{{sc|ZAB_VDW|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2022-04-08T20:44:03Z"}, "BPARAM": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/BPARAM\">BPARAM</a> specifies the value of the parameter <math>b</math> in the kernel of the nonlocal rVV10 correlation functional.", "wikicode": "{{TAGDEF|BPARAM|[real]|6.3}}\n\nDescription: The tag {{TAG|BPARAM}} specifies the value of the parameter <math>b</math> in the kernel of the nonlocal rVV10 correlation functional.\n----\nNote that {{TAG|BPARAM}} should be set to 15.7 for the SCAN+rVV10 functional{{cite|peng:prx:2016}}.\n\n== Related tags and articles ==\n{{TAG|CPARAM}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|BPARAM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:01:01Z"}, "CPARAM": {"datatype": "real", "options": {}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CPARAM\">CPARAM</a> allows to specify the value of the parameter <math>C</math> in the kernel of the nonlocal rVV10 correlation functional.", "wikicode": "{{TAGDEF|CPARAM|[real]|0.0093}}\n\nDescription: The tag {{TAG|CPARAM}} allows to specify the value of the parameter <math>C</math> in the kernel of the nonlocal rVV10 correlation functional.\n----\n\n== Related tags and articles ==\n{{TAG|BPARAM}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|CPARAM|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:01:19Z"}, "LTEMPER": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTEMPER\">LTEMPER</a> specified whether parallel tempering is used. The flag must be used in combination with  <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LTEMPER\">IMAGES</a>.</span>", "wikicode": "{{TAGDEF|LTEMPER|[logical]|.FALSE.}}\n\nDescription: {{TAG|LTEMPER}} specified whether parallel tempering is used. The flag must be used in combination with  {{TAG|IMAGES}}.\n\n----\nVASP supports various modes where simultaneous calculations for different INCAR, KPOINTS, POTCAR, or POSCAR files are performed. \nThe parallel tempering mode is explained in this section, however, please read the section {{TAG|IMAGES}} first. Parallel tempering is also known as replica-exchange molecular dynamics.<ref name=\"sugi99\"/> \n\nIf the tags {{TAG| IMAGES}}=nn and  {{TAG| LTEMPER}}=.TRUE. are set in the {{TAG| INCAR}} file, VASP performs parallel tempering calculations. In this case, it is expedient to supply different {{TAG| INCAR}} and {{TAG| POSCAR}} files in each subdirectory 01, 02, 03, ..., nn. For each subdiretory a different simulation temperature should be supplied using the tags  {{TAG| TEBEG}} in the INCAR files 01/INCAR, 02/INCAR ... nn/INCAR.\n\nIn the course of the simulations, VASP will attempt to swap the temperatures between the images. Swapping attempts are made every \n{{TAG|NTEMPER}} MD steps and accepted with a likelyhood of\n\n:<math> p = \\min \\left( 1, \\frac{ \\exp \\left( -\\frac{E_j}{kT_i} - \\frac{E_i}{kT_j} \\right) }{ \\exp \\left( -\\frac{E_i}{kT_i} - \\frac{E_j}{kT_j} \\right) } \\right) = \\min \\left( 1, e^{(E_i - E_j) \\left( \\frac{1}{kT_i} - \\frac{1}{kT_j} \\right)} \\right) ,</math>\n\n\nwhere <math> E_i, E_j</math> and <math> T_i, T_j </math> are the energies and temperatures of the considered two replicas. Note that VASP swaps the temperatures and not the positions between images. This means that the temperatures in each subdirectory change as the MD progresses. Information on the current temperatures for each image can be found in the {{TAG|OUTCAR}} files around the lines (all OUTCAR files will show the same information):\n\n parallel tempering new\n\nThe average acceptance ratios are also written to the {{TAG|OUTCAR}} file. For efficient parallel tempering the acceptance ratio should not fall much below 0.2-0.3. If the acceptance ratio is too small, one usually needs to increase the number of images. However, too many images can also decrease the probability that all images visit all allowed temperatures. \n \n== Related tags and articles ==\n{{TAG|IMAGES}},\n{{TAG|NTEMPER}}\n\n{{sc|IMAGES|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n<ref name=\"sugi99\">[http://dx.doi.org/10.1016/S0009-2614(99)01123-9 Y. Sugita and Y. Okamoto, Chemical Physics Letters. 314, 141 (1999).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Parallel Tempering]]", "last_revised": "2022-04-08T14:43:35Z"}, "NTEMPER": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NTEMPER\">NTEMPER</a> specifies how often temperature swaps are attempted during parallel tempering. The flag must be used in combination with  <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NTEMPER\">IMAGES</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NTEMPER\">LTEMPER</a>. </span>", "wikicode": "{{TAGDEF|NTEMPER|[integer]| 200}}\n\nDescription: {{TAG|NTEMPER}} specifies how often temperature swaps are attempted during parallel tempering. The flag must be used in combination with  {{TAG|IMAGES}} and {{TAG|LTEMPER}}. \n\n----\n{{TAG|NTEMPER}} must be a positive integer. Swaps are on average attempted after {{TAG|NTEMPER}} molecular dynamics steps.\nSpecifically, a random number <math> r </math> between [0,1[ is drawn. The next temperature swaps are attempted after \n{{TAG|NTEMPER}} <math> \\times  2~ r -1 </math>  steps. Obviously, for {{TAG|NTEMPER}}=1 swaps are attempted at every MD step. In the present code version, temperature swaps are alternatively performed between images 1,2 and 3,4 and 5,6 etc. Upon the next swap attempts, the swaps are attempted between imaged 2,3 and 4,5 and 6,7 etc.\nThis implies that many swaps are attempted at the same time.\n\nFurthermore, for {{TAG|NTEMPER}}=0 no temperature swaps are attempted. This can be useful to perform many independent calculations in the directories 01, 02, 03, ... .\n \nA final note is in place. The tag {{TAG|NTEMPER}}  must be set in the {{TAG|INCAR}} files of the subdirectories 01, 02, 03, and {{TAG|NTEMPER}} must be identical in all\nsubdirectories. Failure to observe this rule can lead to unexpected behavior.\n== Related tags and articles ==\n{{TAG|IMAGES}},\n{{TAG|LTEMPER}}\n\n{{sc|IMAGES|Examples|Examples that use this tag}}\n\n== References ==\n<references>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:Parallel Tempering]]", "last_revised": "2022-04-08T14:51:51Z"}, "VDW_ALPHA": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_ALPHA\">VDW_ALPHA</a> defines the polarizability <math>\\alpha_{0}</math> (bohr<math>^{3}</math>) for each species defined in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_ALPHA\">POSCAR</a> file within the <a href=\"https://www.vasp.at/wiki/index.php/Tkatchenko-Scheffler_method\">Tkatchenko-Scheffler</a> method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_ALPHA}}\n{{TAGDEF|VDW_ALPHA|[real (array)]}}\n\nDescription: {{TAG|VDW_ALPHA}} defines the polarizability <math>\\alpha_{0}</math> (bohr<math>^{3}</math>) for each species defined in the {{TAG|POSCAR}} file within the [[Tkatchenko-Scheffler_method|Tkatchenko-Scheffler]] method.\n----\n\n== Related tags and articles ==\n{{TAG|Tkatchenko-Scheffler_method}}\n\n{{sc|VDW_R0|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:46:14Z"}, "VDW_C6AU": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_C6AU\">VDW_C6AU</a> defines the <math>C_6</math> parameters (<math>\\mathrm{Hartree}</math> <math>\\mathrm{bohr}^{6}</math>) for each species defined in the <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_C6AU\">POSCAR</a> file within the <a href=\"https://www.vasp.at/wiki/index.php/Tkatchenko-Scheffler_method\">Tkatchenko-Scheffler</a> method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_C6AU}}\n{{TAGDEF|VDW_C6AU|[real (array)]}}\n\nDescription: {{TAG|VDW_C6AU}} defines the <math>C_6</math> parameters (<math>\\mathrm{Hartree}</math> <math>\\mathrm{bohr}^{6}</math>) for each species defined in the {{TAG|POSCAR}} file within the [[Tkatchenko-Scheffler_method|Tkatchenko-Scheffler]] method.\n----\n\n== Related tags and articles ==\n{{TAG|Tkatchenko-Scheffler_method}}\n\n{{sc|VDW_C6AU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:46:45Z"}, "VDW_R0AU": {"datatype": "real array", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/VDW_R0AU\">VDW_R0AU</a> defines the <math>R_0</math> parameters (bohr) for each species defined in the <a href=\"https://www.vasp.at/wiki/index.php/Tkatchenko-Scheffler_method\">Tkatchenko-Scheffler</a> method.</span>", "wikicode": "{{DISPLAYTITLE:VDW_R0AU}}\n{{TAGDEF|VDW_R0AU|[real (array)]}}\n\nDescription: {{TAG|VDW_R0AU}} defines the <math>R_0</math> parameters (bohr) for each species defined in the [[Tkatchenko-Scheffler_method|Tkatchenko-Scheffler]] method.\n----\n\n== Related tags and articles ==\n{{TAG|Tkatchenko-Scheffler_method}}\n\n{{sc|VDW_R0AU|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T14:47:22Z"}, "LSCALER0": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSCALER0\">LSCALER0</a> decides whether to compute SCS contribution to gradients or not.</span>", "wikicode": "{{TAGDEF|LSCALER0|.TRUE. {{!}} .FALSE.|.TRUE.}}\n\nDescription: {{TAGDEF|LSCALER0}} decides whether to compute SCS contribution to gradients or not.\n----\n\n== Related tags and articles ==\n{{TAG|IVDW}},\n{{TAG|Self-consistent screening in Tkatchenko-Scheffler method}},\n{{TAG|LVDWEXPANSION}}\n\n{{sc|LVDWEXPANSION|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-04-08T20:38:29Z"}, "LFXC": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LFXC\">LFXC</a> enables the local exchange-correlation kernel in <a href=\"https://www.vasp.at/wiki/index.php/BSE_calculations\">TD-DFT</a> and <a href=\"https://www.vasp.at/wiki/index.php/BSE_calculations\">TDHF</a> calculations.</span>", "wikicode": "{{TAGDEF|LFXC|.TRUE. {{!}} .FALSE.}}\n{{DEF|LFXC|.FALSE.|}}\n\nDescription: {{TAG|LFXC}} enables the local exchange-correlation kernel in [[BSE calculations|TD-DFT]] and [[BSE calculations|TDHF]] calculations.\n----\nThe local exchange-correlation kernel is determined via {{cite|sander:prb:15}}\n\n::<math>\nf^{\\rm loc}_{\\mathrm{xc}}\\left(\\mathbf{r}, \\mathbf{r}'\\right) =\n\\frac{\\delta^{2}\\left\\{E_{\\mathrm{c}}^{\\mathrm{DFT}}+\\left(1-c_{\\rm x}\\right)\nE_{\\mathrm{x}}^{\\mathrm{DFT}}\\right\\}}{\\delta \\rho(\\mathbf{r}) \\delta\n\\rho\\left(\\mathbf{r}'\\right)}\n</math>,\nwhere <math>c_{\\rm x}</math> is the fraction of the exchange interaction set by {{TAG|AEXX}}.\n\n\n== Related tags and articles==\n{{TAG|LHARTREE}},\n{{TAG|ISPIN}},\n{{TAG|LSORBIT}},\n[[BSE calculations]]\n\n== References ==\n<references/>\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:Bethe-Salpeter equations]]", "last_revised": "2022-04-20T15:01:40Z"}, "ICORELEVEL": {"datatype": "integer", "options": {"0": null, "1": null, "2": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ICORELEVEL\">ICORELEVEL</a> controls whether the core energies are explicitly calculated or not and how they are calculated.</span>", "wikicode": "{{TAGDEF|ICORELEVEL|0 {{!}} 1 {{!}} 2|0}}\n\nDescription: {{TAG|ICORELEVEL}} controls whether the core energies are explicitly calculated or not and how they are calculated.\n\n---- \n\nThe binding energy of core electrons <math>E_{CL}</math> is given as \n:<math>E_{CL} = E(n_{c}-1) - E(n_{c})</math>.\nHere, <math>E(n_{c})</math> is the energy from a standard density-functional calculation in which the number of core electrons corresponds to the unexcited ground state. <math>E(n_{c}-1)</math> is the energy of a calculation where one electron is removed from the core of one particular atom and added to the valence or conduction band.\n\nThe core-level binding energies can be calculated either in the initial-state approximation or the final-state approximation. In the initial-state approximation, a core electron is removed from the core states and added to the valence/conduction bands but no change of the potential (by e.g. relaxation of the valence electrons) is allowed. The core-level binding energy can then be directly calculated by the Kohn-Sham eigenvalues{{cite|koehler:prb:04}}{{cite|lizzit:prb:2001}} of the core level <math>\\epsilon_{c}</math> and the Fermi energy <math>\\epsilon_{F}</math>\n:<math>E_{CL}^{\\mathrm{i}}=\\epsilon_{c} - \\epsilon_{F}</math>.\nIn the final-state approximation, the electrons (valence electrons in the frozen-core approximation) are allowed to relax, so that the local hole is screened. In other words, a fully self-consistent electronic calculation is carried out with a core hole and an additional electron in the valence/conduction bands.\n\nThe following options are available in VASP:\n*{{TAG|ICORELEVEL}}=0: The core energies are not calculated (default).\n*{{TAG|ICORELEVEL}}=1: The initial-state approximation is used. This just involves recalculating the KS eigenvalues of the core states\nafter a self-consistent calculation of the valence charge density. {{TAG|ICORELEVEL}}=1 is a little bit more involved than the calculations using\n{{TAG|LVTOT}}=''.TRUE.'', since the Kohn-Sham energy of each core state is recalculated. This adds very little extra cost to the calculations. Usually,\nthe shifts correspond very closely to the change of the electrostatic potential at the lattice sites (calculated using {{TAG|LVTOT}}=''.TRUE.'').\n*{{TAG|ICORELEVEL}}=2: The final-state approximation is used. Electrons are removed from the core and placed into the valence (effectively increasing {{TAG|NELECT}}). The VASP implementation excites all selected core electrons for\nall atoms of one species. The species, as well as the selected electrons, are specified using\n {{TAGBL|CLNT}} = species \n {{TAGBL|CLN}} =  main quantum number of excited core electron \n {{TAGBL|CLL}} =  l quantum number of excited core electron\n {{TAGBL|CLZ}} =  electron count\nThe electron count {{TAGBL|CLZ}} specifies how many electrons are excited\nfrom the core. Usually, 1 or 0.5 (Slater's transition state) are sensible choices.\n{{TAG|CLNT}} selects for which species in the {{TAG|POTCAR}} file the electrons\nare excited. Usually one would like to excite the electrons for\nonly one atom, this requires changing the {{TAG|POSCAR}} and {{TAG|POTCAR}} file,\nsuch that the selected atom corresponds to one species in the {{TAG|POTCAR}} file.\ni.e. if the calculation invokes a supercell with 64 atoms of one type,\nthe selected atom needs to be singled out, and the {{TAG|POSCAR}} file will\nthen contain 63 \"standard\"  atoms as well as one special  species,\nat which the excited core hole will be placed\n(the {{TAG|POTCAR}} file will hold two identical PAW datasets in this case).\n\nSeveral caveats apply to this mode.\nFirst, the excited electron is always spherical and multipole splittings\nare not available. Second, the other core electrons are not allowed\nto relax, which might cause a slight error in the calculated\nenergies.\nThird, absolute energies are not meaningful, since VASP usually\nreports valence energies only. Only relative\nshifts of the core electron binding energies are relevant\n(in some cases, the VASP total energies might become even positive).\n\n== Super-cell core-hole method ==\n\n{{TAG|ICORELEVEL}}=2 and itss related tags are necessary for the calculation of [[XAS theory|X-ray absorption spectra]] (XAS) using the super-cell core-hole method.\n\nA description of how to set up super-cell core-hole calculations is given [[SCH calculations|here]].\n\nA tutorial for the calculation of XAS is given [[XAS - Tutorial|here]].\n\n== Related tags and articles ==\n{{TAG|CLNT}}, {{TAG|CLN}}, {{TAG|CLL}}, {{TAG|CLZ}}, {{TAG|CH_LSPEC}}, {{TAG|CH_SIGMA}}, {{TAG|CH_NEDOS}}\n\n{{sc|ICORELEVEL|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n\n<noinclude>\n----\n\n[[Category:INCAR tag]][[Category:Linear response]][[Category:Dielectric properties]][[Category:XAS]]", "last_revised": "2022-07-19T07:57:47Z"}, "LWEIGHTED": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWEIGHTED\">LWEIGHTED</a> selects the <a href=\"https://www.vasp.at/wiki/index.php/Constrained%E2%80%93random-phase%E2%80%93approximation_formalism%23Weighted_method\">weighted cRPA method</a>. </span>", "wikicode": "{{TAGDEF|LWEIGHTED|[logical]|.FALSE.}}\n\nDescription: {{TAG|LWEIGHTED}} selects the [[Constrained\u2013random-phase\u2013approximation_formalism#Weighted_method|weighted cRPA method]]. \n----\nSelects the cRPA method of Sasioglu, Friedrich and Bl\u00fcgel{{cite|sasioglu:prb:83}} where following screening are subtracted from the full RPA polarizability:\n::<math>\\tilde  \\chi^\\sigma_{{\\bf G,G}'}({\\bf q},i\\omega)\\approx\n\\frac 1{N_k}\\sum_{nn'{\\bf k}}\n\\frac{\nf_{n\\bf k}-f_{n'\\bf k-q}\n}{\n\\epsilon_{n{\\bf k}} -  \\epsilon_{n'\\bf k-q} - i \\omega \n}\np_{n\\bf k }^{\\sigma}\np_{n'\\bf k-p }^{\\sigma'}\n\\langle\nu_{n {\\bf k  }}^{\\sigma  } \n|e^{-i \\bf (G+q) r}| \nu_{n'{\\bf k-q}}^{ \\sigma' }\n\\rangle\n\\langle\nu_{n' {\\bf k-q}}^{\\sigma' }\n|e^{-i \\bf (G'-q)r'} |\nu_{n'{\\bf k  }}^{ \\sigma  }\n\\rangle\n</math>\n== Related tags and articles==\n{{TAG|LDISENTANGLE}},\n{{TAG|ALGO}}\n\n{{sc|LWEIGHTED|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n[[The_VASP_Manual|Contents]]\n[[Category:INCAR_tag]][[Category:Constrained-random-phase approximation]]\n<!-- Link to categrories like this: [[Category:INCAR]][[Category:Constrained-random-phase approximation]] -->", "last_revised": "2022-08-16T08:58:48Z"}, "LDISENTANGLE": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LDISENTANGLE\">LDISENTANGLE</a> selects the <a href=\"https://www.vasp.at/wiki/index.php/Constrained%E2%80%93random-phase%E2%80%93approximation_formalism%23Disentangled_method\">disentangled cRPA method</a>. </span>", "wikicode": "{{TAGDEF|LDISENTANGLE|[logical]|.FALSE.}}\n\nDescription: {{TAG|LDISENTANGLE}} selects the [[Constrained\u2013random-phase\u2013approximation_formalism#Disentangled_method|disentangled cRPA method]]. \n----\nSelects the cRPA method of Miyake, Aryasetiawan and Imada{{cite|miyake:prb:80}}. Following screening are subtracted from the full RPA polarizability:\n::<math>\\tilde  \\chi^\\sigma_{{\\bf G,G}'}({\\bf q},i\\omega)=\n\\frac 1{N_k}\\sum_{\\bf k}\\sum_{nn'\\in{\\cal T}} \n\\frac{\nf_{n\\bf k}-f_{n'\\bf k-q}\n}{\n\\tilde\\epsilon_{n{\\bf k}} -  \\tilde\\epsilon_{n'\\bf k-q} - i \\omega \n}\n\\langle\n\\tilde u_{n {\\bf k  }}^{\\sigma  } \n|e^{-i \\bf (G+q) r}| \n\\tilde u_{n'{\\bf k-q}}^{ \\sigma' }\n\\rangle\n\\langle\n\\tilde u_{n' {\\bf k-q}}^{\\sigma' }\n|e^{-i \\bf (G'-q)r'} |\n\\tilde u_{n{\\bf k  }}^{ \\sigma  }\n\\rangle\n</math>,\nwhere <math>\\tilde \\epsilon_{n\\bf k}^\\sigma</math> is the disentangled band structure. \n\n== Related tags and articles==\n{{TAG|LWEIGHTED}},\n{{TAG|ALGO}}\n\n{{sc|LDISENTANGLE|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n[[The_VASP_Manual|Contents]]\n[[Category:INCAR_tag]][[Category:Constrained-random-phase approximation]]\n<!-- Link to categrories like this: [[Category:INCAR]][[Category:Constrained-random-phase approximation]] -->", "last_revised": "2022-08-16T08:58:37Z"}, "FOCKCORR": {"datatype": "integer", "options": {"2": null, "1": null}, "summary": "The tag <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/FOCKCORR\">FOCKCORR</a> determines how the Coulomb convergence corrections are applied.", "wikicode": "{{TAGDEF|FOCKCORR|1 {{!}} 2}}\n{{DEF|FOCKCORR|2|if {{TAG|LMAXFOCKAE}}>0|1|else}}\n\nDescription: The tag {{TAG|FOCKCORR}} determines how the Coulomb convergence corrections are applied.\n\n----\n\nThe Coulomb potential in reciprocal space \n:<math>V(G)=\\frac{4\\pi e^2}{G^2}</math> \ndiverges for small G vectors.\nTo alleviate this issue and improve the convergence of the exact exchange integral with respect to supercell size (or k-point mesh density) different methods have been proposed: the auxiliary function methods{{cite|gygi:prb:86}}, probe-charge Ewald {{cite|massidda:prb:93}} ({{TAG|HFALPHA}}), and Coulomb truncation methods{{cite|spenceralavi:prb:08}} ({{TAG|HFRCUT}}).\nThese mostly involve modifying the Coulomb Kernel in a way that yields the same result as the unmodified kernel within the limit of large supercell sizes.\n\nThese corrections are implemented in VASP either by changing the <math>\\mathbf{G}=0</math> component of the Coulomb kernel when {{TAG|FOCKCORR}}=1 \n:<math>\n\\Phi(\\mathbf{G}) = \n\\left\\{\n    \\begin{array}{lr}\n        \\frac{4\\pi e^2}{\\Omega} \\frac{1}{G^2} & \\mathbf{G} \\neq 0\\\\\n        \\chi                              & \\mathbf{G} = 0\n    \\end{array} \n\\right.\n</math>\n\nwith <math>\\chi</math> being the value of the correction and depends on whether {{TAG|HFALPHA}} or {{TAG|HFRCUT}} are set,\nor by including the original orbital scaled by the convergence correction when {{TAG|FOCKCORR}}=2\n\n:<math>\n\\langle \\mathbf{k}+\\mathbf{G}' | V^\\text{HF}_\\text{x} | \\mathbf{k}+\\mathbf{G} \\rangle = \n- \\sum_{m\\mathbf{q}}f_{m\\mathbf{q}}\\sum_{\\mathbf{G}''}\nC^*_{m\\mathbf{q}}(\\mathbf{G}'-\\mathbf{G}'') \\Phi(\\mathbf{k}-\\mathbf{q}+\\mathbf{G}'') C_{m\\mathbf{q}}(\\mathbf{G}-\\mathbf{G}'')\n</math>\n\n:<math>\n\\begin{aligned}\n\\langle \\mathbf{k}+\\mathbf{G}' |\\hat{V}^\\text{HF}_{\\text{x}} | \\psi_{\\mathbf{k}n} \\rangle\n&= \n- \\sum_{m\\mathbf{q}}f_{m\\mathbf{q}}\\sum_{\\mathbf{G}''}\nC^*_{m\\mathbf{q}}(\\mathbf{G}'-\\mathbf{G}'') \\Phi(\\mathbf{k}-\\mathbf{q}+\\mathbf{G}'') C_{m\\mathbf{q}}(\\mathbf{G}-\\mathbf{G}'')\nC_{n\\mathbf{k}}(\\mathbf{G})\\\\\n&=\n-  \\chi\\sum_{m\\mathbf{q}}f_{m\\mathbf{q}}\n C_{m\\mathbf{q}}(\\mathbf{G})\n\\end{aligned}\n</math>\n\nFor Hartree-Fock or hybrid functional calculations, either {{TAG|FOCKCORR}}=1 or {{TAG|FOCKCORR}}=2 can be used and should yield the same results when {{TAG|LMAXFOCKAE}}=-1 and there are no aliasing errors in the exact exchange (see {{TAG|PRECFOCK}} for more details).\nFor post-DFT methods such as ACDFT, GW, and BSE the {{TAG|FOCKCORR}}=2 should be used because the overlap densities are reconstructed in the plane-wave grid (see {{TAG|LMAXFOCKAE}} tag).\n\nNote that in the case {{TAG|FOCKCORR}}=2 the corrections are only applied to orbitals in the <math>\\mathbf{q}</math> regular grid used to describe the exact exchange potential so this method cannot be used to compute band structures where this potential is applied to orbitals <math>n\\mathbf{k}</math> not in the <math>m\\mathbf{q}</math> set.\n{{NB|warning| {{TAG|FOCKCORR}}{{=}}2 should '''not''' be used when computing the band structure along a path with the [[Si_HSE_bandstructure|0-weight scheme]] or {{TAG|KPOINTS_OPT}} }}\n\nIn previous versions of VASP, \n{{TAG|FOCKCORR}}=1 was used when {{TAG|ALGO}}=Normal; {{TAG|LFOCKACE}}=.FALSE. and\n{{TAG|FOCKCORR}}=2 when {{TAG|ALGO}}=All or {{TAG|ALGO}}=Normal; {{TAG|LFOCKACE}}=.TRUE. .\n{{NB|mind| Only available as of VASP 6.3.1.}}\n\n== Related tags and articles ==\n{{TAG|HFRCUT}},\n{{TAG|HFALPHA}}\n\n{{sc|HFRCUT|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:INCAR tag]][[Category:Hybrid_functionals]]", "last_revised": "2022-05-11T14:17:00Z"}, "ML_SCLC_CTIFOR": {"datatype": "real", "options": {}, "summary": "Sets fraction by which the Bayesian threshold for the maximum forces is lowered in the selection of local reference calculations.", "wikicode": "{{DISPLAYTITLE:ML_SCLC_CTIFOR}}\n{{TAGDEF|ML_SCLC_CTIFOR|[real]|0.6}}\n\nDescription: Sets fraction by which the Bayesian threshold for the maximum forces is lowered in the selection of local reference calculations.\n----\nAt every sampling step each atom with it's environment is chosen as a local reaference configuration is chosen if it's predicted error in the force is larger than the Bayesian threshold for the maximum forces ({{TAG|ML_CTIFOR}}). {{TAG|ML_SCLC_CTIFOR}} lowers the threshold by multiplying it to {{TAG|ML_CTIFOR}}, but it doesn't effect the decision whether a sampling step (ab-initio calculation) is carried out or not, since the decision for sampling is done previously in a separate step. \n\nThe default value of 0.8 was set by us empirically in dependence of default values for other input parameters.\n\nIf this value is decreased, often the initial learning efficiency is much improved. This applies in particular to liquid and polymeric system, with a large configurational space. Good values are around 0.5 for such systems.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_CX}}, {{TAG|ML_EPS_LOW}}\n\n----\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T13:56:40Z"}, "KPOINTS_OPT_NKBATCH": {"datatype": "number of k-points in the irreducible brillouin zone of the self-consistent calculation.", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPOINTS_OPT_NKBATCH\">KPOINTS_OPT_NKBATCH</a> determines the size of the batch of k-points for the KPOINTS_OPT driver.</span>", "wikicode": "{{DISPLAYTITLE:KPOINTS_OPT_NKBATCH}}\n{{TAG| KPOINTS_OPT_NKBATCH}} = [integer]\n\nDefault: {{TAGDEF|KPOINTS_OPT_NKBATCH|Number of k-points in the irreducible Brillouin zone of the self-consistent calculation.}}\n\nDescription: {{TAG| KPOINTS_OPT_NKBATCH}} determines the size of the batch of k-points for the KPOINTS_OPT driver.\n----\n\nWhen the {{FILE|KPOINTS_OPT}} is present an additional non-self-consistent calculation is performed after self-consistency is reached.\nThis one-shot calculation is done in batches of N k-points to reduce memory usage.\nIncreasing the size of the batch leads to faster calculation times but higher memory usage in the non-self-consistent calculation.\n\n== Related tags and articles==\n{{TAG|LKPOINTS_OPT}}, {{FILE|KPOINTS_OPT}}, {{FILE|PROCAR_OPT}}\n\n{{sc|LKPOINTS_OPT|Examples|Examples that use this tag}}\n----\n[[The_VASP_Manual|Contents]]\n\n[[Category:VASP]][[Category:INCAR tag]][[Category:Memory]]", "last_revised": "2022-05-25T09:07:34Z"}, "LCHARGH5": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LCHARGH5\">LCHARGH5</a> determines whether the charge densities are written to {{FILE|vaspwave.h5}}.</span>", "wikicode": "{{TAGDEF|LCHARGH5|[logical]|{{TAG|LH5}}}}\n\nDescription: {{TAG|LCHARGH5}} determines whether the charge densities are written to {{FILE|vaspwave.h5}}.\n\n== Related tags and articles ==\n{{TAG|LWAVE}}, {{TAG|LWAVEH5}}, {{TAG|LCHARG}}, {{TAG|LH5}}\n\n\n{{sc|LCHARGH5|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-06-02T07:47:00Z"}, "LWAVEH5": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LWAVEH5\">LWAVEH5</a> determines whether the wavefunctions are written to {{FILE|vaspwave.h5}} file at the end of a run.</span>", "wikicode": "{{TAGDEF|LWAVE|[logical]|{{TAG|LH5}}}}\n\nDescription: {{TAG|LWAVEH5}} determines whether the wavefunctions are written to {{FILE|vaspwave.h5}} file at the end of a run.\n\n== Related tags and articles ==\n{{TAG|LCHARG}}, {{TAG|LCHARGH5}}, {{TAG|LWAVE}}, {{TAG|LH5}}\n\n\n{{sc|LWAVEH5|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:PAW]]", "last_revised": "2022-06-02T07:46:36Z"}, "LH5": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LH5\">LH5</a> determines whether the output is written to the legacy files (<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">CHGCAR</a>, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">CHG</a>, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CHGCAR\">WAVECAR</a>) or the {{FILE|vaspwave.h5}} file.</span>", "wikicode": "{{TAGDEF|LH5|[logical]|.FALSE.}}\n\nDescription: {{TAG|LH5}} determines whether the output is written to the legacy files ({{FILE|CHGCAR}}, {{FILE|CHG}}, {{FILE|WAVECAR}}) or the {{FILE|vaspwave.h5}} file.\n\n== Related tags and articles ==\n{{TAG|LWAVE}}, {{TAG|LWAVEH5}}, {{TAG|LCHARG}}, {{TAG|LCHARGH5}}\n\n\n{{sc|LH5|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Electronic minimization]][[Category:Charge density]]", "last_revised": "2022-06-02T07:54:53Z"}, "CUTOFF_TYPE": {"datatype": "string", "options": {"erfc": null, "gaussian": null, "fermi": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CUTOFF_TYPE\">CUTOFF_TYPE</a> chooses the type of cutoff function to be used before performing the singular-value decomposition (SVD) of the initial projections matrix.</span>", "wikicode": "{{DISPLAYTITLE:CUTOFF_TYPE}}\n{{TAGDEF|CUTOFF_TYPE|erfc {{!}} gaussian {{!}} fermi}}\n{{DEF|CUTOFF_TYPE|erfc|}}\n\nDescription: {{TAG|CUTOFF_TYPE}} chooses the type of cutoff function to be used before performing the singular-value decomposition (SVD) of the initial projections matrix.\n \n----\n\nThe selected columns of the density matrix {{TAG|LSCDM}} method works by fitting a unitary matrix <math>U_{mn\\mathbf{k}}</math> that transforms from the Bloch states obtained by VASP to a [[Wannier functions| Wannier basis]]. This is done using a [[Wannier_functions#One-shot_single_value_decomposition (SVD) | one-shot method ]] through a singular-value decomposition (SVD).\n\nThis tag governs how much weight should be given in the SVD decomposition to a certain orbital with energy <math>\\epsilon_{n\\mathbf{k}}</math>. If the weight is zero the orbital is not included in the fitting while if it is one it is included with the maximum importance.\nThe behavior is similar to the wannier90 disentanglement window.\n\nIn order to obtain a good Wannierization, a certain level of freedom should be given to the localized orbitals to adequately accommodate the Bloch states. This is particularly important for systems with entangled states.\n\n{| class=\"wikitable\"\n|-\n! CUTOFF_TYPE !! Function\n|-\n| erfc || <math>\\frac{1}{2}\\text{erfc}\\left[(\\epsilon_{n\\mathbf{k}}-\\mu)/\\sigma\\right]</math>\n|-\n| gaussian || <math>e^{-(\\epsilon_{n\\mathbf{k}}-\\mu)^2/\\sigma}</math>\n|-\n| fermi || <math>\\frac{1}{e^{(\\epsilon_{n\\mathbf{k}}-\\mu)/\\sigma}+1}</math>\n|}\n\nwith <math>\\sigma</math> specified by the {{TAG|CUTOFF_SIGMA}} tag and <math>\\mu</math> by {{TAG|CUTOFF_MU}}.\n== Related tags and articles==\n{{TAG|CUTOFF_MU}},\n{{TAG|CUTOFF_SIGMA}},\n{{TAG|LSCDM}},\n{{TAG|LOCPROJ}}\n\n{{sc|CUTOFF_TYPE|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-20T08:27:49Z"}, "CUTOFF_SIGMA": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CUTOFF_SIGMA\">CUTOFF_SIGMA</a> specifies the broadening <math>\\sigma</math> in eV for the cutoff function specified by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CUTOFF_SIGMA\">CUTOFF_TYPE</a>.</span>", "wikicode": "{{DISPLAYTITLE:CUTOFF_SIGMA}}\n{{TAGDEF|CUTOFF_SIGMA| [real]}}\n{{DEF|CUTOFF_SIGMA|0.1|}}\n\nDescription: {{TAG|CUTOFF_SIGMA}} specifies the broadening <math>\\sigma</math> in eV for the cutoff function specified by {{TAG|CUTOFF_TYPE}}.\n \n----\n\nCorresponds to a broadening of the cutoff function to be used in the\n[[Wannier_functions#One-shot_single_value_decomposition (SVD)| one-shot method]] to obtain Wannier functions.\nThe meaning depends on the {{TAG|CUTOFF_TYPE}} tag.\n\n== Related tags and articles==\n{{TAG|CUTOFF_TYPE}},\n{{TAG|CUTOFF_MU}},\n{{TAG|LSCDM}},\n{{TAG|LOCPROJ}}\n\n{{sc|CUTOFF_SIGMA|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-20T10:00:46Z"}, "CUTOFF_MU": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CUTOFF_MU\">CUTOFF_MU</a> specifies the cutoff energy <math>\\mu</math> in eV for the function specified by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/CUTOFF_MU\">CUTOFF_MU</a>.</span>", "wikicode": "{{DISPLAYTITLE:CUTOFF_MU}}\n{{TAGDEF|CUTOFF_MU| [real]}}\n{{DEF|CUTOFF_MU| 0.8 * Fermi level of a system with {{TAG|NUM_WANN}} orbitals occupied|}}\n\nDescription: {{TAG|CUTOFF_MU}} specifies the cutoff energy <math>\\mu</math> in eV for the function specified by {{TAG|CUTOFF_MU}}.\n \n----\n\nThe value <math>\\mu</math> of {{TAG|CUTOFF_MU}} corresponds to the cutoff energy of the cutoff function to be used to obtain Wannier functions with the\n[[Wannier_functions#One-shot_single_value_decomposition (SVD)| one-shot method]].\nThe of <math>\\mu</math> meaning depends on the {{TAG|CUTOFF_TYPE}} tag.\n\nThe default value is computed by first determining the Fermi level \nof the system if it had {{TAG|NUM_WANN}} orbitals occupied and multiplying by 0.8. This gives reasonable freedom to determine the unitary transformation <math>U_{mn\\mathbf{k}}</math> from Bloch states to Wannier functions.\n{{NB|tip|Careful tuning of this parameter is required to obtain a good Wannierization.}}\n\n== Related tags and articles==\n{{TAG|CUTOFF_TYPE}},\n{{TAG|CUTOFF_SIGMA}},\n{{TAG|LSCDM}},\n{{TAG|LOCPROJ}}\n\n{{sc|CUTOFF_MU|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Wannier functions]]", "last_revised": "2022-07-20T10:06:34Z"}, "LPHON_DISPERSION": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_DISPERSION\">LPHON_DISPERSION</a> requests the calculation of the phonon dispersion along the q-point path supplied in file <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_DISPERSION\">QPOINTS</a> (same format as <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/KPOINTS\">KPOINTS</a>).</span>", "wikicode": "{{DISPLAYTITLE:LPHON_DISPERSION}}\n{{TAGDEF|LPHON_DISPERSION|.TRUE. {{!}} .FALSE. }}\n{{DEF|LPHON_DISPERSION|.FALSE.|}}\n\nDescription: {{TAG|LPHON_DISPERSION}} requests the calculation of the phonon dispersion along the q-point path supplied in file {{TAG|QPOINTS}} (same format as {{FILE|KPOINTS}}).\n\n----\n\nAfter the computation of the force constants using finite differences ({{TAG|IBRION}}=5,6) or density-functional perturbation theory ({{TAG|IBRION}}=7,8) on a supercell it is possible to compute the phonon dispersion for the equivalent primitive cell determined by VASP by setting {{TAG|LPHON_DISPERSION}}=.TRUE.\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-07-20T09:16:37Z"}, "PHON_NWRITE": {"datatype": "integer", "options": {}, "summary": "<a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_NWRITE\">PHON_NWRITE</a>", "wikicode": "{{DISPLAYTITLE:PHON_NWRITE}}\n{{TAGDEF|PHON_NWRITE|[integer]}}\n{{DEF|PHON_NWRITE|1|}}\n\nDescription: {{TAG|PHON_NWRITE}} \ndetermines how much output is written to the {{FILE|OUTCAR}} file when computing the phonon dispersion {{TAG|LPHON_DISPERSION}}=.TRUE.\n\n----\n\nPositive numbers mean human-readable output, and negative numbers mean one-line format. The available options are:\n\n{| class=\"wikitable\"\n|-\n! PHON_NWRITE !! Description\n|-\n|  2 || For each q point, write the same as 1 and then the phonon modes with the displacement of each atom in the three cartesian directions per line.\n|-\n|  1 || For each q point, q-point coordinates are written in one line and the phonon frequencies are written one branch per line in different units.\n|-\n|  0 || No phonon output is written to OUTCAR.\n|-\n| -1 || For each q point, only a single line is written containing q-point coordinates and frequencies.\n|-\n| -2 || For each q point, q-point coordinates and frequencies are written in separate blocks and frequencies are reported in different units.\n|-\n| -3 || Like -2, but in addition, the phonon eigenvectors are written for each q point.\n|}\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-08-30T13:29:59Z"}, "LPHON_POLAR": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_POLAR\">LPHON_POLAR</a> includes dipole-dipole corrections in the computation of the phonon dispersion. For this mode, <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_POLAR\">PHON_DIELECTRIC</a> and <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_POLAR\">PHON_BORN_CHARGES</a> must also be set.</span>", "wikicode": "{{DISPLAYTITLE:LPHON_POLAR}}\n{{TAGDEF|LPHON_POLAR|.TRUE. {{!}} .FALSE. }}\n{{DEF|LPHON_POLAR|.FALSE.|}}\n\nDescription: {{TAG|LPHON_POLAR}} includes dipole-dipole corrections in the computation of the phonon dispersion. For this mode, {{TAG|PHON_DIELECTRIC}} and {{TAG|PHON_BORN_CHARGES}} must also be set.\n----\n\nIf the material is polar (i.e. has more than one atom type), a special treatment of the long-range dipole-dipole interaction is required to obtain a smooth phonon dispersion.\nThis is activated by setting {{TAG|LPHON_POLAR}}=.TRUE. and supplying the static dielectric tensor ({{TAG|PHON_DIELECTRIC}}) and the Born-effective charges ({{TAG|PHON_BORN_CHARGES}}) which can be obtained in a separate VASP calculation using the {{TAG|LEPSILON}} or {{TAG|LCALCEPS}} tag. \nThe dipole-dipole part of the interatomic force-constants is evaluated using an Ewald summation with the number of <math>\\mathbf{G}</math> vectors determined by the cutoff length ({{TAG|PHON_G_CUTOFF}}).\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | PHON_NWRITE}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_POLAR|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-07-20T10:10:14Z"}, "PHON_DIELECTRIC": {"datatype": "3x3 real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_DIELECTRIC\">PHON_DIELECTRIC</a> sets the static dielectric tensor to be used for the dipole-dipole corrections in the computation of the phonon dispersion. This is only used when <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_DIELECTRIC\">LPHON_POLAR</a>=<span class=\"tag-value\">.TRUE.</span></span>", "wikicode": "{{DISPLAYTITLE:PHON_DIELECTRIC}}\n{{TAGDEF|PHON_DIELECTRIC| [3x3 real] }}\n{{DEF|PHON_DIELECTRIC|None|}}\n\nDescription: {{TAG|PHON_DIELECTRIC}} sets the static dielectric tensor to be used for the dipole-dipole corrections in the computation of the phonon dispersion. This is only used when {{TAG|LPHON_POLAR}}=.TRUE.\n----\n\nIf the material is polar (i.e. has more than one atom type), a special treatment of the long-range dipole-dipole interaction is required to obtain a smooth phonon dispersion.\nThis is activated by setting {{TAG|LPHON_POLAR}}=.TRUE. and supplying the static dielectric tensor ({{TAG|PHON_DIELECTRIC}}) and the Born-effective charges ({{TAG|PHON_BORN_CHARGES}}) which can be obtained in a separate VASP calculation using the {{TAG|LEPSILON}} or {{TAG|LCALCEPS}} tag.\nThe dipole-dipole part of the interatomic force-constants is evaluated using an Ewald summation with the number of <math>\\mathbf{G}</math> vectors determined by the cutoff length ({{TAG|PHON_G_CUTOFF}}).\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|PHON_DIELECTRIC|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-07-20T10:11:06Z"}, "PHON_BORN_CHARGES": {"datatype": "3x3xnions real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_BORN_CHARGES\">PHON_BORN_CHARGES</a> sets the Born effective charges to be used for the dipole-dipole corrections in the computation of the phonon dispersion. This is only used when <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_BORN_CHARGES\">LPHON_POLAR</a>=<span class=\"tag-value\">.TRUE.</span></span>", "wikicode": "{{DISPLAYTITLE:PHON_BORN_CHARGES}}\n{{TAGDEF|PHON_BORN_CHARGES| [3x3xNIONS real] }}\n{{DEF|PHON_BORN_CHARGES|None|}}\n\nDescription: {{TAG|PHON_BORN_CHARGES}} sets the Born effective charges to be used for the dipole-dipole corrections in the computation of the phonon dispersion. This is only used when {{TAG|LPHON_POLAR}}=.TRUE.\n----\n\nIf the material is polar (i.e. has more than one atom type), a special treatment of the long-range dipole-dipole interaction is required to obtain a smooth phonon dispersion.\nThis is activated by setting {{TAG|LPHON_POLAR}}=.TRUE. and supplying the static dielectric tensor ({{TAG|PHON_DIELECTRIC}}) and the Born-effective charges ({{TAG|PHON_BORN_CHARGES}}) which can be obtained in a separate VASP calculation using the {{TAG|LEPSILON}} or {{TAG|LCALCEPS}} tag.\nThe dipole-dipole part of the interatomic force-constants is evaluated using an Ewald summation with the number of <math>\\mathbf{G}</math> vectors determined by the cutoff length ({{TAG|PHON_G_CUTOFF}}).\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|PHON_BORN_CHARGES|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-07-20T10:10:44Z"}, "LUSENCCL": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LUSENCCL\">LUSENCCL</a> allows deactivating the NVIDIA Collective Communications Library (NCCL) during runtime when the code was compiled with the <a href=\"https://www.vasp.at/wiki/index.php/Precompiler_options%23-DUSENCCL\">-DUSENCCL</a> option.</span>", "wikicode": "{{TAGDEF|LUSENCCL|[logical]|.TRUE.}}\n\nDescription: {{TAG|LUSENCCL}} allows deactivating the NVIDIA Collective Communications Library (NCCL) during runtime when the code was compiled with the [[Precompiler_options#-DUSENCCL|-DUSENCCL]] option.\n[[Category:INCAR tag]][[Category:Performance]][[Category:Parallelization]]", "last_revised": "2022-07-20T14:25:58Z"}, "LVDWSCS": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVDWSCS\">LVDWSCS</a> activates the {{TAG|self-consistent screening in Tkatchenko-Scheffler method}}.</span>", "wikicode": "{{TAGDEF|LVDWSCS|.TRUE. {{!}} .FALSE.|.FALSE.}}\n\nDescription: {{TAGDEF|LVDWSCS}} activates the {{TAG|self-consistent screening in Tkatchenko-Scheffler method}}.\n----\n\n== Related tags and articles ==\n{{TAG|IVDW}},\n{{TAG|Tkatchenko-Scheffler method}},\n{{TAG|Self-consistent screening in Tkatchenko-Scheffler method}}\n\n{{sc|LVDWSCS|Examples|Examples that use this tag}}\n----\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:van der Waals functionals]]", "last_revised": "2022-07-19T15:59:31Z"}, "PHON_G_CUTOFF": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_G_CUTOFF\">PHON_G_CUTOFF</a> sets the cutoff radius in reciprocal space used to determine the number of <math>\\mathbf{G}</math> vectors involved in the Ewald sum in polar phonon calculations.</span>", "wikicode": "{{DISPLAYTITLE:PHON_G_CUTOFF}}\n{{TAGDEF|PHON_G_CUTOFF| [real] }}\n{{DEF|PHON_G_CUTOFF|None|}}\n\nDescription: {{TAG|PHON_G_CUTOFF}} sets the cutoff radius in reciprocal space used to determine the number of <math>\\mathbf{G}</math> vectors involved in the Ewald sum in polar phonon calculations.\n----\n\nIf the material is polar (i.e. has more than one atom type), a special treatment of the long-range dipole-dipole interaction is required to obtain a smooth phonon dispersion.\nThis is activated by setting {{TAG|LPHON_POLAR}}=.TRUE. and supplying the static dielectric tensor ({{TAG|PHON_DIELECTRIC}}) and the Born-effective charges ({{TAG|PHON_BORN_CHARGES}}) which can be obtained in a separate VASP calculation using the {{TAG|LEPSILON}} or {{TAG|LCALCEPS}} tag. The long-range part is evaluated using an Ewald sum with the number of <math>\\mathbf{G}</math> vectors in reciprocal space being determined using a cutoff length ({{TAG|PHON_G_CUTOFF}}).\n{{NB|mind| Only available as of VASP 6.3.2.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}}\n\n{{sc|PHON_G_CUTOFF|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-08-10T14:49:08Z"}, "ML_LBASIS_DISCARD": {"datatype": "boolean", "options": {}, "summary": "Controls whether calculation is continued or stopped after the maximum number of local reference configurations <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_MB\">ML_MB</a> for a given species is reached.", "wikicode": "{{DISPLAYTITLE:ML_LBASIS_DISCARD}}\n{{TAGDEF|ML_LBASIS_DISCARD|[logical]|.TRUE.}}\n\nDescription: Controls whether calculation is continued or stopped after the maximum number of local reference configurations {{TAG|ML_MB}} for a given species is reached.\n----\nFor {{TAG|ML_LBASIS_DISCARD}}=.FALSE. (default), whenever the number of local reference configurations for a given species would exceed the maximum number of allowed configurations {{TAG|ML_MB}}, the code will terminate (soft exit) and request the user to continue with and increased number for {{TAG|ML_MB}}.\n\nFor {{TAG|ML_LBASIS_DISCARD}}=.TRUE. the code will not stop, whenever the number of local reference configurations for a given species would exceed the maximum, but old configurations are replaced by new ones.\n\nIn multi-component systems it can happen that, although {{TAG|ML_MB}} is set to the maximum that is computationally affordable, one species exceeds {{TAG|ML_MB}} while the other species are not sufficiently sampled and still far below {{TAG|ML_MB}}. For that {{TAG|ML_LBASIS_DISCARD}}=.TRUE. should be set. In that case the fast sampled species would retain the same number of local reference configurations and the new local reference configurations would replace old ones. At the same time new local reference configurations could be added for the slowly-sampled species further improving their accuracy for fitting.\n\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MB}}, {{TAG|ML_MCONF}}, {{TAG|ML_EPS_LOW}}\n\n{{sc|ML_LBASIS_DISCARD|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-25T07:51:06Z"}, "PHON_NEDOS": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_NEDOS\">PHON_NEDOS</a> sets the number of frequency points to use in the computation of the phonon density of states.</span>", "wikicode": "{{DISPLAYTITLE:PHON_NEDOS}}\n{{TAGDEF|PHON_NEDOS| [integer] }}\n{{DEF|PHON_NEDOS|2000|}}\n\nDescription: {{TAG|PHON_NEDOS}} sets the number of frequency points to use in the computation of the phonon density of states.\n\n----\n\nThe density of states is computed between \n<math>[\\omega_{\\text{min}}-5\\sigma,\\omega_{\\text{max}}+5\\sigma]</math> with \n<math>\\omega_{\\text{min}}</math> and \n<math>\\omega_{\\text{max}}</math> the lowest and highest phonon frequency and \n<math>\\sigma</math> the broadening {{TAG|PHON_SIGMA}}.\n{{NB|mind| Only available as of VASP 6.4.0.}}\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-08-11T10:00:07Z"}, "PHON_SIGMA": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/PHON_SIGMA\">PHON_SIGMA</a> sets the width of the gaussian function in units of eV to use in the computation of the phonon density of states.</span>", "wikicode": "{{DISPLAYTITLE:PHON_SIGMA}}\n{{TAGDEF|PHON_SIGMA| [real] }}\n{{DEF|PHON_SIGMA|0.0005 eV|}}\n\nDescription: {{TAG|PHON_SIGMA}} sets the width of the gaussian function in units of eV to use in the computation of the phonon density of states.\n\n----\n\nThe density of states is computed between \n<math>[\\omega_{\\text{min}}-5\\sigma,\\omega_{\\text{max}}+5\\sigma]</math> with \n<math>\\omega_{\\text{min}}</math> and \n<math>\\omega_{\\text{max}}</math> the lowest and highest phonon frequency and \n<math>\\sigma</math> the broadening {{TAG|PHON_SIGMA}}.\nThe number of energy points in this interval is set by {{TAG|PHON_NEDOS}}.\n{{NB|mind| Only available as of VASP 6.4.0.}}\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-08-11T11:46:43Z"}, "PHON_DOS": {"datatype": "integer", "options": {"0": null, "1": null, "2": null}, "summary": "Select the approach to use when computing the phonon density-of-states (DOS).", "wikicode": "{{DISPLAYTITLE:PHON_DOS}}\n{{TAGDEF|PHON_DOS| 0 {{!}} 1 {{!}} 2 }}\n{{DEF|PHON_DOS|0|}}\n\nDescription: Select the approach to use when computing the phonon density-of-states (DOS).\n\n----\n\nThe possible values are\n\n{| class=\"wikitable\"\n|-\n! PHON_DOS !! Function\n|-\n| 0 || The phonon DOS computation is not performed.\n|-\n| 1 || A gaussian broadening function with a width specified by {{TAG|PHON_SIGMA}} is used.\n|-\n| 2 || The tetrahedron method is used.\n|}\n\nTo get a representative density of states the {{FILE|QPOINTS}} file should specify a regular mesh.\nWhen line mode in the {{FILE|QPOINTS}} file and gaussian smearing (PHON_DOS=1) is used, the phonon density of states will still be computed but the results are not reliable.\n{{NB|mind| Only available as of VASP 6.4.0.}}\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}},\n{{TAG | PHON_SIGMA}},\n{{TAG | PHON_NEDOS}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-08-11T12:31:40Z"}, "LPHON_READ_FORCE_CONSTANTS": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LPHON_READ_FORCE_CONSTANTS\">LPHON_READ_FORCE_CONSTANTS</a> read the force constants from a vaspin.h5 file containing the force constants computed with a previous VASP run.</span>", "wikicode": "{{DISPLAYTITLE:LPHON_READ_FORCE_CONSTANTS}}\n{{TAGDEF|LPHON_READ_FORCE_CONSTANTS|.TRUE. {{!}} .FALSE. }}\n{{DEF|LPHON_READ_FORCE_CONSTANTS|.FALSE.|}}\n\nDescription: {{TAG|LPHON_READ_FORCE_CONSTANTS}} read the force constants from a vaspin.h5 file containing the force constants computed with a previous VASP run.\n\n----\n\nAfter the computation of the force constants using finite-differences ({{TAG|IBRION}}=5,6) or density-functional perturbation theory ({{TAG|IBRION}}=7,8) on a supercell the force constants are written to the vaspout.h5 file.\nTo plot the phonon dispersion on a different path the user can modify the {{FILE|QPOINTS}} file and read the force constants computed previously (i.e. without performing the finite-differences computations on supercells again).\nTo do so copy vaspout.h5 to vaspin.h5 and set {{TAG|LPHON_READ_FORCE_CONSTANTS}}=.TRUE. in the {{FILE|INCAR}} file.\nNote that when this is set only the phonon dispersion is performed and then VASP quits without running any additional calculation specified in the {{TAG|INCAR}} file.\n{{NB|mind| Only available as of VASP 6.4.0.}}\n\n==Related tags and articles==\n{{FILE| QPOINTS}},\n{{TAG | LPHON_DISPERSION}},\n{{TAG | PHON_NWRITE}},\n{{TAG | LPHON_POLAR}},\n{{TAG | PHON_DIELECTRIC}},\n{{TAG | PHON_BORN_CHARGES}},\n{{TAG | PHON_G_CUTOFF}}\n\n{{sc|LPHON_DISPERSION|Examples|Examples that use this tag}}\n\n[[Category:INCAR tag]][[Category:Phonons]]", "last_revised": "2022-09-01T09:49:45Z"}, "ML_LFAST": {"datatype": "boolean", "options": {}, "summary": "This tag switches on the descriptors for refitting in the fast execution mode within machine learning force fields. This tag is usually switched on by <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_MODE\">ML_MODE</a> = <i>REFIT</i> and doesn't need to be set explicitely.", "wikicode": "{{DISPLAYTITLE:ML_LFAST}}\n{{TAGDEF|ML_LFAST|[logical]}}\n{{DEF|ML_LFAST|.TRUE.|for {{TAG|ML_MODE}} {{=}} REFIT|.FALSE.|else}}\n\nDescription: This tag switches on the descriptors for refitting in the fast execution mode within machine learning force fields. This tag is usually switched on by {{TAG|ML_MODE}} = ''REFIT'' and doesn't need to be set explicitely.\n{{NB|mind|This tag is only available as of VASP.6.4.0}}\n----\nThis tag switches on the descriptors for the fast execution mode. To use the fast execution mode the force field first has to be refit with the fast descriptors. This is done by setting {{TAG|ML_MODE}} = ''REFIT'', which will automatically set {{TAG|ML_LFAST}} = ''.TRUE.''. As usual, the resulting {{TAG|ML_FFN}} has to be copied to {{TAG|ML_FF}} and the fast code will be automatically run in production mode runs by setting {{TAG|ML_MODE}} = ''RUN''.\n\nThe speedup of the fast method compared to the regular method is increasing with increasing number of local reference configurations.\n\nIt should be noted that in the fast version no Bayesian error estimation is available. \n\nSince the calculation time of the fast version is of the same order of magnitude as the timing for the output of the molecular-dynamics results, we advise decreasing the output frequency for molecular dynamics by the tag {{TAG|ML_OUTBLOCK}}. Additionally, the calculation and output of the pair-correlation function can be suppressed by {{TAG|ML_OUTPUT_MODE}}=0 as default.\n\nIf {{TAG|ML_LFAST}} = ''.TRUE.'' is explicitely used without the {{TAG|ML_MODE}} tag then it can only be used with {{TAG|ML_ISTART}}=4 and {{TAG|ML_IALGO_LINREG}} > 1.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_ISTART}}, {{TAG|ML_IERR}}, {{TAG|ML_OUTBLOCK}}, {{TAG|ML_OUTPUT_MODE}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-25T12:10:24Z"}, "ML_IERR": {"datatype": null, "options": {}, "summary": "Calculation and output frequency of Bayesian error estimate.", "wikicode": "{{DISPLAYTITLE:ML_IERR}}\n{{DEF|ML_IERR|0|if {{TAG|ML_MODE}}{{=}}RUN|1|otherwise}}\n\nDescription: Calculation and output frequency of Bayesian error estimate.\n{{NB|mind|This tag is only available as of VASP.6.4.0.}}\n----\n\nThis tag sets the distance in units of molecular-dynamics steps at which the energies, forces, stresses, etc. are written to the corresponding files ({{TAG|OUTCAR}}, {{TAG|OSZICAR}}, {{TAG|ML_LOGFILE}}, etc.). If learning is activated ({{TAG|ML_MODE}}=''TRAIN'', ''SELECT'', ''REFIT'' or ''REFITBAYESIAN'') the only allowed option is that Bayesian error estimation is \"on\" at every molecular-dynamics step ({{TAG|ML_IERR}}=1 is required).\n\nThe interval can only be freely chosen via {{TAG|ML_IERR}} for {{TAG|ML_MODE}}=''RUN'', if an {{TAG|ML_FF}} file, that was previously trained using {{TAG|ML_MODE}}=''REFITBAYESIAN'', is used. The Bayesian error estimates are written to the logfile with the entry ''BEEF''. For {{TAG|ML_IERR}}=0 the Bayesian error is never calculated (and also no corresponding log file line is written out. This is the default since for {{TAG|ML_MODE}}=''RUN'' the Bayesian error estimation takes up a significant amount of the total calculation time.\n{{NB|warning|{{TAG|ML_IERR}}>0 can never be used with the fast execution mode (force field refitted with {{TAG|ML_MODE}}{{=}}''REFIT'' or {{TAG|ML_LFAST}}{{=}}''.TRUE.'').}}\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_LFAST}}, {{TAG|ML_OUTBLOCK}}, {{TAG|ML_OUTPUT_MODE}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T14:25:36Z"}, "ML_OUTBLOCK": {"datatype": "integer", "options": {}, "summary": "Output distance in number of steps of the molecular-dynamics results for <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ML_MODE\">ML_MODE</a>=<i>RUN</i> within the machine learning force fields.", "wikicode": "{{DISPLAYTITLE:ML_OUTBLOCK}}\n{{TAGDEF|ML_OUTBLOCK|[integer]|1}}\n\nDescription: Output distance in number of steps of the molecular-dynamics results for {{TAG|ML_MODE}}=''RUN'' within the machine learning force fields.\n{{NB|mind|This tag is only available as of VASP.6.4.0.}}\n----\nBy default the code writes all results at every molecular-dynamics step ({{TAG|ML_OUTBLOCK}}=1).\n{{TAG|ML_OUTBLOCK}}>1 becomes only relevant for the fast force fields (refitting with {{TAG|ML_MODE}}=''REFIT''), because then the calculation time of the force field is of the same order as the time required for the output to all necessary files. \n\nTo additionally increase the efficiency, calculation and output of pair-correlation functions can be completely switched off by setting {{TAG|ML_OUTPUT_MODE}}=0.\n\nThis tag will also possibly change the default for {{TAG|NBLOCK}} since it is calculated as the maximum of {{TAG|ML_OUTBLOCK}} and {{TAG|NBLOCK}}.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_LFAST}}, {{TAG|ML_IERR}}, {{TAG|ML_OUTPUT_MODE}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T14:25:45Z"}, "ML_OUTPUT_MODE": {"datatype": "integer", "options": {}, "summary": "This tag decides the output verbosity of the molecular-dynamics calculation using machine learning.", "wikicode": "{{DISPLAYTITLE:ML_OUTPUT_MODE}}\n{{TAGDEF|ML_OUTPUT_MODE|[integer]|1}}\n\nDescription: This tag decides the output verbosity of the molecular-dynamics calculation using machine learning.\n{{NB|mind|This tag is only available as of VASP.6.4.0.}}\n----\nThe following options exist for this tag:\n*{{TAG|ML_OUTPUT_MODE}}=1: Everything as in usual ab-initio molecular dynamics calculations is written to the files ([[OUTCAR]], [[vasprun.xml]], [[vaspout.h5]], etc.).\n*{{TAG|ML_OUTPUT_MODE}}=0: Same as above, except the pair-correlation function, is never calculated and written out.\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_MODE}}, {{TAG|ML_LFAST}}, {{TAG|ML_IERR}}, {{TAG|ML_OUTBLOCK}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-31T14:25:55Z"}, "NBANDSEXACT": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDSEXACT\">NBANDSEXACT</a> specifies the number of bands used in the all-in-one mode of <a href=\"https://www.vasp.at/wiki/index.php/Many-body_perturbation_theory\">many-body perturbation theory</a> calculations.  </span>", "wikicode": "{{TAGDEF|NBANDSEXACT|[integer]}}\n{{DEF|NBANDSEXACT|-1|for {{TAG|LALL_IN_ONE}}{{=}}.FALSE.|maximum number of plane waves|for {{TAG|LALL_IN_ONE}}{{=}}.TRUE.}}\n\nDescription: {{TAG|NBANDSEXACT}} specifies the number of bands used in the all-in-one mode of [[Many-body_perturbation_theory|many-body perturbation theory]] calculations.  \n{{NB|mind|available as of VASP.6.4.0}}\n----\nIn the all-in-one mode, VASP automatically performs the necessary DFT steps prior to the many-body perturbation theory (MBPT) calculation, i.e. a DFT calculation with {{TAG|NBANDS}}, followed by an exact diagonalization of the Kohn-Sham Hamiltonian with {{TAG|NBANDSEXACT}} bands. \nNote, {{TAG|NBANDSEXACT}} is set by default to the maximum number of plane-waves given by the chosen energy cutoff for the orbitals {{TAG|ENCUT}}. \nIn the all-in-one mode, the actual GW/RPA calculation is also performed with {{TAG|NBANDSEXACT}} bands. \nIf {{TAG|NBANDS_WAVE}} is not set, all orbitals are written to {{FILE|WAVECAR}}, which potentially becomes huge in file size.\n{{NB|tip|The {{TAG|NBANDS_WAVE}} tag can be used to limit the number of bands written to {{FILE|WAVECAR}} if {{TAG|LALL_IN_ONE}}{{=}}.TRUE.|:}}\n\nThe all-in-one mode is automatically enabled for {{TAG|ALGO}}=[EV]GW[0]R, RPA[R],ACFDT[R] if {{TAG|NBANDS}} is not set.\n== Related tags and articles ==\n{{TAG|ALGO}}, \n{{TAG|NBANDS}}\n{{TAG|NBANDS_WAVE}}\n{{TAG|LALL_IN_ONE}}\n{{TAG|IALL_IN_ONE}}\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]] [[Category:GW]][[Category:ACFDT]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-11-23T14:42:53Z"}, "LALL_IN_ONE": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LALL_IN_ONE\">LALL_IN_ONE</a>=<span><span class=\"tag-value\">.TRUE.</span> enables the all-in-one mode for </span><a href=\"https://www.vasp.at/wiki/index.php/Many-body_perturbation_theory\">many-body perturbation theory</a> calculations,</span>", "wikicode": "{{TAGDEF|LALL_IN_ONE|.FALSE. {{!}} .TRUE.}}\n{{DEF|LALL_IN_ONE\n|.FALSE.|for {{TAG|NBANDS}}>0\n|.TRUE.|for {{TAG|NBANDS}}<0\n}}\n\nDescription: {{TAG|LALL_IN_ONE}}=.TRUE. enables the all-in-one mode for [[Many-body_perturbation_theory|many-body perturbation theory]] calculations,\ni.e.,  {{TAG|ALGO}}=[[ACFDT/RPA_calculations|ACFDT[R]]], [[Practical_guide_to_GW_calculations|[EV]GW0[R]]], [[Practical_guide_to_GW_calculations#Fully_self-consistent_GW_caluclations:_GWR|GWR]]. \n{{NB|mind|available as of VASP.6.4.0}}\n----\nIn the all-in-one mode, VASP automatically performs the necessary DFT steps prior to the many-body perturbation theory (MBPT) calculation, i.e. a DFT calculation with {{TAG|NBANDS}}, followed by an exact diagonalization of the Kohn-Sham Hamiltonian with {{TAG|NBANDSEXACT}} bands. \nNote, {{TAG|NBANDSEXACT}} is set by default to the maximum number of plane-waves given by the chosen energy cutoff for the orbitals {{TAG|ENCUT}}. \nIn the all-in-one mode, the actual GW/RPA calculation is also performed with {{TAG|NBANDSEXACT}} bands. \nIf {{TAG|NBANDS_WAVE}} is not set, all orbitals are written to {{FILE|WAVECAR}}, which potentially becomes huge in file size.\n{{NB|tip|The {{TAG|NBANDS_WAVE}} tag can be used to limit the number of bands written to {{FILE|WAVECAR}} if {{TAG|LALL_IN_ONE}}{{=}}.TRUE.|:}}\n\nThe all-in-one mode is automatically enabled for {{TAG|ALGO}}=[EV]GW[0]R, RPA[R],ACFDT[R] if {{TAG|NBANDS}} is not set.\n== Related tags and articles ==\n{{TAG|ALGO}}, \n{{TAG|NBANDS}}\n{{TAG|NBANDSEXACT}}\n{{TAG|NBANDS_WAVE}}\n{{TAG|IALL_IN_ONE}}\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]] [[Category:GW]][[Category:ACFDT]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-11-23T14:44:03Z"}, "IALL_IN_ONE": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IALL_IN_ONE\">IALL_IN_ONE</a>><span><span class=\"tag-value\">0</span> enables the all-in-one mode for </span><a href=\"https://www.vasp.at/wiki/index.php/Many-body_perturbation_theory\">many-body perturbation theory</a> calculations,</span>", "wikicode": "{{TAGDEF|IALL_IN_ONE|[integer]}}\n{{DEF|IALL_IN_ONE|1|for {{TAG|LALL_IN_ONE}}{{=}}.TRUE. or {{TAG|NBANDS}}<0|-1|for {{TAG|LALL_IN_ONE}}{{=}}.FALSE.}}\n\nDescription: {{TAG|IALL_IN_ONE}}>0 enables the all-in-one mode for [[Many-body_perturbation_theory|many-body perturbation theory]] calculations,\ni.e.,  {{TAG|ALGO}}=[[ACFDT/RPA_calculations|ACFDT[R]]], [[Practical_guide_to_GW_calculations|[EV]GW0[R]]], [[Practical_guide_to_GW_calculations#Fully_self-consistent_GW_caluclations:_GWR|GWR]]. \n{{NB|mind|available as of VASP.6.4.0}}\n----\nIn the all-in-one mode, VASP automatically performs the necessary DFT steps prior to the many-body perturbation theory (MBPT) calculation, i.e. a DFT calculation with {{TAG|NBANDS}}, followed by an exact diagonalization of the Kohn-Sham Hamiltonian with {{TAG|NBANDSEXACT}} bands. \nNote, {{TAG|NBANDSEXACT}} is set by default to the maximum number of plane-waves given by the chosen energy cutoff for the orbitals {{TAG|ENCUT}}. \nIn the all-in-one mode, the actual GW/RPA calculation is also performed with {{TAG|NBANDSEXACT}} bands. \nIf {{TAG|NBANDS_WAVE}} is not set, all orbitals are written to {{FILE|WAVECAR}}, which potentially becomes huge in file size.\n{{NB|tip|The {{TAG|NBANDS_WAVE}} tag can be used to limit the number of bands written to {{FILE|WAVECAR}} if {{TAG|IALL_IN_ONE}}>0.|:}}\n\nThe all-in-one mode is automatically enabled for {{TAG|ALGO}}=[EV]GW[0]R, RPA[R],ACFDT[R] if {{TAG|NBANDS}} is not set.\n== Related tags and articles ==\n{{TAG|ALGO}}, \n{{TAG|NBANDS}}\n{{TAG|NBANDSEXACT}}\n{{TAG|NBANDS_WAVE}}\n{{TAG|LALL_IN_ONE}}\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]] [[Category:GW]][[Category:ACFDT]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-11-23T14:44:55Z"}, "NBANDS_WAVE": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NBANDS_WAVE\">NBANDS_WAVE</a> specifies the number of bands written to <a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/WAVECAR\">WAVECAR</a> in the all-in-one mode of <a href=\"https://www.vasp.at/wiki/index.php/Many-body_perturbation_theory\">many-body perturbation theory</a> calculations,</span>", "wikicode": "{{TAGDEF|NBANDS_WAVE|[integer]}}\n{{DEF|NBANDS_WAVE\n|{{TAG|NBANDSGW}}   |for {{TAG|LALL_IN_ONE}}{{=}}.TRUE.  and {{TAG|NBANDS}}<1\n|{{TAG|NBANDS}}     |for {{TAG|LALL_IN_ONE}}{{=}}.TRUE.  and {{TAG|NBANDS}}>0\n|{{TAG|NBANDSEXACT}}|for {{TAG|LALL_IN_ONE}}{{=}}.FALSE. and {{TAG|NBANDS}}<1\n|{{TAG|NBANDS}}     |for {{TAG|LALL_IN_ONE}}{{=}}.FALSE. and {{TAG|NBANDS}}>0\n}}\n\nDescription: {{TAG|NBANDS_WAVE}} specifies the number of bands written to {{FILE|WAVECAR}} in the all-in-one mode of [[Many-body_perturbation_theory|many-body perturbation theory]] calculations,\ni.e.,  {{TAG|ALGO}}=[[ACFDT/RPA_calculations|ACFDT[R]]], [[Practical_guide_to_GW_calculations|[EV]GW0[R]]], [[Practical_guide_to_GW_calculations#Fully_self-consistent_GW_caluclations:_GWR|GWR]]. \n{{NB|mind|available as of VASP.6.4.0}}\n----\nIn the all-in-one mode, VASP automatically performs the necessary DFT steps prior to the many-body perturbation theory (MBPT) calculation, i.e. a DFT calculation with {{TAG|NBANDS}}, followed by an exact diagonalization of the Kohn-Sham Hamiltonian with {{TAG|NBANDSEXACT}} bands. \nNote, {{TAG|NBANDSEXACT}} is set by default to the maximum number of plane-waves given by the chosen energy cutoff for the orbitals {{TAG|ENCUT}}. \nIn the all-in-one mode, the actual GW/RPA calculation is also performed with {{TAG|NBANDSEXACT}} bands. \nIf {{TAG|NBANDS_WAVE}} is not set, all orbitals are written to {{FILE|WAVECAR}}, which potentially becomes huge in file size.\n{{NB|tip|The {{TAG|NBANDS_WAVE}} tag can be used to limit the number of bands written to {{FILE|WAVECAR}} if {{TAG|LALL_IN_ONE}}{{=}}.TRUE.|:}}\n\nThe all-in-one mode is automatically enabled for {{TAG|ALGO}}=[EV]GW[0]R, RPA[R],ACFDT[R] if {{TAG|NBANDS}} is not set.\n== Related tags and articles ==\n{{TAG|ALGO}}, \n{{TAG|NBANDS}}\n{{TAG|NBANDSEXACT}}\n{{TAG|IALL_IN_ONE}}\n{{TAG|LALL_IN_ONE}}\n----\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]] [[Category:GW]][[Category:ACFDT]][[Category:VASP6]][[Category:Low-scaling GW and RPA]]", "last_revised": "2022-11-23T14:45:23Z"}, "NOMEGA_DUMP": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/NOMEGA_DUMP\">NOMEGA_DUMP</a> selects the imaginary frequency point of screened potential in <a href=\"https://www.vasp.at/wiki/index.php/Practical_guide_to_GW_calculations%23Low_scaling_GW_algorithms\">low-scaling GW calculations</a> that is written to file. </span>", "wikicode": "{{TAGDEF|NOMEGA_DUMP|[integer]}}\n{{DEF|NOMEGA_DUMP|-1|}}\n{{NB| warning | Available as of version 6.3.2.}}\nDescription: {{TAG|NOMEGA_DUMP}} selects the imaginary frequency point of screened potential in [[Practical_guide_to_GW_calculations#Low_scaling_GW_algorithms|low-scaling GW calculations]] that is written to file. \n{{NB| mind | This tag can be used to obtain {{FILE|WFULLxxxx.tmp}} for [[Bethe-Salpeter-equations_calculations|BSE calculations]].}}\n\n----\n{{TAG|NOMEGA_DUMP}} selects the imaginary frequency point of the screened Coulomb kernel that is written to {{FILE|WFULLxxxx.tmp}} in [[Practical_guide_to_GW_calculations#Low_scaling_GW_algorithms|low-scaling GW calculations]]. \nIf set to 0, {{FILE|WFULLxxxx.tmp}} contains the screened Coulomb interaction W at <math>\\omega=0</math>.\nFor positive values, these files contain the screened Coulomb interaction at the corresponding imaginary frequency point. \nFor negative values, {{FILE|WFULLxxxx.tmp}} is not written.\n\n== Related tags and articles==\n{{TAG|ALGO}},\n{{TAG|NOMEGA}}\n\n{{sc|NOMEGA_DUMP|Examples|Examples that use this tag}}\n\n== References ==\n<references/>\n----\n[[The_VASP_Manual|Contents]]\n[[Category:INCAR tag]][[Category:Many-body perturbation theory]][[Category:GW]][[Category:Low-scaling GW and RPA]][[Category:VASP6]]\n[[Category:Bethe-Salpeter equations]]", "last_revised": "2022-11-23T14:47:30Z"}, "ML_LERR": {"datatype": "boolean", "options": {}, "summary": "Decides whether the Bayesian error estimates are calculated and written out or not.", "wikicode": "{{DISPLAYTITLE:ML_LERR}}\n{{TAGDEF|ML_LERR|[logical]|.TRUE.}}\n{{NB|warning|This tag is deprecated and is replaced by {{TAG|ML_IERR}}.}}\n\nDescription: Decides whether the Bayesian error estimates are calculated and written out or not.\n----\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_IERR}}, {{TAG|ML_ISTART}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-03-29T08:19:17Z"}, "ML_MODE": {"datatype": "string", "options": {"train": null, "select": null, "refit": null, "refitbayesian": null, "run": null, "none": null}, "summary": "String-based tag selecting operation mode for machine learning force fields.", "wikicode": "{{DISPLAYTITLE:ML_MODE}}\n{{TAGDEF|ML_MODE|train {{!}} select {{!}} refit {{!}} refitbayesian {{!}} run {{!}} none | none}}\n\nDescription: String-based tag selecting operation mode for machine learning force fields.\n{{NB|mind|This tag is only available as of VASP.6.4.0.}}\n----\nThis tag acts as a \"super tag\" and selects the operation mode by selecting the defaults for all other tags. Every tag that is affected by this \"super tag\" can be overwritten by the user by simply specifying the value for that tag.\nThe following options are available for this tag:\n\n*{{TAG|ML_MODE}} = train : On-the-fly training.\n:Force predictions from the machine learning force field are used to drive the molecular dynamics (MD) simulation. However, if the error estimation performed in each time step indicates a high force error an ab initio calculation is performed instead and the collected energy, forces, and stress are used to improve the machine learning force field.\n\n:There are two possible cases depending on, whether an {{TAG|ML_AB}} is present in the calculation folder or not:\n\n**No {{TAG|ML_AB}} file: On-the-fly training, starting from scratch.\n::Sets: {{TAG|ML_ISTART}} = 0\n::Note that at the beginning of the MD run, when there is no force field available or it is still poorly trained, ''ab initio'' calculations will happen frequently.\n\n**{{TAG|ML_AB}} file present: Restart on-the-fly training.\n::Sets: {{TAG|ML_ISTART}} = 1\n::Before the MD run starts the {{FILE|ML_AB}} file (a copy of the {{FILE|ML_ABN}} from a previous training run!) is read and the ''ab initio'' data (energies, forces, and stresses) and local reference configurations it contains are used to generate an initial force field. Subsequently, the on-the-fly training MD is started.\n\n::'''N.B.I''': None of the structures in the {{FILE|ML_AB}} file need to match he {{FILE|POSCAR}} file for the current MD training run in terms of the simulation box, elements, or number of atoms. However, if the same elements appear the initial force field is used for predictions in the current MD run.\n::'''N.B.II''': The training data contained in the {{FILE|ML_AB}} file is included in the final machine learning force field, ''i.e.'' the {{FILE|ML_FFN}} file will define a force field applicable to both the structures on the {{FILE|ML_AB}} file as well as to the current MD simulation. This means that by restarting repeatedly with {{TAG|ML_MODE}}=train, and copying the {{FILE|ML_ABN}} file from the previous run to {{FILE|ML_AB}}(!), it is possible to iteratively extend the applicability of the a machine learning force field, ''e.g.'' by exploring different temperature ranges or element compositions. \n\n*{{TAG|ML_MODE}} = select : Train a force field by re-selection of local reference configurations from an existing {{TAG|ML_AB}} file.\n\n:Sets: {{TAG|ML_ISTART}} = 3, {{TAG|NSW}} = 1, and {{TAG|ML_CDOUB}} = 4\n\n:A new machine learning force field is generated from the ''ab initio'' data provided in the {{FILE|ML_AB}} file. The structures are read and processed one by one as if harvested in an MD simulation. In other words, the same steps are performed as in on-the-fly training but the source of the data are not actual ''ab initio'' calculations in an MD run but the series of structures available in the {{FILE|ML_AB}} file.\n\n**The list of local reference configurations on the {{FILE|ML_AB}} file will be ignored. Instead a new collection of local reference configurations is determined and written to the resulting {{FILE|ML_ABN}} file.\n\n**A new iteration through the training structures can lead to a frequent update of the force field. This is quite time-consuming. Increasing {{TAG|ML_CDOUB}} from 2 to 4 for this mode will result in a much less frequent update of the force field. This leads to much more efficient calculations while practically not changing the results.\n\n**The {{FILE|ML_AB}} file may contain values for <tt>CTIFOR</tt> for each training structure. These are the thresholds used to sample that structure from the previous training. The thresholds found on the {{FILE|ML_AB}} will be re-used unless a threshold is explicitly specified in the {{TAG|INCAR}} file, by means of the {{TAG|ML_CTIFOR}} tag. In the latter case the thresholds from the {{TAG|ML_AB}} file are ignored. In case the {{FILE|ML_AB}} contains '''no''' <tt>CTIFOR</tt> information and '''no''' threshold is specified in the {{FILE|INCAR}} file, the default value for {{TAG|ML_CTIFOR}} is used.\n{{NB|tip|If calculations for {{TAG|ML_MODE}} {{=}} SELECT are too time-consuming, it is useful to increase {{TAG|ML_MCONF_NEW}} to values around 10-16. Together with {{TAG|ML_CDOUB}} {{=}} 4, this often accelerates the calculations by a factor of 2-4.|:}}\n{{NB|mind|This operation mode needs to be used to generate {{VASP}} machine learning force fields from pre-computed or external ab initio data sets.|:}}\n\n*{{TAG|ML_MODE}} = refit : Construct a force field from an existing {{TAG|ML_AB}} file, suited for \"fast\" evaluation ({{TAG|ML_LFAST}}<tt>=.TRUE.</tt>).\n\n:Sets: {{TAG|ML_ISTART}} = 4, {{TAG|ML_LFAST}} = .TRUE., {{TAG|NSW}} = 1, {{TAG|ML_IALGO_LINREG}} = 4, {{TAG|ML_SIGW0}} = 1E-7, {{TAG|ML_SIGV0}} = 1, and {{TAG|ML_EPS_LOW}} = 1E-11.\n\n:Similar to {{TAG|ML_MODE}} = SELECT, refitting is done based on an existing {{TAG|ML_AB}} file, but the number of local reference configurations for each species is taken from the {{TAG|ML_AB}} file. Sparsification is performed on the local reference configurations, so the resulting {{TAG|ML_ABN}} file will contain the same number or fewer local reference configurations than the {{TAG|ML_AB}} file.\n\n:By default the resulting force field is geared towards \"fast\" evaluation to speed up production runs ({{TAG|ML_LFAST}} = .TRUE.). This comes at the cost of not being able to evaluate Bayesian error estimates. \n{{NB|warning|We strongly advise to use {{TAG|ML_MODE}} {{=}} refit if no error estimates are required during production runs.|:}}\n\n*{{TAG|ML_MODE}} = refitbayesian (deprecated): Same as {{TAG|ML_MODE}} = refit, but Bayesian regression is employed.\n\n:Sets: {{TAG|ML_ISTART}} = 4, {{TAG|NSW}} = 1, {{TAG|ML_IALGO_LINREG}} = 1, and {{TAG|ML_LFAST}}=.FALSE.\n\n:This results in lower accuracy and much slower force fields than using {{TAG|ML_MODE}} = refit and should be used with caution. On the other hand, this mode allows the generation of {{TAG|ML_FFN}} files that can calculate Bayesian error estimates.\n\n*{{TAG|ML_MODE}} = run : Force-field evaluation only.\n\n:Sets: {{TAG|ML_ISTART}}=2\n\n:A previously trained machine learning force field is read from the {{FILE|ML_FF}} file, and the MD simulation is driven with predictions from the force field only, '''no''' ''ab initio'' calculations are performed and '''no''' learning is executed. This setting is typically used when the machine learning force field is considered mature and ready for production runs.\n:Optionally if the force field was refitted using {{TAG|ML_MODE}} = refitbayesian, the Bayesian error estimate of the energies, forces, and stress can be computed and logged in the {{FILE|ML_LOGFILE}} by setting the output frequency of the Bayesian errors by means of the {{TAG|ML_IERR}} tag. The default is {{TAG|ML_IERR}}=0.\n\n*{{TAG|ML_MODE}} = none (default): The tag is ignored.\n\n{{NB|warning|If any option other than the above is chosen or any of them is misspelled (be careful to write everything in upper case or lower case letters) the code will exit with an error.}}\n\n{{NB|tip|The user may overwrite the default by specifying any of the machine learning tags in the INCAR file.}}\n\n== Related tags and articles ==\n{{TAG|ML_LMLFF}}, {{TAG|ML_ISTART}}, {{TAG|ML_LFAST}}, {{TAG|ML_IERR}}, {{TAG|ML_OUTBLOCK}}, {{TAG|ML_OUTPUT_MODE}}, {{TAG|ML_IALGO_LINREG}}, {{TAG|ML_MCONF_NEW}}, {{TAG|ML_CDOUB}}, {{TAG|ML_CTIFOR}}, {{TAG|ML_IERR}}\n----\n\n[[Category:INCAR tag]][[Category:Machine-learned force fields]]", "last_revised": "2023-04-17T12:44:12Z"}, "IVDW_NL": {"datatype": "integer", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/IVDW_NL\">IVDW_NL</a> allows to select the kernel of the nonlocal van der Waals part of a functional (available as of VASP.6.4.0).</span>", "wikicode": "{{DISPLAYTITLE:IVDW_NL}}\n{{TAGDEF|IVDW_NL|[integer]}}\n{{DEF|IVDW_NL|1 | for a {{TAG|GGA}} | 2 | for a {{TAG|METAGGA}}}}\n\nDescription: {{TAG|IVDW_NL}} allows to select the kernel of the nonlocal van der Waals part of a functional (available as of VASP.6.4.0).\n----\n\n{{TAG|IVDW_NL}}=1 corresponds to the kernel of Dion ''et al.''{{cite|dion:prl:2004}} and {{TAG|IVDW_NL}}=2 to the kernel rVV10{{cite|sabatini:prb:2013}}. Note that the kernel of Dion ''et al.'' contains one adjustable parameter ({{TAG|ZAB_VDW}}), while the rVV10 kernel contains two such parameters ({{TAG|BPARAM}} and {{TAG|CPARAM}}).\n \n== Related tags and articles ==\n{{TAG|GGA}}, {{TAG|METAGGA}}, {{TAG|LUSE_VDW}}, {{TAG|ZAB_VDW}}, {{TAG|BPARAM}}, {{TAG|CPARAM}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n{{sc|IVDW_NL|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2023-02-16T12:28:24Z"}, "LSPIN_VDW": {"datatype": "boolean", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LSPIN_VDW\">LSPIN_VDW</a>=<span><span class=\"tag-value\">.TRUE.</span> switches on the use of the spin-polarized formulation for the nonlocal part of a van der Waals functional (available as of VASP.6.4.0).</span></span>", "wikicode": "{{DISPLAYTITLE:LSPIN_VDW}}\n{{TAGDEF|LSPIN_VDW|[logical]|.FALSE.}}\n\nDescription: {{TAG|LSPIN_VDW}}=.TRUE. switches on the use of the spin-polarized formulation{{cite|thonhauser:prl:2015}} for the nonlocal part of a van der Waals functional (available as of VASP.6.4.0).\n----\n\n{{NB|mind|{{TAG|LSPIN_VDW}}{{=}}.TRUE. is possible only for van der Waals functionals that consist of a {{TAG|GGA}} for the semilocal part and the kernel type of Dion ''et al.''{{cite|dion:prl:2004}} ({{TAG|IVDW_NL}}{{=}}1) for the nonlocal part.}}\n\n== Related tags and articles ==\n{{TAG|LUSE_VDW}}, {{TAG|IVDW_NL}}, {{TAG|Nonlocal vdW-DF functionals}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category: van der Waals functionals]]", "last_revised": "2023-02-16T09:26:23Z"}, "CMBJE": {"datatype": "real", "options": {}, "summary": "sets the <math>e</math> parameter in the MBJ and local MBJ potentials.", "wikicode": "{{TAGDEF|CMBJE|[real]|0.5}}\n\nDescription: sets the <math>e</math> parameter in the MBJ and local MBJ potentials.\n----\nSee the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|SMBJ}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|CMBJE|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-04-10T15:55:12Z"}, "SMBJ": {"datatype": "real", "options": {}, "summary": "sets the <math>\\sigma</math> parameter (in <math>\\AA</math>) in the LMBJ potential.", "wikicode": "{{TAGDEF|SMBJ|[real]|2}}\n\nDescription: sets the <math>\\sigma</math> parameter (in <math>\\AA</math>) in the LMBJ potential.\n----\nSee the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|CMBJE}},\n{{TAG|RSMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|RSMBJ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-02-15T10:39:10Z"}, "RSMBJ": {"datatype": "real", "options": {}, "summary": "sets the <math>r_{s}^{\\mathrm{th}}</math> parameter (in bohr) in the LMBJ potential.", "wikicode": "{{TAGDEF|RSMBJ|[real]|7}}\n\nDescription: sets the <math>r_{s}^{\\mathrm{th}}</math> parameter (in bohr) in the LMBJ potential.\n----\nSee the description of the {{TAG|METAGGA}} tag.\n\n== Related tags and articles ==\n{{TAG|METAGGA}},\n{{TAG|CMBJ}},\n{{TAG|CMBJA}},\n{{TAG|CMBJB}},\n{{TAG|CMBJE}},\n{{TAG|SMBJ}},\n{{TAG|LASPH}},\n{{TAG|LMAXTAU}},\n{{TAG|LMIXTAU}}\n\n{{sc|RSMBJ|Examples|Examples that use this tag}}\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:meta-GGA]]", "last_revised": "2023-02-15T10:36:52Z"}, "AMGGAX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMGGAX\">AMGGAX</a> is a parameter that multiplies the meta-GGA exchange functional (available as of VASP.6.4.0).</span>", "wikicode": "{{TAGDEF|AMGGAX|[real]}}\n{{DEF|AMGGAX|1.0-{{TAG|AEXX}} | if {{TAG|LHFCALC}}{{=}}.TRUE. | 1.0 | if {{TAG|LHFCALC}}{{=}}.FALSE.}}\n\nDescription: {{TAG|AMGGAX}} is a parameter that multiplies the meta-GGA exchange functional (available as of VASP.6.4.0).\n----\n{{TAG|AMGGAX}} can be used as the fraction of meta-GGA exchange in a Hartree-Fock/DFT hybrid functional (possible since VASP.6.4.0).\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|AMGGAX|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-15T21:37:46Z"}, "AMGGAC": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/AMGGAC\">AMGGAC</a> is a parameter that multiplies the meta-GGA correlation functional (available as of VASP.6.4.0).</span>", "wikicode": "{{TAGDEF|AMGGAC|[real]}}\n{{DEF|AMGGAC|1.0 | if {{TAG|LHFCALC}}<math>=</math>.FALSE. or {{TAG|AEXX}}<math>\\neq</math>1.0 | 0.0 | if {{TAG|LHFCALC}}<math>=</math>.TRUE. and {{TAG|AEXX}}<math>=</math>1.0}}\n\nDescription: {{TAG|AMGGAC}} is a parameter that multiplies the meta-GGA correlation functional (available as of VASP.6.4.0).\n----\n{{TAG|AMGGAC}} can be used as the fraction of  meta-GGA correlation in a Hartree-Fock/DFT hybrid functional. \n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|AMGGAC|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-15T21:34:17Z"}, "ALDAX": {"datatype": "real", "options": {}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/ALDAX\">ALDAX</a> is a parameter that multiplies the LDA exchange functional or the LDA part of the GGA exchange functional.</span>", "wikicode": "{{TAGDEF|ALDAX|[real]}}\n{{DEF|ALDAX|1.0-{{TAG|AEXX}} | if {{TAG|LHFCALC}}{{=}}.TRUE. | 1.0 | if {{TAG|LHFCALC}}{{=}}.FALSE.}}\n\nDescription: {{TAG|ALDAX}} is a parameter that multiplies the LDA exchange functional or the LDA part of the GGA exchange functional.\n----\n{{TAG|ALDAX}} can be used as the fraction of LDA exchange in a Hartree-Fock/DFT hybrid functional.\n\n{{NB|mind| For versions of VASP prior to 6.4.0, {{TAG|ALDAX}} was constrained to be equal to 1.0-{{TAG|AEXX}}. This constraint is lifted since VASP.6.4.0.}}\n\n== Related tags and articles ==\n{{TAG|AEXX}},\n{{TAG|ALDAC}},\n{{TAG|AGGAX}},\n{{TAG|AGGAC}},\n{{TAG|AMGGAX}},\n{{TAG|AMGGAC}},\n{{TAG|LHFCALC}},\n[[list_of_hybrid_functionals|List of hybrid functionals]]\n\n{{sc|ALDAX|Examples|Examples that use this tag}}\n\n----\n\n[[Category:INCAR tag]][[Category:Exchange-correlation functionals]][[Category:Hybrid_functionals]]", "last_revised": "2023-02-16T10:04:55Z"}, "LVGVCALC": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVGVCALC\">LVGVCALC</a> switches on calculation of the <i>vGv</i> expression for the orbital magnetic susceptibility.</span>", "wikicode": "{{TAGDEF|LVGVCALC|.TRUE. {{!}} .FALSE. | .TRUE.}}\n\nDescription: {{TAG|LVGVCALC}} switches on calculation of the ''vGv'' expression for the orbital magnetic susceptibility.\n\n{{TAG|LVGVCALC}} is available as of VASP.6.4.0.\n----\nWhen performing a chemical shift calculation the standard ''pGv'' susceptibility<ref name=\"yates:prb:07\"/> is calculated and used in the calculation of the CSA tensor. When {{TAG|LVGVCALC}} is true, the magnetic susceptibility is also calculated with the ''vGv'' approximation. {{TAG|LVGVAPPL}} determines whether the ''vGv'' or ''pGv'' result is applied in the calculation of the <math>\\mathbf{G=0}</math> contribution to the CSA tensor.\n\nThe ''vGv'' expression for the orbital susceptibility was introduced by d'Avezac ''et al.''<ref name=\"avezac:prb:01\"/>\nIn VASP its ultra-soft generalization is used.<ref name=\"dewijs:jcp:18\"/>\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}}\n\n== References ==\n<references>\n<ref name=\"yates:prb:07\">[http://link.aps.org/doi/10.1103/PhysRevB.76.024401 J. R. Yates, C. J. Pickard, F. Mauri, Phys. Rev. B 76, 024401 (2007).]</ref>\n<ref name=\"avezac:prb:01\">[http://link.aps.org/doi/10.1103/PhysRevB.76.165122 M. d'Avezac, N. Marzari, F. Mauri, Phys. Rev. B 76, 165122 (2007).]</ref>\n<ref name=\"dewijs:jcp:18\">[http://aip.scitation.org/doi/10.1063/5.0069637 G.A. de Wijs, G. Kresse, R. W. A. Havenith, M. Marsman, J. Chem. Phys. 155, 234101 (2021).]</ref>\n</references>\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2023-02-16T14:50:48Z"}, "LVGVAPPL": {"datatype": "boolean", "options": {".TRUE.": null, ".FALSE.": null}, "summary": "<span><a class=\"tag-link\" href=\"https://www.vasp.at/wiki/index.php/LVGVAPPL\">LVGVAPPL</a> determines whether the <i>vGv</i> orbital magnetic susceptibility is applied in the calculation of the CSA tensor.</span>", "wikicode": "{{TAGDEF|LVGVAPPL|.TRUE. {{!}} .FALSE. | .FALSE.}}\n\nDescription: {{TAG|LVGVAPPL}} determines whether the ''vGv'' orbital magnetic susceptibility is applied in the calculation of the CSA tensor.\n\n{{TAG|LVGVAPPL}} is available as of VASP.6.4.0.\n----\nWhen performing a chemical shift calculation the standard ''pGv'' susceptibility is used to calculate the <math>\\mathbf{G=0}</math> contribution to the CSA tensor by default.\nThis can be overruled with {{TAG|LVGVAPPL}}.\nIn case {{TAG|LVGVAPPL}} is true, the ''vGv'' susceptibility is applied for the calculation of the <math>\\mathbf{G=0}</math> contribution to the CSA tensor. For details see {{TAG|LVGVCALC}}.\n\n== Related tags and articles ==\n{{TAG|LCHIMAG}}\n----\n\n[[Category:INCAR tag]][[Category:NMR]][[Category:Chemical shifts]]", "last_revised": "2023-02-16T13:47:24Z"}, "NHC_NCHAINS": {"datatype": "integer", "options": {}, "summary": "Length of the Nos\u00e9-Hoover chain.", "wikicode": "{{DISPLAYTITLE:NHC_NCHAINS}}\n{{TAGDEF|NHC_NCHAINS|[integer]|0}}\n\nDescription: Length of the Nos\u00e9-Hoover chain. \n\n----\n{{TAG|NHC_NCHAINS}} sets the length of the chain for the  [[Nose-Hoover-chain thermostat|Nos\u00e9-Hoover\u2013chain (NHC) thermostat]]. Typically, this tag is set to a value between 1 and 5. The maximal allowed value is 20. \n\nIn case {{TAG|NHC_NCHAINS}}=0, the thermostat is switched off and the underlying dynamics generate a [[NVE ensemble|microcanonical (NVE) ensemble]]. {{TAG|NHC_NCHAINS}}=1 corresponds to the [[Nose-Hoover thermostat|standard Nos\u00e9-Hoover thermostat]].\n\n== Related tags and articles ==\n{{TAG|NHC_PERIOD}}, [[NHC thermostat]]\n\n----\n\n[[Category:INCAR tag]][[Category:Thermostats]]", "last_revised": "2023-04-24T10:04:17Z"}, "NHC_NRESPA": {"datatype": "integer", "options": {}, "summary": "The number of subdivisions of the integration step used in propagation of thermostat variables in <a href=\"https://www.vasp.at/wiki/index.php/Nose-Hoover-chain_thermostat\">Nos\u00e9-Hoover\u2013chain (NHC) thermostat</a>.", "wikicode": "{{DISPLAYTITLE:NHC_NRESPA}}\n{{TAGDEF|NHC_NRESPA|[integer]|1}}\n\nDescription: The number of subdivisions of the integration step used in propagation of thermostat variables in [[Nose-Hoover-chain thermostat|Nos\u00e9-Hoover\u2013chain (NHC) thermostat]]. \n\n----\n{{TAG|NHC_NRESPA}} sets the number of subdivisions of the integration step used in propagation of thermostat variables in  [[Nose-Hoover-chain thermostat|Nos\u00e9-Hoover\u2013chain (NHC) thermostat]]. This might be needed in accurate calculations where, due to rapidly varying terms appearing in thermostat variables propagators could cause significant drifts of total energy (including energy contributions due to thermostat), which is a conserved quantity. \n\n\n== Related tags and articles ==\n{{TAG|NHC_PERIOD}}, {{TAG|NHC_NS}}, [[NHC thermostat]]\n\n----\n\n[[Category:INCAR tag]][[Category:Thermostats]]", "last_revised": "2023-05-17T13:32:09Z"}, "NHC_NS": {"datatype": "integer", "options": {}, "summary": "The number of subdivisions of each RESPA step used in the integration step used in propagation of thermostat variables in <a href=\"https://www.vasp.at/wiki/index.php/Nose-Hoover-chain_thermostat\">Nos\u00e9-Hoover\u2013chain (NHC) thermostat</a>.", "wikicode": "{{DISPLAYTITLE:NHC_NS}}\n{{TAGDEF|NHC_NS|[integer]|1 {{!}} 3 {{!}} 7}}\n\nDescription: The number of subdivisions of each RESPA step used in the integration step used in propagation of thermostat variables in [[Nose-Hoover-chain thermostat|Nos\u00e9-Hoover\u2013chain (NHC) thermostat]]. \n\n----\nThe RESPA steps used in in propagation of thermostat variables in  [[Nose-Hoover-chain thermostat|Nos\u00e9-Hoover\u2013chain (NHC) thermostat]] are treated by Suzuki-Yoshida scheme<ref>[https://pubs.aip.org/aip/jmp/article/26/4/601/227573/Decomposition-formulas-of-exponential-operators M. Suzuki, J. Math. Phys. 26, 601 (1985).]</ref><ref>[https://www.sciencedirect.com/science/article/abs/pii/0375960190900923 H. Yoshida, Phys. Lett. A 150, 262 (1990).]</ref>, whereby each step is subdivided further into {{TAG|NHC_NS}} parts. First, fourth, and sixth order schemes with, 1, 3, and 7 steps, respectively, are supported. \n \n\n\n== Related tags and articles ==\n{{TAG|NHC_PERIOD}}, {{TAG|NHC_NRESPA}}, [[NHC thermostat]]\n\n----\n\n[[Category:INCAR tag]][[Category:Thermostats]]", "last_revised": "2023-05-17T13:54:55Z"}}}